import{_ as hh,g as lh,c as _s,o as kr,r as $r,n as ch,m as dh,I as $a,h as uh,i as fh,J as gh,j as Yt,k as _h,l as Qr,f as xn,C as ps,z as Jr,A as ms,t as ph,Q as Zr,p as he,a8 as Qa,ae as ys,af as Ja,ag as mh,ah as yh,a9 as Bt,X as Ae,aa as vh}from"./B_WYqg51.js";const bh={base:"inline-flex items-center",rounded:"rounded-md",font:"font-medium",size:{xs:"text-xs px-1.5 py-0.5",sm:"text-xs px-2 py-1",md:"text-sm px-2 py-1",lg:"text-sm px-2.5 py-1.5"},gap:{xs:"gap-0.5",sm:"gap-1",md:"gap-1",lg:"gap-1.5"},color:{white:{solid:"ring-1 ring-inset ring-gray-300 dark:ring-gray-700 text-gray-900 dark:text-white bg-white dark:bg-gray-900"},gray:{solid:"ring-1 ring-inset ring-gray-300 dark:ring-gray-700 text-gray-700 dark:text-gray-200 bg-gray-50 dark:bg-gray-800"},black:{solid:"text-white dark:text-gray-900 bg-gray-900 dark:bg-white"}},variant:{solid:"bg-{color}-500 dark:bg-{color}-400 text-white dark:text-gray-900",outline:"text-{color}-500 dark:text-{color}-400 ring-1 ring-inset ring-{color}-500 dark:ring-{color}-400",soft:"bg-{color}-50 dark:bg-{color}-400 dark:bg-opacity-10 text-{color}-500 dark:text-{color}-400",subtle:"bg-{color}-50 dark:bg-{color}-400 dark:bg-opacity-10 text-{color}-500 dark:text-{color}-400 ring-1 ring-inset ring-{color}-500 dark:ring-{color}-400 ring-opacity-25 dark:ring-opacity-25"},icon:{base:"flex-shrink-0",size:{xs:"h-4 w-4",sm:"h-4 w-4",md:"h-5 w-5",lg:"h-5 w-5"}},default:{size:"sm",variant:"solid",color:"primary"}},Fe=dh(xn.ui.strategy,xn.ui.badge,bh),Sh=lh({components:{UIcon:$a},inheritAttrs:!1,props:{size:{type:String,default:()=>Fe.default.size,validator(o){return Object.keys(Fe.size).includes(o)}},color:{type:String,default:()=>Fe.default.color,validator(o){return[...xn.ui.colors,...Object.keys(Fe.color)].includes(o)}},variant:{type:String,default:()=>Fe.default.variant,validator(o){return[...Object.keys(Fe.variant),...Object.values(Fe.color).flatMap(t=>Object.keys(t))].includes(o)}},label:{type:[String,Number],default:null},icon:{type:String,default:null},leadingIcon:{type:String,default:null},trailingIcon:{type:String,default:null},trailing:{type:Boolean,default:!1},leading:{type:Boolean,default:!1},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},setup(o){const{ui:t,attrs:i}=uh("badge",fh(o,"ui"),Fe),{size:e,rounded:r}=gh({ui:t,props:o}),n=Yt(()=>o.icon&&o.leading||o.icon&&!o.trailing||!o.trailing||o.leadingIcon),s=Yt(()=>o.icon&&o.trailing||o.trailing||o.trailingIcon),a=Yt(()=>{var d,f;const m=((f=(d=t.value.color)==null?void 0:d[o.color])==null?void 0:f[o.variant])||t.value.variant[o.variant];return _h(Qr(t.value.base,t.value.font,r.value,t.value.size[e.value],t.value.gap[e.value],m==null?void 0:m.replaceAll("{color}",o.color)),o.class)}),h=Yt(()=>o.leadingIcon||o.icon),l=Yt(()=>o.trailingIcon||o.icon),c=Yt(()=>Qr(t.value.icon.base,t.value.icon.size[e.value])),p=Yt(()=>Qr(t.value.icon.base,t.value.icon.size[e.value]));return{attrs:i,isLeading:n,isTrailing:s,badgeClass:a,leadingIconName:h,trailingIconName:l,leadingIconClass:c,trailingIconClass:p}}}),wh={key:0};function xh(o,t,i,e,r,n){const s=$a;return kr(),_s("span",ch({class:o.badgeClass},o.attrs),[$r(o.$slots,"leading",{},()=>[o.isLeading&&o.leadingIconName?(kr(),ps(s,{key:0,name:o.leadingIconName,class:ms(o.leadingIconClass),"aria-hidden":"true"},null,8,["name","class"])):Jr("",!0)]),$r(o.$slots,"default",{},()=>[o.label?(kr(),_s("span",wh,ph(o.label),1)):Jr("",!0)]),$r(o.$slots,"trailing",{},()=>[o.isTrailing&&o.trailingIconName?(kr(),ps(s,{key:0,name:o.trailingIconName,class:ms(o.trailingIconClass),"aria-hidden":"true"},null,8,["name","class"])):Jr("",!0)])],16)}const jc=hh(Sh,[["render",xh]]),$c=(o,t,i=!0)=>{const e=Zr("form-events",void 0),r=Zr("form-group",void 0),n=Zr("form-inputs",void 0);r&&(!i||o!=null&&o.legend?r.inputId.value=void 0:o!=null&&o.id&&(r.inputId.value=o==null?void 0:o.id),n&&(n.value[r.name.value]=r.inputId.value));const s=he(!1);function a(p,m){e&&e.emit({type:p,path:m})}function h(){a("blur",r==null?void 0:r.name.value),s.value=!0}function l(){a("change",r==null?void 0:r.name.value)}const c=Qa(()=>{(s.value||r!=null&&r.eagerValidation.value)&&a("input",r==null?void 0:r.name.value)},300);return{inputId:Yt(()=>(o==null?void 0:o.id)??(r==null?void 0:r.inputId.value)),name:Yt(()=>(o==null?void 0:o.name)??(r==null?void 0:r.name.value)),size:Yt(()=>{var m;const p=t.size[r==null?void 0:r.size.value]?r==null?void 0:r.size.value:null;return(o==null?void 0:o.size)??p??((m=t.default)==null?void 0:m.size)}),color:Yt(()=>{var p;return(p=r==null?void 0:r.error)!=null&&p.value?"red":o==null?void 0:o.color}),emitFormBlur:h,emitFormInput:c,emitFormChange:l}};function Pe(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function Za(o,t){o.prototype=Object.create(t.prototype),o.prototype.constructor=o,o.__proto__=t}/*!
 * GSAP 3.12.5
 * https://gsap.com
 *
 * @license Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var ne={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},vi={duration:.5,overwrite:!1,delay:0},Hn,Ht,yt,me=1e8,zt=1/me,Cn=Math.PI*2,Ch=Cn/4,Th=0,to=Math.sqrt,Ph=Math.cos,kh=Math.sin,It=function(t){return typeof t=="string"},xt=function(t){return typeof t=="function"},Re=function(t){return typeof t=="number"},qn=function(t){return typeof t>"u"},ve=function(t){return typeof t=="object"},$t=function(t){return t!==!1},Yn=function(){return typeof window<"u"},Ar=function(t){return xt(t)||It(t)},eo=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},qt=Array.isArray,Tn=/(?:-?\.?\d|\.)+/gi,io=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,fi=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,tn=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,ro=/[+-]=-?[.\d]+/,no=/[^,'"\[\]\s]+/gi,Ah=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,bt,ge,Pn,Xn,se={},Ir={},so,ao=function(t){return(Ir=ri(t,se))&&te},Wn=function(t,i){return console.warn("Invalid property",t,"set to",i,"Missing plugin? gsap.registerPlugin()")},vr=function(t,i){return!i&&console.warn(t)},oo=function(t,i){return t&&(se[t]=i)&&Ir&&(Ir[t]=i)||se},br=function(){return 0},Rh={suppressEvents:!0,isStart:!0,kill:!1},Er={suppressEvents:!0,kill:!1},Eh={suppressEvents:!0},Kn={},Be=[],kn={},ho,ee={},en={},vs=30,Mr=[],jn="",$n=function(t){var i=t[0],e,r;if(ve(i)||xt(i)||(t=[t]),!(e=(i._gsap||{}).harness)){for(r=Mr.length;r--&&!Mr[r].targetTest(i););e=Mr[r]}for(r=t.length;r--;)t[r]&&(t[r]._gsap||(t[r]._gsap=new Fo(t[r],e)))||t.splice(r,1);return t},Ze=function(t){return t._gsap||$n(le(t))[0]._gsap},lo=function(t,i,e){return(e=t[i])&&xt(e)?t[i]():qn(e)&&t.getAttribute&&t.getAttribute(i)||e},Qt=function(t,i){return(t=t.split(",")).forEach(i)||t},Pt=function(t){return Math.round(t*1e5)/1e5||0},Dt=function(t){return Math.round(t*1e7)/1e7||0},pi=function(t,i){var e=i.charAt(0),r=parseFloat(i.substr(2));return t=parseFloat(t),e==="+"?t+r:e==="-"?t-r:e==="*"?t*r:t/r},Mh=function(t,i){for(var e=i.length,r=0;t.indexOf(i[r])<0&&++r<e;);return r<e},Nr=function(){var t=Be.length,i=Be.slice(0),e,r;for(kn={},Be.length=0,e=0;e<t;e++)r=i[e],r&&r._lazy&&(r.render(r._lazy[0],r._lazy[1],!0)._lazy=0)},co=function(t,i,e,r){Be.length&&!Ht&&Nr(),t.render(i,e,Ht&&i<0&&(t._initted||t._startAt)),Be.length&&!Ht&&Nr()},uo=function(t){var i=parseFloat(t);return(i||i===0)&&(t+"").match(no).length<2?i:It(t)?t.trim():t},fo=function(t){return t},ce=function(t,i){for(var e in i)e in t||(t[e]=i[e]);return t},Oh=function(t){return function(i,e){for(var r in e)r in i||r==="duration"&&t||r==="ease"||(i[r]=e[r])}},ri=function(t,i){for(var e in i)t[e]=i[e];return t},bs=function o(t,i){for(var e in i)e!=="__proto__"&&e!=="constructor"&&e!=="prototype"&&(t[e]=ve(i[e])?o(t[e]||(t[e]={}),i[e]):i[e]);return t},Lr=function(t,i){var e={},r;for(r in t)r in i||(e[r]=t[r]);return e},pr=function(t){var i=t.parent||bt,e=t.keyframes?Oh(qt(t.keyframes)):ce;if($t(t.inherit))for(;i;)e(t,i.vars.defaults),i=i.parent||i._dp;return t},Fh=function(t,i){for(var e=t.length,r=e===i.length;r&&e--&&t[e]===i[e];);return e<0},go=function(t,i,e,r,n){var s=t[r],a;if(n)for(a=i[n];s&&s[n]>a;)s=s._prev;return s?(i._next=s._next,s._next=i):(i._next=t[e],t[e]=i),i._next?i._next._prev=i:t[r]=i,i._prev=s,i.parent=i._dp=t,i},Hr=function(t,i,e,r){e===void 0&&(e="_first"),r===void 0&&(r="_last");var n=i._prev,s=i._next;n?n._next=s:t[e]===i&&(t[e]=s),s?s._prev=n:t[r]===i&&(t[r]=n),i._next=i._prev=i.parent=null},ze=function(t,i){t.parent&&(!i||t.parent.autoRemoveChildren)&&t.parent.remove&&t.parent.remove(t),t._act=0},ti=function(t,i){if(t&&(!i||i._end>t._dur||i._start<0))for(var e=t;e;)e._dirty=1,e=e.parent;return t},Dh=function(t){for(var i=t.parent;i&&i.parent;)i._dirty=1,i.totalDuration(),i=i.parent;return t},An=function(t,i,e,r){return t._startAt&&(Ht?t._startAt.revert(Er):t.vars.immediateRender&&!t.vars.autoRevert||t._startAt.render(i,!0,r))},Ih=function o(t){return!t||t._ts&&o(t.parent)},Ss=function(t){return t._repeat?bi(t._tTime,t=t.duration()+t._rDelay)*t:0},bi=function(t,i){var e=Math.floor(t/=i);return t&&e===t?e-1:e},Gr=function(t,i){return(t-i._start)*i._ts+(i._ts>=0?0:i._dirty?i.totalDuration():i._tDur)},qr=function(t){return t._end=Dt(t._start+(t._tDur/Math.abs(t._ts||t._rts||zt)||0))},Yr=function(t,i){var e=t._dp;return e&&e.smoothChildTiming&&t._ts&&(t._start=Dt(e._time-(t._ts>0?i/t._ts:((t._dirty?t.totalDuration():t._tDur)-i)/-t._ts)),qr(t),e._dirty||ti(e,t)),t},_o=function(t,i){var e;if((i._time||!i._dur&&i._initted||i._start<t._time&&(i._dur||!i.add))&&(e=Gr(t.rawTime(),i),(!i._dur||Pr(0,i.totalDuration(),e)-i._tTime>zt)&&i.render(e,!0)),ti(t,i)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(e=t;e._dp;)e.rawTime()>=0&&e.totalTime(e._tTime),e=e._dp;t._zTime=-1e-8}},_e=function(t,i,e,r){return i.parent&&ze(i),i._start=Dt((Re(e)?e:e||t!==bt?oe(t,e,i):t._time)+i._delay),i._end=Dt(i._start+(i.totalDuration()/Math.abs(i.timeScale())||0)),go(t,i,"_first","_last",t._sort?"_start":0),Rn(i)||(t._recent=i),r||_o(t,i),t._ts<0&&Yr(t,t._tTime),t},po=function(t,i){return(se.ScrollTrigger||Wn("scrollTrigger",i))&&se.ScrollTrigger.create(i,t)},mo=function(t,i,e,r,n){if(Jn(t,i,n),!t._initted)return 1;if(!e&&t._pt&&!Ht&&(t._dur&&t.vars.lazy!==!1||!t._dur&&t.vars.lazy)&&ho!==ie.frame)return Be.push(t),t._lazy=[n,r],1},Nh=function o(t){var i=t.parent;return i&&i._ts&&i._initted&&!i._lock&&(i.rawTime()<0||o(i))},Rn=function(t){var i=t.data;return i==="isFromStart"||i==="isStart"},Lh=function(t,i,e,r){var n=t.ratio,s=i<0||!i&&(!t._start&&Nh(t)&&!(!t._initted&&Rn(t))||(t._ts<0||t._dp._ts<0)&&!Rn(t))?0:1,a=t._rDelay,h=0,l,c,p;if(a&&t._repeat&&(h=Pr(0,t._tDur,i),c=bi(h,a),t._yoyo&&c&1&&(s=1-s),c!==bi(t._tTime,a)&&(n=1-s,t.vars.repeatRefresh&&t._initted&&t.invalidate())),s!==n||Ht||r||t._zTime===zt||!i&&t._zTime){if(!t._initted&&mo(t,i,r,e,h))return;for(p=t._zTime,t._zTime=i||(e?zt:0),e||(e=i&&!p),t.ratio=s,t._from&&(s=1-s),t._time=0,t._tTime=h,l=t._pt;l;)l.r(s,l.d),l=l._next;i<0&&An(t,i,e,!0),t._onUpdate&&!e&&re(t,"onUpdate"),h&&t._repeat&&!e&&t.parent&&re(t,"onRepeat"),(i>=t._tDur||i<0)&&t.ratio===s&&(s&&ze(t,1),!e&&!Ht&&(re(t,s?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=i)},Gh=function(t,i,e){var r;if(e>i)for(r=t._first;r&&r._start<=e;){if(r.data==="isPause"&&r._start>i)return r;r=r._next}else for(r=t._last;r&&r._start>=e;){if(r.data==="isPause"&&r._start<i)return r;r=r._prev}},Si=function(t,i,e,r){var n=t._repeat,s=Dt(i)||0,a=t._tTime/t._tDur;return a&&!r&&(t._time*=s/t._dur),t._dur=s,t._tDur=n?n<0?1e10:Dt(s*(n+1)+t._rDelay*n):s,a>0&&!r&&Yr(t,t._tTime=t._tDur*a),t.parent&&qr(t),e||ti(t.parent,t),t},ws=function(t){return t instanceof Xt?ti(t):Si(t,t._dur)},Uh={_start:0,endTime:br,totalDuration:br},oe=function o(t,i,e){var r=t.labels,n=t._recent||Uh,s=t.duration()>=me?n.endTime(!1):t._dur,a,h,l;return It(i)&&(isNaN(i)||i in r)?(h=i.charAt(0),l=i.substr(-1)==="%",a=i.indexOf("="),h==="<"||h===">"?(a>=0&&(i=i.replace(/=/,"")),(h==="<"?n._start:n.endTime(n._repeat>=0))+(parseFloat(i.substr(1))||0)*(l?(a<0?n:e).totalDuration()/100:1)):a<0?(i in r||(r[i]=s),r[i]):(h=parseFloat(i.charAt(a-1)+i.substr(a+1)),l&&e&&(h=h/100*(qt(e)?e[0]:e).totalDuration()),a>1?o(t,i.substr(0,a-1),e)+h:s+h)):i==null?s:+i},mr=function(t,i,e){var r=Re(i[1]),n=(r?2:1)+(t<2?0:1),s=i[n],a,h;if(r&&(s.duration=i[1]),s.parent=e,t){for(a=s,h=e;h&&!("immediateRender"in a);)a=h.vars.defaults||{},h=$t(h.vars.inherit)&&h.parent;s.immediateRender=$t(a.immediateRender),t<2?s.runBackwards=1:s.startAt=i[n-1]}return new At(i[0],s,i[n+1])},qe=function(t,i){return t||t===0?i(t):i},Pr=function(t,i,e){return e<t?t:e>i?i:e},Vt=function(t,i){return!It(t)||!(i=Ah.exec(t))?"":i[1]},Bh=function(t,i,e){return qe(e,function(r){return Pr(t,i,r)})},En=[].slice,yo=function(t,i){return t&&ve(t)&&"length"in t&&(!i&&!t.length||t.length-1 in t&&ve(t[0]))&&!t.nodeType&&t!==ge},Vh=function(t,i,e){return e===void 0&&(e=[]),t.forEach(function(r){var n;return It(r)&&!i||yo(r,1)?(n=e).push.apply(n,le(r)):e.push(r)})||e},le=function(t,i,e){return yt&&!i&&yt.selector?yt.selector(t):It(t)&&!e&&(Pn||!wi())?En.call((i||Xn).querySelectorAll(t),0):qt(t)?Vh(t,e):yo(t)?En.call(t,0):t?[t]:[]},Mn=function(t){return t=le(t)[0]||vr("Invalid scope")||{},function(i){var e=t.current||t.nativeElement||t;return le(i,e.querySelectorAll?e:e===t?vr("Invalid scope")||Xn.createElement("div"):t)}},vo=function(t){return t.sort(function(){return .5-Math.random()})},bo=function(t){if(xt(t))return t;var i=ve(t)?t:{each:t},e=ei(i.ease),r=i.from||0,n=parseFloat(i.base)||0,s={},a=r>0&&r<1,h=isNaN(r)||a,l=i.axis,c=r,p=r;return It(r)?c=p={center:.5,edges:.5,end:1}[r]||0:!a&&h&&(c=r[0],p=r[1]),function(m,d,f){var _=(f||i).length,v=s[_],C,u,g,b,S,x,M,k,T;if(!v){if(T=i.grid==="auto"?0:(i.grid||[1,me])[1],!T){for(M=-1e8;M<(M=f[T++].getBoundingClientRect().left)&&T<_;);T<_&&T--}for(v=s[_]=[],C=h?Math.min(T,_)*c-.5:r%T,u=T===me?0:h?_*p/T-.5:r/T|0,M=0,k=me,x=0;x<_;x++)g=x%T-C,b=u-(x/T|0),v[x]=S=l?Math.abs(l==="y"?b:g):to(g*g+b*b),S>M&&(M=S),S<k&&(k=S);r==="random"&&vo(v),v.max=M-k,v.min=k,v.v=_=(parseFloat(i.amount)||parseFloat(i.each)*(T>_?_-1:l?l==="y"?_/T:T:Math.max(T,_/T))||0)*(r==="edges"?-1:1),v.b=_<0?n-_:n,v.u=Vt(i.amount||i.each)||0,e=e&&_<0?Eo(e):e}return _=(v[m]-v.min)/v.max||0,Dt(v.b+(e?e(_):_)*v.v)+v.u}},On=function(t){var i=Math.pow(10,((t+"").split(".")[1]||"").length);return function(e){var r=Dt(Math.round(parseFloat(e)/t)*t*i);return(r-r%1)/i+(Re(e)?0:Vt(e))}},So=function(t,i){var e=qt(t),r,n;return!e&&ve(t)&&(r=e=t.radius||me,t.values?(t=le(t.values),(n=!Re(t[0]))&&(r*=r)):t=On(t.increment)),qe(i,e?xt(t)?function(s){return n=t(s),Math.abs(n-s)<=r?n:s}:function(s){for(var a=parseFloat(n?s.x:s),h=parseFloat(n?s.y:0),l=me,c=0,p=t.length,m,d;p--;)n?(m=t[p].x-a,d=t[p].y-h,m=m*m+d*d):m=Math.abs(t[p]-a),m<l&&(l=m,c=p);return c=!r||l<=r?t[c]:s,n||c===s||Re(s)?c:c+Vt(s)}:On(t))},wo=function(t,i,e,r){return qe(qt(t)?!i:e===!0?!!(e=0):!r,function(){return qt(t)?t[~~(Math.random()*t.length)]:(e=e||1e-5)&&(r=e<1?Math.pow(10,(e+"").length-2):1)&&Math.floor(Math.round((t-e/2+Math.random()*(i-t+e*.99))/e)*e*r)/r})},zh=function(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];return function(r){return i.reduce(function(n,s){return s(n)},r)}},Hh=function(t,i){return function(e){return t(parseFloat(e))+(i||Vt(e))}},qh=function(t,i,e){return Co(t,i,0,1,e)},xo=function(t,i,e){return qe(e,function(r){return t[~~i(r)]})},Yh=function o(t,i,e){var r=i-t;return qt(t)?xo(t,o(0,t.length),i):qe(e,function(n){return(r+(n-t)%r)%r+t})},Xh=function o(t,i,e){var r=i-t,n=r*2;return qt(t)?xo(t,o(0,t.length-1),i):qe(e,function(s){return s=(n+(s-t)%n)%n||0,t+(s>r?n-s:s)})},Sr=function(t){for(var i=0,e="",r,n,s,a;~(r=t.indexOf("random(",i));)s=t.indexOf(")",r),a=t.charAt(r+7)==="[",n=t.substr(r+7,s-r-7).match(a?no:Tn),e+=t.substr(i,r-i)+wo(a?n:+n[0],a?0:+n[1],+n[2]||1e-5),i=s+1;return e+t.substr(i,t.length-i)},Co=function(t,i,e,r,n){var s=i-t,a=r-e;return qe(n,function(h){return e+((h-t)/s*a||0)})},Wh=function o(t,i,e,r){var n=isNaN(t+i)?0:function(d){return(1-d)*t+d*i};if(!n){var s=It(t),a={},h,l,c,p,m;if(e===!0&&(r=1)&&(e=null),s)t={p:t},i={p:i};else if(qt(t)&&!qt(i)){for(c=[],p=t.length,m=p-2,l=1;l<p;l++)c.push(o(t[l-1],t[l]));p--,n=function(f){f*=p;var _=Math.min(m,~~f);return c[_](f-_)},e=i}else r||(t=ri(qt(t)?[]:{},t));if(!c){for(h in i)Qn.call(a,t,h,"get",i[h]);n=function(f){return es(f,a)||(s?t.p:t)}}}return qe(e,n)},xs=function(t,i,e){var r=t.labels,n=me,s,a,h;for(s in r)a=r[s]-i,a<0==!!e&&a&&n>(a=Math.abs(a))&&(h=s,n=a);return h},re=function(t,i,e){var r=t.vars,n=r[i],s=yt,a=t._ctx,h,l,c;if(n)return h=r[i+"Params"],l=r.callbackScope||t,e&&Be.length&&Nr(),a&&(yt=a),c=h?n.apply(l,h):n.call(l),yt=s,c},gr=function(t){return ze(t),t.scrollTrigger&&t.scrollTrigger.kill(!!Ht),t.progress()<1&&re(t,"onInterrupt"),t},gi,To=[],Po=function(t){if(t)if(t=!t.name&&t.default||t,Yn()||t.headless){var i=t.name,e=xt(t),r=i&&!e&&t.init?function(){this._props=[]}:t,n={init:br,render:es,add:Qn,kill:ll,modifier:hl,rawVars:0},s={targetTest:0,get:0,getSetter:ts,aliases:{},register:0};if(wi(),t!==r){if(ee[i])return;ce(r,ce(Lr(t,n),s)),ri(r.prototype,ri(n,Lr(t,s))),ee[r.prop=i]=r,t.targetTest&&(Mr.push(r),Kn[i]=1),i=(i==="css"?"CSS":i.charAt(0).toUpperCase()+i.substr(1))+"Plugin"}oo(i,r),t.register&&t.register(te,r,Jt)}else To.push(t)},ft=255,_r={aqua:[0,ft,ft],lime:[0,ft,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,ft],navy:[0,0,128],white:[ft,ft,ft],olive:[128,128,0],yellow:[ft,ft,0],orange:[ft,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[ft,0,0],pink:[ft,192,203],cyan:[0,ft,ft],transparent:[ft,ft,ft,0]},rn=function(t,i,e){return t+=t<0?1:t>1?-1:0,(t*6<1?i+(e-i)*t*6:t<.5?e:t*3<2?i+(e-i)*(2/3-t)*6:i)*ft+.5|0},ko=function(t,i,e){var r=t?Re(t)?[t>>16,t>>8&ft,t&ft]:0:_r.black,n,s,a,h,l,c,p,m,d,f;if(!r){if(t.substr(-1)===","&&(t=t.substr(0,t.length-1)),_r[t])r=_r[t];else if(t.charAt(0)==="#"){if(t.length<6&&(n=t.charAt(1),s=t.charAt(2),a=t.charAt(3),t="#"+n+n+s+s+a+a+(t.length===5?t.charAt(4)+t.charAt(4):"")),t.length===9)return r=parseInt(t.substr(1,6),16),[r>>16,r>>8&ft,r&ft,parseInt(t.substr(7),16)/255];t=parseInt(t.substr(1),16),r=[t>>16,t>>8&ft,t&ft]}else if(t.substr(0,3)==="hsl"){if(r=f=t.match(Tn),!i)h=+r[0]%360/360,l=+r[1]/100,c=+r[2]/100,s=c<=.5?c*(l+1):c+l-c*l,n=c*2-s,r.length>3&&(r[3]*=1),r[0]=rn(h+1/3,n,s),r[1]=rn(h,n,s),r[2]=rn(h-1/3,n,s);else if(~t.indexOf("="))return r=t.match(io),e&&r.length<4&&(r[3]=1),r}else r=t.match(Tn)||_r.transparent;r=r.map(Number)}return i&&!f&&(n=r[0]/ft,s=r[1]/ft,a=r[2]/ft,p=Math.max(n,s,a),m=Math.min(n,s,a),c=(p+m)/2,p===m?h=l=0:(d=p-m,l=c>.5?d/(2-p-m):d/(p+m),h=p===n?(s-a)/d+(s<a?6:0):p===s?(a-n)/d+2:(n-s)/d+4,h*=60),r[0]=~~(h+.5),r[1]=~~(l*100+.5),r[2]=~~(c*100+.5)),e&&r.length<4&&(r[3]=1),r},Ao=function(t){var i=[],e=[],r=-1;return t.split(Ve).forEach(function(n){var s=n.match(fi)||[];i.push.apply(i,s),e.push(r+=s.length+1)}),i.c=e,i},Cs=function(t,i,e){var r="",n=(t+r).match(Ve),s=i?"hsla(":"rgba(",a=0,h,l,c,p;if(!n)return t;if(n=n.map(function(m){return(m=ko(m,i,1))&&s+(i?m[0]+","+m[1]+"%,"+m[2]+"%,"+m[3]:m.join(","))+")"}),e&&(c=Ao(t),h=e.c,h.join(r)!==c.c.join(r)))for(l=t.replace(Ve,"1").split(fi),p=l.length-1;a<p;a++)r+=l[a]+(~h.indexOf(a)?n.shift()||s+"0,0,0,0)":(c.length?c:n.length?n:e).shift());if(!l)for(l=t.split(Ve),p=l.length-1;a<p;a++)r+=l[a]+n[a];return r+l[p]},Ve=function(){var o="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",t;for(t in _r)o+="|"+t+"\\b";return new RegExp(o+")","gi")}(),Kh=/hsl[a]?\(/,Ro=function(t){var i=t.join(" "),e;if(Ve.lastIndex=0,Ve.test(i))return e=Kh.test(i),t[1]=Cs(t[1],e),t[0]=Cs(t[0],e,Ao(t[1])),!0},wr,ie=function(){var o=Date.now,t=500,i=33,e=o(),r=e,n=1e3/240,s=n,a=[],h,l,c,p,m,d,f=function _(v){var C=o()-r,u=v===!0,g,b,S,x;if((C>t||C<0)&&(e+=C-i),r+=C,S=r-e,g=S-s,(g>0||u)&&(x=++p.frame,m=S-p.time*1e3,p.time=S=S/1e3,s+=g+(g>=n?4:n-g),b=1),u||(h=l(_)),b)for(d=0;d<a.length;d++)a[d](S,m,x,v)};return p={time:0,frame:0,tick:function(){f(!0)},deltaRatio:function(v){return m/(1e3/(v||60))},wake:function(){so&&(!Pn&&Yn()&&(ge=Pn=window,Xn=ge.document||{},se.gsap=te,(ge.gsapVersions||(ge.gsapVersions=[])).push(te.version),ao(Ir||ge.GreenSockGlobals||!ge.gsap&&ge||{}),To.forEach(Po)),c=typeof requestAnimationFrame<"u"&&requestAnimationFrame,h&&p.sleep(),l=c||function(v){return setTimeout(v,s-p.time*1e3+1|0)},wr=1,f(2))},sleep:function(){(c?cancelAnimationFrame:clearTimeout)(h),wr=0,l=br},lagSmoothing:function(v,C){t=v||1/0,i=Math.min(C||33,t)},fps:function(v){n=1e3/(v||240),s=p.time*1e3+n},add:function(v,C,u){var g=C?function(b,S,x,M){v(b,S,x,M),p.remove(g)}:v;return p.remove(v),a[u?"unshift":"push"](g),wi(),g},remove:function(v,C){~(C=a.indexOf(v))&&a.splice(C,1)&&d>=C&&d--},_listeners:a},p}(),wi=function(){return!wr&&ie.wake()},dt={},jh=/^[\d.\-M][\d.\-,\s]/,$h=/["']/g,Qh=function(t){for(var i={},e=t.substr(1,t.length-3).split(":"),r=e[0],n=1,s=e.length,a,h,l;n<s;n++)h=e[n],a=n!==s-1?h.lastIndexOf(","):h.length,l=h.substr(0,a),i[r]=isNaN(l)?l.replace($h,"").trim():+l,r=h.substr(a+1).trim();return i},Jh=function(t){var i=t.indexOf("(")+1,e=t.indexOf(")"),r=t.indexOf("(",i);return t.substring(i,~r&&r<e?t.indexOf(")",e+1):e)},Zh=function(t){var i=(t+"").split("("),e=dt[i[0]];return e&&i.length>1&&e.config?e.config.apply(null,~t.indexOf("{")?[Qh(i[1])]:Jh(t).split(",").map(uo)):dt._CE&&jh.test(t)?dt._CE("",t):e},Eo=function(t){return function(i){return 1-t(1-i)}},Mo=function o(t,i){for(var e=t._first,r;e;)e instanceof Xt?o(e,i):e.vars.yoyoEase&&(!e._yoyo||!e._repeat)&&e._yoyo!==i&&(e.timeline?o(e.timeline,i):(r=e._ease,e._ease=e._yEase,e._yEase=r,e._yoyo=i)),e=e._next},ei=function(t,i){return t&&(xt(t)?t:dt[t]||Zh(t))||i},si=function(t,i,e,r){e===void 0&&(e=function(h){return 1-i(1-h)}),r===void 0&&(r=function(h){return h<.5?i(h*2)/2:1-i((1-h)*2)/2});var n={easeIn:i,easeOut:e,easeInOut:r},s;return Qt(t,function(a){dt[a]=se[a]=n,dt[s=a.toLowerCase()]=e;for(var h in n)dt[s+(h==="easeIn"?".in":h==="easeOut"?".out":".inOut")]=dt[a+"."+h]=n[h]}),n},Oo=function(t){return function(i){return i<.5?(1-t(1-i*2))/2:.5+t((i-.5)*2)/2}},nn=function o(t,i,e){var r=i>=1?i:1,n=(e||(t?.3:.45))/(i<1?i:1),s=n/Cn*(Math.asin(1/r)||0),a=function(c){return c===1?1:r*Math.pow(2,-10*c)*kh((c-s)*n)+1},h=t==="out"?a:t==="in"?function(l){return 1-a(1-l)}:Oo(a);return n=Cn/n,h.config=function(l,c){return o(t,l,c)},h},sn=function o(t,i){i===void 0&&(i=1.70158);var e=function(s){return s?--s*s*((i+1)*s+i)+1:0},r=t==="out"?e:t==="in"?function(n){return 1-e(1-n)}:Oo(e);return r.config=function(n){return o(t,n)},r};Qt("Linear,Quad,Cubic,Quart,Quint,Strong",function(o,t){var i=t<5?t+1:t;si(o+",Power"+(i-1),t?function(e){return Math.pow(e,i)}:function(e){return e},function(e){return 1-Math.pow(1-e,i)},function(e){return e<.5?Math.pow(e*2,i)/2:1-Math.pow((1-e)*2,i)/2})});dt.Linear.easeNone=dt.none=dt.Linear.easeIn;si("Elastic",nn("in"),nn("out"),nn());(function(o,t){var i=1/t,e=2*i,r=2.5*i,n=function(a){return a<i?o*a*a:a<e?o*Math.pow(a-1.5/t,2)+.75:a<r?o*(a-=2.25/t)*a+.9375:o*Math.pow(a-2.625/t,2)+.984375};si("Bounce",function(s){return 1-n(1-s)},n)})(7.5625,2.75);si("Expo",function(o){return o?Math.pow(2,10*(o-1)):0});si("Circ",function(o){return-(to(1-o*o)-1)});si("Sine",function(o){return o===1?1:-Ph(o*Ch)+1});si("Back",sn("in"),sn("out"),sn());dt.SteppedEase=dt.steps=se.SteppedEase={config:function(t,i){t===void 0&&(t=1);var e=1/t,r=t+(i?0:1),n=i?1:0,s=1-zt;return function(a){return((r*Pr(0,s,a)|0)+n)*e}}};vi.ease=dt["quad.out"];Qt("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(o){return jn+=o+","+o+"Params,"});var Fo=function(t,i){this.id=Th++,t._gsap=this,this.target=t,this.harness=i,this.get=i?i.get:lo,this.set=i?i.getSetter:ts},xr=function(){function o(i){this.vars=i,this._delay=+i.delay||0,(this._repeat=i.repeat===1/0?-2:i.repeat||0)&&(this._rDelay=i.repeatDelay||0,this._yoyo=!!i.yoyo||!!i.yoyoEase),this._ts=1,Si(this,+i.duration,1,1),this.data=i.data,yt&&(this._ctx=yt,yt.data.push(this)),wr||ie.wake()}var t=o.prototype;return t.delay=function(e){return e||e===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+e-this._delay),this._delay=e,this):this._delay},t.duration=function(e){return arguments.length?this.totalDuration(this._repeat>0?e+(e+this._rDelay)*this._repeat:e):this.totalDuration()&&this._dur},t.totalDuration=function(e){return arguments.length?(this._dirty=0,Si(this,this._repeat<0?e:(e-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(e,r){if(wi(),!arguments.length)return this._tTime;var n=this._dp;if(n&&n.smoothChildTiming&&this._ts){for(Yr(this,e),!n._dp||n.parent||_o(n,this);n&&n.parent;)n.parent._time!==n._start+(n._ts>=0?n._tTime/n._ts:(n.totalDuration()-n._tTime)/-n._ts)&&n.totalTime(n._tTime,!0),n=n.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&e<this._tDur||this._ts<0&&e>0||!this._tDur&&!e)&&_e(this._dp,this,this._start-this._delay)}return(this._tTime!==e||!this._dur&&!r||this._initted&&Math.abs(this._zTime)===zt||!e&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=e),co(this,e,r)),this},t.time=function(e,r){return arguments.length?this.totalTime(Math.min(this.totalDuration(),e+Ss(this))%(this._dur+this._rDelay)||(e?this._dur:0),r):this._time},t.totalProgress=function(e,r){return arguments.length?this.totalTime(this.totalDuration()*e,r):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>0?1:0},t.progress=function(e,r){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-e:e)+Ss(this),r):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},t.iteration=function(e,r){var n=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(e-1)*n,r):this._repeat?bi(this._tTime,n)+1:1},t.timeScale=function(e,r){if(!arguments.length)return this._rts===-1e-8?0:this._rts;if(this._rts===e)return this;var n=this.parent&&this._ts?Gr(this.parent._time,this):this._tTime;return this._rts=+e||0,this._ts=this._ps||e===-1e-8?0:this._rts,this.totalTime(Pr(-Math.abs(this._delay),this._tDur,n),r!==!1),qr(this),Dh(this)},t.paused=function(e){return arguments.length?(this._ps!==e&&(this._ps=e,e?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(wi(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==zt&&(this._tTime-=zt)))),this):this._ps},t.startTime=function(e){if(arguments.length){this._start=e;var r=this.parent||this._dp;return r&&(r._sort||!this.parent)&&_e(r,this,e-this._delay),this}return this._start},t.endTime=function(e){return this._start+($t(e)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},t.rawTime=function(e){var r=this.parent||this._dp;return r?e&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Gr(r.rawTime(e),this):this._tTime:this._tTime},t.revert=function(e){e===void 0&&(e=Eh);var r=Ht;return Ht=e,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(e),this.totalTime(-.01,e.suppressEvents)),this.data!=="nested"&&e.kill!==!1&&this.kill(),Ht=r,this},t.globalTime=function(e){for(var r=this,n=arguments.length?e:r.rawTime();r;)n=r._start+n/(Math.abs(r._ts)||1),r=r._dp;return!this.parent&&this._sat?this._sat.globalTime(e):n},t.repeat=function(e){return arguments.length?(this._repeat=e===1/0?-2:e,ws(this)):this._repeat===-2?1/0:this._repeat},t.repeatDelay=function(e){if(arguments.length){var r=this._time;return this._rDelay=e,ws(this),r?this.time(r):this}return this._rDelay},t.yoyo=function(e){return arguments.length?(this._yoyo=e,this):this._yoyo},t.seek=function(e,r){return this.totalTime(oe(this,e),$t(r))},t.restart=function(e,r){return this.play().totalTime(e?-this._delay:0,$t(r))},t.play=function(e,r){return e!=null&&this.seek(e,r),this.reversed(!1).paused(!1)},t.reverse=function(e,r){return e!=null&&this.seek(e||this.totalDuration(),r),this.reversed(!0).paused(!1)},t.pause=function(e,r){return e!=null&&this.seek(e,r),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(e){return arguments.length?(!!e!==this.reversed()&&this.timeScale(-this._rts||(e?-1e-8:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-1e-8,this},t.isActive=function(){var e=this.parent||this._dp,r=this._start,n;return!!(!e||this._ts&&this._initted&&e.isActive()&&(n=e.rawTime(!0))>=r&&n<this.endTime(!0)-zt)},t.eventCallback=function(e,r,n){var s=this.vars;return arguments.length>1?(r?(s[e]=r,n&&(s[e+"Params"]=n),e==="onUpdate"&&(this._onUpdate=r)):delete s[e],this):s[e]},t.then=function(e){var r=this;return new Promise(function(n){var s=xt(e)?e:fo,a=function(){var l=r.then;r.then=null,xt(s)&&(s=s(r))&&(s.then||s===r)&&(r.then=l),n(s),r.then=l};r._initted&&r.totalProgress()===1&&r._ts>=0||!r._tTime&&r._ts<0?a():r._prom=a})},t.kill=function(){gr(this)},o}();ce(xr.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var Xt=function(o){Za(t,o);function t(e,r){var n;return e===void 0&&(e={}),n=o.call(this,e)||this,n.labels={},n.smoothChildTiming=!!e.smoothChildTiming,n.autoRemoveChildren=!!e.autoRemoveChildren,n._sort=$t(e.sortChildren),bt&&_e(e.parent||bt,Pe(n),r),e.reversed&&n.reverse(),e.paused&&n.paused(!0),e.scrollTrigger&&po(Pe(n),e.scrollTrigger),n}var i=t.prototype;return i.to=function(r,n,s){return mr(0,arguments,this),this},i.from=function(r,n,s){return mr(1,arguments,this),this},i.fromTo=function(r,n,s,a){return mr(2,arguments,this),this},i.set=function(r,n,s){return n.duration=0,n.parent=this,pr(n).repeatDelay||(n.repeat=0),n.immediateRender=!!n.immediateRender,new At(r,n,oe(this,s),1),this},i.call=function(r,n,s){return _e(this,At.delayedCall(0,r,n),s)},i.staggerTo=function(r,n,s,a,h,l,c){return s.duration=n,s.stagger=s.stagger||a,s.onComplete=l,s.onCompleteParams=c,s.parent=this,new At(r,s,oe(this,h)),this},i.staggerFrom=function(r,n,s,a,h,l,c){return s.runBackwards=1,pr(s).immediateRender=$t(s.immediateRender),this.staggerTo(r,n,s,a,h,l,c)},i.staggerFromTo=function(r,n,s,a,h,l,c,p){return a.startAt=s,pr(a).immediateRender=$t(a.immediateRender),this.staggerTo(r,n,a,h,l,c,p)},i.render=function(r,n,s){var a=this._time,h=this._dirty?this.totalDuration():this._tDur,l=this._dur,c=r<=0?0:Dt(r),p=this._zTime<0!=r<0&&(this._initted||!l),m,d,f,_,v,C,u,g,b,S,x,M;if(this!==bt&&c>h&&r>=0&&(c=h),c!==this._tTime||s||p){if(a!==this._time&&l&&(c+=this._time-a,r+=this._time-a),m=c,b=this._start,g=this._ts,C=!g,p&&(l||(a=this._zTime),(r||!n)&&(this._zTime=r)),this._repeat){if(x=this._yoyo,v=l+this._rDelay,this._repeat<-1&&r<0)return this.totalTime(v*100+r,n,s);if(m=Dt(c%v),c===h?(_=this._repeat,m=l):(_=~~(c/v),_&&_===c/v&&(m=l,_--),m>l&&(m=l)),S=bi(this._tTime,v),!a&&this._tTime&&S!==_&&this._tTime-S*v-this._dur<=0&&(S=_),x&&_&1&&(m=l-m,M=1),_!==S&&!this._lock){var k=x&&S&1,T=k===(x&&_&1);if(_<S&&(k=!k),a=k?0:c%l?l:c,this._lock=1,this.render(a||(M?0:Dt(_*v)),n,!l)._lock=0,this._tTime=c,!n&&this.parent&&re(this,"onRepeat"),this.vars.repeatRefresh&&!M&&(this.invalidate()._lock=1),a&&a!==this._time||C!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(l=this._dur,h=this._tDur,T&&(this._lock=2,a=k?l:-1e-4,this.render(a,!0),this.vars.repeatRefresh&&!M&&this.invalidate()),this._lock=0,!this._ts&&!C)return this;Mo(this,M)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(u=Gh(this,Dt(a),Dt(m)),u&&(c-=m-(m=u._start))),this._tTime=c,this._time=m,this._act=!g,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=r,a=0),!a&&m&&!n&&!_&&(re(this,"onStart"),this._tTime!==c))return this;if(m>=a&&r>=0)for(d=this._first;d;){if(f=d._next,(d._act||m>=d._start)&&d._ts&&u!==d){if(d.parent!==this)return this.render(r,n,s);if(d.render(d._ts>0?(m-d._start)*d._ts:(d._dirty?d.totalDuration():d._tDur)+(m-d._start)*d._ts,n,s),m!==this._time||!this._ts&&!C){u=0,f&&(c+=this._zTime=-1e-8);break}}d=f}else{d=this._last;for(var A=r<0?r:m;d;){if(f=d._prev,(d._act||A<=d._end)&&d._ts&&u!==d){if(d.parent!==this)return this.render(r,n,s);if(d.render(d._ts>0?(A-d._start)*d._ts:(d._dirty?d.totalDuration():d._tDur)+(A-d._start)*d._ts,n,s||Ht&&(d._initted||d._startAt)),m!==this._time||!this._ts&&!C){u=0,f&&(c+=this._zTime=A?-1e-8:zt);break}}d=f}}if(u&&!n&&(this.pause(),u.render(m>=a?0:-1e-8)._zTime=m>=a?1:-1,this._ts))return this._start=b,qr(this),this.render(r,n,s);this._onUpdate&&!n&&re(this,"onUpdate",!0),(c===h&&this._tTime>=this.totalDuration()||!c&&a)&&(b===this._start||Math.abs(g)!==Math.abs(this._ts))&&(this._lock||((r||!l)&&(c===h&&this._ts>0||!c&&this._ts<0)&&ze(this,1),!n&&!(r<0&&!a)&&(c||a||!h)&&(re(this,c===h&&r>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(c<h&&this.timeScale()>0)&&this._prom())))}return this},i.add=function(r,n){var s=this;if(Re(n)||(n=oe(this,n,r)),!(r instanceof xr)){if(qt(r))return r.forEach(function(a){return s.add(a,n)}),this;if(It(r))return this.addLabel(r,n);if(xt(r))r=At.delayedCall(0,r);else return this}return this!==r?_e(this,r,n):this},i.getChildren=function(r,n,s,a){r===void 0&&(r=!0),n===void 0&&(n=!0),s===void 0&&(s=!0),a===void 0&&(a=-1e8);for(var h=[],l=this._first;l;)l._start>=a&&(l instanceof At?n&&h.push(l):(s&&h.push(l),r&&h.push.apply(h,l.getChildren(!0,n,s)))),l=l._next;return h},i.getById=function(r){for(var n=this.getChildren(1,1,1),s=n.length;s--;)if(n[s].vars.id===r)return n[s]},i.remove=function(r){return It(r)?this.removeLabel(r):xt(r)?this.killTweensOf(r):(Hr(this,r),r===this._recent&&(this._recent=this._last),ti(this))},i.totalTime=function(r,n){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Dt(ie.time-(this._ts>0?r/this._ts:(this.totalDuration()-r)/-this._ts))),o.prototype.totalTime.call(this,r,n),this._forcing=0,this):this._tTime},i.addLabel=function(r,n){return this.labels[r]=oe(this,n),this},i.removeLabel=function(r){return delete this.labels[r],this},i.addPause=function(r,n,s){var a=At.delayedCall(0,n||br,s);return a.data="isPause",this._hasPause=1,_e(this,a,oe(this,r))},i.removePause=function(r){var n=this._first;for(r=oe(this,r);n;)n._start===r&&n.data==="isPause"&&ze(n),n=n._next},i.killTweensOf=function(r,n,s){for(var a=this.getTweensOf(r,s),h=a.length;h--;)Le!==a[h]&&a[h].kill(r,n);return this},i.getTweensOf=function(r,n){for(var s=[],a=le(r),h=this._first,l=Re(n),c;h;)h instanceof At?Mh(h._targets,a)&&(l?(!Le||h._initted&&h._ts)&&h.globalTime(0)<=n&&h.globalTime(h.totalDuration())>n:!n||h.isActive())&&s.push(h):(c=h.getTweensOf(a,n)).length&&s.push.apply(s,c),h=h._next;return s},i.tweenTo=function(r,n){n=n||{};var s=this,a=oe(s,r),h=n,l=h.startAt,c=h.onStart,p=h.onStartParams,m=h.immediateRender,d,f=At.to(s,ce({ease:n.ease||"none",lazy:!1,immediateRender:!1,time:a,overwrite:"auto",duration:n.duration||Math.abs((a-(l&&"time"in l?l.time:s._time))/s.timeScale())||zt,onStart:function(){if(s.pause(),!d){var v=n.duration||Math.abs((a-(l&&"time"in l?l.time:s._time))/s.timeScale());f._dur!==v&&Si(f,v,0,1).render(f._time,!0,!0),d=1}c&&c.apply(f,p||[])}},n));return m?f.render(0):f},i.tweenFromTo=function(r,n,s){return this.tweenTo(n,ce({startAt:{time:oe(this,r)}},s))},i.recent=function(){return this._recent},i.nextLabel=function(r){return r===void 0&&(r=this._time),xs(this,oe(this,r))},i.previousLabel=function(r){return r===void 0&&(r=this._time),xs(this,oe(this,r),1)},i.currentLabel=function(r){return arguments.length?this.seek(r,!0):this.previousLabel(this._time+zt)},i.shiftChildren=function(r,n,s){s===void 0&&(s=0);for(var a=this._first,h=this.labels,l;a;)a._start>=s&&(a._start+=r,a._end+=r),a=a._next;if(n)for(l in h)h[l]>=s&&(h[l]+=r);return ti(this)},i.invalidate=function(r){var n=this._first;for(this._lock=0;n;)n.invalidate(r),n=n._next;return o.prototype.invalidate.call(this,r)},i.clear=function(r){r===void 0&&(r=!0);for(var n=this._first,s;n;)s=n._next,this.remove(n),n=s;return this._dp&&(this._time=this._tTime=this._pTime=0),r&&(this.labels={}),ti(this)},i.totalDuration=function(r){var n=0,s=this,a=s._last,h=me,l,c,p;if(arguments.length)return s.timeScale((s._repeat<0?s.duration():s.totalDuration())/(s.reversed()?-r:r));if(s._dirty){for(p=s.parent;a;)l=a._prev,a._dirty&&a.totalDuration(),c=a._start,c>h&&s._sort&&a._ts&&!s._lock?(s._lock=1,_e(s,a,c-a._delay,1)._lock=0):h=c,c<0&&a._ts&&(n-=c,(!p&&!s._dp||p&&p.smoothChildTiming)&&(s._start+=c/s._ts,s._time-=c,s._tTime-=c),s.shiftChildren(-c,!1,-1/0),h=0),a._end>n&&a._ts&&(n=a._end),a=l;Si(s,s===bt&&s._time>n?s._time:n,1,1),s._dirty=0}return s._tDur},t.updateRoot=function(r){if(bt._ts&&(co(bt,Gr(r,bt)),ho=ie.frame),ie.frame>=vs){vs+=ne.autoSleep||120;var n=bt._first;if((!n||!n._ts)&&ne.autoSleep&&ie._listeners.length<2){for(;n&&!n._ts;)n=n._next;n||ie.sleep()}}},t}(xr);ce(Xt.prototype,{_lock:0,_hasPause:0,_forcing:0});var tl=function(t,i,e,r,n,s,a){var h=new Jt(this._pt,t,i,0,1,Uo,null,n),l=0,c=0,p,m,d,f,_,v,C,u;for(h.b=e,h.e=r,e+="",r+="",(C=~r.indexOf("random("))&&(r=Sr(r)),s&&(u=[e,r],s(u,t,i),e=u[0],r=u[1]),m=e.match(tn)||[];p=tn.exec(r);)f=p[0],_=r.substring(l,p.index),d?d=(d+1)%5:_.substr(-5)==="rgba("&&(d=1),f!==m[c++]&&(v=parseFloat(m[c-1])||0,h._pt={_next:h._pt,p:_||c===1?_:",",s:v,c:f.charAt(1)==="="?pi(v,f)-v:parseFloat(f)-v,m:d&&d<4?Math.round:0},l=tn.lastIndex);return h.c=l<r.length?r.substring(l,r.length):"",h.fp=a,(ro.test(r)||C)&&(h.e=0),this._pt=h,h},Qn=function(t,i,e,r,n,s,a,h,l,c){xt(r)&&(r=r(n||0,t,s));var p=t[i],m=e!=="get"?e:xt(p)?l?t[i.indexOf("set")||!xt(t["get"+i.substr(3)])?i:"get"+i.substr(3)](l):t[i]():p,d=xt(p)?l?sl:Lo:Zn,f;if(It(r)&&(~r.indexOf("random(")&&(r=Sr(r)),r.charAt(1)==="="&&(f=pi(m,r)+(Vt(m)||0),(f||f===0)&&(r=f))),!c||m!==r||Fn)return!isNaN(m*r)&&r!==""?(f=new Jt(this._pt,t,i,+m||0,r-(m||0),typeof p=="boolean"?ol:Go,0,d),l&&(f.fp=l),a&&f.modifier(a,this,t),this._pt=f):(!p&&!(i in t)&&Wn(i,r),tl.call(this,t,i,m,r,d,h||ne.stringFilter,l))},el=function(t,i,e,r,n){if(xt(t)&&(t=yr(t,n,i,e,r)),!ve(t)||t.style&&t.nodeType||qt(t)||eo(t))return It(t)?yr(t,n,i,e,r):t;var s={},a;for(a in t)s[a]=yr(t[a],n,i,e,r);return s},Do=function(t,i,e,r,n,s){var a,h,l,c;if(ee[t]&&(a=new ee[t]).init(n,a.rawVars?i[t]:el(i[t],r,n,s,e),e,r,s)!==!1&&(e._pt=h=new Jt(e._pt,n,t,0,1,a.render,a,0,a.priority),e!==gi))for(l=e._ptLookup[e._targets.indexOf(n)],c=a._props.length;c--;)l[a._props[c]]=h;return a},Le,Fn,Jn=function o(t,i,e){var r=t.vars,n=r.ease,s=r.startAt,a=r.immediateRender,h=r.lazy,l=r.onUpdate,c=r.runBackwards,p=r.yoyoEase,m=r.keyframes,d=r.autoRevert,f=t._dur,_=t._startAt,v=t._targets,C=t.parent,u=C&&C.data==="nested"?C.vars.targets:v,g=t._overwrite==="auto"&&!Hn,b=t.timeline,S,x,M,k,T,A,R,D,y,P,w,E,F;if(b&&(!m||!n)&&(n="none"),t._ease=ei(n,vi.ease),t._yEase=p?Eo(ei(p===!0?n:p,vi.ease)):0,p&&t._yoyo&&!t._repeat&&(p=t._yEase,t._yEase=t._ease,t._ease=p),t._from=!b&&!!r.runBackwards,!b||m&&!r.stagger){if(D=v[0]?Ze(v[0]).harness:0,E=D&&r[D.prop],S=Lr(r,Kn),_&&(_._zTime<0&&_.progress(1),i<0&&c&&a&&!d?_.render(-1,!0):_.revert(c&&f?Er:Rh),_._lazy=0),s){if(ze(t._startAt=At.set(v,ce({data:"isStart",overwrite:!1,parent:C,immediateRender:!0,lazy:!_&&$t(h),startAt:null,delay:0,onUpdate:l&&function(){return re(t,"onUpdate")},stagger:0},s))),t._startAt._dp=0,t._startAt._sat=t,i<0&&(Ht||!a&&!d)&&t._startAt.revert(Er),a&&f&&i<=0&&e<=0){i&&(t._zTime=i);return}}else if(c&&f&&!_){if(i&&(a=!1),M=ce({overwrite:!1,data:"isFromStart",lazy:a&&!_&&$t(h),immediateRender:a,stagger:0,parent:C},S),E&&(M[D.prop]=E),ze(t._startAt=At.set(v,M)),t._startAt._dp=0,t._startAt._sat=t,i<0&&(Ht?t._startAt.revert(Er):t._startAt.render(-1,!0)),t._zTime=i,!a)o(t._startAt,zt,zt);else if(!i)return}for(t._pt=t._ptCache=0,h=f&&$t(h)||h&&!f,x=0;x<v.length;x++){if(T=v[x],R=T._gsap||$n(v)[x]._gsap,t._ptLookup[x]=P={},kn[R.id]&&Be.length&&Nr(),w=u===v?x:u.indexOf(T),D&&(y=new D).init(T,E||S,t,w,u)!==!1&&(t._pt=k=new Jt(t._pt,T,y.name,0,1,y.render,y,0,y.priority),y._props.forEach(function(N){P[N]=k}),y.priority&&(A=1)),!D||E)for(M in S)ee[M]&&(y=Do(M,S,t,w,T,u))?y.priority&&(A=1):P[M]=k=Qn.call(t,T,M,"get",S[M],w,u,0,r.stringFilter);t._op&&t._op[x]&&t.kill(T,t._op[x]),g&&t._pt&&(Le=t,bt.killTweensOf(T,P,t.globalTime(i)),F=!t.parent,Le=0),t._pt&&h&&(kn[R.id]=1)}A&&Bo(t),t._onInit&&t._onInit(t)}t._onUpdate=l,t._initted=(!t._op||t._pt)&&!F,m&&i<=0&&b.render(me,!0,!0)},il=function(t,i,e,r,n,s,a,h){var l=(t._pt&&t._ptCache||(t._ptCache={}))[i],c,p,m,d;if(!l)for(l=t._ptCache[i]=[],m=t._ptLookup,d=t._targets.length;d--;){if(c=m[d][i],c&&c.d&&c.d._pt)for(c=c.d._pt;c&&c.p!==i&&c.fp!==i;)c=c._next;if(!c)return Fn=1,t.vars[i]="+=0",Jn(t,a),Fn=0,h?vr(i+" not eligible for reset"):1;l.push(c)}for(d=l.length;d--;)p=l[d],c=p._pt||p,c.s=(r||r===0)&&!n?r:c.s+(r||0)+s*c.c,c.c=e-c.s,p.e&&(p.e=Pt(e)+Vt(p.e)),p.b&&(p.b=c.s+Vt(p.b))},rl=function(t,i){var e=t[0]?Ze(t[0]).harness:0,r=e&&e.aliases,n,s,a,h;if(!r)return i;n=ri({},i);for(s in r)if(s in n)for(h=r[s].split(","),a=h.length;a--;)n[h[a]]=n[s];return n},nl=function(t,i,e,r){var n=i.ease||r||"power1.inOut",s,a;if(qt(i))a=e[t]||(e[t]=[]),i.forEach(function(h,l){return a.push({t:l/(i.length-1)*100,v:h,e:n})});else for(s in i)a=e[s]||(e[s]=[]),s==="ease"||a.push({t:parseFloat(t),v:i[s],e:n})},yr=function(t,i,e,r,n){return xt(t)?t.call(i,e,r,n):It(t)&&~t.indexOf("random(")?Sr(t):t},Io=jn+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",No={};Qt(Io+",id,stagger,delay,duration,paused,scrollTrigger",function(o){return No[o]=1});var At=function(o){Za(t,o);function t(e,r,n,s){var a;typeof r=="number"&&(n.duration=r,r=n,n=null),a=o.call(this,s?r:pr(r))||this;var h=a.vars,l=h.duration,c=h.delay,p=h.immediateRender,m=h.stagger,d=h.overwrite,f=h.keyframes,_=h.defaults,v=h.scrollTrigger,C=h.yoyoEase,u=r.parent||bt,g=(qt(e)||eo(e)?Re(e[0]):"length"in r)?[e]:le(e),b,S,x,M,k,T,A,R;if(a._targets=g.length?$n(g):vr("GSAP target "+e+" not found. https://gsap.com",!ne.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=d,f||m||Ar(l)||Ar(c)){if(r=a.vars,b=a.timeline=new Xt({data:"nested",defaults:_||{},targets:u&&u.data==="nested"?u.vars.targets:g}),b.kill(),b.parent=b._dp=Pe(a),b._start=0,m||Ar(l)||Ar(c)){if(M=g.length,A=m&&bo(m),ve(m))for(k in m)~Io.indexOf(k)&&(R||(R={}),R[k]=m[k]);for(S=0;S<M;S++)x=Lr(r,No),x.stagger=0,C&&(x.yoyoEase=C),R&&ri(x,R),T=g[S],x.duration=+yr(l,Pe(a),S,T,g),x.delay=(+yr(c,Pe(a),S,T,g)||0)-a._delay,!m&&M===1&&x.delay&&(a._delay=c=x.delay,a._start+=c,x.delay=0),b.to(T,x,A?A(S,T,g):0),b._ease=dt.none;b.duration()?l=c=0:a.timeline=0}else if(f){pr(ce(b.vars.defaults,{ease:"none"})),b._ease=ei(f.ease||r.ease||"none");var D=0,y,P,w;if(qt(f))f.forEach(function(E){return b.to(g,E,">")}),b.duration();else{x={};for(k in f)k==="ease"||k==="easeEach"||nl(k,f[k],x,f.easeEach);for(k in x)for(y=x[k].sort(function(E,F){return E.t-F.t}),D=0,S=0;S<y.length;S++)P=y[S],w={ease:P.e,duration:(P.t-(S?y[S-1].t:0))/100*l},w[k]=P.v,b.to(g,w,D),D+=w.duration;b.duration()<l&&b.to({},{duration:l-b.duration()})}}l||a.duration(l=b.duration())}else a.timeline=0;return d===!0&&!Hn&&(Le=Pe(a),bt.killTweensOf(g),Le=0),_e(u,Pe(a),n),r.reversed&&a.reverse(),r.paused&&a.paused(!0),(p||!l&&!f&&a._start===Dt(u._time)&&$t(p)&&Ih(Pe(a))&&u.data!=="nested")&&(a._tTime=-1e-8,a.render(Math.max(0,-c)||0)),v&&po(Pe(a),v),a}var i=t.prototype;return i.render=function(r,n,s){var a=this._time,h=this._tDur,l=this._dur,c=r<0,p=r>h-zt&&!c?h:r<zt?0:r,m,d,f,_,v,C,u,g,b;if(!l)Lh(this,r,n,s);else if(p!==this._tTime||!r||s||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==c){if(m=p,g=this.timeline,this._repeat){if(_=l+this._rDelay,this._repeat<-1&&c)return this.totalTime(_*100+r,n,s);if(m=Dt(p%_),p===h?(f=this._repeat,m=l):(f=~~(p/_),f&&f===Dt(p/_)&&(m=l,f--),m>l&&(m=l)),C=this._yoyo&&f&1,C&&(b=this._yEase,m=l-m),v=bi(this._tTime,_),m===a&&!s&&this._initted&&f===v)return this._tTime=p,this;f!==v&&(g&&this._yEase&&Mo(g,C),this.vars.repeatRefresh&&!C&&!this._lock&&this._time!==_&&this._initted&&(this._lock=s=1,this.render(Dt(_*f),!0).invalidate()._lock=0))}if(!this._initted){if(mo(this,c?r:m,s,n,p))return this._tTime=0,this;if(a!==this._time&&!(s&&this.vars.repeatRefresh&&f!==v))return this;if(l!==this._dur)return this.render(r,n,s)}if(this._tTime=p,this._time=m,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=u=(b||this._ease)(m/l),this._from&&(this.ratio=u=1-u),m&&!a&&!n&&!f&&(re(this,"onStart"),this._tTime!==p))return this;for(d=this._pt;d;)d.r(u,d.d),d=d._next;g&&g.render(r<0?r:g._dur*g._ease(m/this._dur),n,s)||this._startAt&&(this._zTime=r),this._onUpdate&&!n&&(c&&An(this,r,n,s),re(this,"onUpdate")),this._repeat&&f!==v&&this.vars.onRepeat&&!n&&this.parent&&re(this,"onRepeat"),(p===this._tDur||!p)&&this._tTime===p&&(c&&!this._onUpdate&&An(this,r,!0,!0),(r||!l)&&(p===this._tDur&&this._ts>0||!p&&this._ts<0)&&ze(this,1),!n&&!(c&&!a)&&(p||a||C)&&(re(this,p===h?"onComplete":"onReverseComplete",!0),this._prom&&!(p<h&&this.timeScale()>0)&&this._prom()))}return this},i.targets=function(){return this._targets},i.invalidate=function(r){return(!r||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(r),o.prototype.invalidate.call(this,r)},i.resetTo=function(r,n,s,a,h){wr||ie.wake(),this._ts||this.play();var l=Math.min(this._dur,(this._dp._time-this._start)*this._ts),c;return this._initted||Jn(this,l),c=this._ease(l/this._dur),il(this,r,n,s,a,c,l,h)?this.resetTo(r,n,s,a,1):(Yr(this,0),this.parent||go(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},i.kill=function(r,n){if(n===void 0&&(n="all"),!r&&(!n||n==="all"))return this._lazy=this._pt=0,this.parent?gr(this):this;if(this.timeline){var s=this.timeline.totalDuration();return this.timeline.killTweensOf(r,n,Le&&Le.vars.overwrite!==!0)._first||gr(this),this.parent&&s!==this.timeline.totalDuration()&&Si(this,this._dur*this.timeline._tDur/s,0,1),this}var a=this._targets,h=r?le(r):a,l=this._ptLookup,c=this._pt,p,m,d,f,_,v,C;if((!n||n==="all")&&Fh(a,h))return n==="all"&&(this._pt=0),gr(this);for(p=this._op=this._op||[],n!=="all"&&(It(n)&&(_={},Qt(n,function(u){return _[u]=1}),n=_),n=rl(a,n)),C=a.length;C--;)if(~h.indexOf(a[C])){m=l[C],n==="all"?(p[C]=n,f=m,d={}):(d=p[C]=p[C]||{},f=n);for(_ in f)v=m&&m[_],v&&((!("kill"in v.d)||v.d.kill(_)===!0)&&Hr(this,v,"_pt"),delete m[_]),d!=="all"&&(d[_]=1)}return this._initted&&!this._pt&&c&&gr(this),this},t.to=function(r,n){return new t(r,n,arguments[2])},t.from=function(r,n){return mr(1,arguments)},t.delayedCall=function(r,n,s,a){return new t(n,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:r,onComplete:n,onReverseComplete:n,onCompleteParams:s,onReverseCompleteParams:s,callbackScope:a})},t.fromTo=function(r,n,s){return mr(2,arguments)},t.set=function(r,n){return n.duration=0,n.repeatDelay||(n.repeat=0),new t(r,n)},t.killTweensOf=function(r,n,s){return bt.killTweensOf(r,n,s)},t}(xr);ce(At.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});Qt("staggerTo,staggerFrom,staggerFromTo",function(o){At[o]=function(){var t=new Xt,i=En.call(arguments,0);return i.splice(o==="staggerFromTo"?5:4,0,0),t[o].apply(t,i)}});var Zn=function(t,i,e){return t[i]=e},Lo=function(t,i,e){return t[i](e)},sl=function(t,i,e,r){return t[i](r.fp,e)},al=function(t,i,e){return t.setAttribute(i,e)},ts=function(t,i){return xt(t[i])?Lo:qn(t[i])&&t.setAttribute?al:Zn},Go=function(t,i){return i.set(i.t,i.p,Math.round((i.s+i.c*t)*1e6)/1e6,i)},ol=function(t,i){return i.set(i.t,i.p,!!(i.s+i.c*t),i)},Uo=function(t,i){var e=i._pt,r="";if(!t&&i.b)r=i.b;else if(t===1&&i.e)r=i.e;else{for(;e;)r=e.p+(e.m?e.m(e.s+e.c*t):Math.round((e.s+e.c*t)*1e4)/1e4)+r,e=e._next;r+=i.c}i.set(i.t,i.p,r,i)},es=function(t,i){for(var e=i._pt;e;)e.r(t,e.d),e=e._next},hl=function(t,i,e,r){for(var n=this._pt,s;n;)s=n._next,n.p===r&&n.modifier(t,i,e),n=s},ll=function(t){for(var i=this._pt,e,r;i;)r=i._next,i.p===t&&!i.op||i.op===t?Hr(this,i,"_pt"):i.dep||(e=1),i=r;return!e},cl=function(t,i,e,r){r.mSet(t,i,r.m.call(r.tween,e,r.mt),r)},Bo=function(t){for(var i=t._pt,e,r,n,s;i;){for(e=i._next,r=n;r&&r.pr>i.pr;)r=r._next;(i._prev=r?r._prev:s)?i._prev._next=i:n=i,(i._next=r)?r._prev=i:s=i,i=e}t._pt=n},Jt=function(){function o(i,e,r,n,s,a,h,l,c){this.t=e,this.s=n,this.c=s,this.p=r,this.r=a||Go,this.d=h||this,this.set=l||Zn,this.pr=c||0,this._next=i,i&&(i._prev=this)}var t=o.prototype;return t.modifier=function(e,r,n){this.mSet=this.mSet||this.set,this.set=cl,this.m=e,this.mt=n,this.tween=r},o}();Qt(jn+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(o){return Kn[o]=1});se.TweenMax=se.TweenLite=At;se.TimelineLite=se.TimelineMax=Xt;bt=new Xt({sortChildren:!1,defaults:vi,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});ne.stringFilter=Ro;var ii=[],Or={},dl=[],Ts=0,ul=0,an=function(t){return(Or[t]||dl).map(function(i){return i()})},Dn=function(){var t=Date.now(),i=[];t-Ts>2&&(an("matchMediaInit"),ii.forEach(function(e){var r=e.queries,n=e.conditions,s,a,h,l;for(a in r)s=ge.matchMedia(r[a]).matches,s&&(h=1),s!==n[a]&&(n[a]=s,l=1);l&&(e.revert(),h&&i.push(e))}),an("matchMediaRevert"),i.forEach(function(e){return e.onMatch(e,function(r){return e.add(null,r)})}),Ts=t,an("matchMedia"))},Vo=function(){function o(i,e){this.selector=e&&Mn(e),this.data=[],this._r=[],this.isReverted=!1,this.id=ul++,i&&this.add(i)}var t=o.prototype;return t.add=function(e,r,n){xt(e)&&(n=r,r=e,e=xt);var s=this,a=function(){var l=yt,c=s.selector,p;return l&&l!==s&&l.data.push(s),n&&(s.selector=Mn(n)),yt=s,p=r.apply(s,arguments),xt(p)&&s._r.push(p),yt=l,s.selector=c,s.isReverted=!1,p};return s.last=a,e===xt?a(s,function(h){return s.add(null,h)}):e?s[e]=a:a},t.ignore=function(e){var r=yt;yt=null,e(this),yt=r},t.getTweens=function(){var e=[];return this.data.forEach(function(r){return r instanceof o?e.push.apply(e,r.getTweens()):r instanceof At&&!(r.parent&&r.parent.data==="nested")&&e.push(r)}),e},t.clear=function(){this._r.length=this.data.length=0},t.kill=function(e,r){var n=this;if(e?function(){for(var a=n.getTweens(),h=n.data.length,l;h--;)l=n.data[h],l.data==="isFlip"&&(l.revert(),l.getChildren(!0,!0,!1).forEach(function(c){return a.splice(a.indexOf(c),1)}));for(a.map(function(c){return{g:c._dur||c._delay||c._sat&&!c._sat.vars.immediateRender?c.globalTime(0):-1/0,t:c}}).sort(function(c,p){return p.g-c.g||-1/0}).forEach(function(c){return c.t.revert(e)}),h=n.data.length;h--;)l=n.data[h],l instanceof Xt?l.data!=="nested"&&(l.scrollTrigger&&l.scrollTrigger.revert(),l.kill()):!(l instanceof At)&&l.revert&&l.revert(e);n._r.forEach(function(c){return c(e,n)}),n.isReverted=!0}():this.data.forEach(function(a){return a.kill&&a.kill()}),this.clear(),r)for(var s=ii.length;s--;)ii[s].id===this.id&&ii.splice(s,1)},t.revert=function(e){this.kill(e||{})},o}(),fl=function(){function o(i){this.contexts=[],this.scope=i,yt&&yt.data.push(this)}var t=o.prototype;return t.add=function(e,r,n){ve(e)||(e={matches:e});var s=new Vo(0,n||this.scope),a=s.conditions={},h,l,c;yt&&!s.selector&&(s.selector=yt.selector),this.contexts.push(s),r=s.add("onMatch",r),s.queries=e;for(l in e)l==="all"?c=1:(h=ge.matchMedia(e[l]),h&&(ii.indexOf(s)<0&&ii.push(s),(a[l]=h.matches)&&(c=1),h.addListener?h.addListener(Dn):h.addEventListener("change",Dn)));return c&&r(s,function(p){return s.add(null,p)}),this},t.revert=function(e){this.kill(e||{})},t.kill=function(e){this.contexts.forEach(function(r){return r.kill(e,!0)})},o}(),Ur={registerPlugin:function(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];i.forEach(function(r){return Po(r)})},timeline:function(t){return new Xt(t)},getTweensOf:function(t,i){return bt.getTweensOf(t,i)},getProperty:function(t,i,e,r){It(t)&&(t=le(t)[0]);var n=Ze(t||{}).get,s=e?fo:uo;return e==="native"&&(e=""),t&&(i?s((ee[i]&&ee[i].get||n)(t,i,e,r)):function(a,h,l){return s((ee[a]&&ee[a].get||n)(t,a,h,l))})},quickSetter:function(t,i,e){if(t=le(t),t.length>1){var r=t.map(function(c){return te.quickSetter(c,i,e)}),n=r.length;return function(c){for(var p=n;p--;)r[p](c)}}t=t[0]||{};var s=ee[i],a=Ze(t),h=a.harness&&(a.harness.aliases||{})[i]||i,l=s?function(c){var p=new s;gi._pt=0,p.init(t,e?c+e:c,gi,0,[t]),p.render(1,p),gi._pt&&es(1,gi)}:a.set(t,h);return s?l:function(c){return l(t,h,e?c+e:c,a,1)}},quickTo:function(t,i,e){var r,n=te.to(t,ri((r={},r[i]="+=0.1",r.paused=!0,r),e||{})),s=function(h,l,c){return n.resetTo(i,h,l,c)};return s.tween=n,s},isTweening:function(t){return bt.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=ei(t.ease,vi.ease)),bs(vi,t||{})},config:function(t){return bs(ne,t||{})},registerEffect:function(t){var i=t.name,e=t.effect,r=t.plugins,n=t.defaults,s=t.extendTimeline;(r||"").split(",").forEach(function(a){return a&&!ee[a]&&!se[a]&&vr(i+" effect requires "+a+" plugin.")}),en[i]=function(a,h,l){return e(le(a),ce(h||{},n),l)},s&&(Xt.prototype[i]=function(a,h,l){return this.add(en[i](a,ve(h)?h:(l=h)&&{},this),l)})},registerEase:function(t,i){dt[t]=ei(i)},parseEase:function(t,i){return arguments.length?ei(t,i):dt},getById:function(t){return bt.getById(t)},exportRoot:function(t,i){t===void 0&&(t={});var e=new Xt(t),r,n;for(e.smoothChildTiming=$t(t.smoothChildTiming),bt.remove(e),e._dp=0,e._time=e._tTime=bt._time,r=bt._first;r;)n=r._next,(i||!(!r._dur&&r instanceof At&&r.vars.onComplete===r._targets[0]))&&_e(e,r,r._start-r._delay),r=n;return _e(bt,e,0),e},context:function(t,i){return t?new Vo(t,i):yt},matchMedia:function(t){return new fl(t)},matchMediaRefresh:function(){return ii.forEach(function(t){var i=t.conditions,e,r;for(r in i)i[r]&&(i[r]=!1,e=1);e&&t.revert()})||Dn()},addEventListener:function(t,i){var e=Or[t]||(Or[t]=[]);~e.indexOf(i)||e.push(i)},removeEventListener:function(t,i){var e=Or[t],r=e&&e.indexOf(i);r>=0&&e.splice(r,1)},utils:{wrap:Yh,wrapYoyo:Xh,distribute:bo,random:wo,snap:So,normalize:qh,getUnit:Vt,clamp:Bh,splitColor:ko,toArray:le,selector:Mn,mapRange:Co,pipe:zh,unitize:Hh,interpolate:Wh,shuffle:vo},install:ao,effects:en,ticker:ie,updateRoot:Xt.updateRoot,plugins:ee,globalTimeline:bt,core:{PropTween:Jt,globals:oo,Tween:At,Timeline:Xt,Animation:xr,getCache:Ze,_removeLinkedListItem:Hr,reverting:function(){return Ht},context:function(t){return t&&yt&&(yt.data.push(t),t._ctx=yt),yt},suppressOverwrites:function(t){return Hn=t}}};Qt("to,from,fromTo,delayedCall,set,killTweensOf",function(o){return Ur[o]=At[o]});ie.add(Xt.updateRoot);gi=Ur.to({},{duration:0});var gl=function(t,i){for(var e=t._pt;e&&e.p!==i&&e.op!==i&&e.fp!==i;)e=e._next;return e},_l=function(t,i){var e=t._targets,r,n,s;for(r in i)for(n=e.length;n--;)s=t._ptLookup[n][r],s&&(s=s.d)&&(s._pt&&(s=gl(s,r)),s&&s.modifier&&s.modifier(i[r],t,e[n],r))},on=function(t,i){return{name:t,rawVars:1,init:function(r,n,s){s._onInit=function(a){var h,l;if(It(n)&&(h={},Qt(n,function(c){return h[c]=1}),n=h),i){h={};for(l in n)h[l]=i(n[l]);n=h}_l(a,n)}}}},te=Ur.registerPlugin({name:"attr",init:function(t,i,e,r,n){var s,a,h;this.tween=e;for(s in i)h=t.getAttribute(s)||"",a=this.add(t,"setAttribute",(h||0)+"",i[s],r,n,0,0,s),a.op=s,a.b=h,this._props.push(s)},render:function(t,i){for(var e=i._pt;e;)Ht?e.set(e.t,e.p,e.b,e):e.r(t,e.d),e=e._next}},{name:"endArray",init:function(t,i){for(var e=i.length;e--;)this.add(t,e,t[e]||0,i[e],0,0,0,0,0,1)}},on("roundProps",On),on("modifiers"),on("snap",So))||Ur;At.version=Xt.version=te.version="3.12.5";so=1;Yn()&&wi();dt.Power0;dt.Power1;dt.Power2;dt.Power3;dt.Power4;dt.Linear;dt.Quad;dt.Cubic;dt.Quart;dt.Quint;dt.Strong;dt.Elastic;dt.Back;dt.SteppedEase;dt.Bounce;dt.Sine;dt.Expo;dt.Circ;/*!
 * CSSPlugin 3.12.5
 * https://gsap.com
 *
 * Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Ps,Ge,mi,is,Je,ks,rs,pl=function(){return typeof window<"u"},Ee={},Qe=180/Math.PI,yi=Math.PI/180,li=Math.atan2,As=1e8,ns=/([A-Z])/g,ml=/(left|right|width|margin|padding|x)/i,yl=/[\s,\(]\S/,pe={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},In=function(t,i){return i.set(i.t,i.p,Math.round((i.s+i.c*t)*1e4)/1e4+i.u,i)},vl=function(t,i){return i.set(i.t,i.p,t===1?i.e:Math.round((i.s+i.c*t)*1e4)/1e4+i.u,i)},bl=function(t,i){return i.set(i.t,i.p,t?Math.round((i.s+i.c*t)*1e4)/1e4+i.u:i.b,i)},Sl=function(t,i){var e=i.s+i.c*t;i.set(i.t,i.p,~~(e+(e<0?-.5:.5))+i.u,i)},zo=function(t,i){return i.set(i.t,i.p,t?i.e:i.b,i)},Ho=function(t,i){return i.set(i.t,i.p,t!==1?i.b:i.e,i)},wl=function(t,i,e){return t.style[i]=e},xl=function(t,i,e){return t.style.setProperty(i,e)},Cl=function(t,i,e){return t._gsap[i]=e},Tl=function(t,i,e){return t._gsap.scaleX=t._gsap.scaleY=e},Pl=function(t,i,e,r,n){var s=t._gsap;s.scaleX=s.scaleY=e,s.renderTransform(n,s)},kl=function(t,i,e,r,n){var s=t._gsap;s[i]=e,s.renderTransform(n,s)},St="transform",Zt=St+"Origin",Al=function o(t,i){var e=this,r=this.target,n=r.style,s=r._gsap;if(t in Ee&&n){if(this.tfm=this.tfm||{},t!=="transform")t=pe[t]||t,~t.indexOf(",")?t.split(",").forEach(function(a){return e.tfm[a]=ke(r,a)}):this.tfm[t]=s.x?s[t]:ke(r,t),t===Zt&&(this.tfm.zOrigin=s.zOrigin);else return pe.transform.split(",").forEach(function(a){return o.call(e,a,i)});if(this.props.indexOf(St)>=0)return;s.svg&&(this.svgo=r.getAttribute("data-svg-origin"),this.props.push(Zt,i,"")),t=St}(n||i)&&this.props.push(t,i,n[t])},qo=function(t){t.translate&&(t.removeProperty("translate"),t.removeProperty("scale"),t.removeProperty("rotate"))},Rl=function(){var t=this.props,i=this.target,e=i.style,r=i._gsap,n,s;for(n=0;n<t.length;n+=3)t[n+1]?i[t[n]]=t[n+2]:t[n+2]?e[t[n]]=t[n+2]:e.removeProperty(t[n].substr(0,2)==="--"?t[n]:t[n].replace(ns,"-$1").toLowerCase());if(this.tfm){for(s in this.tfm)r[s]=this.tfm[s];r.svg&&(r.renderTransform(),i.setAttribute("data-svg-origin",this.svgo||"")),n=rs(),(!n||!n.isStart)&&!e[St]&&(qo(e),r.zOrigin&&e[Zt]&&(e[Zt]+=" "+r.zOrigin+"px",r.zOrigin=0,r.renderTransform()),r.uncache=1)}},Yo=function(t,i){var e={target:t,props:[],revert:Rl,save:Al};return t._gsap||te.core.getCache(t),i&&i.split(",").forEach(function(r){return e.save(r)}),e},Xo,Nn=function(t,i){var e=Ge.createElementNS?Ge.createElementNS((i||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):Ge.createElement(t);return e&&e.style?e:Ge.createElement(t)},ye=function o(t,i,e){var r=getComputedStyle(t);return r[i]||r.getPropertyValue(i.replace(ns,"-$1").toLowerCase())||r.getPropertyValue(i)||!e&&o(t,xi(i)||i,1)||""},Rs="O,Moz,ms,Ms,Webkit".split(","),xi=function(t,i,e){var r=i||Je,n=r.style,s=5;if(t in n&&!e)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);s--&&!(Rs[s]+t in n););return s<0?null:(s===3?"ms":s>=0?Rs[s]:"")+t},Ln=function(){pl()&&window.document&&(Ps=window,Ge=Ps.document,mi=Ge.documentElement,Je=Nn("div")||{style:{}},Nn("div"),St=xi(St),Zt=St+"Origin",Je.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",Xo=!!xi("perspective"),rs=te.core.reverting,is=1)},hn=function o(t){var i=Nn("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),e=this.parentNode,r=this.nextSibling,n=this.style.cssText,s;if(mi.appendChild(i),i.appendChild(this),this.style.display="block",t)try{s=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=o}catch{}else this._gsapBBox&&(s=this._gsapBBox());return e&&(r?e.insertBefore(this,r):e.appendChild(this)),mi.removeChild(i),this.style.cssText=n,s},Es=function(t,i){for(var e=i.length;e--;)if(t.hasAttribute(i[e]))return t.getAttribute(i[e])},Wo=function(t){var i;try{i=t.getBBox()}catch{i=hn.call(t,!0)}return i&&(i.width||i.height)||t.getBBox===hn||(i=hn.call(t,!0)),i&&!i.width&&!i.x&&!i.y?{x:+Es(t,["x","cx","x1"])||0,y:+Es(t,["y","cy","y1"])||0,width:0,height:0}:i},Ko=function(t){return!!(t.getCTM&&(!t.parentNode||t.ownerSVGElement)&&Wo(t))},ni=function(t,i){if(i){var e=t.style,r;i in Ee&&i!==Zt&&(i=St),e.removeProperty?(r=i.substr(0,2),(r==="ms"||i.substr(0,6)==="webkit")&&(i="-"+i),e.removeProperty(r==="--"?i:i.replace(ns,"-$1").toLowerCase())):e.removeAttribute(i)}},Ue=function(t,i,e,r,n,s){var a=new Jt(t._pt,i,e,0,1,s?Ho:zo);return t._pt=a,a.b=r,a.e=n,t._props.push(e),a},Ms={deg:1,rad:1,turn:1},El={grid:1,flex:1},He=function o(t,i,e,r){var n=parseFloat(e)||0,s=(e+"").trim().substr((n+"").length)||"px",a=Je.style,h=ml.test(i),l=t.tagName.toLowerCase()==="svg",c=(l?"client":"offset")+(h?"Width":"Height"),p=100,m=r==="px",d=r==="%",f,_,v,C;if(r===s||!n||Ms[r]||Ms[s])return n;if(s!=="px"&&!m&&(n=o(t,i,e,"px")),C=t.getCTM&&Ko(t),(d||s==="%")&&(Ee[i]||~i.indexOf("adius")))return f=C?t.getBBox()[h?"width":"height"]:t[c],Pt(d?n/f*p:n/100*f);if(a[h?"width":"height"]=p+(m?s:r),_=~i.indexOf("adius")||r==="em"&&t.appendChild&&!l?t:t.parentNode,C&&(_=(t.ownerSVGElement||{}).parentNode),(!_||_===Ge||!_.appendChild)&&(_=Ge.body),v=_._gsap,v&&d&&v.width&&h&&v.time===ie.time&&!v.uncache)return Pt(n/v.width*p);if(d&&(i==="height"||i==="width")){var u=t.style[i];t.style[i]=p+r,f=t[c],u?t.style[i]=u:ni(t,i)}else(d||s==="%")&&!El[ye(_,"display")]&&(a.position=ye(t,"position")),_===t&&(a.position="static"),_.appendChild(Je),f=Je[c],_.removeChild(Je),a.position="absolute";return h&&d&&(v=Ze(_),v.time=ie.time,v.width=_[c]),Pt(m?f*n/p:f&&n?p/f*n:0)},ke=function(t,i,e,r){var n;return is||Ln(),i in pe&&i!=="transform"&&(i=pe[i],~i.indexOf(",")&&(i=i.split(",")[0])),Ee[i]&&i!=="transform"?(n=Tr(t,r),n=i!=="transformOrigin"?n[i]:n.svg?n.origin:Vr(ye(t,Zt))+" "+n.zOrigin+"px"):(n=t.style[i],(!n||n==="auto"||r||~(n+"").indexOf("calc("))&&(n=Br[i]&&Br[i](t,i,e)||ye(t,i)||lo(t,i)||(i==="opacity"?1:0))),e&&!~(n+"").trim().indexOf(" ")?He(t,i,n,e)+e:n},Ml=function(t,i,e,r){if(!e||e==="none"){var n=xi(i,t,1),s=n&&ye(t,n,1);s&&s!==e?(i=n,e=s):i==="borderColor"&&(e=ye(t,"borderTopColor"))}var a=new Jt(this._pt,t.style,i,0,1,Uo),h=0,l=0,c,p,m,d,f,_,v,C,u,g,b,S;if(a.b=e,a.e=r,e+="",r+="",r==="auto"&&(_=t.style[i],t.style[i]=r,r=ye(t,i)||r,_?t.style[i]=_:ni(t,i)),c=[e,r],Ro(c),e=c[0],r=c[1],m=e.match(fi)||[],S=r.match(fi)||[],S.length){for(;p=fi.exec(r);)v=p[0],u=r.substring(h,p.index),f?f=(f+1)%5:(u.substr(-5)==="rgba("||u.substr(-5)==="hsla(")&&(f=1),v!==(_=m[l++]||"")&&(d=parseFloat(_)||0,b=_.substr((d+"").length),v.charAt(1)==="="&&(v=pi(d,v)+b),C=parseFloat(v),g=v.substr((C+"").length),h=fi.lastIndex-g.length,g||(g=g||ne.units[i]||b,h===r.length&&(r+=g,a.e+=g)),b!==g&&(d=He(t,i,_,g)||0),a._pt={_next:a._pt,p:u||l===1?u:",",s:d,c:C-d,m:f&&f<4||i==="zIndex"?Math.round:0});a.c=h<r.length?r.substring(h,r.length):""}else a.r=i==="display"&&r==="none"?Ho:zo;return ro.test(r)&&(a.e=0),this._pt=a,a},Os={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},Ol=function(t){var i=t.split(" "),e=i[0],r=i[1]||"50%";return(e==="top"||e==="bottom"||r==="left"||r==="right")&&(t=e,e=r,r=t),i[0]=Os[e]||e,i[1]=Os[r]||r,i.join(" ")},Fl=function(t,i){if(i.tween&&i.tween._time===i.tween._dur){var e=i.t,r=e.style,n=i.u,s=e._gsap,a,h,l;if(n==="all"||n===!0)r.cssText="",h=1;else for(n=n.split(","),l=n.length;--l>-1;)a=n[l],Ee[a]&&(h=1,a=a==="transformOrigin"?Zt:St),ni(e,a);h&&(ni(e,St),s&&(s.svg&&e.removeAttribute("transform"),Tr(e,1),s.uncache=1,qo(r)))}},Br={clearProps:function(t,i,e,r,n){if(n.data!=="isFromStart"){var s=t._pt=new Jt(t._pt,i,e,0,0,Fl);return s.u=r,s.pr=-10,s.tween=n,t._props.push(e),1}}},Cr=[1,0,0,1,0,0],jo={},$o=function(t){return t==="matrix(1, 0, 0, 1, 0, 0)"||t==="none"||!t},Fs=function(t){var i=ye(t,St);return $o(i)?Cr:i.substr(7).match(io).map(Pt)},ss=function(t,i){var e=t._gsap||Ze(t),r=t.style,n=Fs(t),s,a,h,l;return e.svg&&t.getAttribute("transform")?(h=t.transform.baseVal.consolidate().matrix,n=[h.a,h.b,h.c,h.d,h.e,h.f],n.join(",")==="1,0,0,1,0,0"?Cr:n):(n===Cr&&!t.offsetParent&&t!==mi&&!e.svg&&(h=r.display,r.display="block",s=t.parentNode,(!s||!t.offsetParent)&&(l=1,a=t.nextElementSibling,mi.appendChild(t)),n=Fs(t),h?r.display=h:ni(t,"display"),l&&(a?s.insertBefore(t,a):s?s.appendChild(t):mi.removeChild(t))),i&&n.length>6?[n[0],n[1],n[4],n[5],n[12],n[13]]:n)},Gn=function(t,i,e,r,n,s){var a=t._gsap,h=n||ss(t,!0),l=a.xOrigin||0,c=a.yOrigin||0,p=a.xOffset||0,m=a.yOffset||0,d=h[0],f=h[1],_=h[2],v=h[3],C=h[4],u=h[5],g=i.split(" "),b=parseFloat(g[0])||0,S=parseFloat(g[1])||0,x,M,k,T;e?h!==Cr&&(M=d*v-f*_)&&(k=b*(v/M)+S*(-_/M)+(_*u-v*C)/M,T=b*(-f/M)+S*(d/M)-(d*u-f*C)/M,b=k,S=T):(x=Wo(t),b=x.x+(~g[0].indexOf("%")?b/100*x.width:b),S=x.y+(~(g[1]||g[0]).indexOf("%")?S/100*x.height:S)),r||r!==!1&&a.smooth?(C=b-l,u=S-c,a.xOffset=p+(C*d+u*_)-C,a.yOffset=m+(C*f+u*v)-u):a.xOffset=a.yOffset=0,a.xOrigin=b,a.yOrigin=S,a.smooth=!!r,a.origin=i,a.originIsAbsolute=!!e,t.style[Zt]="0px 0px",s&&(Ue(s,a,"xOrigin",l,b),Ue(s,a,"yOrigin",c,S),Ue(s,a,"xOffset",p,a.xOffset),Ue(s,a,"yOffset",m,a.yOffset)),t.setAttribute("data-svg-origin",b+" "+S)},Tr=function(t,i){var e=t._gsap||new Fo(t);if("x"in e&&!i&&!e.uncache)return e;var r=t.style,n=e.scaleX<0,s="px",a="deg",h=getComputedStyle(t),l=ye(t,Zt)||"0",c,p,m,d,f,_,v,C,u,g,b,S,x,M,k,T,A,R,D,y,P,w,E,F,N,z,B,Y,K,H,X,L;return c=p=m=_=v=C=u=g=b=0,d=f=1,e.svg=!!(t.getCTM&&Ko(t)),h.translate&&((h.translate!=="none"||h.scale!=="none"||h.rotate!=="none")&&(r[St]=(h.translate!=="none"?"translate3d("+(h.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(h.rotate!=="none"?"rotate("+h.rotate+") ":"")+(h.scale!=="none"?"scale("+h.scale.split(" ").join(",")+") ":"")+(h[St]!=="none"?h[St]:"")),r.scale=r.rotate=r.translate="none"),M=ss(t,e.svg),e.svg&&(e.uncache?(N=t.getBBox(),l=e.xOrigin-N.x+"px "+(e.yOrigin-N.y)+"px",F=""):F=!i&&t.getAttribute("data-svg-origin"),Gn(t,F||l,!!F||e.originIsAbsolute,e.smooth!==!1,M)),S=e.xOrigin||0,x=e.yOrigin||0,M!==Cr&&(R=M[0],D=M[1],y=M[2],P=M[3],c=w=M[4],p=E=M[5],M.length===6?(d=Math.sqrt(R*R+D*D),f=Math.sqrt(P*P+y*y),_=R||D?li(D,R)*Qe:0,u=y||P?li(y,P)*Qe+_:0,u&&(f*=Math.abs(Math.cos(u*yi))),e.svg&&(c-=S-(S*R+x*y),p-=x-(S*D+x*P))):(L=M[6],H=M[7],B=M[8],Y=M[9],K=M[10],X=M[11],c=M[12],p=M[13],m=M[14],k=li(L,K),v=k*Qe,k&&(T=Math.cos(-k),A=Math.sin(-k),F=w*T+B*A,N=E*T+Y*A,z=L*T+K*A,B=w*-A+B*T,Y=E*-A+Y*T,K=L*-A+K*T,X=H*-A+X*T,w=F,E=N,L=z),k=li(-y,K),C=k*Qe,k&&(T=Math.cos(-k),A=Math.sin(-k),F=R*T-B*A,N=D*T-Y*A,z=y*T-K*A,X=P*A+X*T,R=F,D=N,y=z),k=li(D,R),_=k*Qe,k&&(T=Math.cos(k),A=Math.sin(k),F=R*T+D*A,N=w*T+E*A,D=D*T-R*A,E=E*T-w*A,R=F,w=N),v&&Math.abs(v)+Math.abs(_)>359.9&&(v=_=0,C=180-C),d=Pt(Math.sqrt(R*R+D*D+y*y)),f=Pt(Math.sqrt(E*E+L*L)),k=li(w,E),u=Math.abs(k)>2e-4?k*Qe:0,b=X?1/(X<0?-X:X):0),e.svg&&(F=t.getAttribute("transform"),e.forceCSS=t.setAttribute("transform","")||!$o(ye(t,St)),F&&t.setAttribute("transform",F))),Math.abs(u)>90&&Math.abs(u)<270&&(n?(d*=-1,u+=_<=0?180:-180,_+=_<=0?180:-180):(f*=-1,u+=u<=0?180:-180)),i=i||e.uncache,e.x=c-((e.xPercent=c&&(!i&&e.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-c)?-50:0)))?t.offsetWidth*e.xPercent/100:0)+s,e.y=p-((e.yPercent=p&&(!i&&e.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-p)?-50:0)))?t.offsetHeight*e.yPercent/100:0)+s,e.z=m+s,e.scaleX=Pt(d),e.scaleY=Pt(f),e.rotation=Pt(_)+a,e.rotationX=Pt(v)+a,e.rotationY=Pt(C)+a,e.skewX=u+a,e.skewY=g+a,e.transformPerspective=b+s,(e.zOrigin=parseFloat(l.split(" ")[2])||!i&&e.zOrigin||0)&&(r[Zt]=Vr(l)),e.xOffset=e.yOffset=0,e.force3D=ne.force3D,e.renderTransform=e.svg?Il:Xo?Qo:Dl,e.uncache=0,e},Vr=function(t){return(t=t.split(" "))[0]+" "+t[1]},ln=function(t,i,e){var r=Vt(i);return Pt(parseFloat(i)+parseFloat(He(t,"x",e+"px",r)))+r},Dl=function(t,i){i.z="0px",i.rotationY=i.rotationX="0deg",i.force3D=0,Qo(t,i)},Xe="0deg",Ti="0px",We=") ",Qo=function(t,i){var e=i||this,r=e.xPercent,n=e.yPercent,s=e.x,a=e.y,h=e.z,l=e.rotation,c=e.rotationY,p=e.rotationX,m=e.skewX,d=e.skewY,f=e.scaleX,_=e.scaleY,v=e.transformPerspective,C=e.force3D,u=e.target,g=e.zOrigin,b="",S=C==="auto"&&t&&t!==1||C===!0;if(g&&(p!==Xe||c!==Xe)){var x=parseFloat(c)*yi,M=Math.sin(x),k=Math.cos(x),T;x=parseFloat(p)*yi,T=Math.cos(x),s=ln(u,s,M*T*-g),a=ln(u,a,-Math.sin(x)*-g),h=ln(u,h,k*T*-g+g)}v!==Ti&&(b+="perspective("+v+We),(r||n)&&(b+="translate("+r+"%, "+n+"%) "),(S||s!==Ti||a!==Ti||h!==Ti)&&(b+=h!==Ti||S?"translate3d("+s+", "+a+", "+h+") ":"translate("+s+", "+a+We),l!==Xe&&(b+="rotate("+l+We),c!==Xe&&(b+="rotateY("+c+We),p!==Xe&&(b+="rotateX("+p+We),(m!==Xe||d!==Xe)&&(b+="skew("+m+", "+d+We),(f!==1||_!==1)&&(b+="scale("+f+", "+_+We),u.style[St]=b||"translate(0, 0)"},Il=function(t,i){var e=i||this,r=e.xPercent,n=e.yPercent,s=e.x,a=e.y,h=e.rotation,l=e.skewX,c=e.skewY,p=e.scaleX,m=e.scaleY,d=e.target,f=e.xOrigin,_=e.yOrigin,v=e.xOffset,C=e.yOffset,u=e.forceCSS,g=parseFloat(s),b=parseFloat(a),S,x,M,k,T;h=parseFloat(h),l=parseFloat(l),c=parseFloat(c),c&&(c=parseFloat(c),l+=c,h+=c),h||l?(h*=yi,l*=yi,S=Math.cos(h)*p,x=Math.sin(h)*p,M=Math.sin(h-l)*-m,k=Math.cos(h-l)*m,l&&(c*=yi,T=Math.tan(l-c),T=Math.sqrt(1+T*T),M*=T,k*=T,c&&(T=Math.tan(c),T=Math.sqrt(1+T*T),S*=T,x*=T)),S=Pt(S),x=Pt(x),M=Pt(M),k=Pt(k)):(S=p,k=m,x=M=0),(g&&!~(s+"").indexOf("px")||b&&!~(a+"").indexOf("px"))&&(g=He(d,"x",s,"px"),b=He(d,"y",a,"px")),(f||_||v||C)&&(g=Pt(g+f-(f*S+_*M)+v),b=Pt(b+_-(f*x+_*k)+C)),(r||n)&&(T=d.getBBox(),g=Pt(g+r/100*T.width),b=Pt(b+n/100*T.height)),T="matrix("+S+","+x+","+M+","+k+","+g+","+b+")",d.setAttribute("transform",T),u&&(d.style[St]=T)},Nl=function(t,i,e,r,n){var s=360,a=It(n),h=parseFloat(n)*(a&&~n.indexOf("rad")?Qe:1),l=h-r,c=r+l+"deg",p,m;return a&&(p=n.split("_")[1],p==="short"&&(l%=s,l!==l%(s/2)&&(l+=l<0?s:-360)),p==="cw"&&l<0?l=(l+s*As)%s-~~(l/s)*s:p==="ccw"&&l>0&&(l=(l-s*As)%s-~~(l/s)*s)),t._pt=m=new Jt(t._pt,i,e,r,l,vl),m.e=c,m.u="deg",t._props.push(e),m},Ds=function(t,i){for(var e in i)t[e]=i[e];return t},Ll=function(t,i,e){var r=Ds({},e._gsap),n="perspective,force3D,transformOrigin,svgOrigin",s=e.style,a,h,l,c,p,m,d,f;r.svg?(l=e.getAttribute("transform"),e.setAttribute("transform",""),s[St]=i,a=Tr(e,1),ni(e,St),e.setAttribute("transform",l)):(l=getComputedStyle(e)[St],s[St]=i,a=Tr(e,1),s[St]=l);for(h in Ee)l=r[h],c=a[h],l!==c&&n.indexOf(h)<0&&(d=Vt(l),f=Vt(c),p=d!==f?He(e,h,l,f):parseFloat(l),m=parseFloat(c),t._pt=new Jt(t._pt,a,h,p,m-p,In),t._pt.u=f||0,t._props.push(h));Ds(a,r)};Qt("padding,margin,Width,Radius",function(o,t){var i="Top",e="Right",r="Bottom",n="Left",s=(t<3?[i,e,r,n]:[i+n,i+e,r+e,r+n]).map(function(a){return t<2?o+a:"border"+a+o});Br[t>1?"border"+o:o]=function(a,h,l,c,p){var m,d;if(arguments.length<4)return m=s.map(function(f){return ke(a,f,l)}),d=m.join(" "),d.split(m[0]).length===5?m[0]:d;m=(c+"").split(" "),d={},s.forEach(function(f,_){return d[f]=m[_]=m[_]||m[(_-1)/2|0]}),a.init(h,d,p)}});var Jo={name:"css",register:Ln,targetTest:function(t){return t.style&&t.nodeType},init:function(t,i,e,r,n){var s=this._props,a=t.style,h=e.vars.startAt,l,c,p,m,d,f,_,v,C,u,g,b,S,x,M,k;is||Ln(),this.styles=this.styles||Yo(t),k=this.styles.props,this.tween=e;for(_ in i)if(_!=="autoRound"&&(c=i[_],!(ee[_]&&Do(_,i,e,r,t,n)))){if(d=typeof c,f=Br[_],d==="function"&&(c=c.call(e,r,t,n),d=typeof c),d==="string"&&~c.indexOf("random(")&&(c=Sr(c)),f)f(this,t,_,c,e)&&(M=1);else if(_.substr(0,2)==="--")l=(getComputedStyle(t).getPropertyValue(_)+"").trim(),c+="",Ve.lastIndex=0,Ve.test(l)||(v=Vt(l),C=Vt(c)),C?v!==C&&(l=He(t,_,l,C)+C):v&&(c+=v),this.add(a,"setProperty",l,c,r,n,0,0,_),s.push(_),k.push(_,0,a[_]);else if(d!=="undefined"){if(h&&_ in h?(l=typeof h[_]=="function"?h[_].call(e,r,t,n):h[_],It(l)&&~l.indexOf("random(")&&(l=Sr(l)),Vt(l+"")||l==="auto"||(l+=ne.units[_]||Vt(ke(t,_))||""),(l+"").charAt(1)==="="&&(l=ke(t,_))):l=ke(t,_),m=parseFloat(l),u=d==="string"&&c.charAt(1)==="="&&c.substr(0,2),u&&(c=c.substr(2)),p=parseFloat(c),_ in pe&&(_==="autoAlpha"&&(m===1&&ke(t,"visibility")==="hidden"&&p&&(m=0),k.push("visibility",0,a.visibility),Ue(this,a,"visibility",m?"inherit":"hidden",p?"inherit":"hidden",!p)),_!=="scale"&&_!=="transform"&&(_=pe[_],~_.indexOf(",")&&(_=_.split(",")[0]))),g=_ in Ee,g){if(this.styles.save(_),b||(S=t._gsap,S.renderTransform&&!i.parseTransform||Tr(t,i.parseTransform),x=i.smoothOrigin!==!1&&S.smooth,b=this._pt=new Jt(this._pt,a,St,0,1,S.renderTransform,S,0,-1),b.dep=1),_==="scale")this._pt=new Jt(this._pt,S,"scaleY",S.scaleY,(u?pi(S.scaleY,u+p):p)-S.scaleY||0,In),this._pt.u=0,s.push("scaleY",_),_+="X";else if(_==="transformOrigin"){k.push(Zt,0,a[Zt]),c=Ol(c),S.svg?Gn(t,c,0,x,0,this):(C=parseFloat(c.split(" ")[2])||0,C!==S.zOrigin&&Ue(this,S,"zOrigin",S.zOrigin,C),Ue(this,a,_,Vr(l),Vr(c)));continue}else if(_==="svgOrigin"){Gn(t,c,1,x,0,this);continue}else if(_ in jo){Nl(this,S,_,m,u?pi(m,u+c):c);continue}else if(_==="smoothOrigin"){Ue(this,S,"smooth",S.smooth,c);continue}else if(_==="force3D"){S[_]=c;continue}else if(_==="transform"){Ll(this,c,t);continue}}else _ in a||(_=xi(_)||_);if(g||(p||p===0)&&(m||m===0)&&!yl.test(c)&&_ in a)v=(l+"").substr((m+"").length),p||(p=0),C=Vt(c)||(_ in ne.units?ne.units[_]:v),v!==C&&(m=He(t,_,l,C)),this._pt=new Jt(this._pt,g?S:a,_,m,(u?pi(m,u+p):p)-m,!g&&(C==="px"||_==="zIndex")&&i.autoRound!==!1?Sl:In),this._pt.u=C||0,v!==C&&C!=="%"&&(this._pt.b=l,this._pt.r=bl);else if(_ in a)Ml.call(this,t,_,l,u?u+c:c);else if(_ in t)this.add(t,_,l||t[_],u?u+c:c,r,n);else if(_!=="parseTransform"){Wn(_,c);continue}g||(_ in a?k.push(_,0,a[_]):k.push(_,1,l||t[_])),s.push(_)}}M&&Bo(this)},render:function(t,i){if(i.tween._time||!rs())for(var e=i._pt;e;)e.r(t,e.d),e=e._next;else i.styles.revert()},get:ke,aliases:pe,getSetter:function(t,i,e){var r=pe[i];return r&&r.indexOf(",")<0&&(i=r),i in Ee&&i!==Zt&&(t._gsap.x||ke(t,"x"))?e&&ks===e?i==="scale"?Tl:Cl:(ks=e||{})&&(i==="scale"?Pl:kl):t.style&&!qn(t.style[i])?wl:~i.indexOf("-")?xl:ts(t,i)},core:{_removeProperty:ni,_getMatrix:ss}};te.utils.checkPrefix=xi;te.core.getStyleSaver=Yo;(function(o,t,i,e){var r=Qt(o+","+t+","+i,function(n){Ee[n]=1});Qt(t,function(n){ne.units[n]="deg",jo[n]=1}),pe[r[13]]=o+","+t,Qt(e,function(n){var s=n.split(":");pe[s[1]]=r[s[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");Qt("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(o){ne.units[o]="px"});te.registerPlugin(Jo);var zr=te.registerPlugin(Jo)||te;zr.core.Tween;var Fr={exports:{}},Pi={},cn={},dn={},Is;function ht(){return Is||(Is=1,function(o){Object.defineProperty(o,"__esModule",{value:!0}),o._registerNode=o.Konva=o.glob=void 0;const t=Math.PI/180;function i(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}o.glob=typeof ys<"u"?ys:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},o.Konva={_global:o.glob,version:"9.3.16",isBrowser:i(),isUnminified:/param/.test((function(r){}).toString()),dblClickWindow:400,getAngle(r){return o.Konva.angleDeg?r*t:r},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_fixTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return o.Konva.DD.isDragging},isTransforming(){var r;return(r=o.Konva.Transformer)===null||r===void 0?void 0:r.isTransforming()},isDragReady(){return!!o.Konva.DD.node},releaseCanvasOnDestroy:!0,document:o.glob.document,_injectGlobal(r){o.glob.Konva=r}};const e=r=>{o.Konva[r.prototype.getClassName()]=r};o._registerNode=e,o.Konva._injectGlobal(o.Konva)}(dn)),dn}var un={},Ns;function Ct(){return Ns||(Ns=1,function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.Util=o.Transform=void 0;const t=ht();class i{constructor(b=[1,0,0,1,0,0]){this.dirty=!1,this.m=b&&b.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new i(this.m)}copyInto(b){b.m[0]=this.m[0],b.m[1]=this.m[1],b.m[2]=this.m[2],b.m[3]=this.m[3],b.m[4]=this.m[4],b.m[5]=this.m[5]}point(b){const S=this.m;return{x:S[0]*b.x+S[2]*b.y+S[4],y:S[1]*b.x+S[3]*b.y+S[5]}}translate(b,S){return this.m[4]+=this.m[0]*b+this.m[2]*S,this.m[5]+=this.m[1]*b+this.m[3]*S,this}scale(b,S){return this.m[0]*=b,this.m[1]*=b,this.m[2]*=S,this.m[3]*=S,this}rotate(b){const S=Math.cos(b),x=Math.sin(b),M=this.m[0]*S+this.m[2]*x,k=this.m[1]*S+this.m[3]*x,T=this.m[0]*-x+this.m[2]*S,A=this.m[1]*-x+this.m[3]*S;return this.m[0]=M,this.m[1]=k,this.m[2]=T,this.m[3]=A,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(b,S){const x=this.m[0]+this.m[2]*S,M=this.m[1]+this.m[3]*S,k=this.m[2]+this.m[0]*b,T=this.m[3]+this.m[1]*b;return this.m[0]=x,this.m[1]=M,this.m[2]=k,this.m[3]=T,this}multiply(b){const S=this.m[0]*b.m[0]+this.m[2]*b.m[1],x=this.m[1]*b.m[0]+this.m[3]*b.m[1],M=this.m[0]*b.m[2]+this.m[2]*b.m[3],k=this.m[1]*b.m[2]+this.m[3]*b.m[3],T=this.m[0]*b.m[4]+this.m[2]*b.m[5]+this.m[4],A=this.m[1]*b.m[4]+this.m[3]*b.m[5]+this.m[5];return this.m[0]=S,this.m[1]=x,this.m[2]=M,this.m[3]=k,this.m[4]=T,this.m[5]=A,this}invert(){const b=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),S=this.m[3]*b,x=-this.m[1]*b,M=-this.m[2]*b,k=this.m[0]*b,T=b*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),A=b*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=S,this.m[1]=x,this.m[2]=M,this.m[3]=k,this.m[4]=T,this.m[5]=A,this}getMatrix(){return this.m}decompose(){const b=this.m[0],S=this.m[1],x=this.m[2],M=this.m[3],k=this.m[4],T=this.m[5],A=b*M-S*x,R={x:k,y:T,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(b!=0||S!=0){const D=Math.sqrt(b*b+S*S);R.rotation=S>0?Math.acos(b/D):-Math.acos(b/D),R.scaleX=D,R.scaleY=A/D,R.skewX=(b*x+S*M)/A,R.skewY=0}else if(x!=0||M!=0){const D=Math.sqrt(x*x+M*M);R.rotation=Math.PI/2-(M>0?Math.acos(-x/D):-Math.acos(x/D)),R.scaleX=A/D,R.scaleY=D,R.skewX=0,R.skewY=(b*x+S*M)/A}return R.rotation=o.Util._getRotation(R.rotation),R}}o.Transform=i;let e="[object Array]",r="[object Number]",n="[object String]",s="[object Boolean]",a=Math.PI/180,h=180/Math.PI,l="#",c="",p="0",m="Konva warning: ",d="Konva error: ",f="rgb(",_={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},v=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,C=[];const u=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(g){setTimeout(g,60)};o.Util={_isElement(g){return!!(g&&g.nodeType==1)},_isFunction(g){return!!(g&&g.constructor&&g.call&&g.apply)},_isPlainObject(g){return!!g&&g.constructor===Object},_isArray(g){return Object.prototype.toString.call(g)===e},_isNumber(g){return Object.prototype.toString.call(g)===r&&!isNaN(g)&&isFinite(g)},_isString(g){return Object.prototype.toString.call(g)===n},_isBoolean(g){return Object.prototype.toString.call(g)===s},isObject(g){return g instanceof Object},isValidSelector(g){if(typeof g!="string")return!1;const b=g[0];return b==="#"||b==="."||b===b.toUpperCase()},_sign(g){return g===0||g>0?1:-1},requestAnimFrame(g){C.push(g),C.length===1&&u(function(){const b=C;C=[],b.forEach(function(S){S()})})},createCanvasElement(){const g=document.createElement("canvas");try{g.style=g.style||{}}catch{}return g},createImageElement(){return document.createElement("img")},_isInDocument(g){for(;g=g.parentNode;)if(g==document)return!0;return!1},_urlToImage(g,b){const S=o.Util.createImageElement();S.onload=function(){b(S)},S.src=g},_rgbToHex(g,b,S){return((1<<24)+(g<<16)+(b<<8)+S).toString(16).slice(1)},_hexToRgb(g){g=g.replace(l,c);const b=parseInt(g,16);return{r:b>>16&255,g:b>>8&255,b:b&255}},getRandomColor(){let g=(Math.random()*16777215<<0).toString(16);for(;g.length<6;)g=p+g;return l+g},getRGB(g){let b;return g in _?(b=_[g],{r:b[0],g:b[1],b:b[2]}):g[0]===l?this._hexToRgb(g.substring(1)):g.substr(0,4)===f?(b=v.exec(g.replace(/ /g,"")),{r:parseInt(b[1],10),g:parseInt(b[2],10),b:parseInt(b[3],10)}):{r:0,g:0,b:0}},colorToRGBA(g){return g=g||"black",o.Util._namedColorToRBA(g)||o.Util._hex3ColorToRGBA(g)||o.Util._hex4ColorToRGBA(g)||o.Util._hex6ColorToRGBA(g)||o.Util._hex8ColorToRGBA(g)||o.Util._rgbColorToRGBA(g)||o.Util._rgbaColorToRGBA(g)||o.Util._hslColorToRGBA(g)},_namedColorToRBA(g){const b=_[g.toLowerCase()];return b?{r:b[0],g:b[1],b:b[2],a:1}:null},_rgbColorToRGBA(g){if(g.indexOf("rgb(")===0){g=g.match(/rgb\(([^)]+)\)/)[1];const b=g.split(/ *, */).map(Number);return{r:b[0],g:b[1],b:b[2],a:1}}},_rgbaColorToRGBA(g){if(g.indexOf("rgba(")===0){g=g.match(/rgba\(([^)]+)\)/)[1];const b=g.split(/ *, */).map((S,x)=>S.slice(-1)==="%"?x===3?parseInt(S)/100:parseInt(S)/100*255:Number(S));return{r:b[0],g:b[1],b:b[2],a:b[3]}}},_hex8ColorToRGBA(g){if(g[0]==="#"&&g.length===9)return{r:parseInt(g.slice(1,3),16),g:parseInt(g.slice(3,5),16),b:parseInt(g.slice(5,7),16),a:parseInt(g.slice(7,9),16)/255}},_hex6ColorToRGBA(g){if(g[0]==="#"&&g.length===7)return{r:parseInt(g.slice(1,3),16),g:parseInt(g.slice(3,5),16),b:parseInt(g.slice(5,7),16),a:1}},_hex4ColorToRGBA(g){if(g[0]==="#"&&g.length===5)return{r:parseInt(g[1]+g[1],16),g:parseInt(g[2]+g[2],16),b:parseInt(g[3]+g[3],16),a:parseInt(g[4]+g[4],16)/255}},_hex3ColorToRGBA(g){if(g[0]==="#"&&g.length===4)return{r:parseInt(g[1]+g[1],16),g:parseInt(g[2]+g[2],16),b:parseInt(g[3]+g[3],16),a:1}},_hslColorToRGBA(g){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(g)){const[b,...S]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(g),x=Number(S[0])/360,M=Number(S[1])/100,k=Number(S[2])/100;let T,A,R;if(M===0)return R=k*255,{r:Math.round(R),g:Math.round(R),b:Math.round(R),a:1};k<.5?T=k*(1+M):T=k+M-k*M;const D=2*k-T,y=[0,0,0];for(let P=0;P<3;P++)A=x+1/3*-(P-1),A<0&&A++,A>1&&A--,6*A<1?R=D+(T-D)*6*A:2*A<1?R=T:3*A<2?R=D+(T-D)*(2/3-A)*6:R=D,y[P]=R*255;return{r:Math.round(y[0]),g:Math.round(y[1]),b:Math.round(y[2]),a:1}}},haveIntersection(g,b){return!(b.x>g.x+g.width||b.x+b.width<g.x||b.y>g.y+g.height||b.y+b.height<g.y)},cloneObject(g){const b={};for(const S in g)this._isPlainObject(g[S])?b[S]=this.cloneObject(g[S]):this._isArray(g[S])?b[S]=this.cloneArray(g[S]):b[S]=g[S];return b},cloneArray(g){return g.slice(0)},degToRad(g){return g*a},radToDeg(g){return g*h},_degToRad(g){return o.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),o.Util.degToRad(g)},_radToDeg(g){return o.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),o.Util.radToDeg(g)},_getRotation(g){return t.Konva.angleDeg?o.Util.radToDeg(g):g},_capitalize(g){return g.charAt(0).toUpperCase()+g.slice(1)},throw(g){throw new Error(d+g)},error(g){console.error(d+g)},warn(g){t.Konva.showWarnings&&console.warn(m+g)},each(g,b){for(const S in g)b(S,g[S])},_inRange(g,b,S){return b<=g&&g<S},_getProjectionToSegment(g,b,S,x,M,k){let T,A,R;const D=(g-S)*(g-S)+(b-x)*(b-x);if(D==0)T=g,A=b,R=(M-S)*(M-S)+(k-x)*(k-x);else{const y=((M-g)*(S-g)+(k-b)*(x-b))/D;y<0?(T=g,A=b,R=(g-M)*(g-M)+(b-k)*(b-k)):y>1?(T=S,A=x,R=(S-M)*(S-M)+(x-k)*(x-k)):(T=g+y*(S-g),A=b+y*(x-b),R=(T-M)*(T-M)+(A-k)*(A-k))}return[T,A,R]},_getProjectionToLine(g,b,S){const x=o.Util.cloneObject(g);let M=Number.MAX_VALUE;return b.forEach(function(k,T){if(!S&&T===b.length-1)return;const A=b[(T+1)%b.length],R=o.Util._getProjectionToSegment(k.x,k.y,A.x,A.y,g.x,g.y),D=R[0],y=R[1],P=R[2];P<M&&(x.x=D,x.y=y,M=P)}),x},_prepareArrayForTween(g,b,S){let x,M=[],k=[];if(g.length>b.length){const A=b;b=g,g=A}for(x=0;x<g.length;x+=2)M.push({x:g[x],y:g[x+1]});for(x=0;x<b.length;x+=2)k.push({x:b[x],y:b[x+1]});const T=[];return k.forEach(function(A){const R=o.Util._getProjectionToLine(A,M,S);T.push(R.x),T.push(R.y)}),T},_prepareToStringify(g){let b;g.visitedByCircularReferenceRemoval=!0;for(const S in g)if(g.hasOwnProperty(S)&&g[S]&&typeof g[S]=="object"){if(b=Object.getOwnPropertyDescriptor(g,S),g[S].visitedByCircularReferenceRemoval||o.Util._isElement(g[S]))if(b.configurable)delete g[S];else return null;else if(o.Util._prepareToStringify(g[S])===null)if(b.configurable)delete g[S];else return null}return delete g.visitedByCircularReferenceRemoval,g},_assign(g,b){for(const S in b)g[S]=b[S];return g},_getFirstPointerId(g){return g.touches?g.changedTouches[0].identifier:g.pointerId||999},releaseCanvas(...g){t.Konva.releaseCanvasOnDestroy&&g.forEach(b=>{b.width=0,b.height=0})},drawRoundedRectPath(g,b,S,x){let M=0,k=0,T=0,A=0;typeof x=="number"?M=k=T=A=Math.min(x,b/2,S/2):(M=Math.min(x[0]||0,b/2,S/2),k=Math.min(x[1]||0,b/2,S/2),A=Math.min(x[2]||0,b/2,S/2),T=Math.min(x[3]||0,b/2,S/2)),g.moveTo(M,0),g.lineTo(b-k,0),g.arc(b-k,k,k,Math.PI*3/2,0,!1),g.lineTo(b,S-A),g.arc(b-A,S-A,A,0,Math.PI/2,!1),g.lineTo(T,S),g.arc(T,S-T,T,Math.PI/2,Math.PI,!1),g.lineTo(0,M),g.arc(M,M,M,Math.PI,Math.PI*3/2,!1)}}}(un)),un}var ki={},fn={},Kt={},Ls;function ct(){if(Ls)return Kt;Ls=1,Object.defineProperty(Kt,"__esModule",{value:!0}),Kt.RGBComponent=e,Kt.alphaComponent=r,Kt.getNumberValidator=n,Kt.getNumberOrArrayOfNumbersValidator=s,Kt.getNumberOrAutoValidator=a,Kt.getStringValidator=h,Kt.getStringOrGradientValidator=l,Kt.getFunctionValidator=c,Kt.getNumberArrayValidator=p,Kt.getBooleanValidator=m,Kt.getComponentValidator=d;const o=ht(),t=Ct();function i(f){return t.Util._isString(f)?'"'+f+'"':Object.prototype.toString.call(f)==="[object Number]"||t.Util._isBoolean(f)?f:Object.prototype.toString.call(f)}function e(f){return f>255?255:f<0?0:Math.round(f)}function r(f){return f>1?1:f<1e-4?1e-4:f}function n(){if(o.Konva.isUnminified)return function(f,_){return t.Util._isNumber(f)||t.Util.warn(i(f)+' is a not valid value for "'+_+'" attribute. The value should be a number.'),f}}function s(f){if(o.Konva.isUnminified)return function(_,v){const C=t.Util._isNumber(_),u=t.Util._isArray(_)&&_.length==f;return!C&&!u&&t.Util.warn(i(_)+' is a not valid value for "'+v+'" attribute. The value should be a number or Array<number>('+f+")"),_}}function a(){if(o.Konva.isUnminified)return function(f,_){return t.Util._isNumber(f)||f==="auto"||t.Util.warn(i(f)+' is a not valid value for "'+_+'" attribute. The value should be a number or "auto".'),f}}function h(){if(o.Konva.isUnminified)return function(f,_){return t.Util._isString(f)||t.Util.warn(i(f)+' is a not valid value for "'+_+'" attribute. The value should be a string.'),f}}function l(){if(o.Konva.isUnminified)return function(f,_){const v=t.Util._isString(f),C=Object.prototype.toString.call(f)==="[object CanvasGradient]"||f&&f.addColorStop;return v||C||t.Util.warn(i(f)+' is a not valid value for "'+_+'" attribute. The value should be a string or a native gradient.'),f}}function c(){if(o.Konva.isUnminified)return function(f,_){return t.Util._isFunction(f)||t.Util.warn(i(f)+' is a not valid value for "'+_+'" attribute. The value should be a function.'),f}}function p(){if(o.Konva.isUnminified)return function(f,_){const v=Int8Array?Object.getPrototypeOf(Int8Array):null;return v&&f instanceof v||(t.Util._isArray(f)?f.forEach(function(C){t.Util._isNumber(C)||t.Util.warn('"'+_+'" attribute has non numeric element '+C+". Make sure that all elements are numbers.")}):t.Util.warn(i(f)+' is a not valid value for "'+_+'" attribute. The value should be a array of numbers.')),f}}function m(){if(o.Konva.isUnminified)return function(f,_){return f===!0||f===!1||t.Util.warn(i(f)+' is a not valid value for "'+_+'" attribute. The value should be a boolean.'),f}}function d(f){if(o.Konva.isUnminified)return function(_,v){return _==null||t.Util.isObject(_)||t.Util.warn(i(_)+' is a not valid value for "'+v+'" attribute. The value should be an object with properties '+f),_}}return Kt}var Gs;function lt(){return Gs||(Gs=1,function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.Factory=void 0;const t=Ct(),i=ct(),e="get",r="set";o.Factory={addGetterSetter(n,s,a,h,l){o.Factory.addGetter(n,s,a),o.Factory.addSetter(n,s,h,l),o.Factory.addOverloadedGetterSetter(n,s)},addGetter(n,s,a){const h=e+t.Util._capitalize(s);n.prototype[h]=n.prototype[h]||function(){const l=this.attrs[s];return l===void 0?a:l}},addSetter(n,s,a,h){const l=r+t.Util._capitalize(s);n.prototype[l]||o.Factory.overWriteSetter(n,s,a,h)},overWriteSetter(n,s,a,h){const l=r+t.Util._capitalize(s);n.prototype[l]=function(c){return a&&c!==void 0&&c!==null&&(c=a.call(this,c,s)),this._setAttr(s,c),h&&h.call(this),this}},addComponentsGetterSetter(n,s,a,h,l){let c=a.length,p=t.Util._capitalize,m=e+p(s),d=r+p(s),f,_;n.prototype[m]=function(){const C={};for(f=0;f<c;f++)_=a[f],C[_]=this.getAttr(s+p(_));return C};const v=(0,i.getComponentValidator)(a);n.prototype[d]=function(C){let u=this.attrs[s],g;h&&(C=h.call(this,C)),v&&v.call(this,C,s);for(g in C)C.hasOwnProperty(g)&&this._setAttr(s+p(g),C[g]);return C||a.forEach(b=>{this._setAttr(s+p(b),void 0)}),this._fireChangeEvent(s,u,C),l&&l.call(this),this},o.Factory.addOverloadedGetterSetter(n,s)},addOverloadedGetterSetter(n,s){const a=t.Util._capitalize(s),h=r+a,l=e+a;n.prototype[s]=function(){return arguments.length?(this[h](arguments[0]),this):this[l]()}},addDeprecatedGetterSetter(n,s,a,h){t.Util.error("Adding deprecated "+s);const l=e+t.Util._capitalize(s),c=s+" property is deprecated and will be removed soon. Look at Konva change log for more information.";n.prototype[l]=function(){t.Util.error(c);const p=this.attrs[s];return p===void 0?a:p},o.Factory.addSetter(n,s,h,function(){t.Util.error(c)}),o.Factory.addOverloadedGetterSetter(n,s)},backCompat(n,s){t.Util.each(s,function(a,h){const l=n.prototype[h],c=e+t.Util._capitalize(a),p=r+t.Util._capitalize(a);function m(){l.apply(this,arguments),t.Util.error('"'+a+'" method is deprecated and will be removed soon. Use ""'+h+'" instead.')}n.prototype[a]=m,n.prototype[c]=m,n.prototype[p]=m})},afterSetFilter(){this._filterUpToDate=!1}}}(fn)),fn}var xe={},Ce={},Us;function Zo(){if(Us)return Ce;Us=1,Object.defineProperty(Ce,"__esModule",{value:!0}),Ce.HitContext=Ce.SceneContext=Ce.Context=void 0;const o=Ct(),t=ht();function i(C){let u=[],g=C.length,b=o.Util,S,x;for(S=0;S<g;S++)x=C[S],b._isNumber(x)?x=Math.round(x*1e3)/1e3:b._isString(x)||(x=x+""),u.push(x);return u}const e=",",r="(",n=")",s="([",a="])",h=";",l="()",c="=",p=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],m=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"],d=100;let f=class{constructor(u){this.canvas=u,t.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(u){u.fillEnabled()&&this._fill(u)}_fill(u){}strokeShape(u){u.hasStroke()&&this._stroke(u)}_stroke(u){}fillStrokeShape(u){u.attrs.fillAfterStrokeEnabled?(this.strokeShape(u),this.fillShape(u)):(this.fillShape(u),this.strokeShape(u))}getTrace(u,g){let b=this.traceArr,S=b.length,x="",M,k,T,A;for(M=0;M<S;M++)k=b[M],T=k.method,T?(A=k.args,x+=T,u?x+=l:o.Util._isArray(A[0])?x+=s+A.join(e)+a:(g&&(A=A.map(R=>typeof R=="number"?Math.floor(R):R)),x+=r+A.join(e)+n)):(x+=k.property,u||(x+=c+k.val)),x+=h;return x}clearTrace(){this.traceArr=[]}_trace(u){let g=this.traceArr,b;g.push(u),b=g.length,b>=d&&g.shift()}reset(){const u=this.getCanvas().getPixelRatio();this.setTransform(1*u,0,0,1*u,0,0)}getCanvas(){return this.canvas}clear(u){const g=this.getCanvas();u?this.clearRect(u.x||0,u.y||0,u.width||0,u.height||0):this.clearRect(0,0,g.getWidth()/g.pixelRatio,g.getHeight()/g.pixelRatio)}_applyLineCap(u){const g=u.attrs.lineCap;g&&this.setAttr("lineCap",g)}_applyOpacity(u){const g=u.getAbsoluteOpacity();g!==1&&this.setAttr("globalAlpha",g)}_applyLineJoin(u){const g=u.attrs.lineJoin;g&&this.setAttr("lineJoin",g)}setAttr(u,g){this._context[u]=g}arc(u,g,b,S,x,M){this._context.arc(u,g,b,S,x,M)}arcTo(u,g,b,S,x){this._context.arcTo(u,g,b,S,x)}beginPath(){this._context.beginPath()}bezierCurveTo(u,g,b,S,x,M){this._context.bezierCurveTo(u,g,b,S,x,M)}clearRect(u,g,b,S){this._context.clearRect(u,g,b,S)}clip(...u){this._context.clip.apply(this._context,u)}closePath(){this._context.closePath()}createImageData(u,g){const b=arguments;if(b.length===2)return this._context.createImageData(u,g);if(b.length===1)return this._context.createImageData(u)}createLinearGradient(u,g,b,S){return this._context.createLinearGradient(u,g,b,S)}createPattern(u,g){return this._context.createPattern(u,g)}createRadialGradient(u,g,b,S,x,M){return this._context.createRadialGradient(u,g,b,S,x,M)}drawImage(u,g,b,S,x,M,k,T,A){const R=arguments,D=this._context;R.length===3?D.drawImage(u,g,b):R.length===5?D.drawImage(u,g,b,S,x):R.length===9&&D.drawImage(u,g,b,S,x,M,k,T,A)}ellipse(u,g,b,S,x,M,k,T){this._context.ellipse(u,g,b,S,x,M,k,T)}isPointInPath(u,g,b,S){return b?this._context.isPointInPath(b,u,g,S):this._context.isPointInPath(u,g,S)}fill(...u){this._context.fill.apply(this._context,u)}fillRect(u,g,b,S){this._context.fillRect(u,g,b,S)}strokeRect(u,g,b,S){this._context.strokeRect(u,g,b,S)}fillText(u,g,b,S){S?this._context.fillText(u,g,b,S):this._context.fillText(u,g,b)}measureText(u){return this._context.measureText(u)}getImageData(u,g,b,S){return this._context.getImageData(u,g,b,S)}lineTo(u,g){this._context.lineTo(u,g)}moveTo(u,g){this._context.moveTo(u,g)}rect(u,g,b,S){this._context.rect(u,g,b,S)}roundRect(u,g,b,S,x){this._context.roundRect(u,g,b,S,x)}putImageData(u,g,b){this._context.putImageData(u,g,b)}quadraticCurveTo(u,g,b,S){this._context.quadraticCurveTo(u,g,b,S)}restore(){this._context.restore()}rotate(u){this._context.rotate(u)}save(){this._context.save()}scale(u,g){this._context.scale(u,g)}setLineDash(u){this._context.setLineDash?this._context.setLineDash(u):"mozDash"in this._context?this._context.mozDash=u:"webkitLineDash"in this._context&&(this._context.webkitLineDash=u)}getLineDash(){return this._context.getLineDash()}setTransform(u,g,b,S,x,M){this._context.setTransform(u,g,b,S,x,M)}stroke(u){u?this._context.stroke(u):this._context.stroke()}strokeText(u,g,b,S){this._context.strokeText(u,g,b,S)}transform(u,g,b,S,x,M){this._context.transform(u,g,b,S,x,M)}translate(u,g){this._context.translate(u,g)}_enableTrace(){let u=this,g=p.length,b=this.setAttr,S,x;const M=function(k){let T=u[k],A;u[k]=function(){return x=i(Array.prototype.slice.call(arguments,0)),A=T.apply(u,arguments),u._trace({method:k,args:x}),A}};for(S=0;S<g;S++)M(p[S]);u.setAttr=function(){b.apply(u,arguments);const k=arguments[0];let T=arguments[1];(k==="shadowOffsetX"||k==="shadowOffsetY"||k==="shadowBlur")&&(T=T/this.canvas.getPixelRatio()),u._trace({property:k,val:T})}}_applyGlobalCompositeOperation(u){const g=u.attrs.globalCompositeOperation;!g||g==="source-over"||this.setAttr("globalCompositeOperation",g)}};Ce.Context=f,m.forEach(function(C){Object.defineProperty(f.prototype,C,{get(){return this._context[C]},set(u){this._context[C]=u}})});class _ extends f{constructor(u,{willReadFrequently:g=!1}={}){super(u),this._context=u._canvas.getContext("2d",{willReadFrequently:g})}_fillColor(u){const g=u.fill();this.setAttr("fillStyle",g),u._fillFunc(this)}_fillPattern(u){this.setAttr("fillStyle",u._getFillPattern()),u._fillFunc(this)}_fillLinearGradient(u){const g=u._getLinearGradient();g&&(this.setAttr("fillStyle",g),u._fillFunc(this))}_fillRadialGradient(u){const g=u._getRadialGradient();g&&(this.setAttr("fillStyle",g),u._fillFunc(this))}_fill(u){const g=u.fill(),b=u.getFillPriority();if(g&&b==="color"){this._fillColor(u);return}const S=u.getFillPatternImage();if(S&&b==="pattern"){this._fillPattern(u);return}const x=u.getFillLinearGradientColorStops();if(x&&b==="linear-gradient"){this._fillLinearGradient(u);return}const M=u.getFillRadialGradientColorStops();if(M&&b==="radial-gradient"){this._fillRadialGradient(u);return}g?this._fillColor(u):S?this._fillPattern(u):x?this._fillLinearGradient(u):M&&this._fillRadialGradient(u)}_strokeLinearGradient(u){const g=u.getStrokeLinearGradientStartPoint(),b=u.getStrokeLinearGradientEndPoint(),S=u.getStrokeLinearGradientColorStops(),x=this.createLinearGradient(g.x,g.y,b.x,b.y);if(S){for(let M=0;M<S.length;M+=2)x.addColorStop(S[M],S[M+1]);this.setAttr("strokeStyle",x)}}_stroke(u){const g=u.dash(),b=u.getStrokeScaleEnabled();if(u.hasStroke()){if(!b){this.save();const x=this.getCanvas().getPixelRatio();this.setTransform(x,0,0,x,0,0)}this._applyLineCap(u),g&&u.dashEnabled()&&(this.setLineDash(g),this.setAttr("lineDashOffset",u.dashOffset())),this.setAttr("lineWidth",u.strokeWidth()),u.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),u.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(u):this.setAttr("strokeStyle",u.stroke()),u._strokeFunc(this),b||this.restore()}}_applyShadow(u){var g,b,S;const x=(g=u.getShadowRGBA())!==null&&g!==void 0?g:"black",M=(b=u.getShadowBlur())!==null&&b!==void 0?b:5,k=(S=u.getShadowOffset())!==null&&S!==void 0?S:{x:0,y:0},T=u.getAbsoluteScale(),A=this.canvas.getPixelRatio(),R=T.x*A,D=T.y*A;this.setAttr("shadowColor",x),this.setAttr("shadowBlur",M*Math.min(Math.abs(R),Math.abs(D))),this.setAttr("shadowOffsetX",k.x*R),this.setAttr("shadowOffsetY",k.y*D)}}Ce.SceneContext=_;class v extends f{constructor(u){super(u),this._context=u._canvas.getContext("2d",{willReadFrequently:!0})}_fill(u){this.save(),this.setAttr("fillStyle",u.colorKey),u._fillFuncHit(this),this.restore()}strokeShape(u){u.hasHitStroke()&&this._stroke(u)}_stroke(u){if(u.hasHitStroke()){const g=u.getStrokeScaleEnabled();if(!g){this.save();const x=this.getCanvas().getPixelRatio();this.setTransform(x,0,0,x,0,0)}this._applyLineCap(u);const b=u.hitStrokeWidth(),S=b==="auto"?u.strokeWidth():b;this.setAttr("lineWidth",S),this.setAttr("strokeStyle",u.colorKey),u._strokeFuncHit(this),g||this.restore()}}}return Ce.HitContext=v,Ce}var Bs;function Xr(){if(Bs)return xe;Bs=1,Object.defineProperty(xe,"__esModule",{value:!0}),xe.HitCanvas=xe.SceneCanvas=xe.Canvas=void 0;const o=Ct(),t=Zo(),i=ht(),e=lt(),r=ct();let n;function s(){if(n)return n;const c=o.Util.createCanvasElement(),p=c.getContext("2d");return n=function(){const m=i.Konva._global.devicePixelRatio||1,d=p.webkitBackingStorePixelRatio||p.mozBackingStorePixelRatio||p.msBackingStorePixelRatio||p.oBackingStorePixelRatio||p.backingStorePixelRatio||1;return m/d}(),o.Util.releaseCanvas(c),n}let a=class{constructor(p){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const d=(p||{}).pixelRatio||i.Konva.pixelRatio||s();this.pixelRatio=d,this._canvas=o.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(p){const m=this.pixelRatio;this.pixelRatio=p,this.setSize(this.getWidth()/m,this.getHeight()/m)}setWidth(p){this.width=this._canvas.width=p*this.pixelRatio,this._canvas.style.width=p+"px";const m=this.pixelRatio;this.getContext()._context.scale(m,m)}setHeight(p){this.height=this._canvas.height=p*this.pixelRatio,this._canvas.style.height=p+"px";const m=this.pixelRatio;this.getContext()._context.scale(m,m)}getWidth(){return this.width}getHeight(){return this.height}setSize(p,m){this.setWidth(p||0),this.setHeight(m||0)}toDataURL(p,m){try{return this._canvas.toDataURL(p,m)}catch{try{return this._canvas.toDataURL()}catch(f){return o.Util.error("Unable to get data URL. "+f.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}};xe.Canvas=a,e.Factory.addGetterSetter(a,"pixelRatio",void 0,(0,r.getNumberValidator)());class h extends a{constructor(p={width:0,height:0,willReadFrequently:!1}){super(p),this.context=new t.SceneContext(this,{willReadFrequently:p.willReadFrequently}),this.setSize(p.width,p.height)}}xe.SceneCanvas=h;class l extends a{constructor(p={width:0,height:0}){super(p),this.hitCanvas=!0,this.context=new t.HitContext(this),this.setSize(p.width,p.height)}}return xe.HitCanvas=l,xe}var gn={},Vs;function as(){return Vs||(Vs=1,function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.DD=void 0;const t=ht(),i=Ct();o.DD={get isDragging(){let e=!1;return o.DD._dragElements.forEach(r=>{r.dragStatus==="dragging"&&(e=!0)}),e},justDragged:!1,get node(){let e;return o.DD._dragElements.forEach(r=>{e=r.node}),e},_dragElements:new Map,_drag(e){const r=[];o.DD._dragElements.forEach((n,s)=>{const{node:a}=n,h=a.getStage();h.setPointersPositions(e),n.pointerId===void 0&&(n.pointerId=i.Util._getFirstPointerId(e));const l=h._changedPointerPositions.find(c=>c.id===n.pointerId);if(l){if(n.dragStatus!=="dragging"){const c=a.dragDistance();if(Math.max(Math.abs(l.x-n.startPointerPos.x),Math.abs(l.y-n.startPointerPos.y))<c||(a.startDrag({evt:e}),!a.isDragging()))return}a._setDragPosition(e,n),r.push(a)}}),r.forEach(n=>{n.fire("dragmove",{type:"dragmove",target:n,evt:e},!0)})},_endDragBefore(e){const r=[];o.DD._dragElements.forEach(n=>{const{node:s}=n,a=s.getStage();if(e&&a.setPointersPositions(e),!a._changedPointerPositions.find(c=>c.id===n.pointerId))return;(n.dragStatus==="dragging"||n.dragStatus==="stopped")&&(o.DD.justDragged=!0,t.Konva._mouseListenClick=!1,t.Konva._touchListenClick=!1,t.Konva._pointerListenClick=!1,n.dragStatus="stopped");const l=n.node.getLayer()||n.node instanceof t.Konva.Stage&&n.node;l&&r.indexOf(l)===-1&&r.push(l)}),r.forEach(n=>{n.draw()})},_endDragAfter(e){o.DD._dragElements.forEach((r,n)=>{r.dragStatus==="stopped"&&r.node.fire("dragend",{type:"dragend",target:r.node,evt:e},!0),r.dragStatus!=="dragging"&&o.DD._dragElements.delete(n)})}},t.Konva.isBrowser&&(window.addEventListener("mouseup",o.DD._endDragBefore,!0),window.addEventListener("touchend",o.DD._endDragBefore,!0),window.addEventListener("touchcancel",o.DD._endDragBefore,!0),window.addEventListener("mousemove",o.DD._drag),window.addEventListener("touchmove",o.DD._drag),window.addEventListener("mouseup",o.DD._endDragAfter,!1),window.addEventListener("touchend",o.DD._endDragAfter,!1),window.addEventListener("touchcancel",o.DD._endDragAfter,!1))}(gn)),gn}var zs;function kt(){if(zs)return ki;zs=1,Object.defineProperty(ki,"__esModule",{value:!0}),ki.Node=void 0;const o=Ct(),t=lt(),i=Xr(),e=ht(),r=as(),n=ct(),s="absoluteOpacity",a="allEventListeners",h="absoluteTransform",l="absoluteScale",c="canvas",p="Change",m="children",d="konva",f="listening",_="mouseenter",v="mouseleave",C="set",u="Shape",g=" ",b="stage",S="transform",x="Stage",M="visible",k=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(g);let T=1,A=class Un{constructor(y){this._id=T++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(y),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(y){(y===S||y===h)&&this._cache.get(y)?this._cache.get(y).dirty=!0:y?this._cache.delete(y):this._cache.clear()}_getCache(y,P){let w=this._cache.get(y);return(w===void 0||(y===S||y===h)&&w.dirty===!0)&&(w=P.call(this),this._cache.set(y,w)),w}_calculate(y,P,w){if(!this._attachedDepsListeners.get(y)){const E=P.map(F=>F+"Change.konva").join(g);this.on(E,()=>{this._clearCache(y)}),this._attachedDepsListeners.set(y,!0)}return this._getCache(y,w)}_getCanvasCache(){return this._cache.get(c)}_clearSelfAndDescendantCache(y){this._clearCache(y),y===h&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(c)){const{scene:y,filter:P,hit:w}=this._cache.get(c);o.Util.releaseCanvas(y,P,w),this._cache.delete(c)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(y){const P=y||{};let w={};(P.x===void 0||P.y===void 0||P.width===void 0||P.height===void 0)&&(w=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let E=Math.ceil(P.width||w.width),F=Math.ceil(P.height||w.height),N=P.pixelRatio,z=P.x===void 0?Math.floor(w.x):P.x,B=P.y===void 0?Math.floor(w.y):P.y,Y=P.offset||0,K=P.drawBorder||!1,H=P.hitCanvasPixelRatio||1;if(!E||!F){o.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const X=Math.abs(Math.round(w.x)-z)>.5?1:0,L=Math.abs(Math.round(w.y)-B)>.5?1:0;E+=Y*2+X,F+=Y*2+L,z-=Y,B-=Y;const G=new i.SceneCanvas({pixelRatio:N,width:E,height:F}),O=new i.SceneCanvas({pixelRatio:N,width:0,height:0,willReadFrequently:!0}),I=new i.HitCanvas({pixelRatio:H,width:E,height:F}),U=G.getContext(),W=I.getContext();return I.isCache=!0,G.isCache=!0,this._cache.delete(c),this._filterUpToDate=!1,P.imageSmoothingEnabled===!1&&(G.getContext()._context.imageSmoothingEnabled=!1,O.getContext()._context.imageSmoothingEnabled=!1),U.save(),W.save(),U.translate(-z,-B),W.translate(-z,-B),this._isUnderCache=!0,this._clearSelfAndDescendantCache(s),this._clearSelfAndDescendantCache(l),this.drawScene(G,this),this.drawHit(I,this),this._isUnderCache=!1,U.restore(),W.restore(),K&&(U.save(),U.beginPath(),U.rect(0,0,E,F),U.closePath(),U.setAttr("strokeStyle","red"),U.setAttr("lineWidth",5),U.stroke(),U.restore()),this._cache.set(c,{scene:G,filter:O,hit:I,x:z,y:B}),this._requestDraw(),this}isCached(){return this._cache.has(c)}getClientRect(y){throw new Error('abstract "getClientRect" method call')}_transformedRect(y,P){const w=[{x:y.x,y:y.y},{x:y.x+y.width,y:y.y},{x:y.x+y.width,y:y.y+y.height},{x:y.x,y:y.y+y.height}];let E=1/0,F=1/0,N=-1/0,z=-1/0;const B=this.getAbsoluteTransform(P);return w.forEach(function(Y){const K=B.point(Y);E===void 0&&(E=N=K.x,F=z=K.y),E=Math.min(E,K.x),F=Math.min(F,K.y),N=Math.max(N,K.x),z=Math.max(z,K.y)}),{x:E,y:F,width:N-E,height:z-F}}_drawCachedSceneCanvas(y){y.save(),y._applyOpacity(this),y._applyGlobalCompositeOperation(this);const P=this._getCanvasCache();y.translate(P.x,P.y);const w=this._getCachedSceneCanvas(),E=w.pixelRatio;y.drawImage(w._canvas,0,0,w.width/E,w.height/E),y.restore()}_drawCachedHitCanvas(y){const P=this._getCanvasCache(),w=P.hit;y.save(),y.translate(P.x,P.y),y.drawImage(w._canvas,0,0,w.width/w.pixelRatio,w.height/w.pixelRatio),y.restore()}_getCachedSceneCanvas(){let y=this.filters(),P=this._getCanvasCache(),w=P.scene,E=P.filter,F=E.getContext(),N,z,B,Y;if(y){if(!this._filterUpToDate){const K=w.pixelRatio;E.setSize(w.width/w.pixelRatio,w.height/w.pixelRatio);try{for(N=y.length,F.clear(),F.drawImage(w._canvas,0,0,w.getWidth()/K,w.getHeight()/K),z=F.getImageData(0,0,E.getWidth(),E.getHeight()),B=0;B<N;B++){if(Y=y[B],typeof Y!="function"){o.Util.error("Filter should be type of function, but got "+typeof Y+" instead. Please check correct filters");continue}Y.call(this,z),F.putImageData(z,0,0)}}catch(H){o.Util.error("Unable to apply filter. "+H.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return E}return w}on(y,P){if(this._cache&&this._cache.delete(a),arguments.length===3)return this._delegate.apply(this,arguments);let w=y.split(g),E=w.length,F,N,z,B,Y;for(F=0;F<E;F++)N=w[F],z=N.split("."),B=z[0],Y=z[1]||"",this.eventListeners[B]||(this.eventListeners[B]=[]),this.eventListeners[B].push({name:Y,handler:P});return this}off(y,P){let w=(y||"").split(g),E=w.length,F,N,z,B,Y,K;if(this._cache&&this._cache.delete(a),!y)for(N in this.eventListeners)this._off(N);for(F=0;F<E;F++)if(z=w[F],B=z.split("."),Y=B[0],K=B[1],Y)this.eventListeners[Y]&&this._off(Y,K,P);else for(N in this.eventListeners)this._off(N,K,P);return this}dispatchEvent(y){const P={target:this,type:y.type,evt:y};return this.fire(y.type,P),this}addEventListener(y,P){return this.on(y,function(w){P.call(this,w.evt)}),this}removeEventListener(y){return this.off(y),this}_delegate(y,P,w){const E=this;this.on(y,function(F){const N=F.target.findAncestors(P,!0,E);for(let z=0;z<N.length;z++)F=o.Util.cloneObject(F),F.currentTarget=N[z],w.call(N[z],F)})}remove(){return this.isDragging()&&this.stopDrag(),r.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(h),this._clearSelfAndDescendantCache(s),this._clearSelfAndDescendantCache(l),this._clearSelfAndDescendantCache(b),this._clearSelfAndDescendantCache(M),this._clearSelfAndDescendantCache(f)}_remove(){this._clearCaches();const y=this.getParent();y&&y.children&&(y.children.splice(this.index,1),y._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(y){const P="get"+o.Util._capitalize(y);return o.Util._isFunction(this[P])?this[P]():this.attrs[y]}getAncestors(){let y=this.getParent(),P=[];for(;y;)P.push(y),y=y.getParent();return P}getAttrs(){return this.attrs||{}}setAttrs(y){return this._batchTransformChanges(()=>{let P,w;if(!y)return this;for(P in y)P!==m&&(w=C+o.Util._capitalize(P),o.Util._isFunction(this[w])?this[w](y[P]):this._setAttr(P,y[P]))}),this}isListening(){return this._getCache(f,this._isListening)}_isListening(y){if(!this.listening())return!1;const w=this.getParent();return w&&w!==y&&this!==y?w._isListening(y):!0}isVisible(){return this._getCache(M,this._isVisible)}_isVisible(y){if(!this.visible())return!1;const w=this.getParent();return w&&w!==y&&this!==y?w._isVisible(y):!0}shouldDrawHit(y,P=!1){if(y)return this._isVisible(y)&&this._isListening(y);const w=this.getLayer();let E=!1;r.DD._dragElements.forEach(N=>{N.dragStatus==="dragging"&&(N.node.nodeType==="Stage"||N.node.getLayer()===w)&&(E=!0)});const F=!P&&!e.Konva.hitOnDragEnabled&&(E||e.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!F}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let y=this.getDepth(),P=this,w=0,E,F,N,z;function B(K){for(E=[],F=K.length,N=0;N<F;N++)z=K[N],w++,z.nodeType!==u&&(E=E.concat(z.getChildren().slice())),z._id===P._id&&(N=F);E.length>0&&E[0].getDepth()<=y&&B(E)}const Y=this.getStage();return P.nodeType!==x&&Y&&B(Y.getChildren()),w}getDepth(){let y=0,P=this.parent;for(;P;)y++,P=P.parent;return y}_batchTransformChanges(y){this._batchingTransformChange=!0,y(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(S),this._clearSelfAndDescendantCache(h)),this._needClearTransformCache=!1}setPosition(y){return this._batchTransformChanges(()=>{this.x(y.x),this.y(y.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const y=this.getStage();if(!y)return null;const P=y.getPointerPosition();if(!P)return null;const w=this.getAbsoluteTransform().copy();return w.invert(),w.point(P)}getAbsolutePosition(y){let P=!1,w=this.parent;for(;w;){if(w.isCached()){P=!0;break}w=w.parent}P&&!y&&(y=!0);const E=this.getAbsoluteTransform(y).getMatrix(),F=new o.Transform,N=this.offset();return F.m=E.slice(),F.translate(N.x,N.y),F.getTranslation()}setAbsolutePosition(y){const{x:P,y:w,...E}=this._clearTransform();this.attrs.x=P,this.attrs.y=w,this._clearCache(S);const F=this._getAbsoluteTransform().copy();return F.invert(),F.translate(y.x,y.y),y={x:this.attrs.x+F.getTranslation().x,y:this.attrs.y+F.getTranslation().y},this._setTransform(E),this.setPosition({x:y.x,y:y.y}),this._clearCache(S),this._clearSelfAndDescendantCache(h),this}_setTransform(y){let P;for(P in y)this.attrs[P]=y[P]}_clearTransform(){const y={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,y}move(y){let P=y.x,w=y.y,E=this.x(),F=this.y();return P!==void 0&&(E+=P),w!==void 0&&(F+=w),this.setPosition({x:E,y:F}),this}_eachAncestorReverse(y,P){let w=[],E=this.getParent(),F,N;if(!(P&&P._id===this._id)){for(w.unshift(this);E&&(!P||E._id!==P._id);)w.unshift(E),E=E.parent;for(F=w.length,N=0;N<F;N++)y(w[N])}}rotate(y){return this.rotation(this.rotation()+y),this}moveToTop(){if(!this.parent)return o.Util.warn("Node has no parent. moveToTop function is ignored."),!1;const y=this.index,P=this.parent.getChildren().length;return y<P-1?(this.parent.children.splice(y,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return o.Util.warn("Node has no parent. moveUp function is ignored."),!1;const y=this.index,P=this.parent.getChildren().length;return y<P-1?(this.parent.children.splice(y,1),this.parent.children.splice(y+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return o.Util.warn("Node has no parent. moveDown function is ignored."),!1;const y=this.index;return y>0?(this.parent.children.splice(y,1),this.parent.children.splice(y-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return o.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;const y=this.index;return y>0?(this.parent.children.splice(y,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(y){if(!this.parent)return o.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(y<0||y>=this.parent.children.length)&&o.Util.warn("Unexpected value "+y+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const P=this.index;return this.parent.children.splice(P,1),this.parent.children.splice(y,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(s,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let y=this.opacity();const P=this.getParent();return P&&!P._isUnderCache&&(y*=P.getAbsoluteOpacity()),y}moveTo(y){return this.getParent()!==y&&(this._remove(),y.add(this)),this}toObject(){let y=this.getAttrs(),P,w,E,F,N;const z={attrs:{},className:this.getClassName()};for(P in y)w=y[P],N=o.Util.isObject(w)&&!o.Util._isPlainObject(w)&&!o.Util._isArray(w),!N&&(E=typeof this[P]=="function"&&this[P],delete y[P],F=E?E.call(this):null,y[P]=w,F!==w&&(z.attrs[P]=w));return o.Util._prepareToStringify(z)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(y,P,w){const E=[];P&&this._isMatch(y)&&E.push(this);let F=this.parent;for(;F;){if(F===w)return E;F._isMatch(y)&&E.push(F),F=F.parent}return E}isAncestorOf(y){return!1}findAncestor(y,P,w){return this.findAncestors(y,P,w)[0]}_isMatch(y){if(!y)return!1;if(typeof y=="function")return y(this);let P=y.replace(/ /g,"").split(","),w=P.length,E,F;for(E=0;E<w;E++)if(F=P[E],o.Util.isValidSelector(F)||(o.Util.warn('Selector "'+F+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),o.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),o.Util.warn("Konva is awesome, right?")),F.charAt(0)==="#"){if(this.id()===F.slice(1))return!0}else if(F.charAt(0)==="."){if(this.hasName(F.slice(1)))return!0}else if(this.className===F||this.nodeType===F)return!0;return!1}getLayer(){const y=this.getParent();return y?y.getLayer():null}getStage(){return this._getCache(b,this._getStage)}_getStage(){const y=this.getParent();return y?y.getStage():null}fire(y,P={},w){return P.target=P.target||this,w?this._fireAndBubble(y,P):this._fire(y,P),this}getAbsoluteTransform(y){return y?this._getAbsoluteTransform(y):this._getCache(h,this._getAbsoluteTransform)}_getAbsoluteTransform(y){let P;if(y)return P=new o.Transform,this._eachAncestorReverse(function(w){const E=w.transformsEnabled();E==="all"?P.multiply(w.getTransform()):E==="position"&&P.translate(w.x()-w.offsetX(),w.y()-w.offsetY())},y),P;{P=this._cache.get(h)||new o.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(P):P.reset();const w=this.transformsEnabled();if(w==="all")P.multiply(this.getTransform());else if(w==="position"){const E=this.attrs.x||0,F=this.attrs.y||0,N=this.attrs.offsetX||0,z=this.attrs.offsetY||0;P.translate(E-N,F-z)}return P.dirty=!1,P}}getAbsoluteScale(y){let P=this;for(;P;)P._isUnderCache&&(y=P),P=P.getParent();const E=this.getAbsoluteTransform(y).decompose();return{x:E.scaleX,y:E.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(S,this._getTransform)}_getTransform(){var y,P;const w=this._cache.get(S)||new o.Transform;w.reset();const E=this.x(),F=this.y(),N=e.Konva.getAngle(this.rotation()),z=(y=this.attrs.scaleX)!==null&&y!==void 0?y:1,B=(P=this.attrs.scaleY)!==null&&P!==void 0?P:1,Y=this.attrs.skewX||0,K=this.attrs.skewY||0,H=this.attrs.offsetX||0,X=this.attrs.offsetY||0;return(E!==0||F!==0)&&w.translate(E,F),N!==0&&w.rotate(N),(Y!==0||K!==0)&&w.skew(Y,K),(z!==1||B!==1)&&w.scale(z,B),(H!==0||X!==0)&&w.translate(-1*H,-1*X),w.dirty=!1,w}clone(y){let P=o.Util.cloneObject(this.attrs),w,E,F,N,z;for(w in y)P[w]=y[w];const B=new this.constructor(P);for(w in this.eventListeners)for(E=this.eventListeners[w],F=E.length,N=0;N<F;N++)z=E[N],z.name.indexOf(d)<0&&(B.eventListeners[w]||(B.eventListeners[w]=[]),B.eventListeners[w].push(z));return B}_toKonvaCanvas(y){y=y||{};const P=this.getClientRect(),w=this.getStage(),E=y.x!==void 0?y.x:Math.floor(P.x),F=y.y!==void 0?y.y:Math.floor(P.y),N=y.pixelRatio||1,z=new i.SceneCanvas({width:y.width||Math.ceil(P.width)||(w?w.width():0),height:y.height||Math.ceil(P.height)||(w?w.height():0),pixelRatio:N}),B=z.getContext(),Y=new i.SceneCanvas({width:z.width/z.pixelRatio+Math.abs(E),height:z.height/z.pixelRatio+Math.abs(F),pixelRatio:z.pixelRatio});return y.imageSmoothingEnabled===!1&&(B._context.imageSmoothingEnabled=!1),B.save(),(E||F)&&B.translate(-1*E,-1*F),this.drawScene(z,void 0,Y),B.restore(),z}toCanvas(y){return this._toKonvaCanvas(y)._canvas}toDataURL(y){y=y||{};const P=y.mimeType||null,w=y.quality||null,E=this._toKonvaCanvas(y).toDataURL(P,w);return y.callback&&y.callback(E),E}toImage(y){return new Promise((P,w)=>{try{const E=y==null?void 0:y.callback;E&&delete y.callback,o.Util._urlToImage(this.toDataURL(y),function(F){P(F),E==null||E(F)})}catch(E){w(E)}})}toBlob(y){return new Promise((P,w)=>{try{const E=y==null?void 0:y.callback;E&&delete y.callback,this.toCanvas(y).toBlob(F=>{P(F),E==null||E(F)},y==null?void 0:y.mimeType,y==null?void 0:y.quality)}catch(E){w(E)}})}setSize(y){return this.width(y.width),this.height(y.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():e.Konva.dragDistance}_off(y,P,w){let E=this.eventListeners[y],F,N,z;for(F=0;F<E.length;F++)if(N=E[F].name,z=E[F].handler,(N!=="konva"||P==="konva")&&(!P||N===P)&&(!w||w===z)){if(E.splice(F,1),E.length===0){delete this.eventListeners[y];break}F--}}_fireChangeEvent(y,P,w){this._fire(y+p,{oldVal:P,newVal:w})}addName(y){if(!this.hasName(y)){const P=this.name(),w=P?P+" "+y:y;this.name(w)}return this}hasName(y){if(!y)return!1;const P=this.name();return P?(P||"").split(/\s/g).indexOf(y)!==-1:!1}removeName(y){const P=(this.name()||"").split(/\s/g),w=P.indexOf(y);return w!==-1&&(P.splice(w,1),this.name(P.join(" "))),this}setAttr(y,P){const w=this[C+o.Util._capitalize(y)];return o.Util._isFunction(w)?w.call(this,P):this._setAttr(y,P),this}_requestDraw(){if(e.Konva.autoDrawEnabled){const y=this.getLayer()||this.getStage();y==null||y.batchDraw()}}_setAttr(y,P){const w=this.attrs[y];w===P&&!o.Util.isObject(P)||(P==null?delete this.attrs[y]:this.attrs[y]=P,this._shouldFireChangeEvents&&this._fireChangeEvent(y,w,P),this._requestDraw())}_setComponentAttr(y,P,w){let E;w!==void 0&&(E=this.attrs[y],E||(this.attrs[y]=this.getAttr(y)),this.attrs[y][P]=w,this._fireChangeEvent(y,E,w))}_fireAndBubble(y,P,w){if(P&&this.nodeType===u&&(P.target=this),!((y===_||y===v)&&(w&&(this===w||this.isAncestorOf&&this.isAncestorOf(w))||this.nodeType==="Stage"&&!w))){this._fire(y,P);const F=(y===_||y===v)&&w&&w.isAncestorOf&&w.isAncestorOf(this)&&!w.isAncestorOf(this.parent);(P&&!P.cancelBubble||!P)&&this.parent&&this.parent.isListening()&&!F&&(w&&w.parent?this._fireAndBubble.call(this.parent,y,P,w):this._fireAndBubble.call(this.parent,y,P))}}_getProtoListeners(y){var P,w,E;const F=(P=this._cache.get(a))!==null&&P!==void 0?P:{};let N=F==null?void 0:F[y];if(N===void 0){N=[];let z=Object.getPrototypeOf(this);for(;z;){const B=(E=(w=z.eventListeners)===null||w===void 0?void 0:w[y])!==null&&E!==void 0?E:[];N.push(...B),z=Object.getPrototypeOf(z)}F[y]=N,this._cache.set(a,F)}return N}_fire(y,P){P=P||{},P.currentTarget=this,P.type=y;const w=this._getProtoListeners(y);if(w)for(var E=0;E<w.length;E++)w[E].handler.call(this,P);const F=this.eventListeners[y];if(F)for(var E=0;E<F.length;E++)F[E].handler.call(this,P)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(y){const P=y?y.pointerId:void 0,w=this.getStage(),E=this.getAbsolutePosition();if(!w)return;const F=w._getPointerById(P)||w._changedPointerPositions[0]||E;r.DD._dragElements.set(this._id,{node:this,startPointerPos:F,offset:{x:F.x-E.x,y:F.y-E.y},dragStatus:"ready",pointerId:P})}startDrag(y,P=!0){r.DD._dragElements.has(this._id)||this._createDragElement(y);const w=r.DD._dragElements.get(this._id);w.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:y&&y.evt},P)}_setDragPosition(y,P){const w=this.getStage()._getPointerById(P.pointerId);if(!w)return;let E={x:w.x-P.offset.x,y:w.y-P.offset.y};const F=this.dragBoundFunc();if(F!==void 0){const N=F.call(this,E,y);N?E=N:o.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==E.x||this._lastPos.y!==E.y)&&(this.setAbsolutePosition(E),this._requestDraw()),this._lastPos=E}stopDrag(y){const P=r.DD._dragElements.get(this._id);P&&(P.dragStatus="stopped"),r.DD._endDragBefore(y),r.DD._endDragAfter(y)}setDraggable(y){this._setAttr("draggable",y),this._dragChange()}isDragging(){const y=r.DD._dragElements.get(this._id);return y?y.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(y){if(!(!(y.evt.button!==void 0)||e.Konva.dragButtons.indexOf(y.evt.button)>=0)||this.isDragging())return;let E=!1;r.DD._dragElements.forEach(F=>{this.isAncestorOf(F.node)&&(E=!0)}),E||this._createDragElement(y)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const P=r.DD._dragElements.get(this._id),w=P&&P.dragStatus==="dragging",E=P&&P.dragStatus==="ready";w?this.stopDrag():E&&r.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(y={x:0,y:0}){const P=this.getStage();if(!P)return!1;const w={x:-y.x,y:-y.y,width:P.width()+2*y.x,height:P.height()+2*y.y};return o.Util.haveIntersection(w,this.getClientRect())}static create(y,P){return o.Util._isString(y)&&(y=JSON.parse(y)),this._createNode(y,P)}static _createNode(y,P){let w=Un.prototype.getClassName.call(y),E=y.children,F,N,z;P&&(y.attrs.container=P),e.Konva[w]||(o.Util.warn('Can not find a node with class name "'+w+'". Fallback to "Shape".'),w="Shape");const B=e.Konva[w];if(F=new B(y.attrs),E)for(N=E.length,z=0;z<N;z++)F.add(Un._createNode(E[z]));return F}};ki.Node=A,A.prototype.nodeType="Node",A.prototype._attrsAffectingSize=[],A.prototype.eventListeners={},A.prototype.on.call(A.prototype,k,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(S),this._clearSelfAndDescendantCache(h)}),A.prototype.on.call(A.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(M)}),A.prototype.on.call(A.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(f)}),A.prototype.on.call(A.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(s)});const R=t.Factory.addGetterSetter;return R(A,"zIndex"),R(A,"absolutePosition"),R(A,"position"),R(A,"x",0,(0,n.getNumberValidator)()),R(A,"y",0,(0,n.getNumberValidator)()),R(A,"globalCompositeOperation","source-over",(0,n.getStringValidator)()),R(A,"opacity",1,(0,n.getNumberValidator)()),R(A,"name","",(0,n.getStringValidator)()),R(A,"id","",(0,n.getStringValidator)()),R(A,"rotation",0,(0,n.getNumberValidator)()),t.Factory.addComponentsGetterSetter(A,"scale",["x","y"]),R(A,"scaleX",1,(0,n.getNumberValidator)()),R(A,"scaleY",1,(0,n.getNumberValidator)()),t.Factory.addComponentsGetterSetter(A,"skew",["x","y"]),R(A,"skewX",0,(0,n.getNumberValidator)()),R(A,"skewY",0,(0,n.getNumberValidator)()),t.Factory.addComponentsGetterSetter(A,"offset",["x","y"]),R(A,"offsetX",0,(0,n.getNumberValidator)()),R(A,"offsetY",0,(0,n.getNumberValidator)()),R(A,"dragDistance",null,(0,n.getNumberValidator)()),R(A,"width",0,(0,n.getNumberValidator)()),R(A,"height",0,(0,n.getNumberValidator)()),R(A,"listening",!0,(0,n.getBooleanValidator)()),R(A,"preventDefault",!0,(0,n.getBooleanValidator)()),R(A,"filters",null,function(D){return this._filterUpToDate=!1,D}),R(A,"visible",!0,(0,n.getBooleanValidator)()),R(A,"transformsEnabled","all",(0,n.getStringValidator)()),R(A,"size"),R(A,"dragBoundFunc"),R(A,"draggable",!1,(0,n.getBooleanValidator)()),t.Factory.backCompat(A,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),ki}var Ai={},Hs;function Wr(){if(Hs)return Ai;Hs=1,Object.defineProperty(Ai,"__esModule",{value:!0}),Ai.Container=void 0;const o=lt(),t=kt(),i=ct();let e=class extends t.Node{constructor(){super(...arguments),this.children=[]}getChildren(n){if(!n)return this.children||[];const s=this.children||[],a=[];return s.forEach(function(h){n(h)&&a.push(h)}),a}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(n=>{n.parent=null,n.index=0,n.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(n=>{n.parent=null,n.index=0,n.destroy()}),this.children=[],this._requestDraw(),this}add(...n){if(n.length===0)return this;if(n.length>1){for(let a=0;a<n.length;a++)this.add(n[a]);return this}const s=n[0];return s.getParent()?(s.moveTo(this),this):(this._validateAdd(s),s.index=this.getChildren().length,s.parent=this,s._clearCaches(),this.getChildren().push(s),this._fire("add",{child:s}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(n){return this._generalFind(n,!1)}findOne(n){const s=this._generalFind(n,!0);return s.length>0?s[0]:void 0}_generalFind(n,s){const a=[];return this._descendants(h=>{const l=h._isMatch(n);return l&&a.push(h),!!(l&&s)}),a}_descendants(n){let s=!1;const a=this.getChildren();for(const h of a){if(s=n(h),s)return!0;if(h.hasChildren()&&(s=h._descendants(n),s))return!0}return!1}toObject(){const n=t.Node.prototype.toObject.call(this);return n.children=[],this.getChildren().forEach(s=>{n.children.push(s.toObject())}),n}isAncestorOf(n){let s=n.getParent();for(;s;){if(s._id===this._id)return!0;s=s.getParent()}return!1}clone(n){const s=t.Node.prototype.clone.call(this,n);return this.getChildren().forEach(function(a){s.add(a.clone())}),s}getAllIntersections(n){const s=[];return this.find("Shape").forEach(a=>{a.isVisible()&&a.intersects(n)&&s.push(a)}),s}_clearSelfAndDescendantCache(n){var s;super._clearSelfAndDescendantCache(n),!this.isCached()&&((s=this.children)===null||s===void 0||s.forEach(function(a){a._clearSelfAndDescendantCache(n)}))}_setChildrenIndices(){var n;(n=this.children)===null||n===void 0||n.forEach(function(s,a){s.index=a}),this._requestDraw()}drawScene(n,s,a){const h=this.getLayer(),l=n||h&&h.getCanvas(),c=l&&l.getContext(),p=this._getCanvasCache(),m=p&&p.scene,d=l&&l.isCache;if(!this.isVisible()&&!d)return this;if(m){c.save();const f=this.getAbsoluteTransform(s).getMatrix();c.transform(f[0],f[1],f[2],f[3],f[4],f[5]),this._drawCachedSceneCanvas(c),c.restore()}else this._drawChildren("drawScene",l,s,a);return this}drawHit(n,s){if(!this.shouldDrawHit(s))return this;const a=this.getLayer(),h=n||a&&a.hitCanvas,l=h&&h.getContext(),c=this._getCanvasCache();if(c&&c.hit){l.save();const m=this.getAbsoluteTransform(s).getMatrix();l.transform(m[0],m[1],m[2],m[3],m[4],m[5]),this._drawCachedHitCanvas(l),l.restore()}else this._drawChildren("drawHit",h,s);return this}_drawChildren(n,s,a,h){var l;const c=s&&s.getContext(),p=this.clipWidth(),m=this.clipHeight(),d=this.clipFunc(),f=typeof p=="number"&&typeof m=="number"||d,_=a===this;if(f){c.save();const C=this.getAbsoluteTransform(a);let u=C.getMatrix();c.transform(u[0],u[1],u[2],u[3],u[4],u[5]),c.beginPath();let g;if(d)g=d.call(this,c,this);else{const b=this.clipX(),S=this.clipY();c.rect(b||0,S||0,p,m)}c.clip.apply(c,g),u=C.copy().invert().getMatrix(),c.transform(u[0],u[1],u[2],u[3],u[4],u[5])}const v=!_&&this.globalCompositeOperation()!=="source-over"&&n==="drawScene";v&&(c.save(),c._applyGlobalCompositeOperation(this)),(l=this.children)===null||l===void 0||l.forEach(function(C){C[n](s,a,h)}),v&&c.restore(),f&&c.restore()}getClientRect(n={}){var s;const a=n.skipTransform,h=n.relativeTo;let l,c,p,m,d={x:1/0,y:1/0,width:0,height:0};const f=this;(s=this.children)===null||s===void 0||s.forEach(function(C){if(!C.visible())return;const u=C.getClientRect({relativeTo:f,skipShadow:n.skipShadow,skipStroke:n.skipStroke});u.width===0&&u.height===0||(l===void 0?(l=u.x,c=u.y,p=u.x+u.width,m=u.y+u.height):(l=Math.min(l,u.x),c=Math.min(c,u.y),p=Math.max(p,u.x+u.width),m=Math.max(m,u.y+u.height)))});const _=this.find("Shape");let v=!1;for(let C=0;C<_.length;C++)if(_[C]._isVisible(this)){v=!0;break}return v&&l!==void 0?d={x:l,y:c,width:p-l,height:m-c}:d={x:0,y:0,width:0,height:0},a?d:this._transformedRect(d,h)}};return Ai.Container=e,o.Factory.addComponentsGetterSetter(e,"clip",["x","y","width","height"]),o.Factory.addGetterSetter(e,"clipX",void 0,(0,i.getNumberValidator)()),o.Factory.addGetterSetter(e,"clipY",void 0,(0,i.getNumberValidator)()),o.Factory.addGetterSetter(e,"clipWidth",void 0,(0,i.getNumberValidator)()),o.Factory.addGetterSetter(e,"clipHeight",void 0,(0,i.getNumberValidator)()),o.Factory.addGetterSetter(e,"clipFunc"),Ai}var _n={},De={},qs;function th(){if(qs)return De;qs=1,Object.defineProperty(De,"__esModule",{value:!0}),De.getCapturedShape=e,De.createEvent=r,De.hasPointerCapture=n,De.setPointerCapture=s,De.releaseCapture=a;const o=ht(),t=new Map,i=o.Konva._global.PointerEvent!==void 0;function e(h){return t.get(h)}function r(h){return{evt:h,pointerId:h.pointerId}}function n(h,l){return t.get(h)===l}function s(h,l){a(h),l.getStage()&&(t.set(h,l),i&&l._fire("gotpointercapture",r(new PointerEvent("gotpointercapture"))))}function a(h,l){const c=t.get(h);if(!c)return;const p=c.getStage();p&&p.content,t.delete(h),i&&c._fire("lostpointercapture",r(new PointerEvent("lostpointercapture")))}return De}var Ys;function Gl(){return Ys||(Ys=1,function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.Stage=o.stages=void 0;const t=Ct(),i=lt(),e=Wr(),r=ht(),n=Xr(),s=as(),a=ht(),h=th(),l="Stage",c="string",p="px",m="mouseout",d="mouseleave",f="mouseover",_="mouseenter",v="mousemove",C="mousedown",u="mouseup",g="pointermove",b="pointerdown",S="pointerup",x="pointercancel",M="lostpointercapture",k="pointerout",T="pointerleave",A="pointerover",R="pointerenter",D="contextmenu",y="touchstart",P="touchend",w="touchmove",E="touchcancel",F="wheel",N=5,z=[[_,"_pointerenter"],[C,"_pointerdown"],[v,"_pointermove"],[u,"_pointerup"],[d,"_pointerleave"],[y,"_pointerdown"],[w,"_pointermove"],[P,"_pointerup"],[E,"_pointercancel"],[f,"_pointerover"],[F,"_wheel"],[D,"_contextmenu"],[b,"_pointerdown"],[g,"_pointermove"],[S,"_pointerup"],[x,"_pointercancel"],[M,"_lostpointercapture"]],B={mouse:{[k]:m,[T]:d,[A]:f,[R]:_,[g]:v,[b]:C,[S]:u,[x]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[k]:"touchout",[T]:"touchleave",[A]:"touchover",[R]:"touchenter",[g]:w,[b]:y,[S]:P,[x]:E,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[k]:k,[T]:T,[A]:A,[R]:R,[g]:g,[b]:b,[S]:S,[x]:x,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},Y=G=>G.indexOf("pointer")>=0?"pointer":G.indexOf("touch")>=0?"touch":"mouse",K=G=>{const O=Y(G);if(O==="pointer")return r.Konva.pointerEventsEnabled&&B.pointer;if(O==="touch")return B.touch;if(O==="mouse")return B.mouse};function H(G={}){return(G.clipFunc||G.clipWidth||G.clipHeight)&&t.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),G}const X="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";o.stages=[];class L extends e.Container{constructor(O){super(H(O)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),o.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{H(this.attrs)}),this._checkVisibility()}_validateAdd(O){const I=O.getType()==="Layer",U=O.getType()==="FastLayer";I||U||t.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const O=this.visible()?"":"none";this.content.style.display=O}setContainer(O){if(typeof O===c){if(O.charAt(0)==="."){const U=O.slice(1);O=document.getElementsByClassName(U)[0]}else{var I;O.charAt(0)!=="#"?I=O:I=O.slice(1),O=document.getElementById(I)}if(!O)throw"Can not find container in document with id "+I}return this._setAttr("container",O),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),O.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){let O=this.children,I=O.length,U;for(U=0;U<I;U++)O[U].clear();return this}clone(O){return O||(O={}),O.container=typeof document<"u"&&document.createElement("div"),e.Container.prototype.clone.call(this,O)}destroy(){super.destroy();const O=this.content;O&&t.Util._isInDocument(O)&&this.container().removeChild(O);const I=o.stages.indexOf(this);return I>-1&&o.stages.splice(I,1),t.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const O=this._pointerPositions[0]||this._changedPointerPositions[0];return O?{x:O.x,y:O.y}:(t.Util.warn(X),null)}_getPointerById(O){return this._pointerPositions.find(I=>I.id===O)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(O){O=O||{},O.x=O.x||0,O.y=O.y||0,O.width=O.width||this.width(),O.height=O.height||this.height();const I=new n.SceneCanvas({width:O.width,height:O.height,pixelRatio:O.pixelRatio||1}),U=I.getContext()._context,W=this.children;return(O.x||O.y)&&U.translate(-1*O.x,-1*O.y),W.forEach(function($){if(!$.isVisible())return;const Q=$._toKonvaCanvas(O);U.drawImage(Q._canvas,O.x,O.y,Q.getWidth()/Q.getPixelRatio(),Q.getHeight()/Q.getPixelRatio())}),I}getIntersection(O){if(!O)return null;let I=this.children,U=I.length,W=U-1,$;for($=W;$>=0;$--){const Q=I[$].getIntersection(O);if(Q)return Q}return null}_resizeDOM(){const O=this.width(),I=this.height();this.content&&(this.content.style.width=O+p,this.content.style.height=I+p),this.bufferCanvas.setSize(O,I),this.bufferHitCanvas.setSize(O,I),this.children.forEach(U=>{U.setSize({width:O,height:I}),U.draw()})}add(O,...I){if(arguments.length>1){for(let W=0;W<arguments.length;W++)this.add(arguments[W]);return this}super.add(O);const U=this.children.length;return U>N&&t.Util.warn("The stage has "+U+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),O.setSize({width:this.width(),height:this.height()}),O.draw(),r.Konva.isBrowser&&this.content.appendChild(O.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(O){return h.hasPointerCapture(O,this)}setPointerCapture(O){h.setPointerCapture(O,this)}releaseCapture(O){h.releaseCapture(O,this)}getLayers(){return this.children}_bindContentEvents(){r.Konva.isBrowser&&z.forEach(([O,I])=>{this.content.addEventListener(O,U=>{this[I](U)},{passive:!1})})}_pointerenter(O){this.setPointersPositions(O);const I=K(O.type);I&&this._fire(I.pointerenter,{evt:O,target:this,currentTarget:this})}_pointerover(O){this.setPointersPositions(O);const I=K(O.type);I&&this._fire(I.pointerover,{evt:O,target:this,currentTarget:this})}_getTargetShape(O){let I=this[O+"targetShape"];return I&&!I.getStage()&&(I=null),I}_pointerleave(O){const I=K(O.type),U=Y(O.type);if(!I)return;this.setPointersPositions(O);const W=this._getTargetShape(U),$=!(r.Konva.isDragging()||r.Konva.isTransforming())||r.Konva.hitOnDragEnabled;W&&$?(W._fireAndBubble(I.pointerout,{evt:O}),W._fireAndBubble(I.pointerleave,{evt:O}),this._fire(I.pointerleave,{evt:O,target:this,currentTarget:this}),this[U+"targetShape"]=null):$&&(this._fire(I.pointerleave,{evt:O,target:this,currentTarget:this}),this._fire(I.pointerout,{evt:O,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(O){const I=K(O.type),U=Y(O.type);if(!I)return;this.setPointersPositions(O);let W=!1;this._changedPointerPositions.forEach($=>{const Q=this.getIntersection($);if(s.DD.justDragged=!1,r.Konva["_"+U+"ListenClick"]=!0,!Q||!Q.isListening()){this[U+"ClickStartShape"]=void 0;return}r.Konva.capturePointerEventsEnabled&&Q.setPointerCapture($.id),this[U+"ClickStartShape"]=Q,Q._fireAndBubble(I.pointerdown,{evt:O,pointerId:$.id}),W=!0;const nt=O.type.indexOf("touch")>=0;Q.preventDefault()&&O.cancelable&&nt&&O.preventDefault()}),W||this._fire(I.pointerdown,{evt:O,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(O){const I=K(O.type),U=Y(O.type);if(!I||(r.Konva.isDragging()&&s.DD.node.preventDefault()&&O.cancelable&&O.preventDefault(),this.setPointersPositions(O),!(!(r.Konva.isDragging()||r.Konva.isTransforming())||r.Konva.hitOnDragEnabled)))return;const $={};let Q=!1;const nt=this._getTargetShape(U);this._changedPointerPositions.forEach(et=>{const rt=h.getCapturedShape(et.id)||this.getIntersection(et),Tt=et.id,ut={evt:O,pointerId:Tt},wt=nt!==rt;if(wt&&nt&&(nt._fireAndBubble(I.pointerout,{...ut},rt),nt._fireAndBubble(I.pointerleave,{...ut},rt)),rt){if($[rt._id])return;$[rt._id]=!0}rt&&rt.isListening()?(Q=!0,wt&&(rt._fireAndBubble(I.pointerover,{...ut},nt),rt._fireAndBubble(I.pointerenter,{...ut},nt),this[U+"targetShape"]=rt),rt._fireAndBubble(I.pointermove,{...ut})):nt&&(this._fire(I.pointerover,{evt:O,target:this,currentTarget:this,pointerId:Tt}),this[U+"targetShape"]=null)}),Q||this._fire(I.pointermove,{evt:O,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(O){const I=K(O.type),U=Y(O.type);if(!I)return;this.setPointersPositions(O);const W=this[U+"ClickStartShape"],$=this[U+"ClickEndShape"],Q={};let nt=!1;this._changedPointerPositions.forEach(et=>{const rt=h.getCapturedShape(et.id)||this.getIntersection(et);if(rt){if(rt.releaseCapture(et.id),Q[rt._id])return;Q[rt._id]=!0}const Tt=et.id,ut={evt:O,pointerId:Tt};let wt=!1;r.Konva["_"+U+"InDblClickWindow"]?(wt=!0,clearTimeout(this[U+"DblTimeout"])):s.DD.justDragged||(r.Konva["_"+U+"InDblClickWindow"]=!0,clearTimeout(this[U+"DblTimeout"])),this[U+"DblTimeout"]=setTimeout(function(){r.Konva["_"+U+"InDblClickWindow"]=!1},r.Konva.dblClickWindow),rt&&rt.isListening()?(nt=!0,this[U+"ClickEndShape"]=rt,rt._fireAndBubble(I.pointerup,{...ut}),r.Konva["_"+U+"ListenClick"]&&W&&W===rt&&(rt._fireAndBubble(I.pointerclick,{...ut}),wt&&$&&$===rt&&rt._fireAndBubble(I.pointerdblclick,{...ut}))):(this[U+"ClickEndShape"]=null,r.Konva["_"+U+"ListenClick"]&&this._fire(I.pointerclick,{evt:O,target:this,currentTarget:this,pointerId:Tt}),wt&&this._fire(I.pointerdblclick,{evt:O,target:this,currentTarget:this,pointerId:Tt}))}),nt||this._fire(I.pointerup,{evt:O,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),r.Konva["_"+U+"ListenClick"]=!1,O.cancelable&&U!=="touch"&&O.preventDefault()}_contextmenu(O){this.setPointersPositions(O);const I=this.getIntersection(this.getPointerPosition());I&&I.isListening()?I._fireAndBubble(D,{evt:O}):this._fire(D,{evt:O,target:this,currentTarget:this})}_wheel(O){this.setPointersPositions(O);const I=this.getIntersection(this.getPointerPosition());I&&I.isListening()?I._fireAndBubble(F,{evt:O}):this._fire(F,{evt:O,target:this,currentTarget:this})}_pointercancel(O){this.setPointersPositions(O);const I=h.getCapturedShape(O.pointerId)||this.getIntersection(this.getPointerPosition());I&&I._fireAndBubble(S,h.createEvent(O)),h.releaseCapture(O.pointerId)}_lostpointercapture(O){h.releaseCapture(O.pointerId)}setPointersPositions(O){let I=this._getContentPosition(),U=null,W=null;O=O||window.event,O.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(O.touches,$=>{this._pointerPositions.push({id:$.identifier,x:($.clientX-I.left)/I.scaleX,y:($.clientY-I.top)/I.scaleY})}),Array.prototype.forEach.call(O.changedTouches||O.touches,$=>{this._changedPointerPositions.push({id:$.identifier,x:($.clientX-I.left)/I.scaleX,y:($.clientY-I.top)/I.scaleY})})):(U=(O.clientX-I.left)/I.scaleX,W=(O.clientY-I.top)/I.scaleY,this.pointerPos={x:U,y:W},this._pointerPositions=[{x:U,y:W,id:t.Util._getFirstPointerId(O)}],this._changedPointerPositions=[{x:U,y:W,id:t.Util._getFirstPointerId(O)}])}_setPointerPosition(O){t.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(O)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const O=this.content.getBoundingClientRect();return{top:O.top,left:O.left,scaleX:O.width/this.content.clientWidth||1,scaleY:O.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new n.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new n.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!r.Konva.isBrowser)return;const O=this.container();if(!O)throw"Stage has no container. A container is required.";O.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),O.appendChild(this.content),this._resizeDOM()}cache(){return t.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(O){O.batchDraw()}),this}}o.Stage=L,L.prototype.nodeType=l,(0,a._registerNode)(L),i.Factory.addGetterSetter(L,"container"),r.Konva.isBrowser&&document.addEventListener("visibilitychange",()=>{o.stages.forEach(G=>{G.batchDraw()})})}(_n)),_n}var Ri={},pn={},Xs;function Nt(){return Xs||(Xs=1,function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.Shape=o.shapes=void 0;const t=ht(),i=Ct(),e=lt(),r=kt(),n=ct(),s=ht(),a=th(),h="hasShadow",l="shadowRGBA",c="patternImage",p="linearGradient",m="radialGradient";let d;function f(){return d||(d=i.Util.createCanvasElement().getContext("2d"),d)}o.shapes={};function _(T){const A=this.attrs.fillRule;A?T.fill(A):T.fill()}function v(T){T.stroke()}function C(T){const A=this.attrs.fillRule;A?T.fill(A):T.fill()}function u(T){T.stroke()}function g(){this._clearCache(h)}function b(){this._clearCache(l)}function S(){this._clearCache(c)}function x(){this._clearCache(p)}function M(){this._clearCache(m)}class k extends r.Node{constructor(A){super(A);let R;for(;R=i.Util.getRandomColor(),!(R&&!(R in o.shapes)););this.colorKey=R,o.shapes[R]=this}getContext(){return i.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return i.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(h,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(c,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const R=f().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(R&&R.setTransform){const D=new i.Transform;D.translate(this.fillPatternX(),this.fillPatternY()),D.rotate(t.Konva.getAngle(this.fillPatternRotation())),D.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),D.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const y=D.getMatrix(),P=typeof DOMMatrix>"u"?{a:y[0],b:y[1],c:y[2],d:y[3],e:y[4],f:y[5]}:new DOMMatrix(y);R.setTransform(P)}return R}}_getLinearGradient(){return this._getCache(p,this.__getLinearGradient)}__getLinearGradient(){const A=this.fillLinearGradientColorStops();if(A){const R=f(),D=this.fillLinearGradientStartPoint(),y=this.fillLinearGradientEndPoint(),P=R.createLinearGradient(D.x,D.y,y.x,y.y);for(let w=0;w<A.length;w+=2)P.addColorStop(A[w],A[w+1]);return P}}_getRadialGradient(){return this._getCache(m,this.__getRadialGradient)}__getRadialGradient(){const A=this.fillRadialGradientColorStops();if(A){const R=f(),D=this.fillRadialGradientStartPoint(),y=this.fillRadialGradientEndPoint(),P=R.createRadialGradient(D.x,D.y,this.fillRadialGradientStartRadius(),y.x,y.y,this.fillRadialGradientEndRadius());for(let w=0;w<A.length;w+=2)P.addColorStop(A[w],A[w+1]);return P}}getShadowRGBA(){return this._getCache(l,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const A=i.Util.colorToRGBA(this.shadowColor());if(A)return"rgba("+A.r+","+A.g+","+A.b+","+A.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const A=this.hitStrokeWidth();return A==="auto"?this.hasStroke():this.strokeEnabled()&&!!A}intersects(A){const R=this.getStage();if(!R)return!1;const D=R.bufferHitCanvas;return D.getContext().clear(),this.drawHit(D,void 0,!0),D.context.getImageData(Math.round(A.x),Math.round(A.y),1,1).data[3]>0}destroy(){return r.Node.prototype.destroy.call(this),delete o.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(A){var R;if(!((R=this.attrs.perfectDrawEnabled)!==null&&R!==void 0?R:!0))return!1;const y=A||this.hasFill(),P=this.hasStroke(),w=this.getAbsoluteOpacity()!==1;if(y&&P&&w)return!0;const E=this.hasShadow(),F=this.shadowForStrokeEnabled();return!!(y&&P&&E&&F)}setStrokeHitEnabled(A){i.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),A?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const A=this.size();return{x:this._centroid?-A.width/2:0,y:this._centroid?-A.height/2:0,width:A.width,height:A.height}}getClientRect(A={}){let R=!1,D=this.getParent();for(;D;){if(D.isCached()){R=!0;break}D=D.getParent()}const y=A.skipTransform,P=A.relativeTo||R&&this.getStage()||void 0,w=this.getSelfRect(),F=!A.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,N=w.width+F,z=w.height+F,B=!A.skipShadow&&this.hasShadow(),Y=B?this.shadowOffsetX():0,K=B?this.shadowOffsetY():0,H=N+Math.abs(Y),X=z+Math.abs(K),L=B&&this.shadowBlur()||0,G=H+L*2,O=X+L*2,I={width:G,height:O,x:-(F/2+L)+Math.min(Y,0)+w.x,y:-(F/2+L)+Math.min(K,0)+w.y};return y?I:this._transformedRect(I,P)}drawScene(A,R,D){const y=this.getLayer();let P=A||y.getCanvas(),w=P.getContext(),E=this._getCanvasCache(),F=this.getSceneFunc(),N=this.hasShadow(),z,B;const Y=P.isCache,K=R===this;if(!this.isVisible()&&!K)return this;if(E){w.save();const X=this.getAbsoluteTransform(R).getMatrix();return w.transform(X[0],X[1],X[2],X[3],X[4],X[5]),this._drawCachedSceneCanvas(w),w.restore(),this}if(!F)return this;if(w.save(),this._useBufferCanvas()&&!Y){z=this.getStage();const X=D||z.bufferCanvas;B=X.getContext(),B.clear(),B.save(),B._applyLineJoin(this);var H=this.getAbsoluteTransform(R).getMatrix();B.transform(H[0],H[1],H[2],H[3],H[4],H[5]),F.call(this,B,this),B.restore();const L=X.pixelRatio;N&&w._applyShadow(this),w._applyOpacity(this),w._applyGlobalCompositeOperation(this),w.drawImage(X._canvas,0,0,X.width/L,X.height/L)}else{if(w._applyLineJoin(this),!K){var H=this.getAbsoluteTransform(R).getMatrix();w.transform(H[0],H[1],H[2],H[3],H[4],H[5]),w._applyOpacity(this),w._applyGlobalCompositeOperation(this)}N&&w._applyShadow(this),F.call(this,w,this)}return w.restore(),this}drawHit(A,R,D=!1){if(!this.shouldDrawHit(R,D))return this;const y=this.getLayer(),P=A||y.hitCanvas,w=P&&P.getContext(),E=this.hitFunc()||this.sceneFunc(),F=this._getCanvasCache(),N=F&&F.hit;if(this.colorKey||i.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),N){w.save();const B=this.getAbsoluteTransform(R).getMatrix();return w.transform(B[0],B[1],B[2],B[3],B[4],B[5]),this._drawCachedHitCanvas(w),w.restore(),this}if(!E)return this;if(w.save(),w._applyLineJoin(this),!(this===R)){const B=this.getAbsoluteTransform(R).getMatrix();w.transform(B[0],B[1],B[2],B[3],B[4],B[5])}return E.call(this,w,this),w.restore(),this}drawHitFromCache(A=0){let R=this._getCanvasCache(),D=this._getCachedSceneCanvas(),y=R.hit,P=y.getContext(),w=y.getWidth(),E=y.getHeight(),F,N,z,B,Y,K;P.clear(),P.drawImage(D._canvas,0,0,w,E);try{for(F=P.getImageData(0,0,w,E),N=F.data,z=N.length,B=i.Util._hexToRgb(this.colorKey),Y=0;Y<z;Y+=4)K=N[Y+3],K>A?(N[Y]=B.r,N[Y+1]=B.g,N[Y+2]=B.b,N[Y+3]=255):N[Y+3]=0;P.putImageData(F,0,0)}catch(H){i.Util.error("Unable to draw hit graph from cached scene canvas. "+H.message)}return this}hasPointerCapture(A){return a.hasPointerCapture(A,this)}setPointerCapture(A){a.setPointerCapture(A,this)}releaseCapture(A){a.releaseCapture(A,this)}}o.Shape=k,k.prototype._fillFunc=_,k.prototype._strokeFunc=v,k.prototype._fillFuncHit=C,k.prototype._strokeFuncHit=u,k.prototype._centroid=!1,k.prototype.nodeType="Shape",(0,s._registerNode)(k),k.prototype.eventListeners={},k.prototype.on.call(k.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",g),k.prototype.on.call(k.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",b),k.prototype.on.call(k.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",S),k.prototype.on.call(k.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",x),k.prototype.on.call(k.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",M),e.Factory.addGetterSetter(k,"stroke",void 0,(0,n.getStringOrGradientValidator)()),e.Factory.addGetterSetter(k,"strokeWidth",2,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(k,"fillAfterStrokeEnabled",!1),e.Factory.addGetterSetter(k,"hitStrokeWidth","auto",(0,n.getNumberOrAutoValidator)()),e.Factory.addGetterSetter(k,"strokeHitEnabled",!0,(0,n.getBooleanValidator)()),e.Factory.addGetterSetter(k,"perfectDrawEnabled",!0,(0,n.getBooleanValidator)()),e.Factory.addGetterSetter(k,"shadowForStrokeEnabled",!0,(0,n.getBooleanValidator)()),e.Factory.addGetterSetter(k,"lineJoin"),e.Factory.addGetterSetter(k,"lineCap"),e.Factory.addGetterSetter(k,"sceneFunc"),e.Factory.addGetterSetter(k,"hitFunc"),e.Factory.addGetterSetter(k,"dash"),e.Factory.addGetterSetter(k,"dashOffset",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(k,"shadowColor",void 0,(0,n.getStringValidator)()),e.Factory.addGetterSetter(k,"shadowBlur",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(k,"shadowOpacity",1,(0,n.getNumberValidator)()),e.Factory.addComponentsGetterSetter(k,"shadowOffset",["x","y"]),e.Factory.addGetterSetter(k,"shadowOffsetX",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(k,"shadowOffsetY",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(k,"fillPatternImage"),e.Factory.addGetterSetter(k,"fill",void 0,(0,n.getStringOrGradientValidator)()),e.Factory.addGetterSetter(k,"fillPatternX",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(k,"fillPatternY",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(k,"fillLinearGradientColorStops"),e.Factory.addGetterSetter(k,"strokeLinearGradientColorStops"),e.Factory.addGetterSetter(k,"fillRadialGradientStartRadius",0),e.Factory.addGetterSetter(k,"fillRadialGradientEndRadius",0),e.Factory.addGetterSetter(k,"fillRadialGradientColorStops"),e.Factory.addGetterSetter(k,"fillPatternRepeat","repeat"),e.Factory.addGetterSetter(k,"fillEnabled",!0),e.Factory.addGetterSetter(k,"strokeEnabled",!0),e.Factory.addGetterSetter(k,"shadowEnabled",!0),e.Factory.addGetterSetter(k,"dashEnabled",!0),e.Factory.addGetterSetter(k,"strokeScaleEnabled",!0),e.Factory.addGetterSetter(k,"fillPriority","color"),e.Factory.addComponentsGetterSetter(k,"fillPatternOffset",["x","y"]),e.Factory.addGetterSetter(k,"fillPatternOffsetX",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(k,"fillPatternOffsetY",0,(0,n.getNumberValidator)()),e.Factory.addComponentsGetterSetter(k,"fillPatternScale",["x","y"]),e.Factory.addGetterSetter(k,"fillPatternScaleX",1,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(k,"fillPatternScaleY",1,(0,n.getNumberValidator)()),e.Factory.addComponentsGetterSetter(k,"fillLinearGradientStartPoint",["x","y"]),e.Factory.addComponentsGetterSetter(k,"strokeLinearGradientStartPoint",["x","y"]),e.Factory.addGetterSetter(k,"fillLinearGradientStartPointX",0),e.Factory.addGetterSetter(k,"strokeLinearGradientStartPointX",0),e.Factory.addGetterSetter(k,"fillLinearGradientStartPointY",0),e.Factory.addGetterSetter(k,"strokeLinearGradientStartPointY",0),e.Factory.addComponentsGetterSetter(k,"fillLinearGradientEndPoint",["x","y"]),e.Factory.addComponentsGetterSetter(k,"strokeLinearGradientEndPoint",["x","y"]),e.Factory.addGetterSetter(k,"fillLinearGradientEndPointX",0),e.Factory.addGetterSetter(k,"strokeLinearGradientEndPointX",0),e.Factory.addGetterSetter(k,"fillLinearGradientEndPointY",0),e.Factory.addGetterSetter(k,"strokeLinearGradientEndPointY",0),e.Factory.addComponentsGetterSetter(k,"fillRadialGradientStartPoint",["x","y"]),e.Factory.addGetterSetter(k,"fillRadialGradientStartPointX",0),e.Factory.addGetterSetter(k,"fillRadialGradientStartPointY",0),e.Factory.addComponentsGetterSetter(k,"fillRadialGradientEndPoint",["x","y"]),e.Factory.addGetterSetter(k,"fillRadialGradientEndPointX",0),e.Factory.addGetterSetter(k,"fillRadialGradientEndPointY",0),e.Factory.addGetterSetter(k,"fillPatternRotation",0),e.Factory.addGetterSetter(k,"fillRule",void 0,(0,n.getStringValidator)()),e.Factory.backCompat(k,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})}(pn)),pn}var Ws;function eh(){if(Ws)return Ri;Ws=1,Object.defineProperty(Ri,"__esModule",{value:!0}),Ri.Layer=void 0;const o=Ct(),t=Wr(),i=kt(),e=lt(),r=Xr(),n=ct(),s=Nt(),a=ht(),h="#",l="beforeDraw",c="draw",p=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],m=p.length;let d=class extends t.Container{constructor(_){super(_),this.canvas=new r.SceneCanvas,this.hitCanvas=new r.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(_){return this.getContext().clear(_),this.getHitCanvas().getContext().clear(_),this}setZIndex(_){super.setZIndex(_);const v=this.getStage();return v&&v.content&&(v.content.removeChild(this.getNativeCanvasElement()),_<v.children.length-1?v.content.insertBefore(this.getNativeCanvasElement(),v.children[_+1].getCanvas()._canvas):v.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){i.Node.prototype.moveToTop.call(this);const _=this.getStage();return _&&_.content&&(_.content.removeChild(this.getNativeCanvasElement()),_.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!i.Node.prototype.moveUp.call(this))return!1;const v=this.getStage();return!v||!v.content?!1:(v.content.removeChild(this.getNativeCanvasElement()),this.index<v.children.length-1?v.content.insertBefore(this.getNativeCanvasElement(),v.children[this.index+1].getCanvas()._canvas):v.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(i.Node.prototype.moveDown.call(this)){const _=this.getStage();if(_){const v=_.children;_.content&&(_.content.removeChild(this.getNativeCanvasElement()),_.content.insertBefore(this.getNativeCanvasElement(),v[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(i.Node.prototype.moveToBottom.call(this)){const _=this.getStage();if(_){const v=_.children;_.content&&(_.content.removeChild(this.getNativeCanvasElement()),_.content.insertBefore(this.getNativeCanvasElement(),v[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const _=this.getNativeCanvasElement();return i.Node.prototype.remove.call(this),_&&_.parentNode&&o.Util._isInDocument(_)&&_.parentNode.removeChild(_),this}getStage(){return this.parent}setSize({width:_,height:v}){return this.canvas.setSize(_,v),this.hitCanvas.setSize(_,v),this._setSmoothEnabled(),this}_validateAdd(_){const v=_.getType();v!=="Group"&&v!=="Shape"&&o.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(_){return _=_||{},_.width=_.width||this.getWidth(),_.height=_.height||this.getHeight(),_.x=_.x!==void 0?_.x:this.x(),_.y=_.y!==void 0?_.y:this.y(),i.Node.prototype._toKonvaCanvas.call(this,_)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){o.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){o.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,o.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(_){if(!this.isListening()||!this.isVisible())return null;let v=1,C=!1;for(;;){for(let u=0;u<m;u++){const g=p[u],b=this._getIntersection({x:_.x+g.x*v,y:_.y+g.y*v}),S=b.shape;if(S)return S;if(C=!!b.antialiased,!b.antialiased)break}if(C)v+=1;else return null}}_getIntersection(_){const v=this.hitCanvas.pixelRatio,C=this.hitCanvas.context.getImageData(Math.round(_.x*v),Math.round(_.y*v),1,1).data,u=C[3];if(u===255){const g=o.Util._rgbToHex(C[0],C[1],C[2]),b=s.shapes[h+g];return b?{shape:b}:{antialiased:!0}}else if(u>0)return{antialiased:!0};return{}}drawScene(_,v){const C=this.getLayer(),u=_||C&&C.getCanvas();return this._fire(l,{node:this}),this.clearBeforeDraw()&&u.getContext().clear(),t.Container.prototype.drawScene.call(this,u,v),this._fire(c,{node:this}),this}drawHit(_,v){const C=this.getLayer(),u=_||C&&C.hitCanvas;return C&&C.clearBeforeDraw()&&C.getHitCanvas().getContext().clear(),t.Container.prototype.drawHit.call(this,u,v),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(_){o.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(_)}getHitGraphEnabled(_){return o.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const _=this.parent;!!this.hitCanvas._canvas.parentNode?_.content.removeChild(this.hitCanvas._canvas):_.content.appendChild(this.hitCanvas._canvas)}destroy(){return o.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}};return Ri.Layer=d,d.prototype.nodeType="Layer",(0,a._registerNode)(d),e.Factory.addGetterSetter(d,"imageSmoothingEnabled",!0),e.Factory.addGetterSetter(d,"clearBeforeDraw",!0),e.Factory.addGetterSetter(d,"hitGraphEnabled",!0,(0,n.getBooleanValidator)()),Ri}var Ei={},Ks;function Ul(){if(Ks)return Ei;Ks=1,Object.defineProperty(Ei,"__esModule",{value:!0}),Ei.FastLayer=void 0;const o=Ct(),t=eh(),i=ht();let e=class extends t.Layer{constructor(n){super(n),this.listening(!1),o.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}};return Ei.FastLayer=e,e.prototype.nodeType="FastLayer",(0,i._registerNode)(e),Ei}var Mi={},js;function os(){if(js)return Mi;js=1,Object.defineProperty(Mi,"__esModule",{value:!0}),Mi.Group=void 0;const o=Ct(),t=Wr(),i=ht();let e=class extends t.Container{_validateAdd(n){const s=n.getType();s!=="Group"&&s!=="Shape"&&o.Util.throw("You may only add groups and shapes to groups.")}};return Mi.Group=e,e.prototype.nodeType="Group",(0,i._registerNode)(e),Mi}var Oi={},$s;function hs(){if($s)return Oi;$s=1,Object.defineProperty(Oi,"__esModule",{value:!0}),Oi.Animation=void 0;const o=ht(),t=Ct(),i=function(){return o.glob.performance&&o.glob.performance.now?function(){return o.glob.performance.now()}:function(){return new Date().getTime()}}();let e=class ui{constructor(n,s){this.id=ui.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:i(),frameRate:0},this.func=n,this.setLayers(s)}setLayers(n){let s=[];return n&&(s=Array.isArray(n)?n:[n]),this.layers=s,this}getLayers(){return this.layers}addLayer(n){const s=this.layers,a=s.length;for(let h=0;h<a;h++)if(s[h]._id===n._id)return!1;return this.layers.push(n),!0}isRunning(){const s=ui.animations,a=s.length;for(let h=0;h<a;h++)if(s[h].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=i(),ui._addAnimation(this),this}stop(){return ui._removeAnimation(this),this}_updateFrameObject(n){this.frame.timeDiff=n-this.frame.lastTime,this.frame.lastTime=n,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(n){this.animations.push(n),this._handleAnimation()}static _removeAnimation(n){const s=n.id,a=this.animations,h=a.length;for(let l=0;l<h;l++)if(a[l].id===s){this.animations.splice(l,1);break}}static _runFrames(){const n={},s=this.animations;for(let a=0;a<s.length;a++){const h=s[a],l=h.layers,c=h.func;h._updateFrameObject(i());const p=l.length;let m;if(c?m=c.call(h,h.frame)!==!1:m=!0,!!m)for(let d=0;d<p;d++){const f=l[d];f._id!==void 0&&(n[f._id]=f)}}for(const a in n)n.hasOwnProperty(a)&&n[a].batchDraw()}static _animationLoop(){const n=ui;n.animations.length?(n._runFrames(),t.Util.requestAnimFrame(n._animationLoop)):n.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,t.Util.requestAnimFrame(this._animationLoop))}};return Oi.Animation=e,e.animations=[],e.animIdCounter=0,e.animRunning=!1,Oi}var mn={},Qs;function Bl(){return Qs||(Qs=1,function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.Easings=o.Tween=void 0;const t=Ct(),i=hs(),e=kt(),r=ht();let n={node:1,duration:1,easing:1,onFinish:1,yoyo:1},s=1,a=2,h=3,l=0,c=["fill","stroke","shadowColor"];class p{constructor(f,_,v,C,u,g,b){this.prop=f,this.propFunc=_,this.begin=C,this._pos=C,this.duration=g,this._change=0,this.prevPos=0,this.yoyo=b,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=v,this._change=u-this.begin,this.pause()}fire(f){const _=this[f];_&&_()}setTime(f){f>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():f<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=f,this.update())}getTime(){return this._time}setPosition(f){this.prevPos=this._pos,this.propFunc(f),this._pos=f}getPosition(f){return f===void 0&&(f=this._time),this.func(f,this.begin,this._change,this.duration)}play(){this.state=a,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=h,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(f){this.pause(),this._time=f,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const f=this.getTimer()-this._startTime;this.state===a?this.setTime(f):this.state===h&&this.setTime(this.duration-f)}pause(){this.state=s,this.fire("onPause")}getTimer(){return new Date().getTime()}}class m{constructor(f){let _=this,v=f.node,C=v._id,u,g=f.easing||o.Easings.Linear,b=!!f.yoyo,S;typeof f.duration>"u"?u=.3:f.duration===0?u=.001:u=f.duration,this.node=v,this._id=l++;const x=v.getLayer()||(v instanceof r.Konva.Stage?v.getLayers():null);x||t.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new i.Animation(function(){_.tween.onEnterFrame()},x),this.tween=new p(S,function(M){_._tweenFunc(M)},g,0,1,u*1e3,b),this._addListeners(),m.attrs[C]||(m.attrs[C]={}),m.attrs[C][this._id]||(m.attrs[C][this._id]={}),m.tweens[C]||(m.tweens[C]={});for(S in f)n[S]===void 0&&this._addAttr(S,f[S]);this.reset(),this.onFinish=f.onFinish,this.onReset=f.onReset,this.onUpdate=f.onUpdate}_addAttr(f,_){let v=this.node,C=v._id,u,g,b,S,x,M,k,T;if(b=m.tweens[C][f],b&&delete m.attrs[C][b][f],u=v.getAttr(f),t.Util._isArray(_))if(g=[],x=Math.max(_.length,u.length),f==="points"&&_.length!==u.length&&(_.length>u.length?(k=u,u=t.Util._prepareArrayForTween(u,_,v.closed())):(M=_,_=t.Util._prepareArrayForTween(_,u,v.closed()))),f.indexOf("fill")===0)for(S=0;S<x;S++)if(S%2===0)g.push(_[S]-u[S]);else{const A=t.Util.colorToRGBA(u[S]);T=t.Util.colorToRGBA(_[S]),u[S]=A,g.push({r:T.r-A.r,g:T.g-A.g,b:T.b-A.b,a:T.a-A.a})}else for(S=0;S<x;S++)g.push(_[S]-u[S]);else c.indexOf(f)!==-1?(u=t.Util.colorToRGBA(u),T=t.Util.colorToRGBA(_),g={r:T.r-u.r,g:T.g-u.g,b:T.b-u.b,a:T.a-u.a}):g=_-u;m.attrs[C][this._id][f]={start:u,diff:g,end:_,trueEnd:M,trueStart:k},m.tweens[C][f]=this._id}_tweenFunc(f){let _=this.node,v=m.attrs[_._id][this._id],C,u,g,b,S,x,M,k;for(C in v){if(u=v[C],g=u.start,b=u.diff,k=u.end,t.Util._isArray(g))if(S=[],M=Math.max(g.length,k.length),C.indexOf("fill")===0)for(x=0;x<M;x++)x%2===0?S.push((g[x]||0)+b[x]*f):S.push("rgba("+Math.round(g[x].r+b[x].r*f)+","+Math.round(g[x].g+b[x].g*f)+","+Math.round(g[x].b+b[x].b*f)+","+(g[x].a+b[x].a*f)+")");else for(x=0;x<M;x++)S.push((g[x]||0)+b[x]*f);else c.indexOf(C)!==-1?S="rgba("+Math.round(g.r+b.r*f)+","+Math.round(g.g+b.g*f)+","+Math.round(g.b+b.b*f)+","+(g.a+b.a*f)+")":S=g+b*f;_.setAttr(C,S)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const f=this.node,_=m.attrs[f._id][this._id];_.points&&_.points.trueEnd&&f.setAttr("points",_.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const f=this.node,_=m.attrs[f._id][this._id];_.points&&_.points.trueStart&&f.points(_.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(f){return this.tween.seek(f*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){let f=this.node._id,_=this._id,v=m.tweens[f],C;this.pause();for(C in v)delete m.tweens[f][C];delete m.attrs[f][_]}}o.Tween=m,m.attrs={},m.tweens={},e.Node.prototype.to=function(d){const f=d.onFinish;d.node=this,d.onFinish=function(){this.destroy(),f&&f()},new m(d).play()},o.Easings={BackEaseIn(d,f,_,v){return _*(d/=v)*d*((1.70158+1)*d-1.70158)+f},BackEaseOut(d,f,_,v){return _*((d=d/v-1)*d*((1.70158+1)*d+1.70158)+1)+f},BackEaseInOut(d,f,_,v){let C=1.70158;return(d/=v/2)<1?_/2*(d*d*(((C*=1.525)+1)*d-C))+f:_/2*((d-=2)*d*(((C*=1.525)+1)*d+C)+2)+f},ElasticEaseIn(d,f,_,v,C,u){let g=0;return d===0?f:(d/=v)===1?f+_:(u||(u=v*.3),!C||C<Math.abs(_)?(C=_,g=u/4):g=u/(2*Math.PI)*Math.asin(_/C),-(C*Math.pow(2,10*(d-=1))*Math.sin((d*v-g)*(2*Math.PI)/u))+f)},ElasticEaseOut(d,f,_,v,C,u){let g=0;return d===0?f:(d/=v)===1?f+_:(u||(u=v*.3),!C||C<Math.abs(_)?(C=_,g=u/4):g=u/(2*Math.PI)*Math.asin(_/C),C*Math.pow(2,-10*d)*Math.sin((d*v-g)*(2*Math.PI)/u)+_+f)},ElasticEaseInOut(d,f,_,v,C,u){let g=0;return d===0?f:(d/=v/2)===2?f+_:(u||(u=v*(.3*1.5)),!C||C<Math.abs(_)?(C=_,g=u/4):g=u/(2*Math.PI)*Math.asin(_/C),d<1?-.5*(C*Math.pow(2,10*(d-=1))*Math.sin((d*v-g)*(2*Math.PI)/u))+f:C*Math.pow(2,-10*(d-=1))*Math.sin((d*v-g)*(2*Math.PI)/u)*.5+_+f)},BounceEaseOut(d,f,_,v){return(d/=v)<1/2.75?_*(7.5625*d*d)+f:d<2/2.75?_*(7.5625*(d-=1.5/2.75)*d+.75)+f:d<2.5/2.75?_*(7.5625*(d-=2.25/2.75)*d+.9375)+f:_*(7.5625*(d-=2.625/2.75)*d+.984375)+f},BounceEaseIn(d,f,_,v){return _-o.Easings.BounceEaseOut(v-d,0,_,v)+f},BounceEaseInOut(d,f,_,v){return d<v/2?o.Easings.BounceEaseIn(d*2,0,_,v)*.5+f:o.Easings.BounceEaseOut(d*2-v,0,_,v)*.5+_*.5+f},EaseIn(d,f,_,v){return _*(d/=v)*d+f},EaseOut(d,f,_,v){return-_*(d/=v)*(d-2)+f},EaseInOut(d,f,_,v){return(d/=v/2)<1?_/2*d*d+f:-_/2*(--d*(d-2)-1)+f},StrongEaseIn(d,f,_,v){return _*(d/=v)*d*d*d*d+f},StrongEaseOut(d,f,_,v){return _*((d=d/v-1)*d*d*d*d+1)+f},StrongEaseInOut(d,f,_,v){return(d/=v/2)<1?_/2*d*d*d*d*d+f:_/2*((d-=2)*d*d*d*d+2)+f},Linear(d,f,_,v){return _*d/v+f}}}(mn)),mn}var Js;function Vl(){return Js||(Js=1,function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.Konva=void 0;const t=ht(),i=Ct(),e=kt(),r=Wr(),n=Gl(),s=eh(),a=Ul(),h=os(),l=as(),c=Nt(),p=hs(),m=Bl(),d=Zo(),f=Xr();o.Konva=i.Util._assign(t.Konva,{Util:i.Util,Transform:i.Transform,Node:e.Node,Container:r.Container,Stage:n.Stage,stages:n.stages,Layer:s.Layer,FastLayer:a.FastLayer,Group:h.Group,DD:l.DD,Shape:c.Shape,shapes:c.shapes,Animation:p.Animation,Tween:m.Tween,Easings:m.Easings,Context:d.Context,Canvas:f.Canvas}),o.default=o.Konva}(cn)),cn}var Fi={},Zs;function zl(){if(Zs)return Fi;Zs=1,Object.defineProperty(Fi,"__esModule",{value:!0}),Fi.Arc=void 0;const o=lt(),t=Nt(),i=ht(),e=ct(),r=ht();let n=class extends t.Shape{_sceneFunc(a){const h=i.Konva.getAngle(this.angle()),l=this.clockwise();a.beginPath(),a.arc(0,0,this.outerRadius(),0,h,l),a.arc(0,0,this.innerRadius(),h,0,!l),a.closePath(),a.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(a){this.outerRadius(a/2)}setHeight(a){this.outerRadius(a/2)}getSelfRect(){const a=this.innerRadius(),h=this.outerRadius(),l=this.clockwise(),c=i.Konva.getAngle(l?360-this.angle():this.angle()),p=Math.cos(Math.min(c,Math.PI)),m=1,d=Math.sin(Math.min(Math.max(Math.PI,c),3*Math.PI/2)),f=Math.sin(Math.min(c,Math.PI/2)),_=p*(p>0?a:h),v=m*h,C=d*(d>0?a:h),u=f*(f>0?h:a);return{x:_,y:l?-1*u:C,width:v-_,height:u-C}}};return Fi.Arc=n,n.prototype._centroid=!0,n.prototype.className="Arc",n.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,r._registerNode)(n),o.Factory.addGetterSetter(n,"innerRadius",0,(0,e.getNumberValidator)()),o.Factory.addGetterSetter(n,"outerRadius",0,(0,e.getNumberValidator)()),o.Factory.addGetterSetter(n,"angle",0,(0,e.getNumberValidator)()),o.Factory.addGetterSetter(n,"clockwise",!1,(0,e.getBooleanValidator)()),Fi}var Di={},Ii={},ta;function ih(){if(ta)return Ii;ta=1,Object.defineProperty(Ii,"__esModule",{value:!0}),Ii.Line=void 0;const o=lt(),t=ht(),i=Nt(),e=ct();function r(a,h,l,c,p,m,d){const f=Math.sqrt(Math.pow(l-a,2)+Math.pow(c-h,2)),_=Math.sqrt(Math.pow(p-l,2)+Math.pow(m-c,2)),v=d*f/(f+_),C=d*_/(f+_),u=l-v*(p-a),g=c-v*(m-h),b=l+C*(p-a),S=c+C*(m-h);return[u,g,b,S]}function n(a,h){const l=a.length,c=[];for(let p=2;p<l-2;p+=2){const m=r(a[p-2],a[p-1],a[p],a[p+1],a[p+2],a[p+3],h);isNaN(m[0])||(c.push(m[0]),c.push(m[1]),c.push(a[p]),c.push(a[p+1]),c.push(m[2]),c.push(m[3]))}return c}let s=class extends i.Shape{constructor(h){super(h),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(h){let l=this.points(),c=l.length,p=this.tension(),m=this.closed(),d=this.bezier(),f,_,v;if(c){if(h.beginPath(),h.moveTo(l[0],l[1]),p!==0&&c>4){for(f=this.getTensionPoints(),_=f.length,v=m?0:4,m||h.quadraticCurveTo(f[0],f[1],f[2],f[3]);v<_-2;)h.bezierCurveTo(f[v++],f[v++],f[v++],f[v++],f[v++],f[v++]);m||h.quadraticCurveTo(f[_-2],f[_-1],l[c-2],l[c-1])}else if(d)for(v=2;v<c;)h.bezierCurveTo(l[v++],l[v++],l[v++],l[v++],l[v++],l[v++]);else for(v=2;v<c;v+=2)h.lineTo(l[v],l[v+1]);m?(h.closePath(),h.fillStrokeShape(this)):h.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():n(this.points(),this.tension())}_getTensionPointsClosed(){const h=this.points(),l=h.length,c=this.tension(),p=r(h[l-2],h[l-1],h[0],h[1],h[2],h[3],c),m=r(h[l-4],h[l-3],h[l-2],h[l-1],h[0],h[1],c),d=n(h,c);return[p[2],p[3]].concat(d).concat([m[0],m[1],h[l-2],h[l-1],m[2],m[3],p[0],p[1],h[0],h[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let h=this.points();if(h.length<4)return{x:h[0]||0,y:h[1]||0,width:0,height:0};this.tension()!==0?h=[h[0],h[1],...this._getTensionPoints(),h[h.length-2],h[h.length-1]]:h=this.points();let l=h[0],c=h[0],p=h[1],m=h[1],d,f;for(let _=0;_<h.length/2;_++)d=h[_*2],f=h[_*2+1],l=Math.min(l,d),c=Math.max(c,d),p=Math.min(p,f),m=Math.max(m,f);return{x:l,y:p,width:c-l,height:m-p}}};return Ii.Line=s,s.prototype.className="Line",s.prototype._attrsAffectingSize=["points","bezier","tension"],(0,t._registerNode)(s),o.Factory.addGetterSetter(s,"closed",!1),o.Factory.addGetterSetter(s,"bezier",!1),o.Factory.addGetterSetter(s,"tension",0,(0,e.getNumberValidator)()),o.Factory.addGetterSetter(s,"points",[],(0,e.getNumberArrayValidator)()),Ii}var Ni={},yn={},ea;function Hl(){return ea||(ea=1,function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.t2length=o.getQuadraticArcLength=o.getCubicArcLength=o.binomialCoefficients=o.cValues=o.tValues=void 0,o.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],o.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],o.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];const t=(s,a,h)=>{let l,c;const m=h/2;l=0;for(let d=0;d<20;d++)c=m*o.tValues[20][d]+m,l+=o.cValues[20][d]*e(s,a,c);return m*l};o.getCubicArcLength=t;const i=(s,a,h)=>{h===void 0&&(h=1);const l=s[0]-2*s[1]+s[2],c=a[0]-2*a[1]+a[2],p=2*s[1]-2*s[0],m=2*a[1]-2*a[0],d=4*(l*l+c*c),f=4*(l*p+c*m),_=p*p+m*m;if(d===0)return h*Math.sqrt(Math.pow(s[2]-s[0],2)+Math.pow(a[2]-a[0],2));const v=f/(2*d),C=_/d,u=h+v,g=C-v*v,b=u*u+g>0?Math.sqrt(u*u+g):0,S=v*v+g>0?Math.sqrt(v*v+g):0,x=v+Math.sqrt(v*v+g)!==0?g*Math.log(Math.abs((u+b)/(v+S))):0;return Math.sqrt(d)/2*(u*b-v*S+x)};o.getQuadraticArcLength=i;function e(s,a,h){const l=r(1,h,s),c=r(1,h,a),p=l*l+c*c;return Math.sqrt(p)}const r=(s,a,h)=>{const l=h.length-1;let c,p;if(l===0)return 0;if(s===0){p=0;for(let m=0;m<=l;m++)p+=o.binomialCoefficients[l][m]*Math.pow(1-a,l-m)*Math.pow(a,m)*h[m];return p}else{c=new Array(l);for(let m=0;m<l;m++)c[m]=l*(h[m+1]-h[m]);return r(s-1,a,c)}},n=(s,a,h)=>{let l=1,c=s/a,p=(s-h(c))/a,m=0;for(;l>.001;){const d=h(c+p),f=Math.abs(s-d)/a;if(f<l)l=f,c+=p;else{const _=h(c-p),v=Math.abs(s-_)/a;v<l?(l=v,c-=p):p/=2}if(m++,m>500)break}return c};o.t2length=n}(yn)),yn}var ia;function ls(){if(ia)return Ni;ia=1,Object.defineProperty(Ni,"__esModule",{value:!0}),Ni.Path=void 0;const o=lt(),t=Nt(),i=ht(),e=Hl();let r=class jt extends t.Shape{constructor(s){super(s),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=jt.parsePathData(this.data()),this.pathLength=jt.getPathLength(this.dataArray)}_sceneFunc(s){const a=this.dataArray;s.beginPath();let h=!1;for(let b=0;b<a.length;b++){const S=a[b].command,x=a[b].points;switch(S){case"L":s.lineTo(x[0],x[1]);break;case"M":s.moveTo(x[0],x[1]);break;case"C":s.bezierCurveTo(x[0],x[1],x[2],x[3],x[4],x[5]);break;case"Q":s.quadraticCurveTo(x[0],x[1],x[2],x[3]);break;case"A":var l=x[0],c=x[1],p=x[2],m=x[3],d=x[4],f=x[5],_=x[6],v=x[7],C=p>m?p:m,u=p>m?1:p/m,g=p>m?m/p:1;s.translate(l,c),s.rotate(_),s.scale(u,g),s.arc(0,0,C,d,d+f,1-v),s.scale(1/u,1/g),s.rotate(-_),s.translate(-l,-c);break;case"z":h=!0,s.closePath();break}}!h&&!this.hasFill()?s.strokeShape(this):s.fillStrokeShape(this)}getSelfRect(){let s=[];this.dataArray.forEach(function(d){if(d.command==="A"){const f=d.points[4],_=d.points[5],v=d.points[4]+_;let C=Math.PI/180;if(Math.abs(f-v)<C&&(C=Math.abs(f-v)),_<0)for(let u=f-C;u>v;u-=C){const g=jt.getPointOnEllipticalArc(d.points[0],d.points[1],d.points[2],d.points[3],u,0);s.push(g.x,g.y)}else for(let u=f+C;u<v;u+=C){const g=jt.getPointOnEllipticalArc(d.points[0],d.points[1],d.points[2],d.points[3],u,0);s.push(g.x,g.y)}}else if(d.command==="C")for(let f=0;f<=1;f+=.01){const _=jt.getPointOnCubicBezier(f,d.start.x,d.start.y,d.points[0],d.points[1],d.points[2],d.points[3],d.points[4],d.points[5]);s.push(_.x,_.y)}else s=s.concat(d.points)});let a=s[0],h=s[0],l=s[1],c=s[1],p,m;for(let d=0;d<s.length/2;d++)p=s[d*2],m=s[d*2+1],isNaN(p)||(a=Math.min(a,p),h=Math.max(h,p)),isNaN(m)||(l=Math.min(l,m),c=Math.max(c,m));return{x:a,y:l,width:h-a,height:c-l}}getLength(){return this.pathLength}getPointAtLength(s){return jt.getPointAtLengthOfDataArray(s,this.dataArray)}static getLineLength(s,a,h,l){return Math.sqrt((h-s)*(h-s)+(l-a)*(l-a))}static getPathLength(s){let a=0;for(let h=0;h<s.length;++h)a+=s[h].pathLength;return a}static getPointAtLengthOfDataArray(s,a){let h,l=0,c=a.length;if(!c)return null;for(;l<c&&s>a[l].pathLength;)s-=a[l].pathLength,++l;if(l===c)return h=a[l-1].points.slice(-2),{x:h[0],y:h[1]};if(s<.01)return h=a[l].points.slice(0,2),{x:h[0],y:h[1]};const p=a[l],m=p.points;switch(p.command){case"L":return jt.getPointOnLine(s,p.start.x,p.start.y,m[0],m[1]);case"C":return jt.getPointOnCubicBezier((0,e.t2length)(s,jt.getPathLength(a),b=>(0,e.getCubicArcLength)([p.start.x,m[0],m[2],m[4]],[p.start.y,m[1],m[3],m[5]],b)),p.start.x,p.start.y,m[0],m[1],m[2],m[3],m[4],m[5]);case"Q":return jt.getPointOnQuadraticBezier((0,e.t2length)(s,jt.getPathLength(a),b=>(0,e.getQuadraticArcLength)([p.start.x,m[0],m[2]],[p.start.y,m[1],m[3]],b)),p.start.x,p.start.y,m[0],m[1],m[2],m[3]);case"A":var d=m[0],f=m[1],_=m[2],v=m[3],C=m[4],u=m[5],g=m[6];return C+=u*s/p.pathLength,jt.getPointOnEllipticalArc(d,f,_,v,C,g)}return null}static getPointOnLine(s,a,h,l,c,p,m){p=p??a,m=m??h;const d=this.getLineLength(a,h,l,c);if(d<1e-10)return{x:a,y:h};if(l===a)return{x:p,y:m+(c>h?s:-s)};const f=(c-h)/(l-a),_=Math.sqrt(s*s/(1+f*f))*(l<a?-1:1),v=f*_;if(Math.abs(m-h-f*(p-a))<1e-10)return{x:p+_,y:m+v};const C=((p-a)*(l-a)+(m-h)*(c-h))/(d*d),u=a+C*(l-a),g=h+C*(c-h),b=this.getLineLength(p,m,u,g),S=Math.sqrt(s*s-b*b),x=Math.sqrt(S*S/(1+f*f))*(l<a?-1:1),M=f*x;return{x:u+x,y:g+M}}static getPointOnCubicBezier(s,a,h,l,c,p,m,d,f){function _(S){return S*S*S}function v(S){return 3*S*S*(1-S)}function C(S){return 3*S*(1-S)*(1-S)}function u(S){return(1-S)*(1-S)*(1-S)}const g=d*_(s)+p*v(s)+l*C(s)+a*u(s),b=f*_(s)+m*v(s)+c*C(s)+h*u(s);return{x:g,y:b}}static getPointOnQuadraticBezier(s,a,h,l,c,p,m){function d(u){return u*u}function f(u){return 2*u*(1-u)}function _(u){return(1-u)*(1-u)}const v=p*d(s)+l*f(s)+a*_(s),C=m*d(s)+c*f(s)+h*_(s);return{x:v,y:C}}static getPointOnEllipticalArc(s,a,h,l,c,p){const m=Math.cos(p),d=Math.sin(p),f={x:h*Math.cos(c),y:l*Math.sin(c)};return{x:s+(f.x*m-f.y*d),y:a+(f.x*d+f.y*m)}}static parsePathData(s){if(!s)return[];let a=s;const h=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];a=a.replace(new RegExp(" ","g"),",");for(var l=0;l<h.length;l++)a=a.replace(new RegExp(h[l],"g"),"|"+h[l]);const c=a.split("|"),p=[],m=[];let d=0,f=0;const _=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let v;for(l=1;l<c.length;l++){let y=c[l],P=y.charAt(0);for(y=y.slice(1),m.length=0;v=_.exec(y);)m.push(v[0]);const w=[];for(let E=0,F=m.length;E<F;E++){if(m[E]==="00"){w.push(0,0);continue}const N=parseFloat(m[E]);isNaN(N)?w.push(0):w.push(N)}for(;w.length>0&&!isNaN(w[0]);){let E="",F=[];const N=d,z=f;var C,u,g,b,S,x,M,k,T,A;switch(P){case"l":d+=w.shift(),f+=w.shift(),E="L",F.push(d,f);break;case"L":d=w.shift(),f=w.shift(),F.push(d,f);break;case"m":var R=w.shift(),D=w.shift();if(d+=R,f+=D,E="M",p.length>2&&p[p.length-1].command==="z"){for(let B=p.length-2;B>=0;B--)if(p[B].command==="M"){d=p[B].points[0]+R,f=p[B].points[1]+D;break}}F.push(d,f),P="l";break;case"M":d=w.shift(),f=w.shift(),E="M",F.push(d,f),P="L";break;case"h":d+=w.shift(),E="L",F.push(d,f);break;case"H":d=w.shift(),E="L",F.push(d,f);break;case"v":f+=w.shift(),E="L",F.push(d,f);break;case"V":f=w.shift(),E="L",F.push(d,f);break;case"C":F.push(w.shift(),w.shift(),w.shift(),w.shift()),d=w.shift(),f=w.shift(),F.push(d,f);break;case"c":F.push(d+w.shift(),f+w.shift(),d+w.shift(),f+w.shift()),d+=w.shift(),f+=w.shift(),E="C",F.push(d,f);break;case"S":u=d,g=f,C=p[p.length-1],C.command==="C"&&(u=d+(d-C.points[2]),g=f+(f-C.points[3])),F.push(u,g,w.shift(),w.shift()),d=w.shift(),f=w.shift(),E="C",F.push(d,f);break;case"s":u=d,g=f,C=p[p.length-1],C.command==="C"&&(u=d+(d-C.points[2]),g=f+(f-C.points[3])),F.push(u,g,d+w.shift(),f+w.shift()),d+=w.shift(),f+=w.shift(),E="C",F.push(d,f);break;case"Q":F.push(w.shift(),w.shift()),d=w.shift(),f=w.shift(),F.push(d,f);break;case"q":F.push(d+w.shift(),f+w.shift()),d+=w.shift(),f+=w.shift(),E="Q",F.push(d,f);break;case"T":u=d,g=f,C=p[p.length-1],C.command==="Q"&&(u=d+(d-C.points[0]),g=f+(f-C.points[1])),d=w.shift(),f=w.shift(),E="Q",F.push(u,g,d,f);break;case"t":u=d,g=f,C=p[p.length-1],C.command==="Q"&&(u=d+(d-C.points[0]),g=f+(f-C.points[1])),d+=w.shift(),f+=w.shift(),E="Q",F.push(u,g,d,f);break;case"A":b=w.shift(),S=w.shift(),x=w.shift(),M=w.shift(),k=w.shift(),T=d,A=f,d=w.shift(),f=w.shift(),E="A",F=this.convertEndpointToCenterParameterization(T,A,d,f,M,k,b,S,x);break;case"a":b=w.shift(),S=w.shift(),x=w.shift(),M=w.shift(),k=w.shift(),T=d,A=f,d+=w.shift(),f+=w.shift(),E="A",F=this.convertEndpointToCenterParameterization(T,A,d,f,M,k,b,S,x);break}p.push({command:E||P,points:F,start:{x:N,y:z},pathLength:this.calcLength(N,z,E||P,F)})}(P==="z"||P==="Z")&&p.push({command:"z",points:[],start:void 0,pathLength:0})}return p}static calcLength(s,a,h,l){let c,p,m,d;const f=jt;switch(h){case"L":return f.getLineLength(s,a,l[0],l[1]);case"C":return(0,e.getCubicArcLength)([s,l[0],l[2],l[4]],[a,l[1],l[3],l[5]],1);case"Q":return(0,e.getQuadraticArcLength)([s,l[0],l[2]],[a,l[1],l[3]],1);case"A":c=0;var _=l[4],v=l[5],C=l[4]+v,u=Math.PI/180;if(Math.abs(_-C)<u&&(u=Math.abs(_-C)),p=f.getPointOnEllipticalArc(l[0],l[1],l[2],l[3],_,0),v<0)for(d=_-u;d>C;d-=u)m=f.getPointOnEllipticalArc(l[0],l[1],l[2],l[3],d,0),c+=f.getLineLength(p.x,p.y,m.x,m.y),p=m;else for(d=_+u;d<C;d+=u)m=f.getPointOnEllipticalArc(l[0],l[1],l[2],l[3],d,0),c+=f.getLineLength(p.x,p.y,m.x,m.y),p=m;return m=f.getPointOnEllipticalArc(l[0],l[1],l[2],l[3],C,0),c+=f.getLineLength(p.x,p.y,m.x,m.y),c}return 0}static convertEndpointToCenterParameterization(s,a,h,l,c,p,m,d,f){const _=f*(Math.PI/180),v=Math.cos(_)*(s-h)/2+Math.sin(_)*(a-l)/2,C=-1*Math.sin(_)*(s-h)/2+Math.cos(_)*(a-l)/2,u=v*v/(m*m)+C*C/(d*d);u>1&&(m*=Math.sqrt(u),d*=Math.sqrt(u));let g=Math.sqrt((m*m*(d*d)-m*m*(C*C)-d*d*(v*v))/(m*m*(C*C)+d*d*(v*v)));c===p&&(g*=-1),isNaN(g)&&(g=0);const b=g*m*C/d,S=g*-d*v/m,x=(s+h)/2+Math.cos(_)*b-Math.sin(_)*S,M=(a+l)/2+Math.sin(_)*b+Math.cos(_)*S,k=function(w){return Math.sqrt(w[0]*w[0]+w[1]*w[1])},T=function(w,E){return(w[0]*E[0]+w[1]*E[1])/(k(w)*k(E))},A=function(w,E){return(w[0]*E[1]<w[1]*E[0]?-1:1)*Math.acos(T(w,E))},R=A([1,0],[(v-b)/m,(C-S)/d]),D=[(v-b)/m,(C-S)/d],y=[(-1*v-b)/m,(-1*C-S)/d];let P=A(D,y);return T(D,y)<=-1&&(P=Math.PI),T(D,y)>=1&&(P=0),p===0&&P>0&&(P=P-2*Math.PI),p===1&&P<0&&(P=P+2*Math.PI),[x,M,m,d,R,P,_,p]}};return Ni.Path=r,r.prototype.className="Path",r.prototype._attrsAffectingSize=["data"],(0,i._registerNode)(r),o.Factory.addGetterSetter(r,"data"),Ni}var ra;function ql(){if(ra)return Di;ra=1,Object.defineProperty(Di,"__esModule",{value:!0}),Di.Arrow=void 0;const o=lt(),t=ih(),i=ct(),e=ht(),r=ls();let n=class extends t.Line{_sceneFunc(a){super._sceneFunc(a);const h=Math.PI*2,l=this.points();let c=l;const p=this.tension()!==0&&l.length>4;p&&(c=this.getTensionPoints());const m=this.pointerLength(),d=l.length;let f,_;if(p){const u=[c[c.length-4],c[c.length-3],c[c.length-2],c[c.length-1],l[d-2],l[d-1]],g=r.Path.calcLength(c[c.length-4],c[c.length-3],"C",u),b=r.Path.getPointOnQuadraticBezier(Math.min(1,1-m/g),u[0],u[1],u[2],u[3],u[4],u[5]);f=l[d-2]-b.x,_=l[d-1]-b.y}else f=l[d-2]-l[d-4],_=l[d-1]-l[d-3];const v=(Math.atan2(_,f)+h)%h,C=this.pointerWidth();this.pointerAtEnding()&&(a.save(),a.beginPath(),a.translate(l[d-2],l[d-1]),a.rotate(v),a.moveTo(0,0),a.lineTo(-m,C/2),a.lineTo(-m,-C/2),a.closePath(),a.restore(),this.__fillStroke(a)),this.pointerAtBeginning()&&(a.save(),a.beginPath(),a.translate(l[0],l[1]),p?(f=(c[0]+c[2])/2-l[0],_=(c[1]+c[3])/2-l[1]):(f=l[2]-l[0],_=l[3]-l[1]),a.rotate((Math.atan2(-_,-f)+h)%h),a.moveTo(0,0),a.lineTo(-m,C/2),a.lineTo(-m,-C/2),a.closePath(),a.restore(),this.__fillStroke(a))}__fillStroke(a){const h=this.dashEnabled();h&&(this.attrs.dashEnabled=!1,a.setLineDash([])),a.fillStrokeShape(this),h&&(this.attrs.dashEnabled=!0)}getSelfRect(){const a=super.getSelfRect(),h=this.pointerWidth()/2;return{x:a.x-h,y:a.y-h,width:a.width+h*2,height:a.height+h*2}}};return Di.Arrow=n,n.prototype.className="Arrow",(0,e._registerNode)(n),o.Factory.addGetterSetter(n,"pointerLength",10,(0,i.getNumberValidator)()),o.Factory.addGetterSetter(n,"pointerWidth",10,(0,i.getNumberValidator)()),o.Factory.addGetterSetter(n,"pointerAtBeginning",!1),o.Factory.addGetterSetter(n,"pointerAtEnding",!0),Di}var Li={},na;function Yl(){if(na)return Li;na=1,Object.defineProperty(Li,"__esModule",{value:!0}),Li.Circle=void 0;const o=lt(),t=Nt(),i=ct(),e=ht();let r=class extends t.Shape{_sceneFunc(s){s.beginPath(),s.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),s.closePath(),s.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(s){this.radius()!==s/2&&this.radius(s/2)}setHeight(s){this.radius()!==s/2&&this.radius(s/2)}};return Li.Circle=r,r.prototype._centroid=!0,r.prototype.className="Circle",r.prototype._attrsAffectingSize=["radius"],(0,e._registerNode)(r),o.Factory.addGetterSetter(r,"radius",0,(0,i.getNumberValidator)()),Li}var Gi={},sa;function Xl(){if(sa)return Gi;sa=1,Object.defineProperty(Gi,"__esModule",{value:!0}),Gi.Ellipse=void 0;const o=lt(),t=Nt(),i=ct(),e=ht();let r=class extends t.Shape{_sceneFunc(s){const a=this.radiusX(),h=this.radiusY();s.beginPath(),s.save(),a!==h&&s.scale(1,h/a),s.arc(0,0,a,0,Math.PI*2,!1),s.restore(),s.closePath(),s.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(s){this.radiusX(s/2)}setHeight(s){this.radiusY(s/2)}};return Gi.Ellipse=r,r.prototype.className="Ellipse",r.prototype._centroid=!0,r.prototype._attrsAffectingSize=["radiusX","radiusY"],(0,e._registerNode)(r),o.Factory.addComponentsGetterSetter(r,"radius",["x","y"]),o.Factory.addGetterSetter(r,"radiusX",0,(0,i.getNumberValidator)()),o.Factory.addGetterSetter(r,"radiusY",0,(0,i.getNumberValidator)()),Gi}var Ui={},aa;function Wl(){if(aa)return Ui;aa=1,Object.defineProperty(Ui,"__esModule",{value:!0}),Ui.Image=void 0;const o=Ct(),t=lt(),i=Nt(),e=ht(),r=ct();class n extends i.Shape{constructor(a){super(a),this.on("imageChange.konva",()=>{this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const a=this.image();a&&a.complete||a&&a.readyState===4||a&&a.addEventListener&&a.addEventListener("load",()=>{this._requestDraw()})}_useBufferCanvas(){const a=!!this.cornerRadius(),h=this.hasShadow();return a&&h?!0:super._useBufferCanvas(!0)}_sceneFunc(a){const h=this.getWidth(),l=this.getHeight(),c=this.cornerRadius(),p=this.attrs.image;let m;if(p){const d=this.attrs.cropWidth,f=this.attrs.cropHeight;d&&f?m=[p,this.cropX(),this.cropY(),d,f,0,0,h,l]:m=[p,0,0,h,l]}(this.hasFill()||this.hasStroke()||c)&&(a.beginPath(),c?o.Util.drawRoundedRectPath(a,h,l,c):a.rect(0,0,h,l),a.closePath(),a.fillStrokeShape(this)),p&&(c&&a.clip(),a.drawImage.apply(a,m))}_hitFunc(a){const h=this.width(),l=this.height(),c=this.cornerRadius();a.beginPath(),c?o.Util.drawRoundedRectPath(a,h,l,c):a.rect(0,0,h,l),a.closePath(),a.fillStrokeShape(this)}getWidth(){var a,h;return(a=this.attrs.width)!==null&&a!==void 0?a:(h=this.image())===null||h===void 0?void 0:h.width}getHeight(){var a,h;return(a=this.attrs.height)!==null&&a!==void 0?a:(h=this.image())===null||h===void 0?void 0:h.height}static fromURL(a,h,l=null){const c=o.Util.createImageElement();c.onload=function(){const p=new n({image:c});h(p)},c.onerror=l,c.crossOrigin="Anonymous",c.src=a}}return Ui.Image=n,n.prototype.className="Image",(0,e._registerNode)(n),t.Factory.addGetterSetter(n,"cornerRadius",0,(0,r.getNumberOrArrayOfNumbersValidator)(4)),t.Factory.addGetterSetter(n,"image"),t.Factory.addComponentsGetterSetter(n,"crop",["x","y","width","height"]),t.Factory.addGetterSetter(n,"cropX",0,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(n,"cropY",0,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(n,"cropWidth",0,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(n,"cropHeight",0,(0,r.getNumberValidator)()),Ui}var Ke={},oa;function Kl(){if(oa)return Ke;oa=1,Object.defineProperty(Ke,"__esModule",{value:!0}),Ke.Tag=Ke.Label=void 0;const o=lt(),t=Nt(),i=os(),e=ct(),r=ht(),n=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],s="Change.konva",a="none",h="up",l="right",c="down",p="left",m=n.length;let d=class extends i.Group{constructor(v){super(v),this.on("add.konva",function(C){this._addListeners(C.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(v){let C=this,u;const g=function(){C._sync()};for(u=0;u<m;u++)v.on(n[u]+s,g)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let v=this.getText(),C=this.getTag(),u,g,b,S,x,M,k;if(v&&C){switch(u=v.width(),g=v.height(),b=C.pointerDirection(),S=C.pointerWidth(),k=C.pointerHeight(),x=0,M=0,b){case h:x=u/2,M=-1*k;break;case l:x=u+S,M=g/2;break;case c:x=u/2,M=g+k;break;case p:x=-1*S,M=g/2;break}C.setAttrs({x:-1*x,y:-1*M,width:u,height:g}),v.setAttrs({x:-1*x,y:-1*M})}}};Ke.Label=d,d.prototype.className="Label",(0,r._registerNode)(d);class f extends t.Shape{_sceneFunc(v){const C=this.width(),u=this.height(),g=this.pointerDirection(),b=this.pointerWidth(),S=this.pointerHeight(),x=this.cornerRadius();let M=0,k=0,T=0,A=0;typeof x=="number"?M=k=T=A=Math.min(x,C/2,u/2):(M=Math.min(x[0]||0,C/2,u/2),k=Math.min(x[1]||0,C/2,u/2),A=Math.min(x[2]||0,C/2,u/2),T=Math.min(x[3]||0,C/2,u/2)),v.beginPath(),v.moveTo(M,0),g===h&&(v.lineTo((C-b)/2,0),v.lineTo(C/2,-1*S),v.lineTo((C+b)/2,0)),v.lineTo(C-k,0),v.arc(C-k,k,k,Math.PI*3/2,0,!1),g===l&&(v.lineTo(C,(u-S)/2),v.lineTo(C+b,u/2),v.lineTo(C,(u+S)/2)),v.lineTo(C,u-A),v.arc(C-A,u-A,A,0,Math.PI/2,!1),g===c&&(v.lineTo((C+b)/2,u),v.lineTo(C/2,u+S),v.lineTo((C-b)/2,u)),v.lineTo(T,u),v.arc(T,u-T,T,Math.PI/2,Math.PI,!1),g===p&&(v.lineTo(0,(u+S)/2),v.lineTo(-1*b,u/2),v.lineTo(0,(u-S)/2)),v.lineTo(0,M),v.arc(M,M,M,Math.PI,Math.PI*3/2,!1),v.closePath(),v.fillStrokeShape(this)}getSelfRect(){let v=0,C=0,u=this.pointerWidth(),g=this.pointerHeight(),b=this.pointerDirection(),S=this.width(),x=this.height();return b===h?(C-=g,x+=g):b===c?x+=g:b===p?(v-=u*1.5,S+=u):b===l&&(S+=u*1.5),{x:v,y:C,width:S,height:x}}}return Ke.Tag=f,f.prototype.className="Tag",(0,r._registerNode)(f),o.Factory.addGetterSetter(f,"pointerDirection",a),o.Factory.addGetterSetter(f,"pointerWidth",0,(0,e.getNumberValidator)()),o.Factory.addGetterSetter(f,"pointerHeight",0,(0,e.getNumberValidator)()),o.Factory.addGetterSetter(f,"cornerRadius",0,(0,e.getNumberOrArrayOfNumbersValidator)(4)),Ke}var Bi={},ha;function rh(){if(ha)return Bi;ha=1,Object.defineProperty(Bi,"__esModule",{value:!0}),Bi.Rect=void 0;const o=lt(),t=Nt(),i=ht(),e=Ct(),r=ct();let n=class extends t.Shape{_sceneFunc(a){const h=this.cornerRadius(),l=this.width(),c=this.height();a.beginPath(),h?e.Util.drawRoundedRectPath(a,l,c,h):a.rect(0,0,l,c),a.closePath(),a.fillStrokeShape(this)}};return Bi.Rect=n,n.prototype.className="Rect",(0,i._registerNode)(n),o.Factory.addGetterSetter(n,"cornerRadius",0,(0,r.getNumberOrArrayOfNumbersValidator)(4)),Bi}var Vi={},la;function jl(){if(la)return Vi;la=1,Object.defineProperty(Vi,"__esModule",{value:!0}),Vi.RegularPolygon=void 0;const o=lt(),t=Nt(),i=ct(),e=ht();let r=class extends t.Shape{_sceneFunc(s){const a=this._getPoints();s.beginPath(),s.moveTo(a[0].x,a[0].y);for(let h=1;h<a.length;h++)s.lineTo(a[h].x,a[h].y);s.closePath(),s.fillStrokeShape(this)}_getPoints(){const s=this.attrs.sides,a=this.attrs.radius||0,h=[];for(let l=0;l<s;l++)h.push({x:a*Math.sin(l*2*Math.PI/s),y:-1*a*Math.cos(l*2*Math.PI/s)});return h}getSelfRect(){const s=this._getPoints();let a=s[0].x,h=s[0].y,l=s[0].x,c=s[0].y;return s.forEach(p=>{a=Math.min(a,p.x),h=Math.max(h,p.x),l=Math.min(l,p.y),c=Math.max(c,p.y)}),{x:a,y:l,width:h-a,height:c-l}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(s){this.radius(s/2)}setHeight(s){this.radius(s/2)}};return Vi.RegularPolygon=r,r.prototype.className="RegularPolygon",r.prototype._centroid=!0,r.prototype._attrsAffectingSize=["radius"],(0,e._registerNode)(r),o.Factory.addGetterSetter(r,"radius",0,(0,i.getNumberValidator)()),o.Factory.addGetterSetter(r,"sides",0,(0,i.getNumberValidator)()),Vi}var zi={},ca;function $l(){if(ca)return zi;ca=1,Object.defineProperty(zi,"__esModule",{value:!0}),zi.Ring=void 0;const o=lt(),t=Nt(),i=ct(),e=ht(),r=Math.PI*2;let n=class extends t.Shape{_sceneFunc(a){a.beginPath(),a.arc(0,0,this.innerRadius(),0,r,!1),a.moveTo(this.outerRadius(),0),a.arc(0,0,this.outerRadius(),r,0,!0),a.closePath(),a.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(a){this.outerRadius(a/2)}setHeight(a){this.outerRadius(a/2)}};return zi.Ring=n,n.prototype.className="Ring",n.prototype._centroid=!0,n.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,e._registerNode)(n),o.Factory.addGetterSetter(n,"innerRadius",0,(0,i.getNumberValidator)()),o.Factory.addGetterSetter(n,"outerRadius",0,(0,i.getNumberValidator)()),zi}var Hi={},da;function Ql(){if(da)return Hi;da=1,Object.defineProperty(Hi,"__esModule",{value:!0}),Hi.Sprite=void 0;const o=lt(),t=Nt(),i=hs(),e=ct(),r=ht();let n=class extends t.Shape{constructor(a){super(a),this._updated=!0,this.anim=new i.Animation(()=>{const h=this._updated;return this._updated=!1,h}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(a){const h=this.animation(),l=this.frameIndex(),c=l*4,p=this.animations()[h],m=this.frameOffsets(),d=p[c+0],f=p[c+1],_=p[c+2],v=p[c+3],C=this.image();if((this.hasFill()||this.hasStroke())&&(a.beginPath(),a.rect(0,0,_,v),a.closePath(),a.fillStrokeShape(this)),C)if(m){const u=m[h],g=l*2;a.drawImage(C,d,f,_,v,u[g+0],u[g+1],_,v)}else a.drawImage(C,d,f,_,v,0,0,_,v)}_hitFunc(a){const h=this.animation(),l=this.frameIndex(),c=l*4,p=this.animations()[h],m=this.frameOffsets(),d=p[c+2],f=p[c+3];if(a.beginPath(),m){const _=m[h],v=l*2;a.rect(_[v+0],_[v+1],d,f)}else a.rect(0,0,d,f);a.closePath(),a.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const a=this;this.interval=setInterval(function(){a._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const a=this.getLayer();this.anim.setLayers(a),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const a=this.frameIndex(),h=this.animation(),l=this.animations(),c=l[h],p=c.length/4;a<p-1?this.frameIndex(a+1):this.frameIndex(0)}};return Hi.Sprite=n,n.prototype.className="Sprite",(0,r._registerNode)(n),o.Factory.addGetterSetter(n,"animation"),o.Factory.addGetterSetter(n,"animations"),o.Factory.addGetterSetter(n,"frameOffsets"),o.Factory.addGetterSetter(n,"image"),o.Factory.addGetterSetter(n,"frameIndex",0,(0,e.getNumberValidator)()),o.Factory.addGetterSetter(n,"frameRate",17,(0,e.getNumberValidator)()),o.Factory.backCompat(n,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"}),Hi}var qi={},ua;function Jl(){if(ua)return qi;ua=1,Object.defineProperty(qi,"__esModule",{value:!0}),qi.Star=void 0;const o=lt(),t=Nt(),i=ct(),e=ht();let r=class extends t.Shape{_sceneFunc(s){const a=this.innerRadius(),h=this.outerRadius(),l=this.numPoints();s.beginPath(),s.moveTo(0,0-h);for(let c=1;c<l*2;c++){const p=c%2===0?h:a,m=p*Math.sin(c*Math.PI/l),d=-1*p*Math.cos(c*Math.PI/l);s.lineTo(m,d)}s.closePath(),s.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(s){this.outerRadius(s/2)}setHeight(s){this.outerRadius(s/2)}};return qi.Star=r,r.prototype.className="Star",r.prototype._centroid=!0,r.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,e._registerNode)(r),o.Factory.addGetterSetter(r,"numPoints",5,(0,i.getNumberValidator)()),o.Factory.addGetterSetter(r,"innerRadius",0,(0,i.getNumberValidator)()),o.Factory.addGetterSetter(r,"outerRadius",0,(0,i.getNumberValidator)()),qi}var ci={},fa;function nh(){if(fa)return ci;fa=1,Object.defineProperty(ci,"__esModule",{value:!0}),ci.Text=void 0,ci.stringToArray=s;const o=Ct(),t=lt(),i=Nt(),e=ht(),r=ct(),n=ht();function s(K){return[...K].reduce((H,X,L,G)=>(new RegExp("\\p{Emoji_Modifier_Base}\\p{Emoji_Modifier}?(?:\\u200D\\p{Emoji_Presentation})+","u").test(X)?H.push(X):new RegExp("\\p{Regional_Indicator}{2}","u").test(X+(G[L+1]||""))?H.push(X+G[L+1]):L>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(X)?H[H.length-1]+=X:H.push(X),H),[])}const a="auto",h="center",l="inherit",c="justify",p="Change.konva",m="2d",d="-",f="left",_="text",v="Text",C="top",u="bottom",g="middle",b="normal",S="px ",x=" ",M="right",k="rtl",T="word",A="char",R="none",D="…",y=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],P=y.length;function w(K){return K.split(",").map(H=>{H=H.trim();const X=H.indexOf(" ")>=0,L=H.indexOf('"')>=0||H.indexOf("'")>=0;return X&&!L&&(H=`"${H}"`),H}).join(", ")}let E;function F(){return E||(E=o.Util.createCanvasElement().getContext(m),E)}function N(K){K.fillText(this._partialText,this._partialTextX,this._partialTextY)}function z(K){K.setAttr("miterLimit",2),K.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function B(K){return K=K||{},!K.fillLinearGradientColorStops&&!K.fillRadialGradientColorStops&&!K.fillPatternImage&&(K.fill=K.fill||"black"),K}let Y=class extends i.Shape{constructor(H){super(B(H)),this._partialTextX=0,this._partialTextY=0;for(let X=0;X<P;X++)this.on(y[X]+p,this._setTextData);this._setTextData()}_sceneFunc(H){const X=this.textArr,L=X.length;if(!this.text())return;let G=this.padding(),O=this.fontSize(),I=this.lineHeight()*O,U=this.verticalAlign(),W=this.direction(),$=0,Q=this.align(),nt=this.getWidth(),et=this.letterSpacing(),rt=this.fill(),Tt=this.textDecoration(),ut=Tt.indexOf("underline")!==-1,wt=Tt.indexOf("line-through")!==-1,Lt;W=W===l?H.direction:W;let Wt=I/2,be=g;if(e.Konva._fixTextRendering){const gt=this.measureSize("M");be="alphabetic",Wt=(gt.fontBoundingBoxAscent-gt.fontBoundingBoxDescent)/2+I/2}var V=0,q=0;for(W===k&&H.setAttr("direction",W),H.setAttr("font",this._getContextFont()),H.setAttr("textBaseline",be),H.setAttr("textAlign",f),U===g?$=(this.getHeight()-L*I-G*2)/2:U===u&&($=this.getHeight()-L*I-G*2),H.translate(G,$+G),Lt=0;Lt<L;Lt++){var V=0,q=0,Z=X[Lt],j=Z.text,J=Z.width,tt=Z.lastInParagraph,it,st,at;if(H.save(),Q===M?V+=nt-J-G*2:Q===h&&(V+=(nt-J-G*2)/2),ut){H.save(),H.beginPath();const _t=e.Konva._fixTextRendering?Math.round(O/4):Math.round(O/2),ot=V,vt=Wt+q+_t;H.moveTo(ot,vt),it=j.split(" ").length-1,st=it===0,at=Q===c&&!tt?nt-G*2:J,H.lineTo(ot+Math.round(at),vt),H.lineWidth=O/15;const Mt=this._getLinearGradient();H.strokeStyle=Mt||rt,H.stroke(),H.restore()}if(wt){H.save(),H.beginPath();const _t=e.Konva._fixTextRendering?-Math.round(O/4):0;H.moveTo(V,Wt+q+_t),it=j.split(" ").length-1,st=it===0,at=Q===c&&tt&&!st?nt-G*2:J,H.lineTo(V+Math.round(at),Wt+q+_t),H.lineWidth=O/15;const ot=this._getLinearGradient();H.strokeStyle=ot||rt,H.stroke(),H.restore()}if(W!==k&&(et!==0||Q===c)){it=j.split(" ").length-1;const _t=s(j);for(let ot=0;ot<_t.length;ot++){const vt=_t[ot];vt===" "&&!tt&&Q===c&&(V+=(nt-G*2-J)/it),this._partialTextX=V,this._partialTextY=Wt+q,this._partialText=vt,H.fillStrokeShape(this),V+=this.measureSize(vt).width+et}}else et!==0&&H.setAttr("letterSpacing",`${et}px`),this._partialTextX=V,this._partialTextY=Wt+q,this._partialText=j,H.fillStrokeShape(this);H.restore(),L>1&&(Wt+=I)}}_hitFunc(H){const X=this.getWidth(),L=this.getHeight();H.beginPath(),H.rect(0,0,X,L),H.closePath(),H.fillStrokeShape(this)}setText(H){const X=o.Util._isString(H)?H:H==null?"":H+"";return this._setAttr(_,X),this}getWidth(){return this.attrs.width===a||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===a||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return o.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(H){var X,L,G,O,I,U,W,$,Q,nt,et;let rt=F(),Tt=this.fontSize(),ut;rt.save(),rt.font=this._getContextFont(),ut=rt.measureText(H),rt.restore();const wt=Tt/100;return{actualBoundingBoxAscent:(X=ut.actualBoundingBoxAscent)!==null&&X!==void 0?X:71.58203125*wt,actualBoundingBoxDescent:(L=ut.actualBoundingBoxDescent)!==null&&L!==void 0?L:0,actualBoundingBoxLeft:(G=ut.actualBoundingBoxLeft)!==null&&G!==void 0?G:-7.421875*wt,actualBoundingBoxRight:(O=ut.actualBoundingBoxRight)!==null&&O!==void 0?O:75.732421875*wt,alphabeticBaseline:(I=ut.alphabeticBaseline)!==null&&I!==void 0?I:0,emHeightAscent:(U=ut.emHeightAscent)!==null&&U!==void 0?U:100*wt,emHeightDescent:(W=ut.emHeightDescent)!==null&&W!==void 0?W:-20*wt,fontBoundingBoxAscent:($=ut.fontBoundingBoxAscent)!==null&&$!==void 0?$:91*wt,fontBoundingBoxDescent:(Q=ut.fontBoundingBoxDescent)!==null&&Q!==void 0?Q:21*wt,hangingBaseline:(nt=ut.hangingBaseline)!==null&&nt!==void 0?nt:72.80000305175781*wt,ideographicBaseline:(et=ut.ideographicBaseline)!==null&&et!==void 0?et:-21*wt,width:ut.width,height:Tt}}_getContextFont(){return this.fontStyle()+x+this.fontVariant()+x+(this.fontSize()+S)+w(this.fontFamily())}_addTextLine(H){this.align()===c&&(H=H.trim());const L=this._getTextWidth(H);return this.textArr.push({text:H,width:L,lastInParagraph:!1})}_getTextWidth(H){const X=this.letterSpacing(),L=H.length;return F().measureText(H).width+(L?X*(L-1):0)}_setTextData(){let H=this.text().split(`
`),X=+this.fontSize(),L=0,G=this.lineHeight()*X,O=this.attrs.width,I=this.attrs.height,U=O!==a&&O!==void 0,W=I!==a&&I!==void 0,$=this.padding(),Q=O-$*2,nt=I-$*2,et=0,rt=this.wrap(),Tt=rt!==R,ut=rt!==A&&Tt,wt=this.ellipsis();this.textArr=[],F().font=this._getContextFont();const Lt=wt?this._getTextWidth(D):0;for(let be=0,V=H.length;be<V;++be){let q=H[be],Z=this._getTextWidth(q);if(U&&Z>Q)for(;q.length>0;){let j=0,J=q.length,tt="",it=0;for(;j<J;){const st=j+J>>>1,at=q.slice(0,st+1),gt=this._getTextWidth(at)+Lt;gt<=Q?(j=st+1,tt=at,it=gt):J=st}if(tt){if(ut){var Wt;const at=q[tt.length];(at===x||at===d)&&it<=Q?Wt=tt.length:Wt=Math.max(tt.lastIndexOf(x),tt.lastIndexOf(d))+1,Wt>0&&(j=Wt,tt=tt.slice(0,j),it=this._getTextWidth(tt))}if(tt=tt.trimRight(),this._addTextLine(tt),L=Math.max(L,it),et+=G,this._shouldHandleEllipsis(et)){this._tryToAddEllipsisToLastLine();break}if(q=q.slice(j),q=q.trimLeft(),q.length>0&&(Z=this._getTextWidth(q),Z<=Q)){this._addTextLine(q),et+=G,L=Math.max(L,Z);break}}else break}else this._addTextLine(q),et+=G,L=Math.max(L,Z),this._shouldHandleEllipsis(et)&&be<V-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),W&&et+G>nt)break}this.textHeight=X,this.textWidth=L}_shouldHandleEllipsis(H){const X=+this.fontSize(),L=this.lineHeight()*X,G=this.attrs.height,O=G!==a&&G!==void 0,I=this.padding(),U=G-I*2;return!(this.wrap()!==R)||O&&H+L>U}_tryToAddEllipsisToLastLine(){const H=this.attrs.width,X=H!==a&&H!==void 0,L=this.padding(),G=H-L*2,O=this.ellipsis(),I=this.textArr[this.textArr.length-1];!I||!O||(X&&(this._getTextWidth(I.text+D)<G||(I.text=I.text.slice(0,I.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(I.text+D))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const H=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,X=this.hasShadow();return H&&X?!0:super._useBufferCanvas()}};return ci.Text=Y,Y.prototype._fillFunc=N,Y.prototype._strokeFunc=z,Y.prototype.className=v,Y.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],(0,n._registerNode)(Y),t.Factory.overWriteSetter(Y,"width",(0,r.getNumberOrAutoValidator)()),t.Factory.overWriteSetter(Y,"height",(0,r.getNumberOrAutoValidator)()),t.Factory.addGetterSetter(Y,"direction",l),t.Factory.addGetterSetter(Y,"fontFamily","Arial"),t.Factory.addGetterSetter(Y,"fontSize",12,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(Y,"fontStyle",b),t.Factory.addGetterSetter(Y,"fontVariant",b),t.Factory.addGetterSetter(Y,"padding",0,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(Y,"align",f),t.Factory.addGetterSetter(Y,"verticalAlign",C),t.Factory.addGetterSetter(Y,"lineHeight",1,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(Y,"wrap",T),t.Factory.addGetterSetter(Y,"ellipsis",!1,(0,r.getBooleanValidator)()),t.Factory.addGetterSetter(Y,"letterSpacing",0,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(Y,"text","",(0,r.getStringValidator)()),t.Factory.addGetterSetter(Y,"textDecoration",""),ci}var Yi={},ga;function Zl(){if(ga)return Yi;ga=1,Object.defineProperty(Yi,"__esModule",{value:!0}),Yi.TextPath=void 0;const o=Ct(),t=lt(),i=Nt(),e=ls(),r=nh(),n=ct(),s=ht(),a="",h="normal";function l(m){m.fillText(this.partialText,0,0)}function c(m){m.strokeText(this.partialText,0,0)}let p=class extends i.Shape{constructor(d){super(d),this.dummyCanvas=o.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return e.Path.getPathLength(this.dataArray)}_getPointAtLength(d){if(!this.attrs.data)return null;const f=this.pathLength;return d-1>f?null:e.Path.getPointAtLengthOfDataArray(d,this.dataArray)}_readDataAttribute(){this.dataArray=e.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(d){d.setAttr("font",this._getContextFont()),d.setAttr("textBaseline",this.textBaseline()),d.setAttr("textAlign","left"),d.save();const f=this.textDecoration(),_=this.fill(),v=this.fontSize(),C=this.glyphInfo;f==="underline"&&d.beginPath();for(let u=0;u<C.length;u++){d.save();const g=C[u].p0;d.translate(g.x,g.y),d.rotate(C[u].rotation),this.partialText=C[u].text,d.fillStrokeShape(this),f==="underline"&&(u===0&&d.moveTo(0,v/2+1),d.lineTo(v,v/2+1)),d.restore()}f==="underline"&&(d.strokeStyle=_,d.lineWidth=v/20,d.stroke()),d.restore()}_hitFunc(d){d.beginPath();const f=this.glyphInfo;if(f.length>=1){const _=f[0].p0;d.moveTo(_.x,_.y)}for(let _=0;_<f.length;_++){const v=f[_].p1;d.lineTo(v.x,v.y)}d.setAttr("lineWidth",this.fontSize()),d.setAttr("strokeStyle",this.colorKey),d.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return o.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(d){return r.Text.prototype.setText.call(this,d)}_getContextFont(){return r.Text.prototype._getContextFont.call(this)}_getTextSize(d){const _=this.dummyCanvas.getContext("2d");_.save(),_.font=this._getContextFont();const v=_.measureText(d);return _.restore(),{width:v.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:d,height:f}=this._getTextSize(this.attrs.text);if(this.textWidth=d,this.textHeight=f,this.glyphInfo=[],!this.attrs.data)return null;const _=this.letterSpacing(),v=this.align(),C=this.kerningFunc(),u=Math.max(this.textWidth+((this.attrs.text||"").length-1)*_,0);let g=0;v==="center"&&(g=Math.max(0,this.pathLength/2-u/2)),v==="right"&&(g=Math.max(0,this.pathLength-u));const b=(0,r.stringToArray)(this.text());let S=g;for(let x=0;x<b.length;x++){const M=this._getPointAtLength(S);if(!M)return;let k=this._getTextSize(b[x]).width+_;if(b[x]===" "&&v==="justify"){const P=this.text().split(" ").length-1;k+=(this.pathLength-u)/P}const T=this._getPointAtLength(S+k);if(!T)return;const A=e.Path.getLineLength(M.x,M.y,T.x,T.y);let R=0;if(C)try{R=C(b[x-1],b[x])*this.fontSize()}catch{R=0}M.x+=R,T.x+=R,this.textWidth+=R;const D=e.Path.getPointOnLine(R+A/2,M.x,M.y,T.x,T.y),y=Math.atan2(T.y-M.y,T.x-M.x);this.glyphInfo.push({transposeX:D.x,transposeY:D.y,text:b[x],rotation:y,p0:M,p1:T}),S+=k}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const d=[];this.glyphInfo.forEach(function(S){d.push(S.p0.x),d.push(S.p0.y),d.push(S.p1.x),d.push(S.p1.y)});let f=d[0]||0,_=d[0]||0,v=d[1]||0,C=d[1]||0,u,g;for(let S=0;S<d.length/2;S++)u=d[S*2],g=d[S*2+1],f=Math.min(f,u),_=Math.max(_,u),v=Math.min(v,g),C=Math.max(C,g);const b=this.fontSize();return{x:f-b/2,y:v-b/2,width:_-f+b,height:C-v+b}}destroy(){return o.Util.releaseCanvas(this.dummyCanvas),super.destroy()}};return Yi.TextPath=p,p.prototype._fillFunc=l,p.prototype._strokeFunc=c,p.prototype._fillFuncHit=l,p.prototype._strokeFuncHit=c,p.prototype.className="TextPath",p.prototype._attrsAffectingSize=["text","fontSize","data"],(0,s._registerNode)(p),t.Factory.addGetterSetter(p,"data"),t.Factory.addGetterSetter(p,"fontFamily","Arial"),t.Factory.addGetterSetter(p,"fontSize",12,(0,n.getNumberValidator)()),t.Factory.addGetterSetter(p,"fontStyle",h),t.Factory.addGetterSetter(p,"align","left"),t.Factory.addGetterSetter(p,"letterSpacing",0,(0,n.getNumberValidator)()),t.Factory.addGetterSetter(p,"textBaseline","middle"),t.Factory.addGetterSetter(p,"fontVariant",h),t.Factory.addGetterSetter(p,"text",a),t.Factory.addGetterSetter(p,"textDecoration",null),t.Factory.addGetterSetter(p,"kerningFunc",null),Yi}var Xi={},_a;function tc(){if(_a)return Xi;_a=1,Object.defineProperty(Xi,"__esModule",{value:!0}),Xi.Transformer=void 0;const o=Ct(),t=lt(),i=kt(),e=Nt(),r=rh(),n=os(),s=ht(),a=ct(),h=ht(),l="tr-konva",c=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(k=>k+`.${l}`).join(" "),p="nodesRect",m=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],d={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},f="ontouchstart"in s.Konva._global;function _(k,T,A){if(k==="rotater")return A;T+=o.Util.degToRad(d[k]||0);const R=(o.Util.radToDeg(T)%360+360)%360;return o.Util._inRange(R,315+22.5,360)||o.Util._inRange(R,0,22.5)?"ns-resize":o.Util._inRange(R,45-22.5,45+22.5)?"nesw-resize":o.Util._inRange(R,90-22.5,90+22.5)?"ew-resize":o.Util._inRange(R,135-22.5,135+22.5)?"nwse-resize":o.Util._inRange(R,180-22.5,180+22.5)?"ns-resize":o.Util._inRange(R,225-22.5,225+22.5)?"nesw-resize":o.Util._inRange(R,270-22.5,270+22.5)?"ew-resize":o.Util._inRange(R,315-22.5,315+22.5)?"nwse-resize":(o.Util.error("Transformer has unknown angle for cursor detection: "+R),"pointer")}const v=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function C(k){return{x:k.x+k.width/2*Math.cos(k.rotation)+k.height/2*Math.sin(-k.rotation),y:k.y+k.height/2*Math.cos(k.rotation)+k.width/2*Math.sin(k.rotation)}}function u(k,T,A){const R=A.x+(k.x-A.x)*Math.cos(T)-(k.y-A.y)*Math.sin(T),D=A.y+(k.x-A.x)*Math.sin(T)+(k.y-A.y)*Math.cos(T);return{...k,rotation:k.rotation+T,x:R,y:D}}function g(k,T){const A=C(k);return u(k,T,A)}function b(k,T,A){let R=T;for(let D=0;D<k.length;D++){const y=s.Konva.getAngle(k[D]),P=Math.abs(y-T)%(Math.PI*2);Math.min(P,Math.PI*2-P)<A&&(R=y)}return R}let S=0,x=class extends n.Group{constructor(T){super(T),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(c,this.update),this.getNode()&&this.update()}attachTo(T){return this.setNode(T),this}setNode(T){return o.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([T])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return l+this._id}setNodes(T=[]){this._nodes&&this._nodes.length&&this.detach();const A=T.filter(D=>D.isAncestorOf(this)?(o.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=T=A,T.length===1&&this.useSingleNodeRotation()?this.rotation(T[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(D=>{const y=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()},P=D._attrsAffectingSize.map(w=>w+"Change."+this._getEventNamespace()).join(" ");D.on(P,y),D.on(m.map(w=>w+`.${this._getEventNamespace()}`).join(" "),y),D.on(`absoluteTransformChange.${this._getEventNamespace()}`,y),this._proxyDrag(D)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(T){let A;T.on(`dragstart.${this._getEventNamespace()}`,R=>{A=T.getAbsolutePosition(),!this.isDragging()&&T!==this.findOne(".back")&&this.startDrag(R,!1)}),T.on(`dragmove.${this._getEventNamespace()}`,R=>{if(!A)return;const D=T.getAbsolutePosition(),y=D.x-A.x,P=D.y-A.y;this.nodes().forEach(w=>{if(w===T||w.isDragging())return;const E=w.getAbsolutePosition();w.setAbsolutePosition({x:E.x+y,y:E.y+P}),w.startDrag(R)}),A=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(T=>{T.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(p),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(p,this.__getNodeRect)}__getNodeShape(T,A=this.rotation(),R){const D=T.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),y=T.getAbsoluteScale(R),P=T.getAbsolutePosition(R),w=D.x*y.x-T.offsetX()*y.x,E=D.y*y.y-T.offsetY()*y.y,F=(s.Konva.getAngle(T.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),N={x:P.x+w*Math.cos(F)+E*Math.sin(-F),y:P.y+E*Math.cos(F)+w*Math.sin(F),width:D.width*y.x,height:D.height*y.y,rotation:F};return u(N,-s.Konva.getAngle(A),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const A=[];this.nodes().map(F=>{const N=F.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),z=[{x:N.x,y:N.y},{x:N.x+N.width,y:N.y},{x:N.x+N.width,y:N.y+N.height},{x:N.x,y:N.y+N.height}],B=F.getAbsoluteTransform();z.forEach(function(Y){const K=B.point(Y);A.push(K)})});const R=new o.Transform;R.rotate(-s.Konva.getAngle(this.rotation()));let D=1/0,y=1/0,P=-1/0,w=-1/0;A.forEach(function(F){const N=R.point(F);D===void 0&&(D=P=N.x,y=w=N.y),D=Math.min(D,N.x),y=Math.min(y,N.y),P=Math.max(P,N.x),w=Math.max(w,N.y)}),R.invert();const E=R.point({x:D,y});return{x:E.x,y:E.y,width:P-D,height:w-y,rotation:s.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),v.forEach(T=>{this._createAnchor(T)}),this._createAnchor("rotater")}_createAnchor(T){const A=new r.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:T+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:f?10:"auto"}),R=this;A.on("mousedown touchstart",function(D){R._handleMouseDown(D)}),A.on("dragstart",D=>{A.stopDrag(),D.cancelBubble=!0}),A.on("dragend",D=>{D.cancelBubble=!0}),A.on("mouseenter",()=>{const D=s.Konva.getAngle(this.rotation()),y=this.rotateAnchorCursor(),P=_(T,D,y);A.getStage().content&&(A.getStage().content.style.cursor=P),this._cursorChange=!0}),A.on("mouseout",()=>{A.getStage().content&&(A.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(A)}_createBack(){const T=new e.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(A,R){const D=R.getParent(),y=D.padding();A.beginPath(),A.rect(-y,-y,R.width()+y*2,R.height()+y*2),A.moveTo(R.width()/2,-y),D.rotateEnabled()&&D.rotateLineVisible()&&A.lineTo(R.width()/2,-D.rotateAnchorOffset()*o.Util._sign(R.height())-y),A.fillStrokeShape(R)},hitFunc:(A,R)=>{if(!this.shouldOverdrawWholeArea())return;const D=this.padding();A.beginPath(),A.rect(-D,-D,R.width()+D*2,R.height()+D*2),A.fillStrokeShape(R)}});this.add(T),this._proxyDrag(T),T.on("dragstart",A=>{A.cancelBubble=!0}),T.on("dragmove",A=>{A.cancelBubble=!0}),T.on("dragend",A=>{A.cancelBubble=!0}),this.on("dragmove",A=>{this.update()})}_handleMouseDown(T){if(this._transforming)return;this._movingAnchorName=T.target.name().split(" ")[0];const A=this._getNodeRect(),R=A.width,D=A.height,y=Math.sqrt(Math.pow(R,2)+Math.pow(D,2));this.sin=Math.abs(D/y),this.cos=Math.abs(R/y),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const P=T.target.getAbsolutePosition(),w=T.target.getStage().getPointerPosition();this._anchorDragOffset={x:w.x-P.x,y:w.y-P.y},S++,this._fire("transformstart",{evt:T.evt,target:this.getNode()}),this._nodes.forEach(E=>{E._fire("transformstart",{evt:T.evt,target:E})})}_handleMouseMove(T){let A,R,D;const y=this.findOne("."+this._movingAnchorName),P=y.getStage();P.setPointersPositions(T);const w=P.getPointerPosition();let E={x:w.x-this._anchorDragOffset.x,y:w.y-this._anchorDragOffset.y};const F=y.getAbsolutePosition();this.anchorDragBoundFunc()&&(E=this.anchorDragBoundFunc()(F,E,T)),y.setAbsolutePosition(E);const N=y.getAbsolutePosition();if(F.x===N.x&&F.y===N.y)return;if(this._movingAnchorName==="rotater"){const U=this._getNodeRect();A=y.x()-U.width/2,R=-y.y()+U.height/2;let W=Math.atan2(-R,A)+Math.PI/2;U.height<0&&(W-=Math.PI);const Q=s.Konva.getAngle(this.rotation())+W,nt=s.Konva.getAngle(this.rotationSnapTolerance()),rt=b(this.rotationSnaps(),Q,nt)-U.rotation,Tt=g(U,rt);this._fitNodesInto(Tt,T);return}const z=this.shiftBehavior();let B;z==="inverted"?B=this.keepRatio()&&!T.shiftKey:z==="none"?B=this.keepRatio():B=this.keepRatio()||T.shiftKey;var L=this.centeredScaling()||T.altKey;if(this._movingAnchorName==="top-left"){if(B){var Y=L?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};D=Math.sqrt(Math.pow(Y.x-y.x(),2)+Math.pow(Y.y-y.y(),2));var K=this.findOne(".top-left").x()>Y.x?-1:1,H=this.findOne(".top-left").y()>Y.y?-1:1;A=D*this.cos*K,R=D*this.sin*H,this.findOne(".top-left").x(Y.x-A),this.findOne(".top-left").y(Y.y-R)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(y.y());else if(this._movingAnchorName==="top-right"){if(B){var Y=L?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};D=Math.sqrt(Math.pow(y.x()-Y.x,2)+Math.pow(Y.y-y.y(),2));var K=this.findOne(".top-right").x()<Y.x?-1:1,H=this.findOne(".top-right").y()>Y.y?-1:1;A=D*this.cos*K,R=D*this.sin*H,this.findOne(".top-right").x(Y.x+A),this.findOne(".top-right").y(Y.y-R)}var X=y.position();this.findOne(".top-left").y(X.y),this.findOne(".bottom-right").x(X.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(y.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(y.x());else if(this._movingAnchorName==="bottom-left"){if(B){var Y=L?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};D=Math.sqrt(Math.pow(Y.x-y.x(),2)+Math.pow(y.y()-Y.y,2));var K=Y.x<y.x()?-1:1,H=y.y()<Y.y?-1:1;A=D*this.cos*K,R=D*this.sin*H,y.x(Y.x-A),y.y(Y.y+R)}X=y.position(),this.findOne(".top-left").x(X.x),this.findOne(".bottom-right").y(X.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(y.y());else if(this._movingAnchorName==="bottom-right"){if(B){var Y=L?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};D=Math.sqrt(Math.pow(y.x()-Y.x,2)+Math.pow(y.y()-Y.y,2));var K=this.findOne(".bottom-right").x()<Y.x?-1:1,H=this.findOne(".bottom-right").y()<Y.y?-1:1;A=D*this.cos*K,R=D*this.sin*H,this.findOne(".bottom-right").x(Y.x+A),this.findOne(".bottom-right").y(Y.y+R)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));var L=this.centeredScaling()||T.altKey;if(L){const U=this.findOne(".top-left"),W=this.findOne(".bottom-right"),$=U.x(),Q=U.y(),nt=this.getWidth()-W.x(),et=this.getHeight()-W.y();W.move({x:-$,y:-Q}),U.move({x:nt,y:et})}const G=this.findOne(".top-left").getAbsolutePosition();A=G.x,R=G.y;const O=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),I=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:A,y:R,width:O,height:I,rotation:s.Konva.getAngle(this.rotation())},T)}_handleMouseUp(T){this._removeEvents(T)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(T){var A;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const R=this.getNode();S--,this._fire("transformend",{evt:T,target:R}),(A=this.getLayer())===null||A===void 0||A.batchDraw(),R&&this._nodes.forEach(D=>{var y;D._fire("transformend",{evt:T,target:D}),(y=D.getLayer())===null||y===void 0||y.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(T,A){const R=this._getNodeRect(),D=1;if(o.Util._inRange(T.width,-this.padding()*2-D,D)){this.update();return}if(o.Util._inRange(T.height,-this.padding()*2-D,D)){this.update();return}const y=new o.Transform;if(y.rotate(s.Konva.getAngle(this.rotation())),this._movingAnchorName&&T.width<0&&this._movingAnchorName.indexOf("left")>=0){const B=y.point({x:-this.padding()*2,y:0});T.x+=B.x,T.y+=B.y,T.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=B.x,this._anchorDragOffset.y-=B.y}else if(this._movingAnchorName&&T.width<0&&this._movingAnchorName.indexOf("right")>=0){const B=y.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=B.x,this._anchorDragOffset.y-=B.y,T.width+=this.padding()*2}if(this._movingAnchorName&&T.height<0&&this._movingAnchorName.indexOf("top")>=0){const B=y.point({x:0,y:-this.padding()*2});T.x+=B.x,T.y+=B.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=B.x,this._anchorDragOffset.y-=B.y,T.height+=this.padding()*2}else if(this._movingAnchorName&&T.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const B=y.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=B.x,this._anchorDragOffset.y-=B.y,T.height+=this.padding()*2}if(this.boundBoxFunc()){const B=this.boundBoxFunc()(R,T);B?T=B:o.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const P=1e7,w=new o.Transform;w.translate(R.x,R.y),w.rotate(R.rotation),w.scale(R.width/P,R.height/P);const E=new o.Transform,F=T.width/P,N=T.height/P;this.flipEnabled()===!1?(E.translate(T.x,T.y),E.rotate(T.rotation),E.translate(T.width<0?T.width:0,T.height<0?T.height:0),E.scale(Math.abs(F),Math.abs(N))):(E.translate(T.x,T.y),E.rotate(T.rotation),E.scale(F,N));const z=E.multiply(w.invert());this._nodes.forEach(B=>{var Y;const K=B.getParent().getAbsoluteTransform(),H=B.getTransform().copy();H.translate(B.offsetX(),B.offsetY());const X=new o.Transform;X.multiply(K.copy().invert()).multiply(z).multiply(K).multiply(H);const L=X.decompose();B.setAttrs(L),(Y=B.getLayer())===null||Y===void 0||Y.batchDraw()}),this.rotation(o.Util._getRotation(T.rotation)),this._nodes.forEach(B=>{this._fire("transform",{evt:A,target:B}),B._fire("transform",{evt:A,target:B})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(T,A){this.findOne(T).setAttrs(A)}update(){var T;const A=this._getNodeRect();this.rotation(o.Util._getRotation(A.rotation));const R=A.width,D=A.height,y=this.enabledAnchors(),P=this.resizeEnabled(),w=this.padding(),E=this.anchorSize(),F=this.find("._anchor");F.forEach(z=>{z.setAttrs({width:E,height:E,offsetX:E/2,offsetY:E/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:E/2+w,offsetY:E/2+w,visible:P&&y.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:R/2,y:0,offsetY:E/2+w,visible:P&&y.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:R,y:0,offsetX:E/2-w,offsetY:E/2+w,visible:P&&y.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:D/2,offsetX:E/2+w,visible:P&&y.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:R,y:D/2,offsetX:E/2-w,visible:P&&y.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:D,offsetX:E/2+w,offsetY:E/2-w,visible:P&&y.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:R/2,y:D,offsetY:E/2-w,visible:P&&y.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:R,y:D,offsetX:E/2-w,offsetY:E/2-w,visible:P&&y.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:R/2,y:-this.rotateAnchorOffset()*o.Util._sign(D)-w,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:R,height:D,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const N=this.anchorStyleFunc();N&&F.forEach(z=>{N(z)}),(T=this.getLayer())===null||T===void 0||T.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const T=this.findOne("."+this._movingAnchorName);T&&T.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),n.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return i.Node.prototype.toObject.call(this)}clone(T){return i.Node.prototype.clone.call(this,T)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}};Xi.Transformer=x,x.isTransforming=()=>S>0;function M(k){return k instanceof Array||o.Util.warn("enabledAnchors value should be an array"),k instanceof Array&&k.forEach(function(T){v.indexOf(T)===-1&&o.Util.warn("Unknown anchor name: "+T+". Available names are: "+v.join(", "))}),k||[]}return x.prototype.className="Transformer",(0,h._registerNode)(x),t.Factory.addGetterSetter(x,"enabledAnchors",v,M),t.Factory.addGetterSetter(x,"flipEnabled",!0,(0,a.getBooleanValidator)()),t.Factory.addGetterSetter(x,"resizeEnabled",!0),t.Factory.addGetterSetter(x,"anchorSize",10,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(x,"rotateEnabled",!0),t.Factory.addGetterSetter(x,"rotateLineVisible",!0),t.Factory.addGetterSetter(x,"rotationSnaps",[]),t.Factory.addGetterSetter(x,"rotateAnchorOffset",50,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(x,"rotateAnchorCursor","crosshair"),t.Factory.addGetterSetter(x,"rotationSnapTolerance",5,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(x,"borderEnabled",!0),t.Factory.addGetterSetter(x,"anchorStroke","rgb(0, 161, 255)"),t.Factory.addGetterSetter(x,"anchorStrokeWidth",1,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(x,"anchorFill","white"),t.Factory.addGetterSetter(x,"anchorCornerRadius",0,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(x,"borderStroke","rgb(0, 161, 255)"),t.Factory.addGetterSetter(x,"borderStrokeWidth",1,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(x,"borderDash"),t.Factory.addGetterSetter(x,"keepRatio",!0),t.Factory.addGetterSetter(x,"shiftBehavior","default"),t.Factory.addGetterSetter(x,"centeredScaling",!1),t.Factory.addGetterSetter(x,"ignoreStroke",!1),t.Factory.addGetterSetter(x,"padding",0,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(x,"node"),t.Factory.addGetterSetter(x,"nodes"),t.Factory.addGetterSetter(x,"boundBoxFunc"),t.Factory.addGetterSetter(x,"anchorDragBoundFunc"),t.Factory.addGetterSetter(x,"anchorStyleFunc"),t.Factory.addGetterSetter(x,"shouldOverdrawWholeArea",!1),t.Factory.addGetterSetter(x,"useSingleNodeRotation",!0),t.Factory.backCompat(x,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"}),Xi}var Wi={},pa;function ec(){if(pa)return Wi;pa=1,Object.defineProperty(Wi,"__esModule",{value:!0}),Wi.Wedge=void 0;const o=lt(),t=Nt(),i=ht(),e=ct(),r=ht();let n=class extends t.Shape{_sceneFunc(a){a.beginPath(),a.arc(0,0,this.radius(),0,i.Konva.getAngle(this.angle()),this.clockwise()),a.lineTo(0,0),a.closePath(),a.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(a){this.radius(a/2)}setHeight(a){this.radius(a/2)}};return Wi.Wedge=n,n.prototype.className="Wedge",n.prototype._centroid=!0,n.prototype._attrsAffectingSize=["radius"],(0,r._registerNode)(n),o.Factory.addGetterSetter(n,"radius",0,(0,e.getNumberValidator)()),o.Factory.addGetterSetter(n,"angle",0,(0,e.getNumberValidator)()),o.Factory.addGetterSetter(n,"clockwise",!1),o.Factory.backCompat(n,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"}),Wi}var Ki={},ma;function ic(){if(ma)return Ki;ma=1,Object.defineProperty(Ki,"__esModule",{value:!0}),Ki.Blur=void 0;const o=lt(),t=kt(),i=ct();function e(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const r=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],n=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function s(h,l){const c=h.data,p=h.width,m=h.height;let d,f,_,v,C,u,g,b,S,x,M,k,T,A,R,D,y,P,w,E,F,N,z,B,Y=l+l+1,K=p-1,H=m-1,X=l+1,L=X*(X+1)/2,G=new e,O=null,I=G,U=null,W=null,$=r[l],Q=n[l];for(_=1;_<Y;_++)I=I.next=new e,_===X&&(O=I);for(I.next=G,g=u=0,f=0;f<m;f++){for(D=y=P=w=b=S=x=M=0,k=X*(E=c[u]),T=X*(F=c[u+1]),A=X*(N=c[u+2]),R=X*(z=c[u+3]),b+=L*E,S+=L*F,x+=L*N,M+=L*z,I=G,_=0;_<X;_++)I.r=E,I.g=F,I.b=N,I.a=z,I=I.next;for(_=1;_<X;_++)v=u+((K<_?K:_)<<2),b+=(I.r=E=c[v])*(B=X-_),S+=(I.g=F=c[v+1])*B,x+=(I.b=N=c[v+2])*B,M+=(I.a=z=c[v+3])*B,D+=E,y+=F,P+=N,w+=z,I=I.next;for(U=G,W=O,d=0;d<p;d++)c[u+3]=z=M*$>>Q,z!==0?(z=255/z,c[u]=(b*$>>Q)*z,c[u+1]=(S*$>>Q)*z,c[u+2]=(x*$>>Q)*z):c[u]=c[u+1]=c[u+2]=0,b-=k,S-=T,x-=A,M-=R,k-=U.r,T-=U.g,A-=U.b,R-=U.a,v=g+((v=d+l+1)<K?v:K)<<2,D+=U.r=c[v],y+=U.g=c[v+1],P+=U.b=c[v+2],w+=U.a=c[v+3],b+=D,S+=y,x+=P,M+=w,U=U.next,k+=E=W.r,T+=F=W.g,A+=N=W.b,R+=z=W.a,D-=E,y-=F,P-=N,w-=z,W=W.next,u+=4;g+=p}for(d=0;d<p;d++){for(y=P=w=D=S=x=M=b=0,u=d<<2,k=X*(E=c[u]),T=X*(F=c[u+1]),A=X*(N=c[u+2]),R=X*(z=c[u+3]),b+=L*E,S+=L*F,x+=L*N,M+=L*z,I=G,_=0;_<X;_++)I.r=E,I.g=F,I.b=N,I.a=z,I=I.next;for(C=p,_=1;_<=l;_++)u=C+d<<2,b+=(I.r=E=c[u])*(B=X-_),S+=(I.g=F=c[u+1])*B,x+=(I.b=N=c[u+2])*B,M+=(I.a=z=c[u+3])*B,D+=E,y+=F,P+=N,w+=z,I=I.next,_<H&&(C+=p);for(u=d,U=G,W=O,f=0;f<m;f++)v=u<<2,c[v+3]=z=M*$>>Q,z>0?(z=255/z,c[v]=(b*$>>Q)*z,c[v+1]=(S*$>>Q)*z,c[v+2]=(x*$>>Q)*z):c[v]=c[v+1]=c[v+2]=0,b-=k,S-=T,x-=A,M-=R,k-=U.r,T-=U.g,A-=U.b,R-=U.a,v=d+((v=f+X)<H?v:H)*p<<2,b+=D+=U.r=c[v],S+=y+=U.g=c[v+1],x+=P+=U.b=c[v+2],M+=w+=U.a=c[v+3],U=U.next,k+=E=W.r,T+=F=W.g,A+=N=W.b,R+=z=W.a,D-=E,y-=F,P-=N,w-=z,W=W.next,u+=p}}const a=function(l){const c=Math.round(this.blurRadius());c>0&&s(l,c)};return Ki.Blur=a,o.Factory.addGetterSetter(t.Node,"blurRadius",0,(0,i.getNumberValidator)(),o.Factory.afterSetFilter),Ki}var ji={},ya;function rc(){if(ya)return ji;ya=1,Object.defineProperty(ji,"__esModule",{value:!0}),ji.Brighten=void 0;const o=lt(),t=kt(),i=ct(),e=function(r){let n=this.brightness()*255,s=r.data,a=s.length,h;for(h=0;h<a;h+=4)s[h]+=n,s[h+1]+=n,s[h+2]+=n};return ji.Brighten=e,o.Factory.addGetterSetter(t.Node,"brightness",0,(0,i.getNumberValidator)(),o.Factory.afterSetFilter),ji}var $i={},va;function nc(){if(va)return $i;va=1,Object.defineProperty($i,"__esModule",{value:!0}),$i.Contrast=void 0;const o=lt(),t=kt(),i=ct(),e=function(r){const n=Math.pow((this.contrast()+100)/100,2);let s=r.data,a=s.length,h=150,l=150,c=150,p;for(p=0;p<a;p+=4)h=s[p],l=s[p+1],c=s[p+2],h/=255,h-=.5,h*=n,h+=.5,h*=255,l/=255,l-=.5,l*=n,l+=.5,l*=255,c/=255,c-=.5,c*=n,c+=.5,c*=255,h=h<0?0:h>255?255:h,l=l<0?0:l>255?255:l,c=c<0?0:c>255?255:c,s[p]=h,s[p+1]=l,s[p+2]=c};return $i.Contrast=e,o.Factory.addGetterSetter(t.Node,"contrast",0,(0,i.getNumberValidator)(),o.Factory.afterSetFilter),$i}var Qi={},ba;function sc(){if(ba)return Qi;ba=1,Object.defineProperty(Qi,"__esModule",{value:!0}),Qi.Emboss=void 0;const o=lt(),t=kt(),i=Ct(),e=ct(),r=function(n){let s=this.embossStrength()*10,a=this.embossWhiteLevel()*255,h=this.embossDirection(),l=this.embossBlend(),c=0,p=0,m=n.data,d=n.width,f=n.height,_=d*4,v=f;switch(h){case"top-left":c=-1,p=-1;break;case"top":c=-1,p=0;break;case"top-right":c=-1,p=1;break;case"right":c=0,p=1;break;case"bottom-right":c=1,p=1;break;case"bottom":c=1,p=0;break;case"bottom-left":c=1,p=-1;break;case"left":c=0,p=-1;break;default:i.Util.error("Unknown emboss direction: "+h)}do{const C=(v-1)*_;let u=c;v+u<1&&(u=0),v+u>f&&(u=0);const g=(v-1+u)*d*4;let b=d;do{const S=C+(b-1)*4;let x=p;b+x<1&&(x=0),b+x>d&&(x=0);const M=g+(b-1+x)*4,k=m[S]-m[M],T=m[S+1]-m[M+1],A=m[S+2]-m[M+2];let R=k;const D=R>0?R:-R,y=T>0?T:-T,P=A>0?A:-A;if(y>D&&(R=T),P>D&&(R=A),R*=s,l){const w=m[S]+R,E=m[S+1]+R,F=m[S+2]+R;m[S]=w>255?255:w<0?0:w,m[S+1]=E>255?255:E<0?0:E,m[S+2]=F>255?255:F<0?0:F}else{let w=a-R;w<0?w=0:w>255&&(w=255),m[S]=m[S+1]=m[S+2]=w}}while(--b)}while(--v)};return Qi.Emboss=r,o.Factory.addGetterSetter(t.Node,"embossStrength",.5,(0,e.getNumberValidator)(),o.Factory.afterSetFilter),o.Factory.addGetterSetter(t.Node,"embossWhiteLevel",.5,(0,e.getNumberValidator)(),o.Factory.afterSetFilter),o.Factory.addGetterSetter(t.Node,"embossDirection","top-left",null,o.Factory.afterSetFilter),o.Factory.addGetterSetter(t.Node,"embossBlend",!1,null,o.Factory.afterSetFilter),Qi}var Ji={},Sa;function ac(){if(Sa)return Ji;Sa=1,Object.defineProperty(Ji,"__esModule",{value:!0}),Ji.Enhance=void 0;const o=lt(),t=kt(),i=ct();function e(n,s,a,h,l){let c=a-s,p=l-h,m;return c===0?h+p/2:p===0?h:(m=(n-s)/c,m=p*m+h,m)}const r=function(n){let s=n.data,a=s.length,h=s[0],l=h,c,p=s[1],m=p,d,f=s[2],_=f,v,C;const u=this.enhance();if(u===0)return;for(C=0;C<a;C+=4)c=s[C+0],c<h?h=c:c>l&&(l=c),d=s[C+1],d<p?p=d:d>m&&(m=d),v=s[C+2],v<f?f=v:v>_&&(_=v);l===h&&(l=255,h=0),m===p&&(m=255,p=0),_===f&&(_=255,f=0);let g,b,S,x,M,k,T,A,R;for(u>0?(b=l+u*(255-l),S=h-u*(h-0),M=m+u*(255-m),k=p-u*(p-0),A=_+u*(255-_),R=f-u*(f-0)):(g=(l+h)*.5,b=l+u*(l-g),S=h+u*(h-g),x=(m+p)*.5,M=m+u*(m-x),k=p+u*(p-x),T=(_+f)*.5,A=_+u*(_-T),R=f+u*(f-T)),C=0;C<a;C+=4)s[C+0]=e(s[C+0],h,l,S,b),s[C+1]=e(s[C+1],p,m,k,M),s[C+2]=e(s[C+2],f,_,R,A)};return Ji.Enhance=r,o.Factory.addGetterSetter(t.Node,"enhance",0,(0,i.getNumberValidator)(),o.Factory.afterSetFilter),Ji}var Zi={},wa;function oc(){if(wa)return Zi;wa=1,Object.defineProperty(Zi,"__esModule",{value:!0}),Zi.Grayscale=void 0;const o=function(t){let i=t.data,e=i.length,r,n;for(r=0;r<e;r+=4)n=.34*i[r]+.5*i[r+1]+.16*i[r+2],i[r]=n,i[r+1]=n,i[r+2]=n};return Zi.Grayscale=o,Zi}var tr={},xa;function hc(){if(xa)return tr;xa=1,Object.defineProperty(tr,"__esModule",{value:!0}),tr.HSL=void 0;const o=lt(),t=kt(),i=ct();o.Factory.addGetterSetter(t.Node,"hue",0,(0,i.getNumberValidator)(),o.Factory.afterSetFilter),o.Factory.addGetterSetter(t.Node,"saturation",0,(0,i.getNumberValidator)(),o.Factory.afterSetFilter),o.Factory.addGetterSetter(t.Node,"luminance",0,(0,i.getNumberValidator)(),o.Factory.afterSetFilter);const e=function(r){let n=r.data,s=n.length,a=1,h=Math.pow(2,this.saturation()),l=Math.abs(this.hue()+360)%360,c=this.luminance()*127,p;const m=a*h*Math.cos(l*Math.PI/180),d=a*h*Math.sin(l*Math.PI/180),f=.299*a+.701*m+.167*d,_=.587*a-.587*m+.33*d,v=.114*a-.114*m-.497*d,C=.299*a-.299*m-.328*d,u=.587*a+.413*m+.035*d,g=.114*a-.114*m+.293*d,b=.299*a-.3*m+1.25*d,S=.587*a-.586*m-1.05*d,x=.114*a+.886*m-.2*d;let M,k,T,A;for(p=0;p<s;p+=4)M=n[p+0],k=n[p+1],T=n[p+2],A=n[p+3],n[p+0]=f*M+_*k+v*T+c,n[p+1]=C*M+u*k+g*T+c,n[p+2]=b*M+S*k+x*T+c,n[p+3]=A};return tr.HSL=e,tr}var er={},Ca;function lc(){if(Ca)return er;Ca=1,Object.defineProperty(er,"__esModule",{value:!0}),er.HSV=void 0;const o=lt(),t=kt(),i=ct(),e=function(r){const n=r.data,s=n.length,a=Math.pow(2,this.value()),h=Math.pow(2,this.saturation()),l=Math.abs(this.hue()+360)%360,c=a*h*Math.cos(l*Math.PI/180),p=a*h*Math.sin(l*Math.PI/180),m=.299*a+.701*c+.167*p,d=.587*a-.587*c+.33*p,f=.114*a-.114*c-.497*p,_=.299*a-.299*c-.328*p,v=.587*a+.413*c+.035*p,C=.114*a-.114*c+.293*p,u=.299*a-.3*c+1.25*p,g=.587*a-.586*c-1.05*p,b=.114*a+.886*c-.2*p;let S,x,M,k;for(let T=0;T<s;T+=4)S=n[T+0],x=n[T+1],M=n[T+2],k=n[T+3],n[T+0]=m*S+d*x+f*M,n[T+1]=_*S+v*x+C*M,n[T+2]=u*S+g*x+b*M,n[T+3]=k};return er.HSV=e,o.Factory.addGetterSetter(t.Node,"hue",0,(0,i.getNumberValidator)(),o.Factory.afterSetFilter),o.Factory.addGetterSetter(t.Node,"saturation",0,(0,i.getNumberValidator)(),o.Factory.afterSetFilter),o.Factory.addGetterSetter(t.Node,"value",0,(0,i.getNumberValidator)(),o.Factory.afterSetFilter),er}var ir={},Ta;function cc(){if(Ta)return ir;Ta=1,Object.defineProperty(ir,"__esModule",{value:!0}),ir.Invert=void 0;const o=function(t){let i=t.data,e=i.length,r;for(r=0;r<e;r+=4)i[r]=255-i[r],i[r+1]=255-i[r+1],i[r+2]=255-i[r+2]};return ir.Invert=o,ir}var rr={},Pa;function dc(){if(Pa)return rr;Pa=1,Object.defineProperty(rr,"__esModule",{value:!0}),rr.Kaleidoscope=void 0;const o=lt(),t=kt(),i=Ct(),e=ct(),r=function(a,h,l){let c=a.data,p=h.data,m=a.width,d=a.height,f=l.polarCenterX||m/2,_=l.polarCenterY||d/2,v,C,u,g=0,b=0,S=0,x=0,M,k=Math.sqrt(f*f+_*_);C=m-f,u=d-_,M=Math.sqrt(C*C+u*u),k=M>k?M:k;let T=d,A=m,R,D,y=360/A*Math.PI/180,P,w;for(D=0;D<A;D+=1)for(P=Math.sin(D*y),w=Math.cos(D*y),R=0;R<T;R+=1)C=Math.floor(f+k*R/T*w),u=Math.floor(_+k*R/T*P),v=(u*m+C)*4,g=c[v+0],b=c[v+1],S=c[v+2],x=c[v+3],v=(D+R*m)*4,p[v+0]=g,p[v+1]=b,p[v+2]=S,p[v+3]=x},n=function(a,h,l){let c=a.data,p=h.data,m=a.width,d=a.height,f=l.polarCenterX||m/2,_=l.polarCenterY||d/2,v,C,u,g,b,S=0,x=0,M=0,k=0,T,A=Math.sqrt(f*f+_*_);C=m-f,u=d-_,T=Math.sqrt(C*C+u*u),A=T>A?T:A;let R=d,D=m,y,P,w=0,E,F;for(C=0;C<m;C+=1)for(u=0;u<d;u+=1)g=C-f,b=u-_,y=Math.sqrt(g*g+b*b)*R/A,P=(Math.atan2(b,g)*180/Math.PI+360+w)%360,P=P*D/360,E=Math.floor(P),F=Math.floor(y),v=(F*m+E)*4,S=c[v+0],x=c[v+1],M=c[v+2],k=c[v+3],v=(u*m+C)*4,p[v+0]=S,p[v+1]=x,p[v+2]=M,p[v+3]=k},s=function(a){const h=a.width,l=a.height;let c,p,m,d,f,_,v,C,u,g,b=Math.round(this.kaleidoscopePower());const S=Math.round(this.kaleidoscopeAngle()),x=Math.floor(h*(S%360)/360);if(b<1)return;const M=i.Util.createCanvasElement();M.width=h,M.height=l;const k=M.getContext("2d").getImageData(0,0,h,l);i.Util.releaseCanvas(M),r(a,k,{polarCenterX:h/2,polarCenterY:l/2});let T=h/Math.pow(2,b);for(;T<=8;)T=T*2,b-=1;T=Math.ceil(T);let A=T,R=0,D=A,y=1;for(x+T>h&&(R=A,D=0,y=-1),p=0;p<l;p+=1)for(c=R;c!==D;c+=y)m=Math.round(c+x)%h,u=(h*p+m)*4,f=k.data[u+0],_=k.data[u+1],v=k.data[u+2],C=k.data[u+3],g=(h*p+c)*4,k.data[g+0]=f,k.data[g+1]=_,k.data[g+2]=v,k.data[g+3]=C;for(p=0;p<l;p+=1)for(A=Math.floor(T),d=0;d<b;d+=1){for(c=0;c<A+1;c+=1)u=(h*p+c)*4,f=k.data[u+0],_=k.data[u+1],v=k.data[u+2],C=k.data[u+3],g=(h*p+A*2-c-1)*4,k.data[g+0]=f,k.data[g+1]=_,k.data[g+2]=v,k.data[g+3]=C;A*=2}n(k,a,{})};return rr.Kaleidoscope=s,o.Factory.addGetterSetter(t.Node,"kaleidoscopePower",2,(0,e.getNumberValidator)(),o.Factory.afterSetFilter),o.Factory.addGetterSetter(t.Node,"kaleidoscopeAngle",0,(0,e.getNumberValidator)(),o.Factory.afterSetFilter),rr}var nr={},ka;function uc(){if(ka)return nr;ka=1,Object.defineProperty(nr,"__esModule",{value:!0}),nr.Mask=void 0;const o=lt(),t=kt(),i=ct();function e(m,d,f){let _=(f*m.width+d)*4;const v=[];return v.push(m.data[_++],m.data[_++],m.data[_++],m.data[_++]),v}function r(m,d){return Math.sqrt(Math.pow(m[0]-d[0],2)+Math.pow(m[1]-d[1],2)+Math.pow(m[2]-d[2],2))}function n(m){const d=[0,0,0];for(let f=0;f<m.length;f++)d[0]+=m[f][0],d[1]+=m[f][1],d[2]+=m[f][2];return d[0]/=m.length,d[1]/=m.length,d[2]/=m.length,d}function s(m,d){const f=e(m,0,0),_=e(m,m.width-1,0),v=e(m,0,m.height-1),C=e(m,m.width-1,m.height-1),u=d||10;if(r(f,_)<u&&r(_,C)<u&&r(C,v)<u&&r(v,f)<u){const g=n([_,f,C,v]),b=[];for(let S=0;S<m.width*m.height;S++){const x=r(g,[m.data[S*4],m.data[S*4+1],m.data[S*4+2]]);b[S]=x<u?0:255}return b}}function a(m,d){for(let f=0;f<m.width*m.height;f++)m.data[4*f+3]=d[f]}function h(m,d,f){const _=[1,1,1,1,0,1,1,1,1],v=Math.round(Math.sqrt(_.length)),C=Math.floor(v/2),u=[];for(let g=0;g<f;g++)for(let b=0;b<d;b++){const S=g*d+b;let x=0;for(let M=0;M<v;M++)for(let k=0;k<v;k++){const T=g+M-C,A=b+k-C;if(T>=0&&T<f&&A>=0&&A<d){const R=T*d+A,D=_[M*v+k];x+=m[R]*D}}u[S]=x===255*8?255:0}return u}function l(m,d,f){const _=[1,1,1,1,1,1,1,1,1],v=Math.round(Math.sqrt(_.length)),C=Math.floor(v/2),u=[];for(let g=0;g<f;g++)for(let b=0;b<d;b++){const S=g*d+b;let x=0;for(let M=0;M<v;M++)for(let k=0;k<v;k++){const T=g+M-C,A=b+k-C;if(T>=0&&T<f&&A>=0&&A<d){const R=T*d+A,D=_[M*v+k];x+=m[R]*D}}u[S]=x>=255*4?255:0}return u}function c(m,d,f){const _=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],v=Math.round(Math.sqrt(_.length)),C=Math.floor(v/2),u=[];for(let g=0;g<f;g++)for(let b=0;b<d;b++){const S=g*d+b;let x=0;for(let M=0;M<v;M++)for(let k=0;k<v;k++){const T=g+M-C,A=b+k-C;if(T>=0&&T<f&&A>=0&&A<d){const R=T*d+A,D=_[M*v+k];x+=m[R]*D}}u[S]=x}return u}const p=function(m){let d=this.threshold(),f=s(m,d);return f&&(f=h(f,m.width,m.height),f=l(f,m.width,m.height),f=c(f,m.width,m.height),a(m,f)),m};return nr.Mask=p,o.Factory.addGetterSetter(t.Node,"threshold",0,(0,i.getNumberValidator)(),o.Factory.afterSetFilter),nr}var sr={},Aa;function fc(){if(Aa)return sr;Aa=1,Object.defineProperty(sr,"__esModule",{value:!0}),sr.Noise=void 0;const o=lt(),t=kt(),i=ct(),e=function(r){const n=this.noise()*255,s=r.data,a=s.length,h=n/2;for(let l=0;l<a;l+=4)s[l+0]+=h-2*h*Math.random(),s[l+1]+=h-2*h*Math.random(),s[l+2]+=h-2*h*Math.random()};return sr.Noise=e,o.Factory.addGetterSetter(t.Node,"noise",.2,(0,i.getNumberValidator)(),o.Factory.afterSetFilter),sr}var ar={},Ra;function gc(){if(Ra)return ar;Ra=1,Object.defineProperty(ar,"__esModule",{value:!0}),ar.Pixelate=void 0;const o=lt(),t=Ct(),i=kt(),e=ct(),r=function(n){let s=Math.ceil(this.pixelSize()),a=n.width,h=n.height,l,c,p,m,d,f,_,v=Math.ceil(a/s),C=Math.ceil(h/s),u,g,b,S,x,M,k,T=n.data;if(s<=0){t.Util.error("pixelSize value can not be <= 0");return}for(x=0;x<v;x+=1)for(M=0;M<C;M+=1){for(m=0,d=0,f=0,_=0,u=x*s,g=u+s,b=M*s,S=b+s,k=0,l=u;l<g;l+=1)if(!(l>=a))for(c=b;c<S;c+=1)c>=h||(p=(a*c+l)*4,m+=T[p+0],d+=T[p+1],f+=T[p+2],_+=T[p+3],k+=1);for(m=m/k,d=d/k,f=f/k,_=_/k,l=u;l<g;l+=1)if(!(l>=a))for(c=b;c<S;c+=1)c>=h||(p=(a*c+l)*4,T[p+0]=m,T[p+1]=d,T[p+2]=f,T[p+3]=_)}};return ar.Pixelate=r,o.Factory.addGetterSetter(i.Node,"pixelSize",8,(0,e.getNumberValidator)(),o.Factory.afterSetFilter),ar}var or={},Ea;function _c(){if(Ea)return or;Ea=1,Object.defineProperty(or,"__esModule",{value:!0}),or.Posterize=void 0;const o=lt(),t=kt(),i=ct(),e=function(r){let n=Math.round(this.levels()*254)+1,s=r.data,a=s.length,h=255/n,l;for(l=0;l<a;l+=1)s[l]=Math.floor(s[l]/h)*h};return or.Posterize=e,o.Factory.addGetterSetter(t.Node,"levels",.5,(0,i.getNumberValidator)(),o.Factory.afterSetFilter),or}var hr={},Ma;function pc(){if(Ma)return hr;Ma=1,Object.defineProperty(hr,"__esModule",{value:!0}),hr.RGB=void 0;const o=lt(),t=kt(),i=ct(),e=function(r){let n=r.data,s=n.length,a=this.red(),h=this.green(),l=this.blue(),c,p;for(c=0;c<s;c+=4)p=(.34*n[c]+.5*n[c+1]+.16*n[c+2])/255,n[c]=p*a,n[c+1]=p*h,n[c+2]=p*l,n[c+3]=n[c+3]};return hr.RGB=e,o.Factory.addGetterSetter(t.Node,"red",0,function(r){return this._filterUpToDate=!1,r>255?255:r<0?0:Math.round(r)}),o.Factory.addGetterSetter(t.Node,"green",0,function(r){return this._filterUpToDate=!1,r>255?255:r<0?0:Math.round(r)}),o.Factory.addGetterSetter(t.Node,"blue",0,i.RGBComponent,o.Factory.afterSetFilter),hr}var lr={},Oa;function mc(){if(Oa)return lr;Oa=1,Object.defineProperty(lr,"__esModule",{value:!0}),lr.RGBA=void 0;const o=lt(),t=kt(),i=ct(),e=function(r){const n=r.data,s=n.length,a=this.red(),h=this.green(),l=this.blue(),c=this.alpha();for(let p=0;p<s;p+=4){const m=1-c;n[p]=a*c+n[p]*m,n[p+1]=h*c+n[p+1]*m,n[p+2]=l*c+n[p+2]*m}};return lr.RGBA=e,o.Factory.addGetterSetter(t.Node,"red",0,function(r){return this._filterUpToDate=!1,r>255?255:r<0?0:Math.round(r)}),o.Factory.addGetterSetter(t.Node,"green",0,function(r){return this._filterUpToDate=!1,r>255?255:r<0?0:Math.round(r)}),o.Factory.addGetterSetter(t.Node,"blue",0,i.RGBComponent,o.Factory.afterSetFilter),o.Factory.addGetterSetter(t.Node,"alpha",1,function(r){return this._filterUpToDate=!1,r>1?1:r<0?0:r}),lr}var cr={},Fa;function yc(){if(Fa)return cr;Fa=1,Object.defineProperty(cr,"__esModule",{value:!0}),cr.Sepia=void 0;const o=function(t){let i=t.data,e=i.length,r,n,s,a;for(r=0;r<e;r+=4)n=i[r+0],s=i[r+1],a=i[r+2],i[r+0]=Math.min(255,n*.393+s*.769+a*.189),i[r+1]=Math.min(255,n*.349+s*.686+a*.168),i[r+2]=Math.min(255,n*.272+s*.534+a*.131)};return cr.Sepia=o,cr}var dr={},Da;function vc(){if(Da)return dr;Da=1,Object.defineProperty(dr,"__esModule",{value:!0}),dr.Solarize=void 0;const o=function(t){const i=t.data,e=t.width,r=t.height,n=e*4;let s=r;do{const a=(s-1)*n;let h=e;do{const l=a+(h-1)*4;let c=i[l],p=i[l+1],m=i[l+2];c>127&&(c=255-c),p>127&&(p=255-p),m>127&&(m=255-m),i[l]=c,i[l+1]=p,i[l+2]=m}while(--h)}while(--s)};return dr.Solarize=o,dr}var ur={},Ia;function bc(){if(Ia)return ur;Ia=1,Object.defineProperty(ur,"__esModule",{value:!0}),ur.Threshold=void 0;const o=lt(),t=kt(),i=ct(),e=function(r){const n=this.threshold()*255,s=r.data,a=s.length;for(let h=0;h<a;h+=1)s[h]=s[h]<n?0:255};return ur.Threshold=e,o.Factory.addGetterSetter(t.Node,"threshold",.5,(0,i.getNumberValidator)(),o.Factory.afterSetFilter),ur}var Na;function Sc(){if(Na)return Pi;Na=1,Object.defineProperty(Pi,"__esModule",{value:!0}),Pi.Konva=void 0;const o=Vl(),t=zl(),i=ql(),e=Yl(),r=Xl(),n=Wl(),s=Kl(),a=ih(),h=ls(),l=rh(),c=jl(),p=$l(),m=Ql(),d=Jl(),f=nh(),_=Zl(),v=tc(),C=ec(),u=ic(),g=rc(),b=nc(),S=sc(),x=ac(),M=oc(),k=hc(),T=lc(),A=cc(),R=dc(),D=uc(),y=fc(),P=gc(),w=_c(),E=pc(),F=mc(),N=yc(),z=vc(),B=bc();return Pi.Konva=o.Konva.Util._assign(o.Konva,{Arc:t.Arc,Arrow:i.Arrow,Circle:e.Circle,Ellipse:r.Ellipse,Image:n.Image,Label:s.Label,Tag:s.Tag,Line:a.Line,Path:h.Path,Rect:l.Rect,RegularPolygon:c.RegularPolygon,Ring:p.Ring,Sprite:m.Sprite,Star:d.Star,Text:f.Text,TextPath:_.TextPath,Transformer:v.Transformer,Wedge:C.Wedge,Filters:{Blur:u.Blur,Brighten:g.Brighten,Contrast:b.Contrast,Emboss:S.Emboss,Enhance:x.Enhance,Grayscale:M.Grayscale,HSL:k.HSL,HSV:T.HSV,Invert:A.Invert,Kaleidoscope:R.Kaleidoscope,Mask:D.Mask,Noise:y.Noise,Pixelate:P.Pixelate,Posterize:w.Posterize,RGB:E.RGB,RGBA:F.RGBA,Sepia:N.Sepia,Solarize:z.Solarize,Threshold:B.Threshold}}),Pi}var wc=Fr.exports,La;function xc(){if(La)return Fr.exports;La=1,Object.defineProperty(wc,"__esModule",{value:!0});const o=Sc();return Fr.exports=o.Konva,Fr.exports}var Cc=xc();const mt=Ja(Cc),vn=mh(),Ga={timeout:1e3},sh=()=>({toastSuccess:o=>vn.add({...Ga,icon:"i-heroicons-check-circle",color:"green",title:o}),toastWarning:o=>vn.add({timeout:1800,icon:"i-heroicons-exclamation-circle",color:"amber",title:o}),toastError:o=>vn.add({...Ga,icon:"i-heroicons-x-circle",color:"red",title:o})}),Ua=5,Ba="#f00",_i=6,Bn=0,Va=56,Vn=214,ah=7,Te=24,Tc=8,oh=Te+Tc,Pc=16,kc=16+oh,Ne=Bn+Pc+kc+ah,Ft=oh+ah,za="#38bdf8",bn="#60a5fa",Ha=4,yd=Vn-34,vd={default:()=>({width:640,height:320,mmid:"test-mmid",cmid:"test-cmid",token:"test-token",title:"標題"})},qa=6,Ac=["image/jpeg","image/png"];var Sn={exports:{}},Ya;function Rc(){return Ya||(Ya=1,function(o){var t=(()=>{var i=Object.defineProperty,e=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,n=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,h=(b,S,x)=>S in b?i(b,S,{enumerable:!0,configurable:!0,writable:!0,value:x}):b[S]=x,l=(b,S)=>{for(var x in S||(S={}))s.call(S,x)&&h(b,x,S[x]);if(n)for(var x of n(S))a.call(S,x)&&h(b,x,S[x]);return b},c=(b,S)=>{for(var x in S)i(b,x,{get:S[x],enumerable:!0})},p=(b,S,x,M)=>{if(S&&typeof S=="object"||typeof S=="function")for(let k of r(S))!s.call(b,k)&&k!==x&&i(b,k,{get:()=>S[k],enumerable:!(M=e(S,k))||M.enumerable});return b},m=b=>p(i({},"__esModule",{value:!0}),b),d=(b,S,x)=>(h(b,typeof S!="symbol"?S+"":S,x),x),f={};c(f,{DEFAULT_OPTIONS:()=>C,DEFAULT_UUID_LENGTH:()=>v,default:()=>g});var _="5.2.0",v=6,C={dictionary:"alphanum",shuffle:!0,debug:!1,length:v,counter:0},u=class{constructor(S={}){d(this,"counter"),d(this,"debug"),d(this,"dict"),d(this,"version"),d(this,"dictIndex",0),d(this,"dictRange",[]),d(this,"lowerBound",0),d(this,"upperBound",0),d(this,"dictLength",0),d(this,"uuidLength"),d(this,"_digit_first_ascii",48),d(this,"_digit_last_ascii",58),d(this,"_alpha_lower_first_ascii",97),d(this,"_alpha_lower_last_ascii",123),d(this,"_hex_last_ascii",103),d(this,"_alpha_upper_first_ascii",65),d(this,"_alpha_upper_last_ascii",91),d(this,"_number_dict_ranges",{digits:[this._digit_first_ascii,this._digit_last_ascii]}),d(this,"_alpha_dict_ranges",{lowerCase:[this._alpha_lower_first_ascii,this._alpha_lower_last_ascii],upperCase:[this._alpha_upper_first_ascii,this._alpha_upper_last_ascii]}),d(this,"_alpha_lower_dict_ranges",{lowerCase:[this._alpha_lower_first_ascii,this._alpha_lower_last_ascii]}),d(this,"_alpha_upper_dict_ranges",{upperCase:[this._alpha_upper_first_ascii,this._alpha_upper_last_ascii]}),d(this,"_alphanum_dict_ranges",{digits:[this._digit_first_ascii,this._digit_last_ascii],lowerCase:[this._alpha_lower_first_ascii,this._alpha_lower_last_ascii],upperCase:[this._alpha_upper_first_ascii,this._alpha_upper_last_ascii]}),d(this,"_alphanum_lower_dict_ranges",{digits:[this._digit_first_ascii,this._digit_last_ascii],lowerCase:[this._alpha_lower_first_ascii,this._alpha_lower_last_ascii]}),d(this,"_alphanum_upper_dict_ranges",{digits:[this._digit_first_ascii,this._digit_last_ascii],upperCase:[this._alpha_upper_first_ascii,this._alpha_upper_last_ascii]}),d(this,"_hex_dict_ranges",{decDigits:[this._digit_first_ascii,this._digit_last_ascii],alphaDigits:[this._alpha_lower_first_ascii,this._hex_last_ascii]}),d(this,"_dict_ranges",{_number_dict_ranges:this._number_dict_ranges,_alpha_dict_ranges:this._alpha_dict_ranges,_alpha_lower_dict_ranges:this._alpha_lower_dict_ranges,_alpha_upper_dict_ranges:this._alpha_upper_dict_ranges,_alphanum_dict_ranges:this._alphanum_dict_ranges,_alphanum_lower_dict_ranges:this._alphanum_lower_dict_ranges,_alphanum_upper_dict_ranges:this._alphanum_upper_dict_ranges,_hex_dict_ranges:this._hex_dict_ranges}),d(this,"log",(...R)=>{const D=[...R];if(D[0]=`[short-unique-id] ${R[0]}`,this.debug===!0&&typeof console<"u"&&console!==null)return console.log(...D)}),d(this,"_normalizeDictionary",(R,D)=>{let y;if(R&&Array.isArray(R)&&R.length>1)y=R;else{y=[];let P;this.dictIndex=P=0;const w=`_${R}_dict_ranges`,E=this._dict_ranges[w];Object.keys(E).forEach(F=>{const N=F;for(this.dictRange=E[N],this.lowerBound=this.dictRange[0],this.upperBound=this.dictRange[1],this.dictIndex=P=this.lowerBound;this.lowerBound<=this.upperBound?P<this.upperBound:P>this.upperBound;this.dictIndex=this.lowerBound<=this.upperBound?P+=1:P-=1)y.push(String.fromCharCode(this.dictIndex))})}return D&&(y=y.sort(()=>Math.random()-.5)),y}),d(this,"setDictionary",(R,D)=>{this.dict=this._normalizeDictionary(R,D),this.dictLength=this.dict.length,this.setCounter(0)}),d(this,"seq",()=>this.sequentialUUID()),d(this,"sequentialUUID",()=>{let R,D,y="";R=this.counter;do D=R%this.dictLength,R=Math.trunc(R/this.dictLength),y+=this.dict[D];while(R!==0);return this.counter+=1,y}),d(this,"rnd",(R=this.uuidLength||v)=>this.randomUUID(R)),d(this,"randomUUID",(R=this.uuidLength||v)=>{let D,y,P;if(R===null||typeof R>"u"||R<1)throw new Error("Invalid UUID Length Provided");for(D="",P=0;P<R;P+=1)y=parseInt((Math.random()*this.dictLength).toFixed(0),10)%this.dictLength,D+=this.dict[y];return D}),d(this,"fmt",(R,D)=>this.formattedUUID(R,D)),d(this,"formattedUUID",(R,D)=>{const y={$r:this.randomUUID,$s:this.sequentialUUID,$t:this.stamp};return R.replace(/\$[rs]\d{0,}|\$t0|\$t[1-9]\d{1,}/g,w=>{const E=w.slice(0,2),F=parseInt(w.slice(2),10);return E==="$s"?y[E]().padStart(F,"0"):E==="$t"&&D?y[E](F,D):y[E](F)})}),d(this,"availableUUIDs",(R=this.uuidLength)=>parseFloat(Math.pow([...new Set(this.dict)].length,R).toFixed(0))),d(this,"approxMaxBeforeCollision",(R=this.availableUUIDs(this.uuidLength))=>parseFloat(Math.sqrt(Math.PI/2*R).toFixed(20))),d(this,"collisionProbability",(R=this.availableUUIDs(this.uuidLength),D=this.uuidLength)=>parseFloat((this.approxMaxBeforeCollision(R)/this.availableUUIDs(D)).toFixed(20))),d(this,"uniqueness",(R=this.availableUUIDs(this.uuidLength))=>{const D=parseFloat((1-this.approxMaxBeforeCollision(R)/R).toFixed(20));return D>1?1:D<0?0:D}),d(this,"getVersion",()=>this.version),d(this,"stamp",(R,D)=>{const y=Math.floor(+(D||new Date)/1e3).toString(16);if(typeof R=="number"&&R===0)return y;if(typeof R!="number"||R<10)throw new Error(["Param finalLength must be a number greater than or equal to 10,","or 0 if you want the raw hexadecimal timestamp"].join(`
`));const P=R-9,w=Math.round(Math.random()*(P>15?15:P)),E=this.randomUUID(P);return`${E.substring(0,w)}${y}${E.substring(w)}${w.toString(16)}`}),d(this,"parseStamp",(R,D)=>{if(D&&!/t0|t[1-9]\d{1,}/.test(D))throw new Error("Cannot extract date from a formated UUID with no timestamp in the format");const y=D?D.replace(/\$[rs]\d{0,}|\$t0|\$t[1-9]\d{1,}/g,w=>{const E={$r:z=>[...Array(z)].map(()=>"r").join(""),$s:z=>[...Array(z)].map(()=>"s").join(""),$t:z=>[...Array(z)].map(()=>"t").join("")},F=w.slice(0,2),N=parseInt(w.slice(2),10);return E[F](N)}).replace(/^(.*?)(t{8,})(.*)$/g,(w,E,F)=>R.substring(E.length,E.length+F.length)):R;if(y.length===8)return new Date(parseInt(y,16)*1e3);if(y.length<10)throw new Error("Stamp length invalid");const P=parseInt(y.substring(y.length-1),16);return new Date(parseInt(y.substring(P,P+8),16)*1e3)}),d(this,"setCounter",R=>{this.counter=R}),d(this,"validate",(R,D)=>{const y=D?this._normalizeDictionary(D):this.dict;return R.split("").every(P=>y.includes(P))});const x=l(l({},C),S);this.counter=0,this.debug=!1,this.dict=[],this.version=_;const{dictionary:M,shuffle:k,length:T,counter:A}=x;return this.uuidLength=T,this.setDictionary(M,k),this.setCounter(A),this.debug=x.debug,this.log(this.dict),this.log(`Generator instantiated with Dictionary Size ${this.dictLength} and counter set to ${this.counter}`),this.log=this.log.bind(this),this.setDictionary=this.setDictionary.bind(this),this.setCounter=this.setCounter.bind(this),this.seq=this.seq.bind(this),this.sequentialUUID=this.sequentialUUID.bind(this),this.rnd=this.rnd.bind(this),this.randomUUID=this.randomUUID.bind(this),this.fmt=this.fmt.bind(this),this.formattedUUID=this.formattedUUID.bind(this),this.availableUUIDs=this.availableUUIDs.bind(this),this.approxMaxBeforeCollision=this.approxMaxBeforeCollision.bind(this),this.collisionProbability=this.collisionProbability.bind(this),this.uniqueness=this.uniqueness.bind(this),this.getVersion=this.getVersion.bind(this),this.stamp=this.stamp.bind(this),this.parseStamp=this.parseStamp.bind(this),this}};d(u,"default",u);var g=u;return m(f)})();o.exports=t.default,typeof window<"u"&&(t=t.default)}(Sn)),Sn.exports}var Ec=Rc();const Mc=Ja(Ec),zn=new Mc,Sd=async o=>new Promise((t,i)=>{const e=URL.createObjectURL(o);let r=new Image;r.onload=()=>{t(r)},r.onerror=()=>{i(yh("Failed to load image."))},r.src=e}),wd=o=>Ac.includes(o.type),fe=(o,t=1e3)=>Math.round(o*t)/t,je=o=>{const t=window.innerWidth-Ne-Ft;let i=fe(o/t*_i,1e3);return i<0?0:i},Xa=o=>{const t=window.innerWidth-Ne-Ft;let i=fe(o/t*_i,1e3);return i<0?0:i},Oc=(o,t,i)=>{const e=[0,i.width()/2,i.width()],r=[0,i.height()/2,i.height()],n=t.getClientRect();return e.push(n.x,n.x+n.width),r.push(n.y,n.y+n.height),i.find(".item").forEach(s=>{if(o.find(h=>h._id===s._id))return;const a=s.getClientRect();e.push(a.x,a.x+a.width,a.x+a.width/2),r.push(a.y,a.y+a.height,a.y+a.height/2)}),{vertical:[...new Set(e)],horizontal:[...new Set(r)]}},Fc=o=>{const t=o.getClientRect(),i=o.absolutePosition();return{vertical:[{guide:Math.round(t.x),offset:Math.round(i.x-t.x),snap:"start"},{guide:Math.round(t.x+t.width/2),offset:Math.round(i.x-t.x-t.width/2),snap:"center"},{guide:Math.round(t.x+t.width),offset:Math.round(i.x-t.x-t.width),snap:"end"}],horizontal:[{guide:Math.round(t.y),offset:Math.round(i.y-t.y),snap:"start"},{guide:Math.round(t.y+t.height/2),offset:Math.round(i.y-t.y-t.height/2),snap:"center"},{guide:Math.round(t.y+t.height),offset:Math.round(i.y-t.y-t.height),snap:"end"}]}},Dc=(o,t)=>{const i=[],e=[];o.vertical.forEach(a=>{t.vertical.forEach(h=>{var l=Math.abs(a-h.guide);l<Ua&&i.push({lineGuide:a,diff:l,snap:h.snap,offset:h.offset})})}),o.horizontal.forEach(a=>{t.horizontal.forEach(h=>{var l=Math.abs(a-h.guide);l<Ua&&e.push({lineGuide:a,diff:l,snap:h.snap,offset:h.offset})})});var r=[];const n=i.sort((a,h)=>a.diff-h.diff)[0],s=e.sort((a,h)=>a.diff-h.diff)[0];return n&&r.push({lineGuide:n.lineGuide,offset:n.offset,orientation:"V",snap:n.snap}),s&&r.push({lineGuide:s.lineGuide,offset:s.offset,orientation:"H",snap:s.snap}),r},Ic=(o,t)=>{o.forEach(i=>{if(i.orientation==="H"){const e=new mt.Line({points:[-6e3,0,6e3,0],stroke:Ba,strokeWidth:1,name:"guide-line",dash:[4,6]});t.add(e),e.absolutePosition({x:0,y:i.lineGuide})}else if(i.orientation==="V"){const e=new mt.Line({points:[0,-6e3,0,6e3],stroke:Ba,strokeWidth:1,name:"guide-line",dash:[4,6]});t.add(e),e.absolutePosition({x:i.lineGuide,y:0})}})},Dr=he(!0);let pt=zr.timeline({repeat:-1,paused:Dr.value,onStart(){Dr.value=!1},onComplete(){Dr.value=!0}});const Nc={x:0},Wa=he(!1),fr=he(0),Gt={},Ut={},{toastSuccess:Ie,toastError:Ka}=sh(),Lc=()=>{const o=Bt("adModuleX",()=>0),t=Bt("adModuleY",()=>0),i=Bt("mainNodeList",()=>[]),e=Yt(()=>i.value.length),r=Yt(()=>i.value.reduce((V,q)=>(V[`${q.id}`]=q,V),{})),n=Bt("mainLayer",()=>Ae(null)),s=()=>{var V;(V=n.value)==null||V.draw()},a=Bt("mainContainer",()=>Ae(null)),h=Bt("mainSelectionRect",()=>Ae(null)),l=Bt("mainTransformer",()=>null),c=V=>{var q;return(q=n.value)==null?void 0:q.findOne(`#${V}`)},p=V=>{const q=c(V);q&&m(q)},m=V=>{var q,Z,j,J;(q=l.value)==null||q.nodes([V]),(Z=l.value)==null||Z.moveToTop(),(j=h.value)==null||j.moveToTop(),(J=a.value)==null||J.focus()},d=Bt("timelineStage",()=>Ae(null)),f=Bt("timelineLayer",()=>Ae(null)),_=he(0),v=V=>{var q;return(q=f.value)==null?void 0:q.findOne(`#${V}`)},C=V=>{var q;return(q=f.value)==null?void 0:q.findOne(`#tf_${V}`)},u=()=>{var V;(V=f.value)==null||V.draw()},g=V=>new mt.Rect(V),b=V=>new mt.Circle(V),S=V=>new mt.Image(V),x=V=>new mt.Group(V),M=V=>{var Z;const q=new mt.Transformer({id:`tf_${V}`,borderStroke:"rgba(355, 255, 255, 0.6)",rotateEnabled:!1,rotateLineVisible:!1,enabledAnchors:["middle-left","middle-right"],visible:!0,boundBoxFunc(j,J){return J.x<Ft||J.x+J.width>window.innerWidth-Ne?j:J},anchorStyleFunc(j){j.cornerRadius(3),j.fill("#a5f3fc"),j.stroke("#67e8f9"),(j.hasName("middle-left")||j.hasName("middle-right"))&&(j.height(18),j.offsetY(9),j.width(4),j.offsetX(2))}});return(Z=f.value)==null||Z.add(q),q},k=()=>{var q;const V=((q=f.value)==null?void 0:q.find(".item_track"))??[];_.value=V.length*(Te+Ha)},T=V=>{const q=C(V);q&&q instanceof mt.Transformer&&(q.visible(!1),q.nodes([]),q.destroy())},A=V=>{var Z;(((Z=f.value)==null?void 0:Z.find(V))??[]).forEach((j,J)=>{j.y(J*(Te+Ha))})},R=(V,q)=>{var tt,it,st;const Z=x({id:`group_${q}`,name:"item_tween_group",x:Ft,y:_.value,draggable:!1}),j=S({id:`img_${q}`,name:"item_img",x:0,y:_.value,image:V,width:Te,height:Te,fill:"rgba(255, 255, 255, 1)",cornerRadius:2,draggable:!1});j.on("click",function(){p(q)}),j.on("mouseenter",function(){j.opacity(.6),d.value&&(d.value.container().style.cursor="pointer")}),j.on("mouseleave mouseout",function(){j.opacity(1),d.value&&(d.value.container().style.cursor="default")});const J=g({id:`track_${q}`,name:"item_track",x:Ft,y:_.value,width:window.innerWidth-Ne-Ft,height:Te,fill:"rgba(255, 255, 255, 0.6)",cornerRadius:2,draggable:!1});(tt=f.value)==null||tt.add(j),(it=f.value)==null||it.add(J),(st=f.value)==null||st.add(Z),k()},D=V=>{const q=v(`img_${V}`);q&&q instanceof mt.Image&&(q.destroy(),A(".item_img"));const Z=v(`track_${V}`);Z&&Z instanceof mt.Rect&&(Z.destroy(),A(".item_track"));const j=v(`group_${V}`);if(j&&j instanceof mt.Group){const J=j.find(".item_bar");for(const tt of J){const it=tt.id();T(it)}j.destroy(),A(".item_tween_group")}k()},y=(V,q,Z)=>{const j=v(`group_${V}`);if(!j||!(j instanceof mt.Group))return"";const J=`bar_${zn.rnd()}_${V}`,tt=window.innerWidth-Ne-Ft,it=tt*(Z/_i),st=tt*(q/_i),at=g({id:J,name:"item_bar item_tween",x:it,y:0,width:st,height:Te,fill:bn,cornerRadius:0,draggable:!0,dragBoundFunc(ot){return{x:ot.x<Ft?Ft:ot.x+this.width()>window.innerWidth-Ne-Ft+Ft?window.innerWidth-Ne-Ft-this.width()+Ft:ot.x,y:this.absolutePosition().y}}});at.on("click",function(){w(V,J,at);const ot=je(at.x());et(ot),rt(ot)}),at.on("dblclick",function(){const ot=je(at.x()+at.width());et(ot),rt(ot)});let gt=!1;at.on("dragstart",function(){w(V,J,at),gt=!0}),at.on("dragend",function(){gt=!1;const ot=r.value[V],vt=c(V),Mt=K(V,J);!ot||!vt||!Mt||F(Mt,at,ot,vt,"start")}),at.on("dragmove",function(){}),Lt.value=J,j.add(at);const Rt=M(J);let _t=it;return Rt.on("transformstart",function(){w(V,J,at),_t=at.x()}),Rt.on("transform",function(){const ot=Rt.nodes()[0];ot.width(ot.scaleX()*ot.width()),ot.scaleX(1),ot.x()!==_t&&ot.x(_t)}),Rt.on("transformend",function(){const ot=Rt.nodes()[0],vt=r.value[V],Mt=c(V),ae=K(V,J);!vt||!Mt||!ae||F(ae,ot,vt,Mt,"duration")}),Rt.nodes([at]),w(V,J,at),J},P=(V,q)=>{const Z=v(`group_${V}`);if(!Z||!(Z instanceof mt.Group))return"";const j=`circle_${zn.rnd()}_${V}`,J=window.innerWidth-Ne-Ft,tt=J*(q/_i),it=b({id:j,name:"item_circle item_tween",x:tt,y:Te/2,radius:Te/4,fill:bn,cornerRadius:0,draggable:!0,dragBoundFunc(st){return{x:st.x<Ft?Ft:st.x>J+Ft?J+Ft:st.x,y:this.absolutePosition().y}}});return it.on("click",function(){w(V,j,it);const st=je(it.x());et(st),rt(st)}),it.on("dragstart",function(){w(V,j,it)}),it.on("dragend",function(){const st=r.value[V],at=c(V),gt=K(V,j);!st||!at||!gt||N(gt,it,st,at,"start")}),Z.add(it),w(V,j,it),j},w=(V,q,Z)=>{E(),Z.fill(bn),Z instanceof mt.Rect?Z.name("item_bar item_tween item_tween_active"):Z instanceof mt.Circle&&Z.name("item_circle item_tween item_tween_active"),Lt.value=q,p(V)},E=()=>{var q;const V=(q=f.value)==null?void 0:q.findOne(".item_tween_active");V&&V instanceof mt.Rect?(V.fill(za),V.name("item_bar item_tween")):V&&V instanceof mt.Circle&&(V.fill(za),V.name("item_circle item_tween")),Lt.value=null},F=(V,q,Z,j,J,tt="none")=>{if(!pt)return;const{x:it,y:st,scaleX:at,scaleY:gt,rotation:Rt,opacity:_t}=V.vars.startAt,{x:ot,y:vt,scaleX:Mt,scaleY:ae,rotation:ai,opacity:Ye,ease:Me}=V.vars,{x:Se,y:we,scaleX:Oe,scaleY:oi,rotation:hi,opacity:Ci}=Z;let cs=J==="fromVars"?{x:Se+o.value,y:we+t.value,scaleX:Oe,scaleY:oi,rotation:hi,opacity:Ci}:{x:it,y:st,scaleX:at,scaleY:gt,rotation:Rt,opacity:_t},ds=J==="toVars"?{x:Se+o.value,y:we+t.value,scaleX:Oe,scaleY:oi,rotation:hi,opacity:Ci,ease:Me}:J==="ease"?{x:ot,y:vt,scaleX:Mt,scaleY:ae,rotation:ai,opacity:Ye,ease:tt}:{x:ot,y:vt,scaleX:Mt,scaleY:ae,rotation:ai,opacity:Ye,ease:Me};const us=Xa(q.width()),fs=je(q.x()),Kr=j.id(),jr=q.id();X(V);const gs=Q(j,us,fs,cs,ds);switch(gs&&(Gt[Kr][jr]=gs,Ut[Kr][jr]={...Ut[Kr][jr],duration:us,start:fs,fromVars:cs,toVars:ds}),J){case"fromVars":Ie("已更新初始點");break;case"toVars":Ie("已更新結尾點");break;case"ease":Ie("已更新 Ease");break}},N=(V,q,Z,j,J)=>{if(!pt)return;const{x:tt,y:it,scaleX:st,scaleY:at,rotation:gt,opacity:Rt}=V.vars,{x:_t,y:ot,scaleX:vt,scaleY:Mt,rotation:ae,opacity:ai}=Z;let Ye=J==="vars"?{x:_t+o.value,y:ot+t.value,scaleX:vt,scaleY:Mt,rotation:ae,opacity:ai}:{x:tt,y:it,scaleX:st,scaleY:at,rotation:gt,opacity:Rt};const Me=je(q.x()),Se=j.id(),we=q.id();X(V);const Oe=nt(j,Me,Ye);switch(Oe&&(Gt[Se][we]=Oe,Ut[Se][we]={...Ut[Se][we],start:Me,vars:Ye}),J){case"vars":Ie("已更新節點");break}},z=(V,q,Z,j,J)=>{if(!pt)return;const{x:tt,y:it,scaleX:st,scaleY:at,rotation:gt,opacity:Rt}=V.vars.startAt,{x:_t,y:ot,scaleX:vt,scaleY:Mt,rotation:ae,opacity:ai,ease:Ye}=V.vars;let Me={x:tt+j,y:it+J,scaleX:st,scaleY:at,rotation:gt,opacity:Rt},Se={x:_t+j,y:ot+J,scaleX:vt,scaleY:Mt,rotation:ae,opacity:ai,ease:Ye};const we=Xa(q.width()),Oe=je(q.x()),oi=Z.id(),hi=q.id();X(V);const Ci=Q(Z,we,Oe,Me,Se);Ci&&(Gt[oi][hi]=Ci,Ut[oi][hi]={...Ut[oi][hi],duration:we,start:Oe,fromVars:Me,toVars:Se})},B=(V,q,Z,j,J)=>{if(!pt)return;const{x:tt,y:it,scaleX:st,scaleY:at,rotation:gt,opacity:Rt}=V.vars;let _t={x:tt+j,y:it+J,scaleX:st,scaleY:at,rotation:gt,opacity:Rt};const ot=je(q.x()),vt=Z.id(),Mt=q.id();X(V);const ae=nt(Z,ot,_t);ae&&(Gt[vt][Mt]=ae,Ut[vt][Mt]={...Ut[vt][Mt],start:ot,vars:_t})},Y=(V=0,q=0)=>{for(const Z in Gt){const j=Gt[Z];for(const J in j){const tt=j[J],it=c(Z),st=v(J);!it||!st||(J.startsWith("bar_")?z(tt,st,it,V,q):J.startsWith("circle_")&&B(tt,st,it,V,q))}}},K=(V,q)=>Gt[V][q],H=(V,q)=>Gt[V][q].vars.ease,X=V=>{pt==null||pt.remove(V)},L=V=>{const q=V.id(),Z=1,j=fr.value,{tween:J,tweenVars:tt}=W(V,Z,j),it=y(q,Z,j);if(!it||!J||!tt)return Ka("動畫建立失敗");Gt[q]||(Gt[q]={}),Gt[q][it]=J,Ut[q]||(Ut[q]={}),Ut[q][it]={id:it,nodeId:q,type:"tween",duration:Z,start:j,fromVars:tt,toVars:{...tt,ease:"none"}},Ie("動畫已建立")},G=V=>{const q=V.id(),Z=fr.value,{tween:j,tweenVars:J}=$(V,Z),tt=P(q,Z);if(!tt||!j||!J)return Ka("節點建立失敗");Gt[q]||(Gt[q]={}),Gt[q][tt]=j,Ut[q]||(Ut[q]={}),Ut[q][tt]={id:tt,nodeId:q,type:"setPoint",start:Z,vars:J},Ie("節點已建立")},O=(V,q,Z)=>{const j=V.id(),J=q.id(),tt=K(j,J),it=Gt[j],st=Ut[j];return X(tt),it.hasOwnProperty(J)&&delete it[J],st.hasOwnProperty(J)&&delete st[J],Z&&T(J),q.destroy(),Lt.value=null,!0},I=(V,q)=>{O(V,q,!0),Ie("動畫已刪除")},U=(V,q)=>{O(V,q,!1),Ie("節點已刪除")},W=(V,q,Z)=>{const j=V.id(),J=r.value[j];if(!J)return{tween:null,tweenVars:null};const{scaleX:tt,scaleY:it,x:st,y:at,rotation:gt,opacity:Rt}=J,_t={x:st+o.value,y:at+t.value,scaleX:tt,scaleY:it,rotation:gt,opacity:Rt};return{tween:Q(V,q,Z,_t,{..._t,ease:"none"}),tweenVars:_t}},$=(V,q)=>{const Z=V.id(),j=r.value[Z];if(!j)return{tween:null,tweenVars:null};const{scaleX:J,scaleY:tt,x:it,y:st,rotation:at,opacity:gt}=j,Rt={x:it+o.value,y:st+t.value,scaleX:J,scaleY:tt,rotation:at,opacity:gt};return{tween:nt(V,q,Rt),tweenVars:Rt}},Q=(V,q,Z,j,J)=>{if(!pt||!V)return null;const tt=zr.fromTo(V,{...j},{duration:q,immediateRender:!1,...J});return pt==null||pt.add(tt,Z),tt},nt=(V,q,Z)=>{if(!pt||!V)return null;const j=zr.set(V,{...Z});return pt==null||pt.add(j,q),j},et=V=>{fr.value=V},rt=V=>{pt==null||pt.seek(V)},Tt=()=>{},ut=()=>{pt.eventCallback("onUpdate",()=>{const V=pt.time();fr.value=V,s(),u()}),pt==null||pt.set(Nc,{x:0},_i),Wa.value=!0},wt=Bt("currentNodeId",()=>null),Lt=Bt("currentActiveTimelineNodeId",()=>null),Wt=Yt(()=>Lt.value&&v(`${Lt.value}`)||null),be=Yt(()=>Lt.value?Lt.value.indexOf("bar_")===0?"bar":Lt.value.indexOf("circle_")===0?"circle":"":"");return{adModuleX:o,adModuleY:t,mainNodeList:i,mainNodeLength:e,mainNodeMap:r,mainLayer:n,updateMainLayer:s,mainContainer:a,mainSelectionRect:h,mainTransformer:l,getTargetNodeFromMain:c,selectTargetNodeFromMain:p,focusOnItem:m,timelineStage:d,timelineLayer:f,updateTimelineLayer:u,addTimelineTrack:R,deleteTimelineTrack:D,activateNode:w,inactivateNode:E,getTargetNodeFromTimeline:v,getTargetTransFormerFromTimeline:C,getTween:K,getTweenEase:H,createTween:L,createSetPoint:G,removeGSAPTween:X,deleteTween:I,deleteSetPoint:U,updateGsapTimelineByTween:F,updateGsapTimelineBySetPoint:N,updateAllTweenPosition:Y,addRect:g,addImage:S,addGroup:x,addTransformer:M,gsapTimeline:pt,gsapTimelineNodeTweenMap:Gt,gsapTimelineInfoMap:Ut,initializedGsap:Wa,paused:Dr,currentTime:fr,updateCurrentTime:et,seekGsapTimeline:rt,logGsapTimeline:Tt,createGsapTimeline:ut,currentNodeId:wt,currentActiveTimelineNodeId:Lt,currentTimelineNode:Wt,timelineNodeType:be}},{adModuleX:de,adModuleY:ue,mainLayer:Et,mainNodeList:wn,mainNodeLength:Gc,mainNodeMap:di,mainContainer:$e,mainSelectionRect:Rr,mainTransformer:Ot,focusOnItem:Uc,addTimelineTrack:Bc,deleteTimelineTrack:Vc,createGsapTimeline:zc,currentNodeId:ja,createTween:Hc,createSetPoint:qc,updateAllTweenPosition:Yc}=Lc(),{toastSuccess:Xc,toastWarning:Wc}=sh(),xd=o=>{const i=Bt("mainStageRef",()=>Ae(null)),e=Bt("mainStageBgRef",()=>Ae(null)),r=Bt("stage",()=>Ae(null)),n=Bt("isClipMode",()=>!1),s=Bt("adModuleRect",()=>Ae(null)),a=he(!1),h=he(0),l=he(0),c=he(0),p=he(0),m=he(0),d=he(0),f=1.05,_=Qa((L,G)=>{var $;if(!r.value||!Et.value)return;r.value.width(L),r.value.height(G),h.value=r.value.width()/2,l.value=r.value.height()/2;const O=de.value,I=ue.value;de.value=r.value.width()/2-((o==null?void 0:o.width)||320)/2,ue.value=r.value.height()/2-((o==null?void 0:o.height)||320)/2,($=s.value)==null||$.setAttrs({x:de.value,y:ue.value});const U=de.value-O,W=ue.value-I;Et.value.getChildren().forEach(Q=>{if(Q.hasName("item")){const nt=Q.x()+U,et=Q.y()+W;Q.x(nt),Q.y(et);const rt=di.value[Q.id()];rt&&(rt.x=nt-de.value,rt.y=et-ue.value)}}),n.value&&D(),Yc(de.value-O,ue.value-I)},200),v=()=>{g(),b(),S(),x(),M(),zc(),vh(i,L=>{const G=L[0],{width:O,height:I}=G.contentRect;_(O,I)}),r.value!==null&&Ot.value!==null&&Rr.value!==null&&$e.value!==null&&k(r.value,Ot.value,Rr.value,$e.value)},C=()=>{},u=()=>{},g=()=>{if(i.value)r.value=new mt.Stage({container:i.value,width:window.innerWidth-Bn,height:window.innerHeight-(Vn+Va),draggable:!1}),$e.value=r.value.container(),$e.value.tabIndex=2,$e.value.style.outline="none",$e.value.style.position="relative",h.value=r.value.width()/2,l.value=r.value.height()/2,$e.value.focus();else throw new Error("mainStageRef Not Found")},b=()=>{var L;return Et.value=new mt.Layer,(L=r.value)==null||L.add(Et.value),Et.value},S=()=>{var L;Ot.value=new mt.Transformer({label:"mainTransformer",borderStroke:"#6366f1",anchorStyleFunc(G){G.cornerRadius(10),G.stroke("#6366f1"),(G.hasName("top-center")||G.hasName("bottom-center"))&&(G.height(6),G.offsetY(3),G.width(30),G.offsetX(15)),(G.hasName("middle-left")||G.hasName("middle-right"))&&(G.height(30),G.offsetY(15),G.width(6),G.offsetX(3))}}),Ot.value.boundBoxFunc((G,O)=>O),Ot.value.on("transform",G=>{var I;const O=(I=Ot.value)==null?void 0:I.nodes();O&&O.forEach(U=>{const W=di.value[U.id()];W&&N(U,W)})}),Ot.value.on("dragmove",G=>{if(!Ot.value||!s.value||!Et.value)return;const O=Ot.value.nodes();if(!O||(O.forEach(()=>{w(O)}),Et.value.find(".guide-line").forEach(et=>et.destroy()),Ot.value.nodes().length>1))return;const I=Oc(Ot.value.nodes(),s.value,Et.value),U=Ot.value.nodes()[0],W=Fc(U),$=Dc(I,W);if(!$.length)return;Ic($,Et.value);const Q=U.absolutePosition();$.forEach(et=>{switch(et.orientation){case"V":{Q.x=et.lineGuide+et.offset;break}case"H":{Q.y=et.lineGuide+et.offset;break}}}),U.absolutePosition(Q);const nt=di.value[U.id()];nt&&N(U,nt)}),Ot.value.on("dragend",function(G){var O;(O=Et.value)==null||O.find(".guide-line").forEach(I=>I.destroy())}),(L=Et.value)==null||L.add(Ot.value)},x=()=>{var L,G,O;de.value=((L=r.value)==null?void 0:L.getAttr("width"))/2-((o==null?void 0:o.width)||640)/2,ue.value=((G=r.value)==null?void 0:G.getAttr("height"))/2-((o==null?void 0:o.height)||320)/2,s.value=new mt.Rect({fill:"rgba(220, 220, 220, 0.35)",width:(o==null?void 0:o.width)||640,height:(o==null?void 0:o.height)||320,x:de.value,y:ue.value,listening:!1}),(O=Et.value)==null||O.add(s.value)},M=()=>{var L;Rr.value=new mt.Rect({fill:"rgba(83, 122, 234, 0.5)",stroke:"rgba(83, 122, 234, 0.9)",visible:!1,listening:!1}),(L=Et.value)==null||L.add(Rr.value)},k=(L,G,O,I)=>{L.on("mousedown touchstart",U=>{var W,$,Q,nt;if(U.target._id!==L._id){U.target.hasName("item")&&!G.nodes().find(et=>et._id===U.target._id)&&G.nodes([U.target]);return}U.evt.preventDefault(),U.evt.stopPropagation(),c.value=((W=L.getPointerPosition())==null?void 0:W.x)||0,p.value=(($=L.getPointerPosition())==null?void 0:$.y)||0,m.value=((Q=L.getPointerPosition())==null?void 0:Q.x)||0,d.value=((nt=L.getPointerPosition())==null?void 0:nt.y)||0,O.width(0),O.height(0),a.value=!0}),L.on("mousemove touchmove",U=>{var W,$;a.value&&(U.evt.preventDefault(),U.evt.stopPropagation(),m.value=((W=L.getPointerPosition())==null?void 0:W.x)||0,d.value=(($=L.getPointerPosition())==null?void 0:$.y)||0,O.setAttrs({visible:!0,x:Math.min(c.value,m.value),y:Math.min(p.value,d.value),width:Math.abs(m.value-c.value),height:Math.abs(d.value-p.value)}))}),L.on("mouseup touchend",U=>{if(a.value=!1,!!O.visible()){U.evt.preventDefault(),U.evt.stopPropagation(),O.visible(!1);var W=L.find(".item"),$=O.getClientRect(),Q=W.filter(nt=>mt.Util.haveIntersection($,nt.getClientRect()));G.nodes(Q)}}),L.on("click tap",U=>{if(O.visible())return;if(U.target._id===L._id){T();return}if(!U.target.hasName("item"))return;const W=U.evt.shiftKey||U.evt.ctrlKey||U.evt.metaKey,$=G.nodes().indexOf(U.target)>=0;if(!W&&!$)G.nodes([U.target]);else if(W&&$){const Q=G.nodes().slice();Q.splice(Q.indexOf(U.target),1),G.nodes(Q)}else if(W&&!$){const Q=G.nodes().concat([U.target]);G.nodes(Q)}I.focus()}),L.on("wheel",U=>{var Tt;if(U.evt.preventDefault(),U.evt.stopPropagation(),!U.evt.metaKey)return;const W=L.scaleX(),$=L.getPointerPosition();if(!$)return;const Q={x:Number((($.x-L.x())/W).toFixed(2)),y:Number((($.y-L.y())/W).toFixed(2))},et=(U.evt.deltaY>0?1:-1)>0?W*f:W/f,rt={x:Number(($.x-Q.x*et).toFixed(2)),y:Number(($.y-Q.y*et).toFixed(2))};if(L.scale({x:et,y:et}),L.position(rt),!n.value&&((Tt=Et.value)==null?void 0:Tt.clip().x)!==void 0&&y(),e.value){const ut=Number((1/et).toFixed(2));e.value.style.transform=`scale(${et}, ${et})`,e.value.style.width=`${ut*100}%`,e.value.style.height=`${ut*100}%`}}),I.addEventListener("keydown",R)},T=()=>{var L;(L=Ot.value)==null||L.nodes([])},A=L=>{var O,I;const G=(O=Ot.value)==null?void 0:O.nodes();if(G){const U=G.filter(W=>W.id()!==L.id());(I=Ot.value)==null||I.nodes(U)}},R=L=>{var O;const G=(O=Ot.value)==null?void 0:O.nodes();if(!(!G||G.length===0))switch(L.key){case"Escape":T();break;case"ArrowUp":G.forEach(I=>I.y(I.y()-1)),w(G);break;case"ArrowDown":G.forEach(I=>I.y(I.y()+1)),w(G);break;case"ArrowLeft":G.forEach(I=>I.x(I.x()-1)),w(G);break;case"ArrowRight":G.forEach(I=>I.x(I.x()+1)),w(G);break;case"w":if(G.length!==1)break;Hc(G[0]),ja.value=G[0].id();break;case"e":if(G.length!==1)break;qc(G[0]),ja.value=G[0].id();break}},D=()=>{var G,O,I;const L={x:de.value,y:ue.value,width:((G=s.value)==null?void 0:G.width())||640,height:((O=s.value)==null?void 0:O.height())||320};(I=Et.value)==null||I.clip(L)},y=()=>{var G;const L=r.value?{x:-r.value.x()/r.value.scaleX(),y:-r.value.y()/r.value.scaleY(),width:r.value.width()/r.value.scaleX(),height:r.value.height()/r.value.scaleY()}:{x:0,y:0,width:window.innerWidth-Bn,height:window.innerHeight-(Vn+Va)};(G=Et.value)==null||G.clip(L)},P=()=>{var G;if(!r.value)return;const L=r.value;L.scale({x:1,y:1}),L.position({x:0,y:0}),!n.value&&((G=Et.value)==null?void 0:G.clip().x)!==void 0&&y(),e.value&&(e.value.style.transform="scale(1,1)",e.value.style.width="100%",e.value.style.height="100%")},w=L=>{L.forEach(G=>{const O=di.value[G.id()];O&&N(G,O)})},E=()=>{var G;const L=(G=Et.value)==null?void 0:G.getChildren(O=>O.hasName("item"));L&&L.forEach(O=>{const I=di.value[O.id()];I&&N(O,I)})},F=(L,G,O)=>{if(G==="x"||G==="y")switch(G){case"x":L.setAttr(G,fe(O+de.value));break;default:L.setAttr(G,fe(O+ue.value));break}else L.setAttr(G,O)},N=(L,G)=>{const O=fe(L.scaleX()),I=fe(L.scaleY()),U=fe(L.rotation());G.x=fe(L.x()-de.value),G.y=fe(L.y()-ue.value),G.scaleX=O,G.scaleY=I,G.rotation=U,G.opacity=fe(L.opacity())},z=L=>{B(L.id()),Vc(L.id()),L.destroy(),A(L),Xc("已刪除圖層")},B=L=>{const G=wn.value.findIndex(O=>O.id===L);G>-1&&wn.value.splice(G,1)},Y=L=>{var U;if(Gc.value>=qa){Wc(`圖層已達上限${qa}張，請先刪除不要的圖層。`);return}const G=zn.rnd(),O={id:G,name:"item",label:"未命名",x:h.value,y:l.value,width:L.naturalWidth,height:L.naturalHeight,scaleX:1,scaleY:1,rotation:0,opacity:1,offset:{x:L.naturalWidth/2,y:L.naturalHeight/2}},I=new mt.Image({...O,image:L,draggable:!0});(U=Et.value)==null||U.add(I),Uc(I),H(I,O),Bc(L,G),X()},K=(L,G)=>{if(!L)return;const O=di.value[L.id()];O&&(L.attrs.image=G,L.width(G.naturalWidth),L.height(G.naturalHeight),L.offsetX(G.naturalWidth/2),L.offsetY(G.naturalHeight/2),O.width=G.naturalWidth,O.height=G.naturalHeight,N(L,O))},H=(L,G)=>{wn.value.push(G),N(L,G)},X=()=>{h.value+=10,l.value+=10};return{mainStageRef:i,mainStageBgRef:e,stage:r,isClipMode:n,initKonva:v,destroyKonva:u,addImage:Y,changeImage:K,deleteMainItem:z,resetZooming:P,logKonvaJSON:C,updateKonvaNodeAttribute:F,updateMainNodeState:E,updateNodeAndMainNodeAttributes:N,addLayerClip:D,removeLayerClip:y}};export{vd as A,mt as K,_i as T,jc as _,sh as a,Lc as b,xd as c,Ne as d,Ft as e,yd as f,Sd as g,kc as h,wd as i,Pc as j,ah as k,oh as l,$c as u};
