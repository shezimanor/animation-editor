import{_ as nh,g as sh,c as fs,o as Sr,r as Yr,n as ah,m as oh,I as Xa,h as hh,i as lh,J as ch,j as zt,k as dh,l as Wr,f as yn,C as gs,z as Xr,A as _s,t as uh,Q as Kr,p as se,a8 as fh,ae as ps,af as Ka,ag as gh,ah as _h,a9 as Nt,X as Ce,aa as ph}from"./CTbd2yLx.js";const mh={base:"inline-flex items-center",rounded:"rounded-md",font:"font-medium",size:{xs:"text-xs px-1.5 py-0.5",sm:"text-xs px-2 py-1",md:"text-sm px-2 py-1",lg:"text-sm px-2.5 py-1.5"},gap:{xs:"gap-0.5",sm:"gap-1",md:"gap-1",lg:"gap-1.5"},color:{white:{solid:"ring-1 ring-inset ring-gray-300 dark:ring-gray-700 text-gray-900 dark:text-white bg-white dark:bg-gray-900"},gray:{solid:"ring-1 ring-inset ring-gray-300 dark:ring-gray-700 text-gray-700 dark:text-gray-200 bg-gray-50 dark:bg-gray-800"},black:{solid:"text-white dark:text-gray-900 bg-gray-900 dark:bg-white"}},variant:{solid:"bg-{color}-500 dark:bg-{color}-400 text-white dark:text-gray-900",outline:"text-{color}-500 dark:text-{color}-400 ring-1 ring-inset ring-{color}-500 dark:ring-{color}-400",soft:"bg-{color}-50 dark:bg-{color}-400 dark:bg-opacity-10 text-{color}-500 dark:text-{color}-400",subtle:"bg-{color}-50 dark:bg-{color}-400 dark:bg-opacity-10 text-{color}-500 dark:text-{color}-400 ring-1 ring-inset ring-{color}-500 dark:ring-{color}-400 ring-opacity-25 dark:ring-opacity-25"},icon:{base:"flex-shrink-0",size:{xs:"h-4 w-4",sm:"h-4 w-4",md:"h-5 w-5",lg:"h-5 w-5"}},default:{size:"sm",variant:"solid",color:"primary"}},ke=oh(yn.ui.strategy,yn.ui.badge,mh),yh=sh({components:{UIcon:Xa},inheritAttrs:!1,props:{size:{type:String,default:()=>ke.default.size,validator(o){return Object.keys(ke.size).includes(o)}},color:{type:String,default:()=>ke.default.color,validator(o){return[...yn.ui.colors,...Object.keys(ke.color)].includes(o)}},variant:{type:String,default:()=>ke.default.variant,validator(o){return[...Object.keys(ke.variant),...Object.values(ke.color).flatMap(t=>Object.keys(t))].includes(o)}},label:{type:[String,Number],default:null},icon:{type:String,default:null},leadingIcon:{type:String,default:null},trailingIcon:{type:String,default:null},trailing:{type:Boolean,default:!1},leading:{type:Boolean,default:!1},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},setup(o){const{ui:t,attrs:i}=hh("badge",lh(o,"ui"),ke),{size:e,rounded:r}=ch({ui:t,props:o}),n=zt(()=>o.icon&&o.leading||o.icon&&!o.trailing||!o.trailing||o.leadingIcon),s=zt(()=>o.icon&&o.trailing||o.trailing||o.trailingIcon),a=zt(()=>{var c,f;const m=((f=(c=t.value.color)==null?void 0:c[o.color])==null?void 0:f[o.variant])||t.value.variant[o.variant];return dh(Wr(t.value.base,t.value.font,r.value,t.value.size[e.value],t.value.gap[e.value],m==null?void 0:m.replaceAll("{color}",o.color)),o.class)}),h=zt(()=>o.leadingIcon||o.icon),l=zt(()=>o.trailingIcon||o.icon),d=zt(()=>Wr(t.value.icon.base,t.value.icon.size[e.value])),p=zt(()=>Wr(t.value.icon.base,t.value.icon.size[e.value]));return{attrs:i,isLeading:n,isTrailing:s,badgeClass:a,leadingIconName:h,trailingIconName:l,leadingIconClass:d,trailingIconClass:p}}}),vh={key:0};function bh(o,t,i,e,r,n){const s=Xa;return Sr(),fs("span",ah({class:o.badgeClass},o.attrs),[Yr(o.$slots,"leading",{},()=>[o.isLeading&&o.leadingIconName?(Sr(),gs(s,{key:0,name:o.leadingIconName,class:_s(o.leadingIconClass),"aria-hidden":"true"},null,8,["name","class"])):Xr("",!0)]),Yr(o.$slots,"default",{},()=>[o.label?(Sr(),fs("span",vh,uh(o.label),1)):Xr("",!0)]),Yr(o.$slots,"trailing",{},()=>[o.isTrailing&&o.trailingIconName?(Sr(),gs(s,{key:0,name:o.trailingIconName,class:_s(o.trailingIconClass),"aria-hidden":"true"},null,8,["name","class"])):Xr("",!0)])],16)}const Wc=nh(yh,[["render",bh]]),Xc=(o,t,i=!0)=>{const e=Kr("form-events",void 0),r=Kr("form-group",void 0),n=Kr("form-inputs",void 0);r&&(!i||o!=null&&o.legend?r.inputId.value=void 0:o!=null&&o.id&&(r.inputId.value=o==null?void 0:o.id),n&&(n.value[r.name.value]=r.inputId.value));const s=se(!1);function a(p,m){e&&e.emit({type:p,path:m})}function h(){a("blur",r==null?void 0:r.name.value),s.value=!0}function l(){a("change",r==null?void 0:r.name.value)}const d=fh(()=>{(s.value||r!=null&&r.eagerValidation.value)&&a("input",r==null?void 0:r.name.value)},300);return{inputId:zt(()=>(o==null?void 0:o.id)??(r==null?void 0:r.inputId.value)),name:zt(()=>(o==null?void 0:o.name)??(r==null?void 0:r.name.value)),size:zt(()=>{var m;const p=t.size[r==null?void 0:r.size.value]?r==null?void 0:r.size.value:null;return(o==null?void 0:o.size)??p??((m=t.default)==null?void 0:m.size)}),color:zt(()=>{var p;return(p=r==null?void 0:r.error)!=null&&p.value?"red":o==null?void 0:o.color}),emitFormBlur:h,emitFormInput:d,emitFormChange:l}};function we(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function ja(o,t){o.prototype=Object.create(t.prototype),o.prototype.constructor=o,o.__proto__=t}/*!
 * GSAP 3.12.5
 * https://gsap.com
 *
 * @license Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var te={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},di={duration:.5,overwrite:!1,delay:0},Gn,Bt,mt,pe=1e8,Ut=1/pe,vn=Math.PI*2,Sh=vn/4,wh=0,$a=Math.sqrt,xh=Math.cos,Ch=Math.sin,Ft=function(t){return typeof t=="string"},Ct=function(t){return typeof t=="function"},Te=function(t){return typeof t=="number"},Un=function(t){return typeof t>"u"},ye=function(t){return typeof t=="object"},Wt=function(t){return t!==!1},Bn=function(){return typeof window<"u"},wr=function(t){return Ct(t)||Ft(t)},Qa=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},Vt=Array.isArray,bn=/(?:-?\.?\d|\.)+/gi,Ja=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,ni=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,jr=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,Za=/[+-]=-?[.\d]+/,to=/[^,'"\[\]\s]+/gi,Th=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,bt,fe,Sn,Vn,ee={},Er={},eo,io=function(t){return(Er=je(t,ee))&&$t},zn=function(t,i){return console.warn("Invalid property",t,"set to",i,"Missing plugin? gsap.registerPlugin()")},fr=function(t,i){return!i&&console.warn(t)},ro=function(t,i){return t&&(ee[t]=i)&&Er&&(Er[t]=i)||ee},gr=function(){return 0},Ph={suppressEvents:!0,isStart:!0,kill:!1},Tr={suppressEvents:!0,kill:!1},kh={suppressEvents:!0},Hn={},Fe=[],wn={},no,Qt={},$r={},ms=30,Pr=[],qn="",Yn=function(t){var i=t[0],e,r;if(ye(i)||Ct(i)||(t=[t]),!(e=(i._gsap||{}).harness)){for(r=Pr.length;r--&&!Pr[r].targetTest(i););e=Pr[r]}for(r=t.length;r--;)t[r]&&(t[r]._gsap||(t[r]._gsap=new Ro(t[r],e)))||t.splice(r,1);return t},Ye=function(t){return t._gsap||Yn(ae(t))[0]._gsap},so=function(t,i,e){return(e=t[i])&&Ct(e)?t[i]():Un(e)&&t.getAttribute&&t.getAttribute(i)||e},Xt=function(t,i){return(t=t.split(",")).forEach(i)||t},Pt=function(t){return Math.round(t*1e5)/1e5||0},Ot=function(t){return Math.round(t*1e7)/1e7||0},hi=function(t,i){var e=i.charAt(0),r=parseFloat(i.substr(2));return t=parseFloat(t),e==="+"?t+r:e==="-"?t-r:e==="*"?t*r:t/r},Ah=function(t,i){for(var e=i.length,r=0;t.indexOf(i[r])<0&&++r<e;);return r<e},Mr=function(){var t=Fe.length,i=Fe.slice(0),e,r;for(wn={},Fe.length=0,e=0;e<t;e++)r=i[e],r&&r._lazy&&(r.render(r._lazy[0],r._lazy[1],!0)._lazy=0)},ao=function(t,i,e,r){Fe.length&&!Bt&&Mr(),t.render(i,e,Bt&&i<0&&(t._initted||t._startAt)),Fe.length&&!Bt&&Mr()},oo=function(t){var i=parseFloat(t);return(i||i===0)&&(t+"").match(to).length<2?i:Ft(t)?t.trim():t},ho=function(t){return t},oe=function(t,i){for(var e in i)e in t||(t[e]=i[e]);return t},Rh=function(t){return function(i,e){for(var r in e)r in i||r==="duration"&&t||r==="ease"||(i[r]=e[r])}},je=function(t,i){for(var e in i)t[e]=i[e];return t},ys=function o(t,i){for(var e in i)e!=="__proto__"&&e!=="constructor"&&e!=="prototype"&&(t[e]=ye(i[e])?o(t[e]||(t[e]={}),i[e]):i[e]);return t},Or=function(t,i){var e={},r;for(r in t)r in i||(e[r]=t[r]);return e},cr=function(t){var i=t.parent||bt,e=t.keyframes?Rh(Vt(t.keyframes)):oe;if(Wt(t.inherit))for(;i;)e(t,i.vars.defaults),i=i.parent||i._dp;return t},Eh=function(t,i){for(var e=t.length,r=e===i.length;r&&e--&&t[e]===i[e];);return e<0},lo=function(t,i,e,r,n){var s=t[r],a;if(n)for(a=i[n];s&&s[n]>a;)s=s._prev;return s?(i._next=s._next,s._next=i):(i._next=t[e],t[e]=i),i._next?i._next._prev=i:t[r]=i,i._prev=s,i.parent=i._dp=t,i},Gr=function(t,i,e,r){e===void 0&&(e="_first"),r===void 0&&(r="_last");var n=i._prev,s=i._next;n?n._next=s:t[e]===i&&(t[e]=s),s?s._prev=n:t[r]===i&&(t[r]=n),i._next=i._prev=i.parent=null},Ne=function(t,i){t.parent&&(!i||t.parent.autoRemoveChildren)&&t.parent.remove&&t.parent.remove(t),t._act=0},We=function(t,i){if(t&&(!i||i._end>t._dur||i._start<0))for(var e=t;e;)e._dirty=1,e=e.parent;return t},Mh=function(t){for(var i=t.parent;i&&i.parent;)i._dirty=1,i.totalDuration(),i=i.parent;return t},xn=function(t,i,e,r){return t._startAt&&(Bt?t._startAt.revert(Tr):t.vars.immediateRender&&!t.vars.autoRevert||t._startAt.render(i,!0,r))},Oh=function o(t){return!t||t._ts&&o(t.parent)},vs=function(t){return t._repeat?ui(t._tTime,t=t.duration()+t._rDelay)*t:0},ui=function(t,i){var e=Math.floor(t/=i);return t&&e===t?e-1:e},Fr=function(t,i){return(t-i._start)*i._ts+(i._ts>=0?0:i._dirty?i.totalDuration():i._tDur)},Ur=function(t){return t._end=Ot(t._start+(t._tDur/Math.abs(t._ts||t._rts||Ut)||0))},Br=function(t,i){var e=t._dp;return e&&e.smoothChildTiming&&t._ts&&(t._start=Ot(e._time-(t._ts>0?i/t._ts:((t._dirty?t.totalDuration():t._tDur)-i)/-t._ts)),Ur(t),e._dirty||We(e,t)),t},co=function(t,i){var e;if((i._time||!i._dur&&i._initted||i._start<t._time&&(i._dur||!i.add))&&(e=Fr(t.rawTime(),i),(!i._dur||br(0,i.totalDuration(),e)-i._tTime>Ut)&&i.render(e,!0)),We(t,i)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(e=t;e._dp;)e.rawTime()>=0&&e.totalTime(e._tTime),e=e._dp;t._zTime=-1e-8}},ge=function(t,i,e,r){return i.parent&&Ne(i),i._start=Ot((Te(e)?e:e||t!==bt?ne(t,e,i):t._time)+i._delay),i._end=Ot(i._start+(i.totalDuration()/Math.abs(i.timeScale())||0)),lo(t,i,"_first","_last",t._sort?"_start":0),Cn(i)||(t._recent=i),r||co(t,i),t._ts<0&&Br(t,t._tTime),t},uo=function(t,i){return(ee.ScrollTrigger||zn("scrollTrigger",i))&&ee.ScrollTrigger.create(i,t)},fo=function(t,i,e,r,n){if(Xn(t,i,n),!t._initted)return 1;if(!e&&t._pt&&!Bt&&(t._dur&&t.vars.lazy!==!1||!t._dur&&t.vars.lazy)&&no!==Jt.frame)return Fe.push(t),t._lazy=[n,r],1},Fh=function o(t){var i=t.parent;return i&&i._ts&&i._initted&&!i._lock&&(i.rawTime()<0||o(i))},Cn=function(t){var i=t.data;return i==="isFromStart"||i==="isStart"},Dh=function(t,i,e,r){var n=t.ratio,s=i<0||!i&&(!t._start&&Fh(t)&&!(!t._initted&&Cn(t))||(t._ts<0||t._dp._ts<0)&&!Cn(t))?0:1,a=t._rDelay,h=0,l,d,p;if(a&&t._repeat&&(h=br(0,t._tDur,i),d=ui(h,a),t._yoyo&&d&1&&(s=1-s),d!==ui(t._tTime,a)&&(n=1-s,t.vars.repeatRefresh&&t._initted&&t.invalidate())),s!==n||Bt||r||t._zTime===Ut||!i&&t._zTime){if(!t._initted&&fo(t,i,r,e,h))return;for(p=t._zTime,t._zTime=i||(e?Ut:0),e||(e=i&&!p),t.ratio=s,t._from&&(s=1-s),t._time=0,t._tTime=h,l=t._pt;l;)l.r(s,l.d),l=l._next;i<0&&xn(t,i,e,!0),t._onUpdate&&!e&&Zt(t,"onUpdate"),h&&t._repeat&&!e&&t.parent&&Zt(t,"onRepeat"),(i>=t._tDur||i<0)&&t.ratio===s&&(s&&Ne(t,1),!e&&!Bt&&(Zt(t,s?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=i)},Nh=function(t,i,e){var r;if(e>i)for(r=t._first;r&&r._start<=e;){if(r.data==="isPause"&&r._start>i)return r;r=r._next}else for(r=t._last;r&&r._start>=e;){if(r.data==="isPause"&&r._start<i)return r;r=r._prev}},fi=function(t,i,e,r){var n=t._repeat,s=Ot(i)||0,a=t._tTime/t._tDur;return a&&!r&&(t._time*=s/t._dur),t._dur=s,t._tDur=n?n<0?1e10:Ot(s*(n+1)+t._rDelay*n):s,a>0&&!r&&Br(t,t._tTime=t._tDur*a),t.parent&&Ur(t),e||We(t.parent,t),t},bs=function(t){return t instanceof Ht?We(t):fi(t,t._dur)},Ih={_start:0,endTime:gr,totalDuration:gr},ne=function o(t,i,e){var r=t.labels,n=t._recent||Ih,s=t.duration()>=pe?n.endTime(!1):t._dur,a,h,l;return Ft(i)&&(isNaN(i)||i in r)?(h=i.charAt(0),l=i.substr(-1)==="%",a=i.indexOf("="),h==="<"||h===">"?(a>=0&&(i=i.replace(/=/,"")),(h==="<"?n._start:n.endTime(n._repeat>=0))+(parseFloat(i.substr(1))||0)*(l?(a<0?n:e).totalDuration()/100:1)):a<0?(i in r||(r[i]=s),r[i]):(h=parseFloat(i.charAt(a-1)+i.substr(a+1)),l&&e&&(h=h/100*(Vt(e)?e[0]:e).totalDuration()),a>1?o(t,i.substr(0,a-1),e)+h:s+h)):i==null?s:+i},dr=function(t,i,e){var r=Te(i[1]),n=(r?2:1)+(t<2?0:1),s=i[n],a,h;if(r&&(s.duration=i[1]),s.parent=e,t){for(a=s,h=e;h&&!("immediateRender"in a);)a=h.vars.defaults||{},h=Wt(h.vars.inherit)&&h.parent;s.immediateRender=Wt(a.immediateRender),t<2?s.runBackwards=1:s.startAt=i[n-1]}return new At(i[0],s,i[n+1])},Le=function(t,i){return t||t===0?i(t):i},br=function(t,i,e){return e<t?t:e>i?i:e},Gt=function(t,i){return!Ft(t)||!(i=Th.exec(t))?"":i[1]},Lh=function(t,i,e){return Le(e,function(r){return br(t,i,r)})},Tn=[].slice,go=function(t,i){return t&&ye(t)&&"length"in t&&(!i&&!t.length||t.length-1 in t&&ye(t[0]))&&!t.nodeType&&t!==fe},Gh=function(t,i,e){return e===void 0&&(e=[]),t.forEach(function(r){var n;return Ft(r)&&!i||go(r,1)?(n=e).push.apply(n,ae(r)):e.push(r)})||e},ae=function(t,i,e){return mt&&!i&&mt.selector?mt.selector(t):Ft(t)&&!e&&(Sn||!gi())?Tn.call((i||Vn).querySelectorAll(t),0):Vt(t)?Gh(t,e):go(t)?Tn.call(t,0):t?[t]:[]},Pn=function(t){return t=ae(t)[0]||fr("Invalid scope")||{},function(i){var e=t.current||t.nativeElement||t;return ae(i,e.querySelectorAll?e:e===t?fr("Invalid scope")||Vn.createElement("div"):t)}},_o=function(t){return t.sort(function(){return .5-Math.random()})},po=function(t){if(Ct(t))return t;var i=ye(t)?t:{each:t},e=Xe(i.ease),r=i.from||0,n=parseFloat(i.base)||0,s={},a=r>0&&r<1,h=isNaN(r)||a,l=i.axis,d=r,p=r;return Ft(r)?d=p={center:.5,edges:.5,end:1}[r]||0:!a&&h&&(d=r[0],p=r[1]),function(m,c,f){var _=(f||i).length,v=s[_],x,u,g,b,S,C,M,k,T;if(!v){if(T=i.grid==="auto"?0:(i.grid||[1,pe])[1],!T){for(M=-1e8;M<(M=f[T++].getBoundingClientRect().left)&&T<_;);T<_&&T--}for(v=s[_]=[],x=h?Math.min(T,_)*d-.5:r%T,u=T===pe?0:h?_*p/T-.5:r/T|0,M=0,k=pe,C=0;C<_;C++)g=C%T-x,b=u-(C/T|0),v[C]=S=l?Math.abs(l==="y"?b:g):$a(g*g+b*b),S>M&&(M=S),S<k&&(k=S);r==="random"&&_o(v),v.max=M-k,v.min=k,v.v=_=(parseFloat(i.amount)||parseFloat(i.each)*(T>_?_-1:l?l==="y"?_/T:T:Math.max(T,_/T))||0)*(r==="edges"?-1:1),v.b=_<0?n-_:n,v.u=Gt(i.amount||i.each)||0,e=e&&_<0?Po(e):e}return _=(v[m]-v.min)/v.max||0,Ot(v.b+(e?e(_):_)*v.v)+v.u}},kn=function(t){var i=Math.pow(10,((t+"").split(".")[1]||"").length);return function(e){var r=Ot(Math.round(parseFloat(e)/t)*t*i);return(r-r%1)/i+(Te(e)?0:Gt(e))}},mo=function(t,i){var e=Vt(t),r,n;return!e&&ye(t)&&(r=e=t.radius||pe,t.values?(t=ae(t.values),(n=!Te(t[0]))&&(r*=r)):t=kn(t.increment)),Le(i,e?Ct(t)?function(s){return n=t(s),Math.abs(n-s)<=r?n:s}:function(s){for(var a=parseFloat(n?s.x:s),h=parseFloat(n?s.y:0),l=pe,d=0,p=t.length,m,c;p--;)n?(m=t[p].x-a,c=t[p].y-h,m=m*m+c*c):m=Math.abs(t[p]-a),m<l&&(l=m,d=p);return d=!r||l<=r?t[d]:s,n||d===s||Te(s)?d:d+Gt(s)}:kn(t))},yo=function(t,i,e,r){return Le(Vt(t)?!i:e===!0?!!(e=0):!r,function(){return Vt(t)?t[~~(Math.random()*t.length)]:(e=e||1e-5)&&(r=e<1?Math.pow(10,(e+"").length-2):1)&&Math.floor(Math.round((t-e/2+Math.random()*(i-t+e*.99))/e)*e*r)/r})},Uh=function(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];return function(r){return i.reduce(function(n,s){return s(n)},r)}},Bh=function(t,i){return function(e){return t(parseFloat(e))+(i||Gt(e))}},Vh=function(t,i,e){return bo(t,i,0,1,e)},vo=function(t,i,e){return Le(e,function(r){return t[~~i(r)]})},zh=function o(t,i,e){var r=i-t;return Vt(t)?vo(t,o(0,t.length),i):Le(e,function(n){return(r+(n-t)%r)%r+t})},Hh=function o(t,i,e){var r=i-t,n=r*2;return Vt(t)?vo(t,o(0,t.length-1),i):Le(e,function(s){return s=(n+(s-t)%n)%n||0,t+(s>r?n-s:s)})},_r=function(t){for(var i=0,e="",r,n,s,a;~(r=t.indexOf("random(",i));)s=t.indexOf(")",r),a=t.charAt(r+7)==="[",n=t.substr(r+7,s-r-7).match(a?to:bn),e+=t.substr(i,r-i)+yo(a?n:+n[0],a?0:+n[1],+n[2]||1e-5),i=s+1;return e+t.substr(i,t.length-i)},bo=function(t,i,e,r,n){var s=i-t,a=r-e;return Le(n,function(h){return e+((h-t)/s*a||0)})},qh=function o(t,i,e,r){var n=isNaN(t+i)?0:function(c){return(1-c)*t+c*i};if(!n){var s=Ft(t),a={},h,l,d,p,m;if(e===!0&&(r=1)&&(e=null),s)t={p:t},i={p:i};else if(Vt(t)&&!Vt(i)){for(d=[],p=t.length,m=p-2,l=1;l<p;l++)d.push(o(t[l-1],t[l]));p--,n=function(f){f*=p;var _=Math.min(m,~~f);return d[_](f-_)},e=i}else r||(t=je(Vt(t)?[]:{},t));if(!d){for(h in i)Wn.call(a,t,h,"get",i[h]);n=function(f){return $n(f,a)||(s?t.p:t)}}}return Le(e,n)},Ss=function(t,i,e){var r=t.labels,n=pe,s,a,h;for(s in r)a=r[s]-i,a<0==!!e&&a&&n>(a=Math.abs(a))&&(h=s,n=a);return h},Zt=function(t,i,e){var r=t.vars,n=r[i],s=mt,a=t._ctx,h,l,d;if(n)return h=r[i+"Params"],l=r.callbackScope||t,e&&Fe.length&&Mr(),a&&(mt=a),d=h?n.apply(l,h):n.call(l),mt=s,d},hr=function(t){return Ne(t),t.scrollTrigger&&t.scrollTrigger.kill(!!Bt),t.progress()<1&&Zt(t,"onInterrupt"),t},si,So=[],wo=function(t){if(t)if(t=!t.name&&t.default||t,Bn()||t.headless){var i=t.name,e=Ct(t),r=i&&!e&&t.init?function(){this._props=[]}:t,n={init:gr,render:$n,add:Wn,kill:al,modifier:sl,rawVars:0},s={targetTest:0,get:0,getSetter:jn,aliases:{},register:0};if(gi(),t!==r){if(Qt[i])return;oe(r,oe(Or(t,n),s)),je(r.prototype,je(n,Or(t,s))),Qt[r.prop=i]=r,t.targetTest&&(Pr.push(r),Hn[i]=1),i=(i==="css"?"CSS":i.charAt(0).toUpperCase()+i.substr(1))+"Plugin"}ro(i,r),t.register&&t.register($t,r,Kt)}else So.push(t)},gt=255,lr={aqua:[0,gt,gt],lime:[0,gt,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,gt],navy:[0,0,128],white:[gt,gt,gt],olive:[128,128,0],yellow:[gt,gt,0],orange:[gt,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[gt,0,0],pink:[gt,192,203],cyan:[0,gt,gt],transparent:[gt,gt,gt,0]},Qr=function(t,i,e){return t+=t<0?1:t>1?-1:0,(t*6<1?i+(e-i)*t*6:t<.5?e:t*3<2?i+(e-i)*(2/3-t)*6:i)*gt+.5|0},xo=function(t,i,e){var r=t?Te(t)?[t>>16,t>>8&gt,t&gt]:0:lr.black,n,s,a,h,l,d,p,m,c,f;if(!r){if(t.substr(-1)===","&&(t=t.substr(0,t.length-1)),lr[t])r=lr[t];else if(t.charAt(0)==="#"){if(t.length<6&&(n=t.charAt(1),s=t.charAt(2),a=t.charAt(3),t="#"+n+n+s+s+a+a+(t.length===5?t.charAt(4)+t.charAt(4):"")),t.length===9)return r=parseInt(t.substr(1,6),16),[r>>16,r>>8&gt,r&gt,parseInt(t.substr(7),16)/255];t=parseInt(t.substr(1),16),r=[t>>16,t>>8&gt,t&gt]}else if(t.substr(0,3)==="hsl"){if(r=f=t.match(bn),!i)h=+r[0]%360/360,l=+r[1]/100,d=+r[2]/100,s=d<=.5?d*(l+1):d+l-d*l,n=d*2-s,r.length>3&&(r[3]*=1),r[0]=Qr(h+1/3,n,s),r[1]=Qr(h,n,s),r[2]=Qr(h-1/3,n,s);else if(~t.indexOf("="))return r=t.match(Ja),e&&r.length<4&&(r[3]=1),r}else r=t.match(bn)||lr.transparent;r=r.map(Number)}return i&&!f&&(n=r[0]/gt,s=r[1]/gt,a=r[2]/gt,p=Math.max(n,s,a),m=Math.min(n,s,a),d=(p+m)/2,p===m?h=l=0:(c=p-m,l=d>.5?c/(2-p-m):c/(p+m),h=p===n?(s-a)/c+(s<a?6:0):p===s?(a-n)/c+2:(n-s)/c+4,h*=60),r[0]=~~(h+.5),r[1]=~~(l*100+.5),r[2]=~~(d*100+.5)),e&&r.length<4&&(r[3]=1),r},Co=function(t){var i=[],e=[],r=-1;return t.split(De).forEach(function(n){var s=n.match(ni)||[];i.push.apply(i,s),e.push(r+=s.length+1)}),i.c=e,i},ws=function(t,i,e){var r="",n=(t+r).match(De),s=i?"hsla(":"rgba(",a=0,h,l,d,p;if(!n)return t;if(n=n.map(function(m){return(m=xo(m,i,1))&&s+(i?m[0]+","+m[1]+"%,"+m[2]+"%,"+m[3]:m.join(","))+")"}),e&&(d=Co(t),h=e.c,h.join(r)!==d.c.join(r)))for(l=t.replace(De,"1").split(ni),p=l.length-1;a<p;a++)r+=l[a]+(~h.indexOf(a)?n.shift()||s+"0,0,0,0)":(d.length?d:n.length?n:e).shift());if(!l)for(l=t.split(De),p=l.length-1;a<p;a++)r+=l[a]+n[a];return r+l[p]},De=function(){var o="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",t;for(t in lr)o+="|"+t+"\\b";return new RegExp(o+")","gi")}(),Yh=/hsl[a]?\(/,To=function(t){var i=t.join(" "),e;if(De.lastIndex=0,De.test(i))return e=Yh.test(i),t[1]=ws(t[1],e),t[0]=ws(t[0],e,Co(t[1])),!0},pr,Jt=function(){var o=Date.now,t=500,i=33,e=o(),r=e,n=1e3/240,s=n,a=[],h,l,d,p,m,c,f=function _(v){var x=o()-r,u=v===!0,g,b,S,C;if((x>t||x<0)&&(e+=x-i),r+=x,S=r-e,g=S-s,(g>0||u)&&(C=++p.frame,m=S-p.time*1e3,p.time=S=S/1e3,s+=g+(g>=n?4:n-g),b=1),u||(h=l(_)),b)for(c=0;c<a.length;c++)a[c](S,m,C,v)};return p={time:0,frame:0,tick:function(){f(!0)},deltaRatio:function(v){return m/(1e3/(v||60))},wake:function(){eo&&(!Sn&&Bn()&&(fe=Sn=window,Vn=fe.document||{},ee.gsap=$t,(fe.gsapVersions||(fe.gsapVersions=[])).push($t.version),io(Er||fe.GreenSockGlobals||!fe.gsap&&fe||{}),So.forEach(wo)),d=typeof requestAnimationFrame<"u"&&requestAnimationFrame,h&&p.sleep(),l=d||function(v){return setTimeout(v,s-p.time*1e3+1|0)},pr=1,f(2))},sleep:function(){(d?cancelAnimationFrame:clearTimeout)(h),pr=0,l=gr},lagSmoothing:function(v,x){t=v||1/0,i=Math.min(x||33,t)},fps:function(v){n=1e3/(v||240),s=p.time*1e3+n},add:function(v,x,u){var g=x?function(b,S,C,M){v(b,S,C,M),p.remove(g)}:v;return p.remove(v),a[u?"unshift":"push"](g),gi(),g},remove:function(v,x){~(x=a.indexOf(v))&&a.splice(x,1)&&c>=x&&c--},_listeners:a},p}(),gi=function(){return!pr&&Jt.wake()},ct={},Wh=/^[\d.\-M][\d.\-,\s]/,Xh=/["']/g,Kh=function(t){for(var i={},e=t.substr(1,t.length-3).split(":"),r=e[0],n=1,s=e.length,a,h,l;n<s;n++)h=e[n],a=n!==s-1?h.lastIndexOf(","):h.length,l=h.substr(0,a),i[r]=isNaN(l)?l.replace(Xh,"").trim():+l,r=h.substr(a+1).trim();return i},jh=function(t){var i=t.indexOf("(")+1,e=t.indexOf(")"),r=t.indexOf("(",i);return t.substring(i,~r&&r<e?t.indexOf(")",e+1):e)},$h=function(t){var i=(t+"").split("("),e=ct[i[0]];return e&&i.length>1&&e.config?e.config.apply(null,~t.indexOf("{")?[Kh(i[1])]:jh(t).split(",").map(oo)):ct._CE&&Wh.test(t)?ct._CE("",t):e},Po=function(t){return function(i){return 1-t(1-i)}},ko=function o(t,i){for(var e=t._first,r;e;)e instanceof Ht?o(e,i):e.vars.yoyoEase&&(!e._yoyo||!e._repeat)&&e._yoyo!==i&&(e.timeline?o(e.timeline,i):(r=e._ease,e._ease=e._yEase,e._yEase=r,e._yoyo=i)),e=e._next},Xe=function(t,i){return t&&(Ct(t)?t:ct[t]||$h(t))||i},Qe=function(t,i,e,r){e===void 0&&(e=function(h){return 1-i(1-h)}),r===void 0&&(r=function(h){return h<.5?i(h*2)/2:1-i((1-h)*2)/2});var n={easeIn:i,easeOut:e,easeInOut:r},s;return Xt(t,function(a){ct[a]=ee[a]=n,ct[s=a.toLowerCase()]=e;for(var h in n)ct[s+(h==="easeIn"?".in":h==="easeOut"?".out":".inOut")]=ct[a+"."+h]=n[h]}),n},Ao=function(t){return function(i){return i<.5?(1-t(1-i*2))/2:.5+t((i-.5)*2)/2}},Jr=function o(t,i,e){var r=i>=1?i:1,n=(e||(t?.3:.45))/(i<1?i:1),s=n/vn*(Math.asin(1/r)||0),a=function(d){return d===1?1:r*Math.pow(2,-10*d)*Ch((d-s)*n)+1},h=t==="out"?a:t==="in"?function(l){return 1-a(1-l)}:Ao(a);return n=vn/n,h.config=function(l,d){return o(t,l,d)},h},Zr=function o(t,i){i===void 0&&(i=1.70158);var e=function(s){return s?--s*s*((i+1)*s+i)+1:0},r=t==="out"?e:t==="in"?function(n){return 1-e(1-n)}:Ao(e);return r.config=function(n){return o(t,n)},r};Xt("Linear,Quad,Cubic,Quart,Quint,Strong",function(o,t){var i=t<5?t+1:t;Qe(o+",Power"+(i-1),t?function(e){return Math.pow(e,i)}:function(e){return e},function(e){return 1-Math.pow(1-e,i)},function(e){return e<.5?Math.pow(e*2,i)/2:1-Math.pow((1-e)*2,i)/2})});ct.Linear.easeNone=ct.none=ct.Linear.easeIn;Qe("Elastic",Jr("in"),Jr("out"),Jr());(function(o,t){var i=1/t,e=2*i,r=2.5*i,n=function(a){return a<i?o*a*a:a<e?o*Math.pow(a-1.5/t,2)+.75:a<r?o*(a-=2.25/t)*a+.9375:o*Math.pow(a-2.625/t,2)+.984375};Qe("Bounce",function(s){return 1-n(1-s)},n)})(7.5625,2.75);Qe("Expo",function(o){return o?Math.pow(2,10*(o-1)):0});Qe("Circ",function(o){return-($a(1-o*o)-1)});Qe("Sine",function(o){return o===1?1:-xh(o*Sh)+1});Qe("Back",Zr("in"),Zr("out"),Zr());ct.SteppedEase=ct.steps=ee.SteppedEase={config:function(t,i){t===void 0&&(t=1);var e=1/t,r=t+(i?0:1),n=i?1:0,s=1-Ut;return function(a){return((r*br(0,s,a)|0)+n)*e}}};di.ease=ct["quad.out"];Xt("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(o){return qn+=o+","+o+"Params,"});var Ro=function(t,i){this.id=wh++,t._gsap=this,this.target=t,this.harness=i,this.get=i?i.get:so,this.set=i?i.getSetter:jn},mr=function(){function o(i){this.vars=i,this._delay=+i.delay||0,(this._repeat=i.repeat===1/0?-2:i.repeat||0)&&(this._rDelay=i.repeatDelay||0,this._yoyo=!!i.yoyo||!!i.yoyoEase),this._ts=1,fi(this,+i.duration,1,1),this.data=i.data,mt&&(this._ctx=mt,mt.data.push(this)),pr||Jt.wake()}var t=o.prototype;return t.delay=function(e){return e||e===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+e-this._delay),this._delay=e,this):this._delay},t.duration=function(e){return arguments.length?this.totalDuration(this._repeat>0?e+(e+this._rDelay)*this._repeat:e):this.totalDuration()&&this._dur},t.totalDuration=function(e){return arguments.length?(this._dirty=0,fi(this,this._repeat<0?e:(e-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(e,r){if(gi(),!arguments.length)return this._tTime;var n=this._dp;if(n&&n.smoothChildTiming&&this._ts){for(Br(this,e),!n._dp||n.parent||co(n,this);n&&n.parent;)n.parent._time!==n._start+(n._ts>=0?n._tTime/n._ts:(n.totalDuration()-n._tTime)/-n._ts)&&n.totalTime(n._tTime,!0),n=n.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&e<this._tDur||this._ts<0&&e>0||!this._tDur&&!e)&&ge(this._dp,this,this._start-this._delay)}return(this._tTime!==e||!this._dur&&!r||this._initted&&Math.abs(this._zTime)===Ut||!e&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=e),ao(this,e,r)),this},t.time=function(e,r){return arguments.length?this.totalTime(Math.min(this.totalDuration(),e+vs(this))%(this._dur+this._rDelay)||(e?this._dur:0),r):this._time},t.totalProgress=function(e,r){return arguments.length?this.totalTime(this.totalDuration()*e,r):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>0?1:0},t.progress=function(e,r){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-e:e)+vs(this),r):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},t.iteration=function(e,r){var n=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(e-1)*n,r):this._repeat?ui(this._tTime,n)+1:1},t.timeScale=function(e,r){if(!arguments.length)return this._rts===-1e-8?0:this._rts;if(this._rts===e)return this;var n=this.parent&&this._ts?Fr(this.parent._time,this):this._tTime;return this._rts=+e||0,this._ts=this._ps||e===-1e-8?0:this._rts,this.totalTime(br(-Math.abs(this._delay),this._tDur,n),r!==!1),Ur(this),Mh(this)},t.paused=function(e){return arguments.length?(this._ps!==e&&(this._ps=e,e?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(gi(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Ut&&(this._tTime-=Ut)))),this):this._ps},t.startTime=function(e){if(arguments.length){this._start=e;var r=this.parent||this._dp;return r&&(r._sort||!this.parent)&&ge(r,this,e-this._delay),this}return this._start},t.endTime=function(e){return this._start+(Wt(e)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},t.rawTime=function(e){var r=this.parent||this._dp;return r?e&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Fr(r.rawTime(e),this):this._tTime:this._tTime},t.revert=function(e){e===void 0&&(e=kh);var r=Bt;return Bt=e,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(e),this.totalTime(-.01,e.suppressEvents)),this.data!=="nested"&&e.kill!==!1&&this.kill(),Bt=r,this},t.globalTime=function(e){for(var r=this,n=arguments.length?e:r.rawTime();r;)n=r._start+n/(Math.abs(r._ts)||1),r=r._dp;return!this.parent&&this._sat?this._sat.globalTime(e):n},t.repeat=function(e){return arguments.length?(this._repeat=e===1/0?-2:e,bs(this)):this._repeat===-2?1/0:this._repeat},t.repeatDelay=function(e){if(arguments.length){var r=this._time;return this._rDelay=e,bs(this),r?this.time(r):this}return this._rDelay},t.yoyo=function(e){return arguments.length?(this._yoyo=e,this):this._yoyo},t.seek=function(e,r){return this.totalTime(ne(this,e),Wt(r))},t.restart=function(e,r){return this.play().totalTime(e?-this._delay:0,Wt(r))},t.play=function(e,r){return e!=null&&this.seek(e,r),this.reversed(!1).paused(!1)},t.reverse=function(e,r){return e!=null&&this.seek(e||this.totalDuration(),r),this.reversed(!0).paused(!1)},t.pause=function(e,r){return e!=null&&this.seek(e,r),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(e){return arguments.length?(!!e!==this.reversed()&&this.timeScale(-this._rts||(e?-1e-8:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-1e-8,this},t.isActive=function(){var e=this.parent||this._dp,r=this._start,n;return!!(!e||this._ts&&this._initted&&e.isActive()&&(n=e.rawTime(!0))>=r&&n<this.endTime(!0)-Ut)},t.eventCallback=function(e,r,n){var s=this.vars;return arguments.length>1?(r?(s[e]=r,n&&(s[e+"Params"]=n),e==="onUpdate"&&(this._onUpdate=r)):delete s[e],this):s[e]},t.then=function(e){var r=this;return new Promise(function(n){var s=Ct(e)?e:ho,a=function(){var l=r.then;r.then=null,Ct(s)&&(s=s(r))&&(s.then||s===r)&&(r.then=l),n(s),r.then=l};r._initted&&r.totalProgress()===1&&r._ts>=0||!r._tTime&&r._ts<0?a():r._prom=a})},t.kill=function(){hr(this)},o}();oe(mr.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var Ht=function(o){ja(t,o);function t(e,r){var n;return e===void 0&&(e={}),n=o.call(this,e)||this,n.labels={},n.smoothChildTiming=!!e.smoothChildTiming,n.autoRemoveChildren=!!e.autoRemoveChildren,n._sort=Wt(e.sortChildren),bt&&ge(e.parent||bt,we(n),r),e.reversed&&n.reverse(),e.paused&&n.paused(!0),e.scrollTrigger&&uo(we(n),e.scrollTrigger),n}var i=t.prototype;return i.to=function(r,n,s){return dr(0,arguments,this),this},i.from=function(r,n,s){return dr(1,arguments,this),this},i.fromTo=function(r,n,s,a){return dr(2,arguments,this),this},i.set=function(r,n,s){return n.duration=0,n.parent=this,cr(n).repeatDelay||(n.repeat=0),n.immediateRender=!!n.immediateRender,new At(r,n,ne(this,s),1),this},i.call=function(r,n,s){return ge(this,At.delayedCall(0,r,n),s)},i.staggerTo=function(r,n,s,a,h,l,d){return s.duration=n,s.stagger=s.stagger||a,s.onComplete=l,s.onCompleteParams=d,s.parent=this,new At(r,s,ne(this,h)),this},i.staggerFrom=function(r,n,s,a,h,l,d){return s.runBackwards=1,cr(s).immediateRender=Wt(s.immediateRender),this.staggerTo(r,n,s,a,h,l,d)},i.staggerFromTo=function(r,n,s,a,h,l,d,p){return a.startAt=s,cr(a).immediateRender=Wt(a.immediateRender),this.staggerTo(r,n,a,h,l,d,p)},i.render=function(r,n,s){var a=this._time,h=this._dirty?this.totalDuration():this._tDur,l=this._dur,d=r<=0?0:Ot(r),p=this._zTime<0!=r<0&&(this._initted||!l),m,c,f,_,v,x,u,g,b,S,C,M;if(this!==bt&&d>h&&r>=0&&(d=h),d!==this._tTime||s||p){if(a!==this._time&&l&&(d+=this._time-a,r+=this._time-a),m=d,b=this._start,g=this._ts,x=!g,p&&(l||(a=this._zTime),(r||!n)&&(this._zTime=r)),this._repeat){if(C=this._yoyo,v=l+this._rDelay,this._repeat<-1&&r<0)return this.totalTime(v*100+r,n,s);if(m=Ot(d%v),d===h?(_=this._repeat,m=l):(_=~~(d/v),_&&_===d/v&&(m=l,_--),m>l&&(m=l)),S=ui(this._tTime,v),!a&&this._tTime&&S!==_&&this._tTime-S*v-this._dur<=0&&(S=_),C&&_&1&&(m=l-m,M=1),_!==S&&!this._lock){var k=C&&S&1,T=k===(C&&_&1);if(_<S&&(k=!k),a=k?0:d%l?l:d,this._lock=1,this.render(a||(M?0:Ot(_*v)),n,!l)._lock=0,this._tTime=d,!n&&this.parent&&Zt(this,"onRepeat"),this.vars.repeatRefresh&&!M&&(this.invalidate()._lock=1),a&&a!==this._time||x!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(l=this._dur,h=this._tDur,T&&(this._lock=2,a=k?l:-1e-4,this.render(a,!0),this.vars.repeatRefresh&&!M&&this.invalidate()),this._lock=0,!this._ts&&!x)return this;ko(this,M)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(u=Nh(this,Ot(a),Ot(m)),u&&(d-=m-(m=u._start))),this._tTime=d,this._time=m,this._act=!g,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=r,a=0),!a&&m&&!n&&!_&&(Zt(this,"onStart"),this._tTime!==d))return this;if(m>=a&&r>=0)for(c=this._first;c;){if(f=c._next,(c._act||m>=c._start)&&c._ts&&u!==c){if(c.parent!==this)return this.render(r,n,s);if(c.render(c._ts>0?(m-c._start)*c._ts:(c._dirty?c.totalDuration():c._tDur)+(m-c._start)*c._ts,n,s),m!==this._time||!this._ts&&!x){u=0,f&&(d+=this._zTime=-1e-8);break}}c=f}else{c=this._last;for(var A=r<0?r:m;c;){if(f=c._prev,(c._act||A<=c._end)&&c._ts&&u!==c){if(c.parent!==this)return this.render(r,n,s);if(c.render(c._ts>0?(A-c._start)*c._ts:(c._dirty?c.totalDuration():c._tDur)+(A-c._start)*c._ts,n,s||Bt&&(c._initted||c._startAt)),m!==this._time||!this._ts&&!x){u=0,f&&(d+=this._zTime=A?-1e-8:Ut);break}}c=f}}if(u&&!n&&(this.pause(),u.render(m>=a?0:-1e-8)._zTime=m>=a?1:-1,this._ts))return this._start=b,Ur(this),this.render(r,n,s);this._onUpdate&&!n&&Zt(this,"onUpdate",!0),(d===h&&this._tTime>=this.totalDuration()||!d&&a)&&(b===this._start||Math.abs(g)!==Math.abs(this._ts))&&(this._lock||((r||!l)&&(d===h&&this._ts>0||!d&&this._ts<0)&&Ne(this,1),!n&&!(r<0&&!a)&&(d||a||!h)&&(Zt(this,d===h&&r>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(d<h&&this.timeScale()>0)&&this._prom())))}return this},i.add=function(r,n){var s=this;if(Te(n)||(n=ne(this,n,r)),!(r instanceof mr)){if(Vt(r))return r.forEach(function(a){return s.add(a,n)}),this;if(Ft(r))return this.addLabel(r,n);if(Ct(r))r=At.delayedCall(0,r);else return this}return this!==r?ge(this,r,n):this},i.getChildren=function(r,n,s,a){r===void 0&&(r=!0),n===void 0&&(n=!0),s===void 0&&(s=!0),a===void 0&&(a=-1e8);for(var h=[],l=this._first;l;)l._start>=a&&(l instanceof At?n&&h.push(l):(s&&h.push(l),r&&h.push.apply(h,l.getChildren(!0,n,s)))),l=l._next;return h},i.getById=function(r){for(var n=this.getChildren(1,1,1),s=n.length;s--;)if(n[s].vars.id===r)return n[s]},i.remove=function(r){return Ft(r)?this.removeLabel(r):Ct(r)?this.killTweensOf(r):(Gr(this,r),r===this._recent&&(this._recent=this._last),We(this))},i.totalTime=function(r,n){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Ot(Jt.time-(this._ts>0?r/this._ts:(this.totalDuration()-r)/-this._ts))),o.prototype.totalTime.call(this,r,n),this._forcing=0,this):this._tTime},i.addLabel=function(r,n){return this.labels[r]=ne(this,n),this},i.removeLabel=function(r){return delete this.labels[r],this},i.addPause=function(r,n,s){var a=At.delayedCall(0,n||gr,s);return a.data="isPause",this._hasPause=1,ge(this,a,ne(this,r))},i.removePause=function(r){var n=this._first;for(r=ne(this,r);n;)n._start===r&&n.data==="isPause"&&Ne(n),n=n._next},i.killTweensOf=function(r,n,s){for(var a=this.getTweensOf(r,s),h=a.length;h--;)Ee!==a[h]&&a[h].kill(r,n);return this},i.getTweensOf=function(r,n){for(var s=[],a=ae(r),h=this._first,l=Te(n),d;h;)h instanceof At?Ah(h._targets,a)&&(l?(!Ee||h._initted&&h._ts)&&h.globalTime(0)<=n&&h.globalTime(h.totalDuration())>n:!n||h.isActive())&&s.push(h):(d=h.getTweensOf(a,n)).length&&s.push.apply(s,d),h=h._next;return s},i.tweenTo=function(r,n){n=n||{};var s=this,a=ne(s,r),h=n,l=h.startAt,d=h.onStart,p=h.onStartParams,m=h.immediateRender,c,f=At.to(s,oe({ease:n.ease||"none",lazy:!1,immediateRender:!1,time:a,overwrite:"auto",duration:n.duration||Math.abs((a-(l&&"time"in l?l.time:s._time))/s.timeScale())||Ut,onStart:function(){if(s.pause(),!c){var v=n.duration||Math.abs((a-(l&&"time"in l?l.time:s._time))/s.timeScale());f._dur!==v&&fi(f,v,0,1).render(f._time,!0,!0),c=1}d&&d.apply(f,p||[])}},n));return m?f.render(0):f},i.tweenFromTo=function(r,n,s){return this.tweenTo(n,oe({startAt:{time:ne(this,r)}},s))},i.recent=function(){return this._recent},i.nextLabel=function(r){return r===void 0&&(r=this._time),Ss(this,ne(this,r))},i.previousLabel=function(r){return r===void 0&&(r=this._time),Ss(this,ne(this,r),1)},i.currentLabel=function(r){return arguments.length?this.seek(r,!0):this.previousLabel(this._time+Ut)},i.shiftChildren=function(r,n,s){s===void 0&&(s=0);for(var a=this._first,h=this.labels,l;a;)a._start>=s&&(a._start+=r,a._end+=r),a=a._next;if(n)for(l in h)h[l]>=s&&(h[l]+=r);return We(this)},i.invalidate=function(r){var n=this._first;for(this._lock=0;n;)n.invalidate(r),n=n._next;return o.prototype.invalidate.call(this,r)},i.clear=function(r){r===void 0&&(r=!0);for(var n=this._first,s;n;)s=n._next,this.remove(n),n=s;return this._dp&&(this._time=this._tTime=this._pTime=0),r&&(this.labels={}),We(this)},i.totalDuration=function(r){var n=0,s=this,a=s._last,h=pe,l,d,p;if(arguments.length)return s.timeScale((s._repeat<0?s.duration():s.totalDuration())/(s.reversed()?-r:r));if(s._dirty){for(p=s.parent;a;)l=a._prev,a._dirty&&a.totalDuration(),d=a._start,d>h&&s._sort&&a._ts&&!s._lock?(s._lock=1,ge(s,a,d-a._delay,1)._lock=0):h=d,d<0&&a._ts&&(n-=d,(!p&&!s._dp||p&&p.smoothChildTiming)&&(s._start+=d/s._ts,s._time-=d,s._tTime-=d),s.shiftChildren(-d,!1,-1/0),h=0),a._end>n&&a._ts&&(n=a._end),a=l;fi(s,s===bt&&s._time>n?s._time:n,1,1),s._dirty=0}return s._tDur},t.updateRoot=function(r){if(bt._ts&&(ao(bt,Fr(r,bt)),no=Jt.frame),Jt.frame>=ms){ms+=te.autoSleep||120;var n=bt._first;if((!n||!n._ts)&&te.autoSleep&&Jt._listeners.length<2){for(;n&&!n._ts;)n=n._next;n||Jt.sleep()}}},t}(mr);oe(Ht.prototype,{_lock:0,_hasPause:0,_forcing:0});var Qh=function(t,i,e,r,n,s,a){var h=new Kt(this._pt,t,i,0,1,No,null,n),l=0,d=0,p,m,c,f,_,v,x,u;for(h.b=e,h.e=r,e+="",r+="",(x=~r.indexOf("random("))&&(r=_r(r)),s&&(u=[e,r],s(u,t,i),e=u[0],r=u[1]),m=e.match(jr)||[];p=jr.exec(r);)f=p[0],_=r.substring(l,p.index),c?c=(c+1)%5:_.substr(-5)==="rgba("&&(c=1),f!==m[d++]&&(v=parseFloat(m[d-1])||0,h._pt={_next:h._pt,p:_||d===1?_:",",s:v,c:f.charAt(1)==="="?hi(v,f)-v:parseFloat(f)-v,m:c&&c<4?Math.round:0},l=jr.lastIndex);return h.c=l<r.length?r.substring(l,r.length):"",h.fp=a,(Za.test(r)||x)&&(h.e=0),this._pt=h,h},Wn=function(t,i,e,r,n,s,a,h,l,d){Ct(r)&&(r=r(n||0,t,s));var p=t[i],m=e!=="get"?e:Ct(p)?l?t[i.indexOf("set")||!Ct(t["get"+i.substr(3)])?i:"get"+i.substr(3)](l):t[i]():p,c=Ct(p)?l?il:Fo:Kn,f;if(Ft(r)&&(~r.indexOf("random(")&&(r=_r(r)),r.charAt(1)==="="&&(f=hi(m,r)+(Gt(m)||0),(f||f===0)&&(r=f))),!d||m!==r||An)return!isNaN(m*r)&&r!==""?(f=new Kt(this._pt,t,i,+m||0,r-(m||0),typeof p=="boolean"?nl:Do,0,c),l&&(f.fp=l),a&&f.modifier(a,this,t),this._pt=f):(!p&&!(i in t)&&zn(i,r),Qh.call(this,t,i,m,r,c,h||te.stringFilter,l))},Jh=function(t,i,e,r,n){if(Ct(t)&&(t=ur(t,n,i,e,r)),!ye(t)||t.style&&t.nodeType||Vt(t)||Qa(t))return Ft(t)?ur(t,n,i,e,r):t;var s={},a;for(a in t)s[a]=ur(t[a],n,i,e,r);return s},Eo=function(t,i,e,r,n,s){var a,h,l,d;if(Qt[t]&&(a=new Qt[t]).init(n,a.rawVars?i[t]:Jh(i[t],r,n,s,e),e,r,s)!==!1&&(e._pt=h=new Kt(e._pt,n,t,0,1,a.render,a,0,a.priority),e!==si))for(l=e._ptLookup[e._targets.indexOf(n)],d=a._props.length;d--;)l[a._props[d]]=h;return a},Ee,An,Xn=function o(t,i,e){var r=t.vars,n=r.ease,s=r.startAt,a=r.immediateRender,h=r.lazy,l=r.onUpdate,d=r.runBackwards,p=r.yoyoEase,m=r.keyframes,c=r.autoRevert,f=t._dur,_=t._startAt,v=t._targets,x=t.parent,u=x&&x.data==="nested"?x.vars.targets:v,g=t._overwrite==="auto"&&!Gn,b=t.timeline,S,C,M,k,T,A,R,D,y,P,w,E,O;if(b&&(!m||!n)&&(n="none"),t._ease=Xe(n,di.ease),t._yEase=p?Po(Xe(p===!0?n:p,di.ease)):0,p&&t._yoyo&&!t._repeat&&(p=t._yEase,t._yEase=t._ease,t._ease=p),t._from=!b&&!!r.runBackwards,!b||m&&!r.stagger){if(D=v[0]?Ye(v[0]).harness:0,E=D&&r[D.prop],S=Or(r,Hn),_&&(_._zTime<0&&_.progress(1),i<0&&d&&a&&!c?_.render(-1,!0):_.revert(d&&f?Tr:Ph),_._lazy=0),s){if(Ne(t._startAt=At.set(v,oe({data:"isStart",overwrite:!1,parent:x,immediateRender:!0,lazy:!_&&Wt(h),startAt:null,delay:0,onUpdate:l&&function(){return Zt(t,"onUpdate")},stagger:0},s))),t._startAt._dp=0,t._startAt._sat=t,i<0&&(Bt||!a&&!c)&&t._startAt.revert(Tr),a&&f&&i<=0&&e<=0){i&&(t._zTime=i);return}}else if(d&&f&&!_){if(i&&(a=!1),M=oe({overwrite:!1,data:"isFromStart",lazy:a&&!_&&Wt(h),immediateRender:a,stagger:0,parent:x},S),E&&(M[D.prop]=E),Ne(t._startAt=At.set(v,M)),t._startAt._dp=0,t._startAt._sat=t,i<0&&(Bt?t._startAt.revert(Tr):t._startAt.render(-1,!0)),t._zTime=i,!a)o(t._startAt,Ut,Ut);else if(!i)return}for(t._pt=t._ptCache=0,h=f&&Wt(h)||h&&!f,C=0;C<v.length;C++){if(T=v[C],R=T._gsap||Yn(v)[C]._gsap,t._ptLookup[C]=P={},wn[R.id]&&Fe.length&&Mr(),w=u===v?C:u.indexOf(T),D&&(y=new D).init(T,E||S,t,w,u)!==!1&&(t._pt=k=new Kt(t._pt,T,y.name,0,1,y.render,y,0,y.priority),y._props.forEach(function(I){P[I]=k}),y.priority&&(A=1)),!D||E)for(M in S)Qt[M]&&(y=Eo(M,S,t,w,T,u))?y.priority&&(A=1):P[M]=k=Wn.call(t,T,M,"get",S[M],w,u,0,r.stringFilter);t._op&&t._op[C]&&t.kill(T,t._op[C]),g&&t._pt&&(Ee=t,bt.killTweensOf(T,P,t.globalTime(i)),O=!t.parent,Ee=0),t._pt&&h&&(wn[R.id]=1)}A&&Io(t),t._onInit&&t._onInit(t)}t._onUpdate=l,t._initted=(!t._op||t._pt)&&!O,m&&i<=0&&b.render(pe,!0,!0)},Zh=function(t,i,e,r,n,s,a,h){var l=(t._pt&&t._ptCache||(t._ptCache={}))[i],d,p,m,c;if(!l)for(l=t._ptCache[i]=[],m=t._ptLookup,c=t._targets.length;c--;){if(d=m[c][i],d&&d.d&&d.d._pt)for(d=d.d._pt;d&&d.p!==i&&d.fp!==i;)d=d._next;if(!d)return An=1,t.vars[i]="+=0",Xn(t,a),An=0,h?fr(i+" not eligible for reset"):1;l.push(d)}for(c=l.length;c--;)p=l[c],d=p._pt||p,d.s=(r||r===0)&&!n?r:d.s+(r||0)+s*d.c,d.c=e-d.s,p.e&&(p.e=Pt(e)+Gt(p.e)),p.b&&(p.b=d.s+Gt(p.b))},tl=function(t,i){var e=t[0]?Ye(t[0]).harness:0,r=e&&e.aliases,n,s,a,h;if(!r)return i;n=je({},i);for(s in r)if(s in n)for(h=r[s].split(","),a=h.length;a--;)n[h[a]]=n[s];return n},el=function(t,i,e,r){var n=i.ease||r||"power1.inOut",s,a;if(Vt(i))a=e[t]||(e[t]=[]),i.forEach(function(h,l){return a.push({t:l/(i.length-1)*100,v:h,e:n})});else for(s in i)a=e[s]||(e[s]=[]),s==="ease"||a.push({t:parseFloat(t),v:i[s],e:n})},ur=function(t,i,e,r,n){return Ct(t)?t.call(i,e,r,n):Ft(t)&&~t.indexOf("random(")?_r(t):t},Mo=qn+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",Oo={};Xt(Mo+",id,stagger,delay,duration,paused,scrollTrigger",function(o){return Oo[o]=1});var At=function(o){ja(t,o);function t(e,r,n,s){var a;typeof r=="number"&&(n.duration=r,r=n,n=null),a=o.call(this,s?r:cr(r))||this;var h=a.vars,l=h.duration,d=h.delay,p=h.immediateRender,m=h.stagger,c=h.overwrite,f=h.keyframes,_=h.defaults,v=h.scrollTrigger,x=h.yoyoEase,u=r.parent||bt,g=(Vt(e)||Qa(e)?Te(e[0]):"length"in r)?[e]:ae(e),b,S,C,M,k,T,A,R;if(a._targets=g.length?Yn(g):fr("GSAP target "+e+" not found. https://gsap.com",!te.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=c,f||m||wr(l)||wr(d)){if(r=a.vars,b=a.timeline=new Ht({data:"nested",defaults:_||{},targets:u&&u.data==="nested"?u.vars.targets:g}),b.kill(),b.parent=b._dp=we(a),b._start=0,m||wr(l)||wr(d)){if(M=g.length,A=m&&po(m),ye(m))for(k in m)~Mo.indexOf(k)&&(R||(R={}),R[k]=m[k]);for(S=0;S<M;S++)C=Or(r,Oo),C.stagger=0,x&&(C.yoyoEase=x),R&&je(C,R),T=g[S],C.duration=+ur(l,we(a),S,T,g),C.delay=(+ur(d,we(a),S,T,g)||0)-a._delay,!m&&M===1&&C.delay&&(a._delay=d=C.delay,a._start+=d,C.delay=0),b.to(T,C,A?A(S,T,g):0),b._ease=ct.none;b.duration()?l=d=0:a.timeline=0}else if(f){cr(oe(b.vars.defaults,{ease:"none"})),b._ease=Xe(f.ease||r.ease||"none");var D=0,y,P,w;if(Vt(f))f.forEach(function(E){return b.to(g,E,">")}),b.duration();else{C={};for(k in f)k==="ease"||k==="easeEach"||el(k,f[k],C,f.easeEach);for(k in C)for(y=C[k].sort(function(E,O){return E.t-O.t}),D=0,S=0;S<y.length;S++)P=y[S],w={ease:P.e,duration:(P.t-(S?y[S-1].t:0))/100*l},w[k]=P.v,b.to(g,w,D),D+=w.duration;b.duration()<l&&b.to({},{duration:l-b.duration()})}}l||a.duration(l=b.duration())}else a.timeline=0;return c===!0&&!Gn&&(Ee=we(a),bt.killTweensOf(g),Ee=0),ge(u,we(a),n),r.reversed&&a.reverse(),r.paused&&a.paused(!0),(p||!l&&!f&&a._start===Ot(u._time)&&Wt(p)&&Oh(we(a))&&u.data!=="nested")&&(a._tTime=-1e-8,a.render(Math.max(0,-d)||0)),v&&uo(we(a),v),a}var i=t.prototype;return i.render=function(r,n,s){var a=this._time,h=this._tDur,l=this._dur,d=r<0,p=r>h-Ut&&!d?h:r<Ut?0:r,m,c,f,_,v,x,u,g,b;if(!l)Dh(this,r,n,s);else if(p!==this._tTime||!r||s||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==d){if(m=p,g=this.timeline,this._repeat){if(_=l+this._rDelay,this._repeat<-1&&d)return this.totalTime(_*100+r,n,s);if(m=Ot(p%_),p===h?(f=this._repeat,m=l):(f=~~(p/_),f&&f===Ot(p/_)&&(m=l,f--),m>l&&(m=l)),x=this._yoyo&&f&1,x&&(b=this._yEase,m=l-m),v=ui(this._tTime,_),m===a&&!s&&this._initted&&f===v)return this._tTime=p,this;f!==v&&(g&&this._yEase&&ko(g,x),this.vars.repeatRefresh&&!x&&!this._lock&&this._time!==_&&this._initted&&(this._lock=s=1,this.render(Ot(_*f),!0).invalidate()._lock=0))}if(!this._initted){if(fo(this,d?r:m,s,n,p))return this._tTime=0,this;if(a!==this._time&&!(s&&this.vars.repeatRefresh&&f!==v))return this;if(l!==this._dur)return this.render(r,n,s)}if(this._tTime=p,this._time=m,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=u=(b||this._ease)(m/l),this._from&&(this.ratio=u=1-u),m&&!a&&!n&&!f&&(Zt(this,"onStart"),this._tTime!==p))return this;for(c=this._pt;c;)c.r(u,c.d),c=c._next;g&&g.render(r<0?r:g._dur*g._ease(m/this._dur),n,s)||this._startAt&&(this._zTime=r),this._onUpdate&&!n&&(d&&xn(this,r,n,s),Zt(this,"onUpdate")),this._repeat&&f!==v&&this.vars.onRepeat&&!n&&this.parent&&Zt(this,"onRepeat"),(p===this._tDur||!p)&&this._tTime===p&&(d&&!this._onUpdate&&xn(this,r,!0,!0),(r||!l)&&(p===this._tDur&&this._ts>0||!p&&this._ts<0)&&Ne(this,1),!n&&!(d&&!a)&&(p||a||x)&&(Zt(this,p===h?"onComplete":"onReverseComplete",!0),this._prom&&!(p<h&&this.timeScale()>0)&&this._prom()))}return this},i.targets=function(){return this._targets},i.invalidate=function(r){return(!r||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(r),o.prototype.invalidate.call(this,r)},i.resetTo=function(r,n,s,a,h){pr||Jt.wake(),this._ts||this.play();var l=Math.min(this._dur,(this._dp._time-this._start)*this._ts),d;return this._initted||Xn(this,l),d=this._ease(l/this._dur),Zh(this,r,n,s,a,d,l,h)?this.resetTo(r,n,s,a,1):(Br(this,0),this.parent||lo(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},i.kill=function(r,n){if(n===void 0&&(n="all"),!r&&(!n||n==="all"))return this._lazy=this._pt=0,this.parent?hr(this):this;if(this.timeline){var s=this.timeline.totalDuration();return this.timeline.killTweensOf(r,n,Ee&&Ee.vars.overwrite!==!0)._first||hr(this),this.parent&&s!==this.timeline.totalDuration()&&fi(this,this._dur*this.timeline._tDur/s,0,1),this}var a=this._targets,h=r?ae(r):a,l=this._ptLookup,d=this._pt,p,m,c,f,_,v,x;if((!n||n==="all")&&Eh(a,h))return n==="all"&&(this._pt=0),hr(this);for(p=this._op=this._op||[],n!=="all"&&(Ft(n)&&(_={},Xt(n,function(u){return _[u]=1}),n=_),n=tl(a,n)),x=a.length;x--;)if(~h.indexOf(a[x])){m=l[x],n==="all"?(p[x]=n,f=m,c={}):(c=p[x]=p[x]||{},f=n);for(_ in f)v=m&&m[_],v&&((!("kill"in v.d)||v.d.kill(_)===!0)&&Gr(this,v,"_pt"),delete m[_]),c!=="all"&&(c[_]=1)}return this._initted&&!this._pt&&d&&hr(this),this},t.to=function(r,n){return new t(r,n,arguments[2])},t.from=function(r,n){return dr(1,arguments)},t.delayedCall=function(r,n,s,a){return new t(n,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:r,onComplete:n,onReverseComplete:n,onCompleteParams:s,onReverseCompleteParams:s,callbackScope:a})},t.fromTo=function(r,n,s){return dr(2,arguments)},t.set=function(r,n){return n.duration=0,n.repeatDelay||(n.repeat=0),new t(r,n)},t.killTweensOf=function(r,n,s){return bt.killTweensOf(r,n,s)},t}(mr);oe(At.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});Xt("staggerTo,staggerFrom,staggerFromTo",function(o){At[o]=function(){var t=new Ht,i=Tn.call(arguments,0);return i.splice(o==="staggerFromTo"?5:4,0,0),t[o].apply(t,i)}});var Kn=function(t,i,e){return t[i]=e},Fo=function(t,i,e){return t[i](e)},il=function(t,i,e,r){return t[i](r.fp,e)},rl=function(t,i,e){return t.setAttribute(i,e)},jn=function(t,i){return Ct(t[i])?Fo:Un(t[i])&&t.setAttribute?rl:Kn},Do=function(t,i){return i.set(i.t,i.p,Math.round((i.s+i.c*t)*1e6)/1e6,i)},nl=function(t,i){return i.set(i.t,i.p,!!(i.s+i.c*t),i)},No=function(t,i){var e=i._pt,r="";if(!t&&i.b)r=i.b;else if(t===1&&i.e)r=i.e;else{for(;e;)r=e.p+(e.m?e.m(e.s+e.c*t):Math.round((e.s+e.c*t)*1e4)/1e4)+r,e=e._next;r+=i.c}i.set(i.t,i.p,r,i)},$n=function(t,i){for(var e=i._pt;e;)e.r(t,e.d),e=e._next},sl=function(t,i,e,r){for(var n=this._pt,s;n;)s=n._next,n.p===r&&n.modifier(t,i,e),n=s},al=function(t){for(var i=this._pt,e,r;i;)r=i._next,i.p===t&&!i.op||i.op===t?Gr(this,i,"_pt"):i.dep||(e=1),i=r;return!e},ol=function(t,i,e,r){r.mSet(t,i,r.m.call(r.tween,e,r.mt),r)},Io=function(t){for(var i=t._pt,e,r,n,s;i;){for(e=i._next,r=n;r&&r.pr>i.pr;)r=r._next;(i._prev=r?r._prev:s)?i._prev._next=i:n=i,(i._next=r)?r._prev=i:s=i,i=e}t._pt=n},Kt=function(){function o(i,e,r,n,s,a,h,l,d){this.t=e,this.s=n,this.c=s,this.p=r,this.r=a||Do,this.d=h||this,this.set=l||Kn,this.pr=d||0,this._next=i,i&&(i._prev=this)}var t=o.prototype;return t.modifier=function(e,r,n){this.mSet=this.mSet||this.set,this.set=ol,this.m=e,this.mt=n,this.tween=r},o}();Xt(qn+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(o){return Hn[o]=1});ee.TweenMax=ee.TweenLite=At;ee.TimelineLite=ee.TimelineMax=Ht;bt=new Ht({sortChildren:!1,defaults:di,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});te.stringFilter=To;var Ke=[],kr={},hl=[],xs=0,ll=0,tn=function(t){return(kr[t]||hl).map(function(i){return i()})},Rn=function(){var t=Date.now(),i=[];t-xs>2&&(tn("matchMediaInit"),Ke.forEach(function(e){var r=e.queries,n=e.conditions,s,a,h,l;for(a in r)s=fe.matchMedia(r[a]).matches,s&&(h=1),s!==n[a]&&(n[a]=s,l=1);l&&(e.revert(),h&&i.push(e))}),tn("matchMediaRevert"),i.forEach(function(e){return e.onMatch(e,function(r){return e.add(null,r)})}),xs=t,tn("matchMedia"))},Lo=function(){function o(i,e){this.selector=e&&Pn(e),this.data=[],this._r=[],this.isReverted=!1,this.id=ll++,i&&this.add(i)}var t=o.prototype;return t.add=function(e,r,n){Ct(e)&&(n=r,r=e,e=Ct);var s=this,a=function(){var l=mt,d=s.selector,p;return l&&l!==s&&l.data.push(s),n&&(s.selector=Pn(n)),mt=s,p=r.apply(s,arguments),Ct(p)&&s._r.push(p),mt=l,s.selector=d,s.isReverted=!1,p};return s.last=a,e===Ct?a(s,function(h){return s.add(null,h)}):e?s[e]=a:a},t.ignore=function(e){var r=mt;mt=null,e(this),mt=r},t.getTweens=function(){var e=[];return this.data.forEach(function(r){return r instanceof o?e.push.apply(e,r.getTweens()):r instanceof At&&!(r.parent&&r.parent.data==="nested")&&e.push(r)}),e},t.clear=function(){this._r.length=this.data.length=0},t.kill=function(e,r){var n=this;if(e?function(){for(var a=n.getTweens(),h=n.data.length,l;h--;)l=n.data[h],l.data==="isFlip"&&(l.revert(),l.getChildren(!0,!0,!1).forEach(function(d){return a.splice(a.indexOf(d),1)}));for(a.map(function(d){return{g:d._dur||d._delay||d._sat&&!d._sat.vars.immediateRender?d.globalTime(0):-1/0,t:d}}).sort(function(d,p){return p.g-d.g||-1/0}).forEach(function(d){return d.t.revert(e)}),h=n.data.length;h--;)l=n.data[h],l instanceof Ht?l.data!=="nested"&&(l.scrollTrigger&&l.scrollTrigger.revert(),l.kill()):!(l instanceof At)&&l.revert&&l.revert(e);n._r.forEach(function(d){return d(e,n)}),n.isReverted=!0}():this.data.forEach(function(a){return a.kill&&a.kill()}),this.clear(),r)for(var s=Ke.length;s--;)Ke[s].id===this.id&&Ke.splice(s,1)},t.revert=function(e){this.kill(e||{})},o}(),cl=function(){function o(i){this.contexts=[],this.scope=i,mt&&mt.data.push(this)}var t=o.prototype;return t.add=function(e,r,n){ye(e)||(e={matches:e});var s=new Lo(0,n||this.scope),a=s.conditions={},h,l,d;mt&&!s.selector&&(s.selector=mt.selector),this.contexts.push(s),r=s.add("onMatch",r),s.queries=e;for(l in e)l==="all"?d=1:(h=fe.matchMedia(e[l]),h&&(Ke.indexOf(s)<0&&Ke.push(s),(a[l]=h.matches)&&(d=1),h.addListener?h.addListener(Rn):h.addEventListener("change",Rn)));return d&&r(s,function(p){return s.add(null,p)}),this},t.revert=function(e){this.kill(e||{})},t.kill=function(e){this.contexts.forEach(function(r){return r.kill(e,!0)})},o}(),Dr={registerPlugin:function(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];i.forEach(function(r){return wo(r)})},timeline:function(t){return new Ht(t)},getTweensOf:function(t,i){return bt.getTweensOf(t,i)},getProperty:function(t,i,e,r){Ft(t)&&(t=ae(t)[0]);var n=Ye(t||{}).get,s=e?ho:oo;return e==="native"&&(e=""),t&&(i?s((Qt[i]&&Qt[i].get||n)(t,i,e,r)):function(a,h,l){return s((Qt[a]&&Qt[a].get||n)(t,a,h,l))})},quickSetter:function(t,i,e){if(t=ae(t),t.length>1){var r=t.map(function(d){return $t.quickSetter(d,i,e)}),n=r.length;return function(d){for(var p=n;p--;)r[p](d)}}t=t[0]||{};var s=Qt[i],a=Ye(t),h=a.harness&&(a.harness.aliases||{})[i]||i,l=s?function(d){var p=new s;si._pt=0,p.init(t,e?d+e:d,si,0,[t]),p.render(1,p),si._pt&&$n(1,si)}:a.set(t,h);return s?l:function(d){return l(t,h,e?d+e:d,a,1)}},quickTo:function(t,i,e){var r,n=$t.to(t,je((r={},r[i]="+=0.1",r.paused=!0,r),e||{})),s=function(h,l,d){return n.resetTo(i,h,l,d)};return s.tween=n,s},isTweening:function(t){return bt.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=Xe(t.ease,di.ease)),ys(di,t||{})},config:function(t){return ys(te,t||{})},registerEffect:function(t){var i=t.name,e=t.effect,r=t.plugins,n=t.defaults,s=t.extendTimeline;(r||"").split(",").forEach(function(a){return a&&!Qt[a]&&!ee[a]&&fr(i+" effect requires "+a+" plugin.")}),$r[i]=function(a,h,l){return e(ae(a),oe(h||{},n),l)},s&&(Ht.prototype[i]=function(a,h,l){return this.add($r[i](a,ye(h)?h:(l=h)&&{},this),l)})},registerEase:function(t,i){ct[t]=Xe(i)},parseEase:function(t,i){return arguments.length?Xe(t,i):ct},getById:function(t){return bt.getById(t)},exportRoot:function(t,i){t===void 0&&(t={});var e=new Ht(t),r,n;for(e.smoothChildTiming=Wt(t.smoothChildTiming),bt.remove(e),e._dp=0,e._time=e._tTime=bt._time,r=bt._first;r;)n=r._next,(i||!(!r._dur&&r instanceof At&&r.vars.onComplete===r._targets[0]))&&ge(e,r,r._start-r._delay),r=n;return ge(bt,e,0),e},context:function(t,i){return t?new Lo(t,i):mt},matchMedia:function(t){return new cl(t)},matchMediaRefresh:function(){return Ke.forEach(function(t){var i=t.conditions,e,r;for(r in i)i[r]&&(i[r]=!1,e=1);e&&t.revert()})||Rn()},addEventListener:function(t,i){var e=kr[t]||(kr[t]=[]);~e.indexOf(i)||e.push(i)},removeEventListener:function(t,i){var e=kr[t],r=e&&e.indexOf(i);r>=0&&e.splice(r,1)},utils:{wrap:zh,wrapYoyo:Hh,distribute:po,random:yo,snap:mo,normalize:Vh,getUnit:Gt,clamp:Lh,splitColor:xo,toArray:ae,selector:Pn,mapRange:bo,pipe:Uh,unitize:Bh,interpolate:qh,shuffle:_o},install:io,effects:$r,ticker:Jt,updateRoot:Ht.updateRoot,plugins:Qt,globalTimeline:bt,core:{PropTween:Kt,globals:ro,Tween:At,Timeline:Ht,Animation:mr,getCache:Ye,_removeLinkedListItem:Gr,reverting:function(){return Bt},context:function(t){return t&&mt&&(mt.data.push(t),t._ctx=mt),mt},suppressOverwrites:function(t){return Gn=t}}};Xt("to,from,fromTo,delayedCall,set,killTweensOf",function(o){return Dr[o]=At[o]});Jt.add(Ht.updateRoot);si=Dr.to({},{duration:0});var dl=function(t,i){for(var e=t._pt;e&&e.p!==i&&e.op!==i&&e.fp!==i;)e=e._next;return e},ul=function(t,i){var e=t._targets,r,n,s;for(r in i)for(n=e.length;n--;)s=t._ptLookup[n][r],s&&(s=s.d)&&(s._pt&&(s=dl(s,r)),s&&s.modifier&&s.modifier(i[r],t,e[n],r))},en=function(t,i){return{name:t,rawVars:1,init:function(r,n,s){s._onInit=function(a){var h,l;if(Ft(n)&&(h={},Xt(n,function(d){return h[d]=1}),n=h),i){h={};for(l in n)h[l]=i(n[l]);n=h}ul(a,n)}}}},$t=Dr.registerPlugin({name:"attr",init:function(t,i,e,r,n){var s,a,h;this.tween=e;for(s in i)h=t.getAttribute(s)||"",a=this.add(t,"setAttribute",(h||0)+"",i[s],r,n,0,0,s),a.op=s,a.b=h,this._props.push(s)},render:function(t,i){for(var e=i._pt;e;)Bt?e.set(e.t,e.p,e.b,e):e.r(t,e.d),e=e._next}},{name:"endArray",init:function(t,i){for(var e=i.length;e--;)this.add(t,e,t[e]||0,i[e],0,0,0,0,0,1)}},en("roundProps",kn),en("modifiers"),en("snap",mo))||Dr;At.version=Ht.version=$t.version="3.12.5";eo=1;Bn()&&gi();ct.Power0;ct.Power1;ct.Power2;ct.Power3;ct.Power4;ct.Linear;ct.Quad;ct.Cubic;ct.Quart;ct.Quint;ct.Strong;ct.Elastic;ct.Back;ct.SteppedEase;ct.Bounce;ct.Sine;ct.Expo;ct.Circ;/*!
 * CSSPlugin 3.12.5
 * https://gsap.com
 *
 * Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Cs,Me,li,Qn,qe,Ts,Jn,fl=function(){return typeof window<"u"},Pe={},He=180/Math.PI,ci=Math.PI/180,ti=Math.atan2,Ps=1e8,Zn=/([A-Z])/g,gl=/(left|right|width|margin|padding|x)/i,_l=/[\s,\(]\S/,_e={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},En=function(t,i){return i.set(i.t,i.p,Math.round((i.s+i.c*t)*1e4)/1e4+i.u,i)},pl=function(t,i){return i.set(i.t,i.p,t===1?i.e:Math.round((i.s+i.c*t)*1e4)/1e4+i.u,i)},ml=function(t,i){return i.set(i.t,i.p,t?Math.round((i.s+i.c*t)*1e4)/1e4+i.u:i.b,i)},yl=function(t,i){var e=i.s+i.c*t;i.set(i.t,i.p,~~(e+(e<0?-.5:.5))+i.u,i)},Go=function(t,i){return i.set(i.t,i.p,t?i.e:i.b,i)},Uo=function(t,i){return i.set(i.t,i.p,t!==1?i.b:i.e,i)},vl=function(t,i,e){return t.style[i]=e},bl=function(t,i,e){return t.style.setProperty(i,e)},Sl=function(t,i,e){return t._gsap[i]=e},wl=function(t,i,e){return t._gsap.scaleX=t._gsap.scaleY=e},xl=function(t,i,e,r,n){var s=t._gsap;s.scaleX=s.scaleY=e,s.renderTransform(n,s)},Cl=function(t,i,e,r,n){var s=t._gsap;s[i]=e,s.renderTransform(n,s)},St="transform",jt=St+"Origin",Tl=function o(t,i){var e=this,r=this.target,n=r.style,s=r._gsap;if(t in Pe&&n){if(this.tfm=this.tfm||{},t!=="transform")t=_e[t]||t,~t.indexOf(",")?t.split(",").forEach(function(a){return e.tfm[a]=xe(r,a)}):this.tfm[t]=s.x?s[t]:xe(r,t),t===jt&&(this.tfm.zOrigin=s.zOrigin);else return _e.transform.split(",").forEach(function(a){return o.call(e,a,i)});if(this.props.indexOf(St)>=0)return;s.svg&&(this.svgo=r.getAttribute("data-svg-origin"),this.props.push(jt,i,"")),t=St}(n||i)&&this.props.push(t,i,n[t])},Bo=function(t){t.translate&&(t.removeProperty("translate"),t.removeProperty("scale"),t.removeProperty("rotate"))},Pl=function(){var t=this.props,i=this.target,e=i.style,r=i._gsap,n,s;for(n=0;n<t.length;n+=3)t[n+1]?i[t[n]]=t[n+2]:t[n+2]?e[t[n]]=t[n+2]:e.removeProperty(t[n].substr(0,2)==="--"?t[n]:t[n].replace(Zn,"-$1").toLowerCase());if(this.tfm){for(s in this.tfm)r[s]=this.tfm[s];r.svg&&(r.renderTransform(),i.setAttribute("data-svg-origin",this.svgo||"")),n=Jn(),(!n||!n.isStart)&&!e[St]&&(Bo(e),r.zOrigin&&e[jt]&&(e[jt]+=" "+r.zOrigin+"px",r.zOrigin=0,r.renderTransform()),r.uncache=1)}},Vo=function(t,i){var e={target:t,props:[],revert:Pl,save:Tl};return t._gsap||$t.core.getCache(t),i&&i.split(",").forEach(function(r){return e.save(r)}),e},zo,Mn=function(t,i){var e=Me.createElementNS?Me.createElementNS((i||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):Me.createElement(t);return e&&e.style?e:Me.createElement(t)},me=function o(t,i,e){var r=getComputedStyle(t);return r[i]||r.getPropertyValue(i.replace(Zn,"-$1").toLowerCase())||r.getPropertyValue(i)||!e&&o(t,_i(i)||i,1)||""},ks="O,Moz,ms,Ms,Webkit".split(","),_i=function(t,i,e){var r=i||qe,n=r.style,s=5;if(t in n&&!e)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);s--&&!(ks[s]+t in n););return s<0?null:(s===3?"ms":s>=0?ks[s]:"")+t},On=function(){fl()&&window.document&&(Cs=window,Me=Cs.document,li=Me.documentElement,qe=Mn("div")||{style:{}},Mn("div"),St=_i(St),jt=St+"Origin",qe.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",zo=!!_i("perspective"),Jn=$t.core.reverting,Qn=1)},rn=function o(t){var i=Mn("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),e=this.parentNode,r=this.nextSibling,n=this.style.cssText,s;if(li.appendChild(i),i.appendChild(this),this.style.display="block",t)try{s=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=o}catch{}else this._gsapBBox&&(s=this._gsapBBox());return e&&(r?e.insertBefore(this,r):e.appendChild(this)),li.removeChild(i),this.style.cssText=n,s},As=function(t,i){for(var e=i.length;e--;)if(t.hasAttribute(i[e]))return t.getAttribute(i[e])},Ho=function(t){var i;try{i=t.getBBox()}catch{i=rn.call(t,!0)}return i&&(i.width||i.height)||t.getBBox===rn||(i=rn.call(t,!0)),i&&!i.width&&!i.x&&!i.y?{x:+As(t,["x","cx","x1"])||0,y:+As(t,["y","cy","y1"])||0,width:0,height:0}:i},qo=function(t){return!!(t.getCTM&&(!t.parentNode||t.ownerSVGElement)&&Ho(t))},$e=function(t,i){if(i){var e=t.style,r;i in Pe&&i!==jt&&(i=St),e.removeProperty?(r=i.substr(0,2),(r==="ms"||i.substr(0,6)==="webkit")&&(i="-"+i),e.removeProperty(r==="--"?i:i.replace(Zn,"-$1").toLowerCase())):e.removeAttribute(i)}},Oe=function(t,i,e,r,n,s){var a=new Kt(t._pt,i,e,0,1,s?Uo:Go);return t._pt=a,a.b=r,a.e=n,t._props.push(e),a},Rs={deg:1,rad:1,turn:1},kl={grid:1,flex:1},Ie=function o(t,i,e,r){var n=parseFloat(e)||0,s=(e+"").trim().substr((n+"").length)||"px",a=qe.style,h=gl.test(i),l=t.tagName.toLowerCase()==="svg",d=(l?"client":"offset")+(h?"Width":"Height"),p=100,m=r==="px",c=r==="%",f,_,v,x;if(r===s||!n||Rs[r]||Rs[s])return n;if(s!=="px"&&!m&&(n=o(t,i,e,"px")),x=t.getCTM&&qo(t),(c||s==="%")&&(Pe[i]||~i.indexOf("adius")))return f=x?t.getBBox()[h?"width":"height"]:t[d],Pt(c?n/f*p:n/100*f);if(a[h?"width":"height"]=p+(m?s:r),_=~i.indexOf("adius")||r==="em"&&t.appendChild&&!l?t:t.parentNode,x&&(_=(t.ownerSVGElement||{}).parentNode),(!_||_===Me||!_.appendChild)&&(_=Me.body),v=_._gsap,v&&c&&v.width&&h&&v.time===Jt.time&&!v.uncache)return Pt(n/v.width*p);if(c&&(i==="height"||i==="width")){var u=t.style[i];t.style[i]=p+r,f=t[d],u?t.style[i]=u:$e(t,i)}else(c||s==="%")&&!kl[me(_,"display")]&&(a.position=me(t,"position")),_===t&&(a.position="static"),_.appendChild(qe),f=qe[d],_.removeChild(qe),a.position="absolute";return h&&c&&(v=Ye(_),v.time=Jt.time,v.width=_[d]),Pt(m?f*n/p:f&&n?p/f*n:0)},xe=function(t,i,e,r){var n;return Qn||On(),i in _e&&i!=="transform"&&(i=_e[i],~i.indexOf(",")&&(i=i.split(",")[0])),Pe[i]&&i!=="transform"?(n=vr(t,r),n=i!=="transformOrigin"?n[i]:n.svg?n.origin:Ir(me(t,jt))+" "+n.zOrigin+"px"):(n=t.style[i],(!n||n==="auto"||r||~(n+"").indexOf("calc("))&&(n=Nr[i]&&Nr[i](t,i,e)||me(t,i)||so(t,i)||(i==="opacity"?1:0))),e&&!~(n+"").trim().indexOf(" ")?Ie(t,i,n,e)+e:n},Al=function(t,i,e,r){if(!e||e==="none"){var n=_i(i,t,1),s=n&&me(t,n,1);s&&s!==e?(i=n,e=s):i==="borderColor"&&(e=me(t,"borderTopColor"))}var a=new Kt(this._pt,t.style,i,0,1,No),h=0,l=0,d,p,m,c,f,_,v,x,u,g,b,S;if(a.b=e,a.e=r,e+="",r+="",r==="auto"&&(_=t.style[i],t.style[i]=r,r=me(t,i)||r,_?t.style[i]=_:$e(t,i)),d=[e,r],To(d),e=d[0],r=d[1],m=e.match(ni)||[],S=r.match(ni)||[],S.length){for(;p=ni.exec(r);)v=p[0],u=r.substring(h,p.index),f?f=(f+1)%5:(u.substr(-5)==="rgba("||u.substr(-5)==="hsla(")&&(f=1),v!==(_=m[l++]||"")&&(c=parseFloat(_)||0,b=_.substr((c+"").length),v.charAt(1)==="="&&(v=hi(c,v)+b),x=parseFloat(v),g=v.substr((x+"").length),h=ni.lastIndex-g.length,g||(g=g||te.units[i]||b,h===r.length&&(r+=g,a.e+=g)),b!==g&&(c=Ie(t,i,_,g)||0),a._pt={_next:a._pt,p:u||l===1?u:",",s:c,c:x-c,m:f&&f<4||i==="zIndex"?Math.round:0});a.c=h<r.length?r.substring(h,r.length):""}else a.r=i==="display"&&r==="none"?Uo:Go;return Za.test(r)&&(a.e=0),this._pt=a,a},Es={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},Rl=function(t){var i=t.split(" "),e=i[0],r=i[1]||"50%";return(e==="top"||e==="bottom"||r==="left"||r==="right")&&(t=e,e=r,r=t),i[0]=Es[e]||e,i[1]=Es[r]||r,i.join(" ")},El=function(t,i){if(i.tween&&i.tween._time===i.tween._dur){var e=i.t,r=e.style,n=i.u,s=e._gsap,a,h,l;if(n==="all"||n===!0)r.cssText="",h=1;else for(n=n.split(","),l=n.length;--l>-1;)a=n[l],Pe[a]&&(h=1,a=a==="transformOrigin"?jt:St),$e(e,a);h&&($e(e,St),s&&(s.svg&&e.removeAttribute("transform"),vr(e,1),s.uncache=1,Bo(r)))}},Nr={clearProps:function(t,i,e,r,n){if(n.data!=="isFromStart"){var s=t._pt=new Kt(t._pt,i,e,0,0,El);return s.u=r,s.pr=-10,s.tween=n,t._props.push(e),1}}},yr=[1,0,0,1,0,0],Yo={},Wo=function(t){return t==="matrix(1, 0, 0, 1, 0, 0)"||t==="none"||!t},Ms=function(t){var i=me(t,St);return Wo(i)?yr:i.substr(7).match(Ja).map(Pt)},ts=function(t,i){var e=t._gsap||Ye(t),r=t.style,n=Ms(t),s,a,h,l;return e.svg&&t.getAttribute("transform")?(h=t.transform.baseVal.consolidate().matrix,n=[h.a,h.b,h.c,h.d,h.e,h.f],n.join(",")==="1,0,0,1,0,0"?yr:n):(n===yr&&!t.offsetParent&&t!==li&&!e.svg&&(h=r.display,r.display="block",s=t.parentNode,(!s||!t.offsetParent)&&(l=1,a=t.nextElementSibling,li.appendChild(t)),n=Ms(t),h?r.display=h:$e(t,"display"),l&&(a?s.insertBefore(t,a):s?s.appendChild(t):li.removeChild(t))),i&&n.length>6?[n[0],n[1],n[4],n[5],n[12],n[13]]:n)},Fn=function(t,i,e,r,n,s){var a=t._gsap,h=n||ts(t,!0),l=a.xOrigin||0,d=a.yOrigin||0,p=a.xOffset||0,m=a.yOffset||0,c=h[0],f=h[1],_=h[2],v=h[3],x=h[4],u=h[5],g=i.split(" "),b=parseFloat(g[0])||0,S=parseFloat(g[1])||0,C,M,k,T;e?h!==yr&&(M=c*v-f*_)&&(k=b*(v/M)+S*(-_/M)+(_*u-v*x)/M,T=b*(-f/M)+S*(c/M)-(c*u-f*x)/M,b=k,S=T):(C=Ho(t),b=C.x+(~g[0].indexOf("%")?b/100*C.width:b),S=C.y+(~(g[1]||g[0]).indexOf("%")?S/100*C.height:S)),r||r!==!1&&a.smooth?(x=b-l,u=S-d,a.xOffset=p+(x*c+u*_)-x,a.yOffset=m+(x*f+u*v)-u):a.xOffset=a.yOffset=0,a.xOrigin=b,a.yOrigin=S,a.smooth=!!r,a.origin=i,a.originIsAbsolute=!!e,t.style[jt]="0px 0px",s&&(Oe(s,a,"xOrigin",l,b),Oe(s,a,"yOrigin",d,S),Oe(s,a,"xOffset",p,a.xOffset),Oe(s,a,"yOffset",m,a.yOffset)),t.setAttribute("data-svg-origin",b+" "+S)},vr=function(t,i){var e=t._gsap||new Ro(t);if("x"in e&&!i&&!e.uncache)return e;var r=t.style,n=e.scaleX<0,s="px",a="deg",h=getComputedStyle(t),l=me(t,jt)||"0",d,p,m,c,f,_,v,x,u,g,b,S,C,M,k,T,A,R,D,y,P,w,E,O,I,V,B,q,K,z,Y,L;return d=p=m=_=v=x=u=g=b=0,c=f=1,e.svg=!!(t.getCTM&&qo(t)),h.translate&&((h.translate!=="none"||h.scale!=="none"||h.rotate!=="none")&&(r[St]=(h.translate!=="none"?"translate3d("+(h.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(h.rotate!=="none"?"rotate("+h.rotate+") ":"")+(h.scale!=="none"?"scale("+h.scale.split(" ").join(",")+") ":"")+(h[St]!=="none"?h[St]:"")),r.scale=r.rotate=r.translate="none"),M=ts(t,e.svg),e.svg&&(e.uncache?(I=t.getBBox(),l=e.xOrigin-I.x+"px "+(e.yOrigin-I.y)+"px",O=""):O=!i&&t.getAttribute("data-svg-origin"),Fn(t,O||l,!!O||e.originIsAbsolute,e.smooth!==!1,M)),S=e.xOrigin||0,C=e.yOrigin||0,M!==yr&&(R=M[0],D=M[1],y=M[2],P=M[3],d=w=M[4],p=E=M[5],M.length===6?(c=Math.sqrt(R*R+D*D),f=Math.sqrt(P*P+y*y),_=R||D?ti(D,R)*He:0,u=y||P?ti(y,P)*He+_:0,u&&(f*=Math.abs(Math.cos(u*ci))),e.svg&&(d-=S-(S*R+C*y),p-=C-(S*D+C*P))):(L=M[6],z=M[7],B=M[8],q=M[9],K=M[10],Y=M[11],d=M[12],p=M[13],m=M[14],k=ti(L,K),v=k*He,k&&(T=Math.cos(-k),A=Math.sin(-k),O=w*T+B*A,I=E*T+q*A,V=L*T+K*A,B=w*-A+B*T,q=E*-A+q*T,K=L*-A+K*T,Y=z*-A+Y*T,w=O,E=I,L=V),k=ti(-y,K),x=k*He,k&&(T=Math.cos(-k),A=Math.sin(-k),O=R*T-B*A,I=D*T-q*A,V=y*T-K*A,Y=P*A+Y*T,R=O,D=I,y=V),k=ti(D,R),_=k*He,k&&(T=Math.cos(k),A=Math.sin(k),O=R*T+D*A,I=w*T+E*A,D=D*T-R*A,E=E*T-w*A,R=O,w=I),v&&Math.abs(v)+Math.abs(_)>359.9&&(v=_=0,x=180-x),c=Pt(Math.sqrt(R*R+D*D+y*y)),f=Pt(Math.sqrt(E*E+L*L)),k=ti(w,E),u=Math.abs(k)>2e-4?k*He:0,b=Y?1/(Y<0?-Y:Y):0),e.svg&&(O=t.getAttribute("transform"),e.forceCSS=t.setAttribute("transform","")||!Wo(me(t,St)),O&&t.setAttribute("transform",O))),Math.abs(u)>90&&Math.abs(u)<270&&(n?(c*=-1,u+=_<=0?180:-180,_+=_<=0?180:-180):(f*=-1,u+=u<=0?180:-180)),i=i||e.uncache,e.x=d-((e.xPercent=d&&(!i&&e.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-d)?-50:0)))?t.offsetWidth*e.xPercent/100:0)+s,e.y=p-((e.yPercent=p&&(!i&&e.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-p)?-50:0)))?t.offsetHeight*e.yPercent/100:0)+s,e.z=m+s,e.scaleX=Pt(c),e.scaleY=Pt(f),e.rotation=Pt(_)+a,e.rotationX=Pt(v)+a,e.rotationY=Pt(x)+a,e.skewX=u+a,e.skewY=g+a,e.transformPerspective=b+s,(e.zOrigin=parseFloat(l.split(" ")[2])||!i&&e.zOrigin||0)&&(r[jt]=Ir(l)),e.xOffset=e.yOffset=0,e.force3D=te.force3D,e.renderTransform=e.svg?Ol:zo?Xo:Ml,e.uncache=0,e},Ir=function(t){return(t=t.split(" "))[0]+" "+t[1]},nn=function(t,i,e){var r=Gt(i);return Pt(parseFloat(i)+parseFloat(Ie(t,"x",e+"px",r)))+r},Ml=function(t,i){i.z="0px",i.rotationY=i.rotationX="0deg",i.force3D=0,Xo(t,i)},Ue="0deg",yi="0px",Be=") ",Xo=function(t,i){var e=i||this,r=e.xPercent,n=e.yPercent,s=e.x,a=e.y,h=e.z,l=e.rotation,d=e.rotationY,p=e.rotationX,m=e.skewX,c=e.skewY,f=e.scaleX,_=e.scaleY,v=e.transformPerspective,x=e.force3D,u=e.target,g=e.zOrigin,b="",S=x==="auto"&&t&&t!==1||x===!0;if(g&&(p!==Ue||d!==Ue)){var C=parseFloat(d)*ci,M=Math.sin(C),k=Math.cos(C),T;C=parseFloat(p)*ci,T=Math.cos(C),s=nn(u,s,M*T*-g),a=nn(u,a,-Math.sin(C)*-g),h=nn(u,h,k*T*-g+g)}v!==yi&&(b+="perspective("+v+Be),(r||n)&&(b+="translate("+r+"%, "+n+"%) "),(S||s!==yi||a!==yi||h!==yi)&&(b+=h!==yi||S?"translate3d("+s+", "+a+", "+h+") ":"translate("+s+", "+a+Be),l!==Ue&&(b+="rotate("+l+Be),d!==Ue&&(b+="rotateY("+d+Be),p!==Ue&&(b+="rotateX("+p+Be),(m!==Ue||c!==Ue)&&(b+="skew("+m+", "+c+Be),(f!==1||_!==1)&&(b+="scale("+f+", "+_+Be),u.style[St]=b||"translate(0, 0)"},Ol=function(t,i){var e=i||this,r=e.xPercent,n=e.yPercent,s=e.x,a=e.y,h=e.rotation,l=e.skewX,d=e.skewY,p=e.scaleX,m=e.scaleY,c=e.target,f=e.xOrigin,_=e.yOrigin,v=e.xOffset,x=e.yOffset,u=e.forceCSS,g=parseFloat(s),b=parseFloat(a),S,C,M,k,T;h=parseFloat(h),l=parseFloat(l),d=parseFloat(d),d&&(d=parseFloat(d),l+=d,h+=d),h||l?(h*=ci,l*=ci,S=Math.cos(h)*p,C=Math.sin(h)*p,M=Math.sin(h-l)*-m,k=Math.cos(h-l)*m,l&&(d*=ci,T=Math.tan(l-d),T=Math.sqrt(1+T*T),M*=T,k*=T,d&&(T=Math.tan(d),T=Math.sqrt(1+T*T),S*=T,C*=T)),S=Pt(S),C=Pt(C),M=Pt(M),k=Pt(k)):(S=p,k=m,C=M=0),(g&&!~(s+"").indexOf("px")||b&&!~(a+"").indexOf("px"))&&(g=Ie(c,"x",s,"px"),b=Ie(c,"y",a,"px")),(f||_||v||x)&&(g=Pt(g+f-(f*S+_*M)+v),b=Pt(b+_-(f*C+_*k)+x)),(r||n)&&(T=c.getBBox(),g=Pt(g+r/100*T.width),b=Pt(b+n/100*T.height)),T="matrix("+S+","+C+","+M+","+k+","+g+","+b+")",c.setAttribute("transform",T),u&&(c.style[St]=T)},Fl=function(t,i,e,r,n){var s=360,a=Ft(n),h=parseFloat(n)*(a&&~n.indexOf("rad")?He:1),l=h-r,d=r+l+"deg",p,m;return a&&(p=n.split("_")[1],p==="short"&&(l%=s,l!==l%(s/2)&&(l+=l<0?s:-360)),p==="cw"&&l<0?l=(l+s*Ps)%s-~~(l/s)*s:p==="ccw"&&l>0&&(l=(l-s*Ps)%s-~~(l/s)*s)),t._pt=m=new Kt(t._pt,i,e,r,l,pl),m.e=d,m.u="deg",t._props.push(e),m},Os=function(t,i){for(var e in i)t[e]=i[e];return t},Dl=function(t,i,e){var r=Os({},e._gsap),n="perspective,force3D,transformOrigin,svgOrigin",s=e.style,a,h,l,d,p,m,c,f;r.svg?(l=e.getAttribute("transform"),e.setAttribute("transform",""),s[St]=i,a=vr(e,1),$e(e,St),e.setAttribute("transform",l)):(l=getComputedStyle(e)[St],s[St]=i,a=vr(e,1),s[St]=l);for(h in Pe)l=r[h],d=a[h],l!==d&&n.indexOf(h)<0&&(c=Gt(l),f=Gt(d),p=c!==f?Ie(e,h,l,f):parseFloat(l),m=parseFloat(d),t._pt=new Kt(t._pt,a,h,p,m-p,En),t._pt.u=f||0,t._props.push(h));Os(a,r)};Xt("padding,margin,Width,Radius",function(o,t){var i="Top",e="Right",r="Bottom",n="Left",s=(t<3?[i,e,r,n]:[i+n,i+e,r+e,r+n]).map(function(a){return t<2?o+a:"border"+a+o});Nr[t>1?"border"+o:o]=function(a,h,l,d,p){var m,c;if(arguments.length<4)return m=s.map(function(f){return xe(a,f,l)}),c=m.join(" "),c.split(m[0]).length===5?m[0]:c;m=(d+"").split(" "),c={},s.forEach(function(f,_){return c[f]=m[_]=m[_]||m[(_-1)/2|0]}),a.init(h,c,p)}});var Ko={name:"css",register:On,targetTest:function(t){return t.style&&t.nodeType},init:function(t,i,e,r,n){var s=this._props,a=t.style,h=e.vars.startAt,l,d,p,m,c,f,_,v,x,u,g,b,S,C,M,k;Qn||On(),this.styles=this.styles||Vo(t),k=this.styles.props,this.tween=e;for(_ in i)if(_!=="autoRound"&&(d=i[_],!(Qt[_]&&Eo(_,i,e,r,t,n)))){if(c=typeof d,f=Nr[_],c==="function"&&(d=d.call(e,r,t,n),c=typeof d),c==="string"&&~d.indexOf("random(")&&(d=_r(d)),f)f(this,t,_,d,e)&&(M=1);else if(_.substr(0,2)==="--")l=(getComputedStyle(t).getPropertyValue(_)+"").trim(),d+="",De.lastIndex=0,De.test(l)||(v=Gt(l),x=Gt(d)),x?v!==x&&(l=Ie(t,_,l,x)+x):v&&(d+=v),this.add(a,"setProperty",l,d,r,n,0,0,_),s.push(_),k.push(_,0,a[_]);else if(c!=="undefined"){if(h&&_ in h?(l=typeof h[_]=="function"?h[_].call(e,r,t,n):h[_],Ft(l)&&~l.indexOf("random(")&&(l=_r(l)),Gt(l+"")||l==="auto"||(l+=te.units[_]||Gt(xe(t,_))||""),(l+"").charAt(1)==="="&&(l=xe(t,_))):l=xe(t,_),m=parseFloat(l),u=c==="string"&&d.charAt(1)==="="&&d.substr(0,2),u&&(d=d.substr(2)),p=parseFloat(d),_ in _e&&(_==="autoAlpha"&&(m===1&&xe(t,"visibility")==="hidden"&&p&&(m=0),k.push("visibility",0,a.visibility),Oe(this,a,"visibility",m?"inherit":"hidden",p?"inherit":"hidden",!p)),_!=="scale"&&_!=="transform"&&(_=_e[_],~_.indexOf(",")&&(_=_.split(",")[0]))),g=_ in Pe,g){if(this.styles.save(_),b||(S=t._gsap,S.renderTransform&&!i.parseTransform||vr(t,i.parseTransform),C=i.smoothOrigin!==!1&&S.smooth,b=this._pt=new Kt(this._pt,a,St,0,1,S.renderTransform,S,0,-1),b.dep=1),_==="scale")this._pt=new Kt(this._pt,S,"scaleY",S.scaleY,(u?hi(S.scaleY,u+p):p)-S.scaleY||0,En),this._pt.u=0,s.push("scaleY",_),_+="X";else if(_==="transformOrigin"){k.push(jt,0,a[jt]),d=Rl(d),S.svg?Fn(t,d,0,C,0,this):(x=parseFloat(d.split(" ")[2])||0,x!==S.zOrigin&&Oe(this,S,"zOrigin",S.zOrigin,x),Oe(this,a,_,Ir(l),Ir(d)));continue}else if(_==="svgOrigin"){Fn(t,d,1,C,0,this);continue}else if(_ in Yo){Fl(this,S,_,m,u?hi(m,u+d):d);continue}else if(_==="smoothOrigin"){Oe(this,S,"smooth",S.smooth,d);continue}else if(_==="force3D"){S[_]=d;continue}else if(_==="transform"){Dl(this,d,t);continue}}else _ in a||(_=_i(_)||_);if(g||(p||p===0)&&(m||m===0)&&!_l.test(d)&&_ in a)v=(l+"").substr((m+"").length),p||(p=0),x=Gt(d)||(_ in te.units?te.units[_]:v),v!==x&&(m=Ie(t,_,l,x)),this._pt=new Kt(this._pt,g?S:a,_,m,(u?hi(m,u+p):p)-m,!g&&(x==="px"||_==="zIndex")&&i.autoRound!==!1?yl:En),this._pt.u=x||0,v!==x&&x!=="%"&&(this._pt.b=l,this._pt.r=ml);else if(_ in a)Al.call(this,t,_,l,u?u+d:d);else if(_ in t)this.add(t,_,l||t[_],u?u+d:d,r,n);else if(_!=="parseTransform"){zn(_,d);continue}g||(_ in a?k.push(_,0,a[_]):k.push(_,1,l||t[_])),s.push(_)}}M&&Io(this)},render:function(t,i){if(i.tween._time||!Jn())for(var e=i._pt;e;)e.r(t,e.d),e=e._next;else i.styles.revert()},get:xe,aliases:_e,getSetter:function(t,i,e){var r=_e[i];return r&&r.indexOf(",")<0&&(i=r),i in Pe&&i!==jt&&(t._gsap.x||xe(t,"x"))?e&&Ts===e?i==="scale"?wl:Sl:(Ts=e||{})&&(i==="scale"?xl:Cl):t.style&&!Un(t.style[i])?vl:~i.indexOf("-")?bl:jn(t,i)},core:{_removeProperty:$e,_getMatrix:ts}};$t.utils.checkPrefix=_i;$t.core.getStyleSaver=Vo;(function(o,t,i,e){var r=Xt(o+","+t+","+i,function(n){Pe[n]=1});Xt(t,function(n){te.units[n]="deg",Yo[n]=1}),_e[r[13]]=o+","+t,Xt(e,function(n){var s=n.split(":");_e[s[1]]=r[s[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");Xt("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(o){te.units[o]="px"});$t.registerPlugin(Ko);var Lr=$t.registerPlugin(Ko)||$t;Lr.core.Tween;var Ar={exports:{}},vi={},sn={},an={},Fs;function ot(){return Fs||(Fs=1,function(o){Object.defineProperty(o,"__esModule",{value:!0}),o._registerNode=o.Konva=o.glob=void 0;const t=Math.PI/180;function i(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}o.glob=typeof ps<"u"?ps:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},o.Konva={_global:o.glob,version:"9.3.16",isBrowser:i(),isUnminified:/param/.test((function(r){}).toString()),dblClickWindow:400,getAngle(r){return o.Konva.angleDeg?r*t:r},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_fixTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return o.Konva.DD.isDragging},isTransforming(){var r;return(r=o.Konva.Transformer)===null||r===void 0?void 0:r.isTransforming()},isDragReady(){return!!o.Konva.DD.node},releaseCanvasOnDestroy:!0,document:o.glob.document,_injectGlobal(r){o.glob.Konva=r}};const e=r=>{o.Konva[r.prototype.getClassName()]=r};o._registerNode=e,o.Konva._injectGlobal(o.Konva)}(an)),an}var on={},Ds;function Tt(){return Ds||(Ds=1,function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.Util=o.Transform=void 0;const t=ot();class i{constructor(b=[1,0,0,1,0,0]){this.dirty=!1,this.m=b&&b.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new i(this.m)}copyInto(b){b.m[0]=this.m[0],b.m[1]=this.m[1],b.m[2]=this.m[2],b.m[3]=this.m[3],b.m[4]=this.m[4],b.m[5]=this.m[5]}point(b){const S=this.m;return{x:S[0]*b.x+S[2]*b.y+S[4],y:S[1]*b.x+S[3]*b.y+S[5]}}translate(b,S){return this.m[4]+=this.m[0]*b+this.m[2]*S,this.m[5]+=this.m[1]*b+this.m[3]*S,this}scale(b,S){return this.m[0]*=b,this.m[1]*=b,this.m[2]*=S,this.m[3]*=S,this}rotate(b){const S=Math.cos(b),C=Math.sin(b),M=this.m[0]*S+this.m[2]*C,k=this.m[1]*S+this.m[3]*C,T=this.m[0]*-C+this.m[2]*S,A=this.m[1]*-C+this.m[3]*S;return this.m[0]=M,this.m[1]=k,this.m[2]=T,this.m[3]=A,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(b,S){const C=this.m[0]+this.m[2]*S,M=this.m[1]+this.m[3]*S,k=this.m[2]+this.m[0]*b,T=this.m[3]+this.m[1]*b;return this.m[0]=C,this.m[1]=M,this.m[2]=k,this.m[3]=T,this}multiply(b){const S=this.m[0]*b.m[0]+this.m[2]*b.m[1],C=this.m[1]*b.m[0]+this.m[3]*b.m[1],M=this.m[0]*b.m[2]+this.m[2]*b.m[3],k=this.m[1]*b.m[2]+this.m[3]*b.m[3],T=this.m[0]*b.m[4]+this.m[2]*b.m[5]+this.m[4],A=this.m[1]*b.m[4]+this.m[3]*b.m[5]+this.m[5];return this.m[0]=S,this.m[1]=C,this.m[2]=M,this.m[3]=k,this.m[4]=T,this.m[5]=A,this}invert(){const b=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),S=this.m[3]*b,C=-this.m[1]*b,M=-this.m[2]*b,k=this.m[0]*b,T=b*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),A=b*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=S,this.m[1]=C,this.m[2]=M,this.m[3]=k,this.m[4]=T,this.m[5]=A,this}getMatrix(){return this.m}decompose(){const b=this.m[0],S=this.m[1],C=this.m[2],M=this.m[3],k=this.m[4],T=this.m[5],A=b*M-S*C,R={x:k,y:T,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(b!=0||S!=0){const D=Math.sqrt(b*b+S*S);R.rotation=S>0?Math.acos(b/D):-Math.acos(b/D),R.scaleX=D,R.scaleY=A/D,R.skewX=(b*C+S*M)/A,R.skewY=0}else if(C!=0||M!=0){const D=Math.sqrt(C*C+M*M);R.rotation=Math.PI/2-(M>0?Math.acos(-C/D):-Math.acos(C/D)),R.scaleX=A/D,R.scaleY=D,R.skewX=0,R.skewY=(b*C+S*M)/A}return R.rotation=o.Util._getRotation(R.rotation),R}}o.Transform=i;let e="[object Array]",r="[object Number]",n="[object String]",s="[object Boolean]",a=Math.PI/180,h=180/Math.PI,l="#",d="",p="0",m="Konva warning: ",c="Konva error: ",f="rgb(",_={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},v=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,x=[];const u=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(g){setTimeout(g,60)};o.Util={_isElement(g){return!!(g&&g.nodeType==1)},_isFunction(g){return!!(g&&g.constructor&&g.call&&g.apply)},_isPlainObject(g){return!!g&&g.constructor===Object},_isArray(g){return Object.prototype.toString.call(g)===e},_isNumber(g){return Object.prototype.toString.call(g)===r&&!isNaN(g)&&isFinite(g)},_isString(g){return Object.prototype.toString.call(g)===n},_isBoolean(g){return Object.prototype.toString.call(g)===s},isObject(g){return g instanceof Object},isValidSelector(g){if(typeof g!="string")return!1;const b=g[0];return b==="#"||b==="."||b===b.toUpperCase()},_sign(g){return g===0||g>0?1:-1},requestAnimFrame(g){x.push(g),x.length===1&&u(function(){const b=x;x=[],b.forEach(function(S){S()})})},createCanvasElement(){const g=document.createElement("canvas");try{g.style=g.style||{}}catch{}return g},createImageElement(){return document.createElement("img")},_isInDocument(g){for(;g=g.parentNode;)if(g==document)return!0;return!1},_urlToImage(g,b){const S=o.Util.createImageElement();S.onload=function(){b(S)},S.src=g},_rgbToHex(g,b,S){return((1<<24)+(g<<16)+(b<<8)+S).toString(16).slice(1)},_hexToRgb(g){g=g.replace(l,d);const b=parseInt(g,16);return{r:b>>16&255,g:b>>8&255,b:b&255}},getRandomColor(){let g=(Math.random()*16777215<<0).toString(16);for(;g.length<6;)g=p+g;return l+g},getRGB(g){let b;return g in _?(b=_[g],{r:b[0],g:b[1],b:b[2]}):g[0]===l?this._hexToRgb(g.substring(1)):g.substr(0,4)===f?(b=v.exec(g.replace(/ /g,"")),{r:parseInt(b[1],10),g:parseInt(b[2],10),b:parseInt(b[3],10)}):{r:0,g:0,b:0}},colorToRGBA(g){return g=g||"black",o.Util._namedColorToRBA(g)||o.Util._hex3ColorToRGBA(g)||o.Util._hex4ColorToRGBA(g)||o.Util._hex6ColorToRGBA(g)||o.Util._hex8ColorToRGBA(g)||o.Util._rgbColorToRGBA(g)||o.Util._rgbaColorToRGBA(g)||o.Util._hslColorToRGBA(g)},_namedColorToRBA(g){const b=_[g.toLowerCase()];return b?{r:b[0],g:b[1],b:b[2],a:1}:null},_rgbColorToRGBA(g){if(g.indexOf("rgb(")===0){g=g.match(/rgb\(([^)]+)\)/)[1];const b=g.split(/ *, */).map(Number);return{r:b[0],g:b[1],b:b[2],a:1}}},_rgbaColorToRGBA(g){if(g.indexOf("rgba(")===0){g=g.match(/rgba\(([^)]+)\)/)[1];const b=g.split(/ *, */).map((S,C)=>S.slice(-1)==="%"?C===3?parseInt(S)/100:parseInt(S)/100*255:Number(S));return{r:b[0],g:b[1],b:b[2],a:b[3]}}},_hex8ColorToRGBA(g){if(g[0]==="#"&&g.length===9)return{r:parseInt(g.slice(1,3),16),g:parseInt(g.slice(3,5),16),b:parseInt(g.slice(5,7),16),a:parseInt(g.slice(7,9),16)/255}},_hex6ColorToRGBA(g){if(g[0]==="#"&&g.length===7)return{r:parseInt(g.slice(1,3),16),g:parseInt(g.slice(3,5),16),b:parseInt(g.slice(5,7),16),a:1}},_hex4ColorToRGBA(g){if(g[0]==="#"&&g.length===5)return{r:parseInt(g[1]+g[1],16),g:parseInt(g[2]+g[2],16),b:parseInt(g[3]+g[3],16),a:parseInt(g[4]+g[4],16)/255}},_hex3ColorToRGBA(g){if(g[0]==="#"&&g.length===4)return{r:parseInt(g[1]+g[1],16),g:parseInt(g[2]+g[2],16),b:parseInt(g[3]+g[3],16),a:1}},_hslColorToRGBA(g){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(g)){const[b,...S]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(g),C=Number(S[0])/360,M=Number(S[1])/100,k=Number(S[2])/100;let T,A,R;if(M===0)return R=k*255,{r:Math.round(R),g:Math.round(R),b:Math.round(R),a:1};k<.5?T=k*(1+M):T=k+M-k*M;const D=2*k-T,y=[0,0,0];for(let P=0;P<3;P++)A=C+1/3*-(P-1),A<0&&A++,A>1&&A--,6*A<1?R=D+(T-D)*6*A:2*A<1?R=T:3*A<2?R=D+(T-D)*(2/3-A)*6:R=D,y[P]=R*255;return{r:Math.round(y[0]),g:Math.round(y[1]),b:Math.round(y[2]),a:1}}},haveIntersection(g,b){return!(b.x>g.x+g.width||b.x+b.width<g.x||b.y>g.y+g.height||b.y+b.height<g.y)},cloneObject(g){const b={};for(const S in g)this._isPlainObject(g[S])?b[S]=this.cloneObject(g[S]):this._isArray(g[S])?b[S]=this.cloneArray(g[S]):b[S]=g[S];return b},cloneArray(g){return g.slice(0)},degToRad(g){return g*a},radToDeg(g){return g*h},_degToRad(g){return o.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),o.Util.degToRad(g)},_radToDeg(g){return o.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),o.Util.radToDeg(g)},_getRotation(g){return t.Konva.angleDeg?o.Util.radToDeg(g):g},_capitalize(g){return g.charAt(0).toUpperCase()+g.slice(1)},throw(g){throw new Error(c+g)},error(g){console.error(c+g)},warn(g){t.Konva.showWarnings&&console.warn(m+g)},each(g,b){for(const S in g)b(S,g[S])},_inRange(g,b,S){return b<=g&&g<S},_getProjectionToSegment(g,b,S,C,M,k){let T,A,R;const D=(g-S)*(g-S)+(b-C)*(b-C);if(D==0)T=g,A=b,R=(M-S)*(M-S)+(k-C)*(k-C);else{const y=((M-g)*(S-g)+(k-b)*(C-b))/D;y<0?(T=g,A=b,R=(g-M)*(g-M)+(b-k)*(b-k)):y>1?(T=S,A=C,R=(S-M)*(S-M)+(C-k)*(C-k)):(T=g+y*(S-g),A=b+y*(C-b),R=(T-M)*(T-M)+(A-k)*(A-k))}return[T,A,R]},_getProjectionToLine(g,b,S){const C=o.Util.cloneObject(g);let M=Number.MAX_VALUE;return b.forEach(function(k,T){if(!S&&T===b.length-1)return;const A=b[(T+1)%b.length],R=o.Util._getProjectionToSegment(k.x,k.y,A.x,A.y,g.x,g.y),D=R[0],y=R[1],P=R[2];P<M&&(C.x=D,C.y=y,M=P)}),C},_prepareArrayForTween(g,b,S){let C,M=[],k=[];if(g.length>b.length){const A=b;b=g,g=A}for(C=0;C<g.length;C+=2)M.push({x:g[C],y:g[C+1]});for(C=0;C<b.length;C+=2)k.push({x:b[C],y:b[C+1]});const T=[];return k.forEach(function(A){const R=o.Util._getProjectionToLine(A,M,S);T.push(R.x),T.push(R.y)}),T},_prepareToStringify(g){let b;g.visitedByCircularReferenceRemoval=!0;for(const S in g)if(g.hasOwnProperty(S)&&g[S]&&typeof g[S]=="object"){if(b=Object.getOwnPropertyDescriptor(g,S),g[S].visitedByCircularReferenceRemoval||o.Util._isElement(g[S]))if(b.configurable)delete g[S];else return null;else if(o.Util._prepareToStringify(g[S])===null)if(b.configurable)delete g[S];else return null}return delete g.visitedByCircularReferenceRemoval,g},_assign(g,b){for(const S in b)g[S]=b[S];return g},_getFirstPointerId(g){return g.touches?g.changedTouches[0].identifier:g.pointerId||999},releaseCanvas(...g){t.Konva.releaseCanvasOnDestroy&&g.forEach(b=>{b.width=0,b.height=0})},drawRoundedRectPath(g,b,S,C){let M=0,k=0,T=0,A=0;typeof C=="number"?M=k=T=A=Math.min(C,b/2,S/2):(M=Math.min(C[0]||0,b/2,S/2),k=Math.min(C[1]||0,b/2,S/2),A=Math.min(C[2]||0,b/2,S/2),T=Math.min(C[3]||0,b/2,S/2)),g.moveTo(M,0),g.lineTo(b-k,0),g.arc(b-k,k,k,Math.PI*3/2,0,!1),g.lineTo(b,S-A),g.arc(b-A,S-A,A,0,Math.PI/2,!1),g.lineTo(T,S),g.arc(T,S-T,T,Math.PI/2,Math.PI,!1),g.lineTo(0,M),g.arc(M,M,M,Math.PI,Math.PI*3/2,!1)}}}(on)),on}var bi={},hn={},qt={},Ns;function lt(){if(Ns)return qt;Ns=1,Object.defineProperty(qt,"__esModule",{value:!0}),qt.RGBComponent=e,qt.alphaComponent=r,qt.getNumberValidator=n,qt.getNumberOrArrayOfNumbersValidator=s,qt.getNumberOrAutoValidator=a,qt.getStringValidator=h,qt.getStringOrGradientValidator=l,qt.getFunctionValidator=d,qt.getNumberArrayValidator=p,qt.getBooleanValidator=m,qt.getComponentValidator=c;const o=ot(),t=Tt();function i(f){return t.Util._isString(f)?'"'+f+'"':Object.prototype.toString.call(f)==="[object Number]"||t.Util._isBoolean(f)?f:Object.prototype.toString.call(f)}function e(f){return f>255?255:f<0?0:Math.round(f)}function r(f){return f>1?1:f<1e-4?1e-4:f}function n(){if(o.Konva.isUnminified)return function(f,_){return t.Util._isNumber(f)||t.Util.warn(i(f)+' is a not valid value for "'+_+'" attribute. The value should be a number.'),f}}function s(f){if(o.Konva.isUnminified)return function(_,v){const x=t.Util._isNumber(_),u=t.Util._isArray(_)&&_.length==f;return!x&&!u&&t.Util.warn(i(_)+' is a not valid value for "'+v+'" attribute. The value should be a number or Array<number>('+f+")"),_}}function a(){if(o.Konva.isUnminified)return function(f,_){return t.Util._isNumber(f)||f==="auto"||t.Util.warn(i(f)+' is a not valid value for "'+_+'" attribute. The value should be a number or "auto".'),f}}function h(){if(o.Konva.isUnminified)return function(f,_){return t.Util._isString(f)||t.Util.warn(i(f)+' is a not valid value for "'+_+'" attribute. The value should be a string.'),f}}function l(){if(o.Konva.isUnminified)return function(f,_){const v=t.Util._isString(f),x=Object.prototype.toString.call(f)==="[object CanvasGradient]"||f&&f.addColorStop;return v||x||t.Util.warn(i(f)+' is a not valid value for "'+_+'" attribute. The value should be a string or a native gradient.'),f}}function d(){if(o.Konva.isUnminified)return function(f,_){return t.Util._isFunction(f)||t.Util.warn(i(f)+' is a not valid value for "'+_+'" attribute. The value should be a function.'),f}}function p(){if(o.Konva.isUnminified)return function(f,_){const v=Int8Array?Object.getPrototypeOf(Int8Array):null;return v&&f instanceof v||(t.Util._isArray(f)?f.forEach(function(x){t.Util._isNumber(x)||t.Util.warn('"'+_+'" attribute has non numeric element '+x+". Make sure that all elements are numbers.")}):t.Util.warn(i(f)+' is a not valid value for "'+_+'" attribute. The value should be a array of numbers.')),f}}function m(){if(o.Konva.isUnminified)return function(f,_){return f===!0||f===!1||t.Util.warn(i(f)+' is a not valid value for "'+_+'" attribute. The value should be a boolean.'),f}}function c(f){if(o.Konva.isUnminified)return function(_,v){return _==null||t.Util.isObject(_)||t.Util.warn(i(_)+' is a not valid value for "'+v+'" attribute. The value should be an object with properties '+f),_}}return qt}var Is;function ht(){return Is||(Is=1,function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.Factory=void 0;const t=Tt(),i=lt(),e="get",r="set";o.Factory={addGetterSetter(n,s,a,h,l){o.Factory.addGetter(n,s,a),o.Factory.addSetter(n,s,h,l),o.Factory.addOverloadedGetterSetter(n,s)},addGetter(n,s,a){const h=e+t.Util._capitalize(s);n.prototype[h]=n.prototype[h]||function(){const l=this.attrs[s];return l===void 0?a:l}},addSetter(n,s,a,h){const l=r+t.Util._capitalize(s);n.prototype[l]||o.Factory.overWriteSetter(n,s,a,h)},overWriteSetter(n,s,a,h){const l=r+t.Util._capitalize(s);n.prototype[l]=function(d){return a&&d!==void 0&&d!==null&&(d=a.call(this,d,s)),this._setAttr(s,d),h&&h.call(this),this}},addComponentsGetterSetter(n,s,a,h,l){let d=a.length,p=t.Util._capitalize,m=e+p(s),c=r+p(s),f,_;n.prototype[m]=function(){const x={};for(f=0;f<d;f++)_=a[f],x[_]=this.getAttr(s+p(_));return x};const v=(0,i.getComponentValidator)(a);n.prototype[c]=function(x){let u=this.attrs[s],g;h&&(x=h.call(this,x)),v&&v.call(this,x,s);for(g in x)x.hasOwnProperty(g)&&this._setAttr(s+p(g),x[g]);return x||a.forEach(b=>{this._setAttr(s+p(b),void 0)}),this._fireChangeEvent(s,u,x),l&&l.call(this),this},o.Factory.addOverloadedGetterSetter(n,s)},addOverloadedGetterSetter(n,s){const a=t.Util._capitalize(s),h=r+a,l=e+a;n.prototype[s]=function(){return arguments.length?(this[h](arguments[0]),this):this[l]()}},addDeprecatedGetterSetter(n,s,a,h){t.Util.error("Adding deprecated "+s);const l=e+t.Util._capitalize(s),d=s+" property is deprecated and will be removed soon. Look at Konva change log for more information.";n.prototype[l]=function(){t.Util.error(d);const p=this.attrs[s];return p===void 0?a:p},o.Factory.addSetter(n,s,h,function(){t.Util.error(d)}),o.Factory.addOverloadedGetterSetter(n,s)},backCompat(n,s){t.Util.each(s,function(a,h){const l=n.prototype[h],d=e+t.Util._capitalize(a),p=r+t.Util._capitalize(a);function m(){l.apply(this,arguments),t.Util.error('"'+a+'" method is deprecated and will be removed soon. Use ""'+h+'" instead.')}n.prototype[a]=m,n.prototype[d]=m,n.prototype[p]=m})},afterSetFilter(){this._filterUpToDate=!1}}}(hn)),hn}var ve={},be={},Ls;function jo(){if(Ls)return be;Ls=1,Object.defineProperty(be,"__esModule",{value:!0}),be.HitContext=be.SceneContext=be.Context=void 0;const o=Tt(),t=ot();function i(x){let u=[],g=x.length,b=o.Util,S,C;for(S=0;S<g;S++)C=x[S],b._isNumber(C)?C=Math.round(C*1e3)/1e3:b._isString(C)||(C=C+""),u.push(C);return u}const e=",",r="(",n=")",s="([",a="])",h=";",l="()",d="=",p=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],m=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"],c=100;let f=class{constructor(u){this.canvas=u,t.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(u){u.fillEnabled()&&this._fill(u)}_fill(u){}strokeShape(u){u.hasStroke()&&this._stroke(u)}_stroke(u){}fillStrokeShape(u){u.attrs.fillAfterStrokeEnabled?(this.strokeShape(u),this.fillShape(u)):(this.fillShape(u),this.strokeShape(u))}getTrace(u,g){let b=this.traceArr,S=b.length,C="",M,k,T,A;for(M=0;M<S;M++)k=b[M],T=k.method,T?(A=k.args,C+=T,u?C+=l:o.Util._isArray(A[0])?C+=s+A.join(e)+a:(g&&(A=A.map(R=>typeof R=="number"?Math.floor(R):R)),C+=r+A.join(e)+n)):(C+=k.property,u||(C+=d+k.val)),C+=h;return C}clearTrace(){this.traceArr=[]}_trace(u){let g=this.traceArr,b;g.push(u),b=g.length,b>=c&&g.shift()}reset(){const u=this.getCanvas().getPixelRatio();this.setTransform(1*u,0,0,1*u,0,0)}getCanvas(){return this.canvas}clear(u){const g=this.getCanvas();u?this.clearRect(u.x||0,u.y||0,u.width||0,u.height||0):this.clearRect(0,0,g.getWidth()/g.pixelRatio,g.getHeight()/g.pixelRatio)}_applyLineCap(u){const g=u.attrs.lineCap;g&&this.setAttr("lineCap",g)}_applyOpacity(u){const g=u.getAbsoluteOpacity();g!==1&&this.setAttr("globalAlpha",g)}_applyLineJoin(u){const g=u.attrs.lineJoin;g&&this.setAttr("lineJoin",g)}setAttr(u,g){this._context[u]=g}arc(u,g,b,S,C,M){this._context.arc(u,g,b,S,C,M)}arcTo(u,g,b,S,C){this._context.arcTo(u,g,b,S,C)}beginPath(){this._context.beginPath()}bezierCurveTo(u,g,b,S,C,M){this._context.bezierCurveTo(u,g,b,S,C,M)}clearRect(u,g,b,S){this._context.clearRect(u,g,b,S)}clip(...u){this._context.clip.apply(this._context,u)}closePath(){this._context.closePath()}createImageData(u,g){const b=arguments;if(b.length===2)return this._context.createImageData(u,g);if(b.length===1)return this._context.createImageData(u)}createLinearGradient(u,g,b,S){return this._context.createLinearGradient(u,g,b,S)}createPattern(u,g){return this._context.createPattern(u,g)}createRadialGradient(u,g,b,S,C,M){return this._context.createRadialGradient(u,g,b,S,C,M)}drawImage(u,g,b,S,C,M,k,T,A){const R=arguments,D=this._context;R.length===3?D.drawImage(u,g,b):R.length===5?D.drawImage(u,g,b,S,C):R.length===9&&D.drawImage(u,g,b,S,C,M,k,T,A)}ellipse(u,g,b,S,C,M,k,T){this._context.ellipse(u,g,b,S,C,M,k,T)}isPointInPath(u,g,b,S){return b?this._context.isPointInPath(b,u,g,S):this._context.isPointInPath(u,g,S)}fill(...u){this._context.fill.apply(this._context,u)}fillRect(u,g,b,S){this._context.fillRect(u,g,b,S)}strokeRect(u,g,b,S){this._context.strokeRect(u,g,b,S)}fillText(u,g,b,S){S?this._context.fillText(u,g,b,S):this._context.fillText(u,g,b)}measureText(u){return this._context.measureText(u)}getImageData(u,g,b,S){return this._context.getImageData(u,g,b,S)}lineTo(u,g){this._context.lineTo(u,g)}moveTo(u,g){this._context.moveTo(u,g)}rect(u,g,b,S){this._context.rect(u,g,b,S)}roundRect(u,g,b,S,C){this._context.roundRect(u,g,b,S,C)}putImageData(u,g,b){this._context.putImageData(u,g,b)}quadraticCurveTo(u,g,b,S){this._context.quadraticCurveTo(u,g,b,S)}restore(){this._context.restore()}rotate(u){this._context.rotate(u)}save(){this._context.save()}scale(u,g){this._context.scale(u,g)}setLineDash(u){this._context.setLineDash?this._context.setLineDash(u):"mozDash"in this._context?this._context.mozDash=u:"webkitLineDash"in this._context&&(this._context.webkitLineDash=u)}getLineDash(){return this._context.getLineDash()}setTransform(u,g,b,S,C,M){this._context.setTransform(u,g,b,S,C,M)}stroke(u){u?this._context.stroke(u):this._context.stroke()}strokeText(u,g,b,S){this._context.strokeText(u,g,b,S)}transform(u,g,b,S,C,M){this._context.transform(u,g,b,S,C,M)}translate(u,g){this._context.translate(u,g)}_enableTrace(){let u=this,g=p.length,b=this.setAttr,S,C;const M=function(k){let T=u[k],A;u[k]=function(){return C=i(Array.prototype.slice.call(arguments,0)),A=T.apply(u,arguments),u._trace({method:k,args:C}),A}};for(S=0;S<g;S++)M(p[S]);u.setAttr=function(){b.apply(u,arguments);const k=arguments[0];let T=arguments[1];(k==="shadowOffsetX"||k==="shadowOffsetY"||k==="shadowBlur")&&(T=T/this.canvas.getPixelRatio()),u._trace({property:k,val:T})}}_applyGlobalCompositeOperation(u){const g=u.attrs.globalCompositeOperation;!g||g==="source-over"||this.setAttr("globalCompositeOperation",g)}};be.Context=f,m.forEach(function(x){Object.defineProperty(f.prototype,x,{get(){return this._context[x]},set(u){this._context[x]=u}})});class _ extends f{constructor(u,{willReadFrequently:g=!1}={}){super(u),this._context=u._canvas.getContext("2d",{willReadFrequently:g})}_fillColor(u){const g=u.fill();this.setAttr("fillStyle",g),u._fillFunc(this)}_fillPattern(u){this.setAttr("fillStyle",u._getFillPattern()),u._fillFunc(this)}_fillLinearGradient(u){const g=u._getLinearGradient();g&&(this.setAttr("fillStyle",g),u._fillFunc(this))}_fillRadialGradient(u){const g=u._getRadialGradient();g&&(this.setAttr("fillStyle",g),u._fillFunc(this))}_fill(u){const g=u.fill(),b=u.getFillPriority();if(g&&b==="color"){this._fillColor(u);return}const S=u.getFillPatternImage();if(S&&b==="pattern"){this._fillPattern(u);return}const C=u.getFillLinearGradientColorStops();if(C&&b==="linear-gradient"){this._fillLinearGradient(u);return}const M=u.getFillRadialGradientColorStops();if(M&&b==="radial-gradient"){this._fillRadialGradient(u);return}g?this._fillColor(u):S?this._fillPattern(u):C?this._fillLinearGradient(u):M&&this._fillRadialGradient(u)}_strokeLinearGradient(u){const g=u.getStrokeLinearGradientStartPoint(),b=u.getStrokeLinearGradientEndPoint(),S=u.getStrokeLinearGradientColorStops(),C=this.createLinearGradient(g.x,g.y,b.x,b.y);if(S){for(let M=0;M<S.length;M+=2)C.addColorStop(S[M],S[M+1]);this.setAttr("strokeStyle",C)}}_stroke(u){const g=u.dash(),b=u.getStrokeScaleEnabled();if(u.hasStroke()){if(!b){this.save();const C=this.getCanvas().getPixelRatio();this.setTransform(C,0,0,C,0,0)}this._applyLineCap(u),g&&u.dashEnabled()&&(this.setLineDash(g),this.setAttr("lineDashOffset",u.dashOffset())),this.setAttr("lineWidth",u.strokeWidth()),u.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),u.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(u):this.setAttr("strokeStyle",u.stroke()),u._strokeFunc(this),b||this.restore()}}_applyShadow(u){var g,b,S;const C=(g=u.getShadowRGBA())!==null&&g!==void 0?g:"black",M=(b=u.getShadowBlur())!==null&&b!==void 0?b:5,k=(S=u.getShadowOffset())!==null&&S!==void 0?S:{x:0,y:0},T=u.getAbsoluteScale(),A=this.canvas.getPixelRatio(),R=T.x*A,D=T.y*A;this.setAttr("shadowColor",C),this.setAttr("shadowBlur",M*Math.min(Math.abs(R),Math.abs(D))),this.setAttr("shadowOffsetX",k.x*R),this.setAttr("shadowOffsetY",k.y*D)}}be.SceneContext=_;class v extends f{constructor(u){super(u),this._context=u._canvas.getContext("2d",{willReadFrequently:!0})}_fill(u){this.save(),this.setAttr("fillStyle",u.colorKey),u._fillFuncHit(this),this.restore()}strokeShape(u){u.hasHitStroke()&&this._stroke(u)}_stroke(u){if(u.hasHitStroke()){const g=u.getStrokeScaleEnabled();if(!g){this.save();const C=this.getCanvas().getPixelRatio();this.setTransform(C,0,0,C,0,0)}this._applyLineCap(u);const b=u.hitStrokeWidth(),S=b==="auto"?u.strokeWidth():b;this.setAttr("lineWidth",S),this.setAttr("strokeStyle",u.colorKey),u._strokeFuncHit(this),g||this.restore()}}}return be.HitContext=v,be}var Gs;function Vr(){if(Gs)return ve;Gs=1,Object.defineProperty(ve,"__esModule",{value:!0}),ve.HitCanvas=ve.SceneCanvas=ve.Canvas=void 0;const o=Tt(),t=jo(),i=ot(),e=ht(),r=lt();let n;function s(){if(n)return n;const d=o.Util.createCanvasElement(),p=d.getContext("2d");return n=function(){const m=i.Konva._global.devicePixelRatio||1,c=p.webkitBackingStorePixelRatio||p.mozBackingStorePixelRatio||p.msBackingStorePixelRatio||p.oBackingStorePixelRatio||p.backingStorePixelRatio||1;return m/c}(),o.Util.releaseCanvas(d),n}let a=class{constructor(p){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const c=(p||{}).pixelRatio||i.Konva.pixelRatio||s();this.pixelRatio=c,this._canvas=o.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(p){const m=this.pixelRatio;this.pixelRatio=p,this.setSize(this.getWidth()/m,this.getHeight()/m)}setWidth(p){this.width=this._canvas.width=p*this.pixelRatio,this._canvas.style.width=p+"px";const m=this.pixelRatio;this.getContext()._context.scale(m,m)}setHeight(p){this.height=this._canvas.height=p*this.pixelRatio,this._canvas.style.height=p+"px";const m=this.pixelRatio;this.getContext()._context.scale(m,m)}getWidth(){return this.width}getHeight(){return this.height}setSize(p,m){this.setWidth(p||0),this.setHeight(m||0)}toDataURL(p,m){try{return this._canvas.toDataURL(p,m)}catch{try{return this._canvas.toDataURL()}catch(f){return o.Util.error("Unable to get data URL. "+f.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}};ve.Canvas=a,e.Factory.addGetterSetter(a,"pixelRatio",void 0,(0,r.getNumberValidator)());class h extends a{constructor(p={width:0,height:0,willReadFrequently:!1}){super(p),this.context=new t.SceneContext(this,{willReadFrequently:p.willReadFrequently}),this.setSize(p.width,p.height)}}ve.SceneCanvas=h;class l extends a{constructor(p={width:0,height:0}){super(p),this.hitCanvas=!0,this.context=new t.HitContext(this),this.setSize(p.width,p.height)}}return ve.HitCanvas=l,ve}var ln={},Us;function es(){return Us||(Us=1,function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.DD=void 0;const t=ot(),i=Tt();o.DD={get isDragging(){let e=!1;return o.DD._dragElements.forEach(r=>{r.dragStatus==="dragging"&&(e=!0)}),e},justDragged:!1,get node(){let e;return o.DD._dragElements.forEach(r=>{e=r.node}),e},_dragElements:new Map,_drag(e){const r=[];o.DD._dragElements.forEach((n,s)=>{const{node:a}=n,h=a.getStage();h.setPointersPositions(e),n.pointerId===void 0&&(n.pointerId=i.Util._getFirstPointerId(e));const l=h._changedPointerPositions.find(d=>d.id===n.pointerId);if(l){if(n.dragStatus!=="dragging"){const d=a.dragDistance();if(Math.max(Math.abs(l.x-n.startPointerPos.x),Math.abs(l.y-n.startPointerPos.y))<d||(a.startDrag({evt:e}),!a.isDragging()))return}a._setDragPosition(e,n),r.push(a)}}),r.forEach(n=>{n.fire("dragmove",{type:"dragmove",target:n,evt:e},!0)})},_endDragBefore(e){const r=[];o.DD._dragElements.forEach(n=>{const{node:s}=n,a=s.getStage();if(e&&a.setPointersPositions(e),!a._changedPointerPositions.find(d=>d.id===n.pointerId))return;(n.dragStatus==="dragging"||n.dragStatus==="stopped")&&(o.DD.justDragged=!0,t.Konva._mouseListenClick=!1,t.Konva._touchListenClick=!1,t.Konva._pointerListenClick=!1,n.dragStatus="stopped");const l=n.node.getLayer()||n.node instanceof t.Konva.Stage&&n.node;l&&r.indexOf(l)===-1&&r.push(l)}),r.forEach(n=>{n.draw()})},_endDragAfter(e){o.DD._dragElements.forEach((r,n)=>{r.dragStatus==="stopped"&&r.node.fire("dragend",{type:"dragend",target:r.node,evt:e},!0),r.dragStatus!=="dragging"&&o.DD._dragElements.delete(n)})}},t.Konva.isBrowser&&(window.addEventListener("mouseup",o.DD._endDragBefore,!0),window.addEventListener("touchend",o.DD._endDragBefore,!0),window.addEventListener("touchcancel",o.DD._endDragBefore,!0),window.addEventListener("mousemove",o.DD._drag),window.addEventListener("touchmove",o.DD._drag),window.addEventListener("mouseup",o.DD._endDragAfter,!1),window.addEventListener("touchend",o.DD._endDragAfter,!1),window.addEventListener("touchcancel",o.DD._endDragAfter,!1))}(ln)),ln}var Bs;function kt(){if(Bs)return bi;Bs=1,Object.defineProperty(bi,"__esModule",{value:!0}),bi.Node=void 0;const o=Tt(),t=ht(),i=Vr(),e=ot(),r=es(),n=lt(),s="absoluteOpacity",a="allEventListeners",h="absoluteTransform",l="absoluteScale",d="canvas",p="Change",m="children",c="konva",f="listening",_="mouseenter",v="mouseleave",x="set",u="Shape",g=" ",b="stage",S="transform",C="Stage",M="visible",k=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(g);let T=1,A=class Dn{constructor(y){this._id=T++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(y),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(y){(y===S||y===h)&&this._cache.get(y)?this._cache.get(y).dirty=!0:y?this._cache.delete(y):this._cache.clear()}_getCache(y,P){let w=this._cache.get(y);return(w===void 0||(y===S||y===h)&&w.dirty===!0)&&(w=P.call(this),this._cache.set(y,w)),w}_calculate(y,P,w){if(!this._attachedDepsListeners.get(y)){const E=P.map(O=>O+"Change.konva").join(g);this.on(E,()=>{this._clearCache(y)}),this._attachedDepsListeners.set(y,!0)}return this._getCache(y,w)}_getCanvasCache(){return this._cache.get(d)}_clearSelfAndDescendantCache(y){this._clearCache(y),y===h&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(d)){const{scene:y,filter:P,hit:w}=this._cache.get(d);o.Util.releaseCanvas(y,P,w),this._cache.delete(d)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(y){const P=y||{};let w={};(P.x===void 0||P.y===void 0||P.width===void 0||P.height===void 0)&&(w=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let E=Math.ceil(P.width||w.width),O=Math.ceil(P.height||w.height),I=P.pixelRatio,V=P.x===void 0?Math.floor(w.x):P.x,B=P.y===void 0?Math.floor(w.y):P.y,q=P.offset||0,K=P.drawBorder||!1,z=P.hitCanvasPixelRatio||1;if(!E||!O){o.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const Y=Math.abs(Math.round(w.x)-V)>.5?1:0,L=Math.abs(Math.round(w.y)-B)>.5?1:0;E+=q*2+Y,O+=q*2+L,V-=q,B-=q;const G=new i.SceneCanvas({pixelRatio:I,width:E,height:O}),F=new i.SceneCanvas({pixelRatio:I,width:0,height:0,willReadFrequently:!0}),N=new i.HitCanvas({pixelRatio:z,width:E,height:O}),U=G.getContext(),X=N.getContext();return N.isCache=!0,G.isCache=!0,this._cache.delete(d),this._filterUpToDate=!1,P.imageSmoothingEnabled===!1&&(G.getContext()._context.imageSmoothingEnabled=!1,F.getContext()._context.imageSmoothingEnabled=!1),U.save(),X.save(),U.translate(-V,-B),X.translate(-V,-B),this._isUnderCache=!0,this._clearSelfAndDescendantCache(s),this._clearSelfAndDescendantCache(l),this.drawScene(G,this),this.drawHit(N,this),this._isUnderCache=!1,U.restore(),X.restore(),K&&(U.save(),U.beginPath(),U.rect(0,0,E,O),U.closePath(),U.setAttr("strokeStyle","red"),U.setAttr("lineWidth",5),U.stroke(),U.restore()),this._cache.set(d,{scene:G,filter:F,hit:N,x:V,y:B}),this._requestDraw(),this}isCached(){return this._cache.has(d)}getClientRect(y){throw new Error('abstract "getClientRect" method call')}_transformedRect(y,P){const w=[{x:y.x,y:y.y},{x:y.x+y.width,y:y.y},{x:y.x+y.width,y:y.y+y.height},{x:y.x,y:y.y+y.height}];let E=1/0,O=1/0,I=-1/0,V=-1/0;const B=this.getAbsoluteTransform(P);return w.forEach(function(q){const K=B.point(q);E===void 0&&(E=I=K.x,O=V=K.y),E=Math.min(E,K.x),O=Math.min(O,K.y),I=Math.max(I,K.x),V=Math.max(V,K.y)}),{x:E,y:O,width:I-E,height:V-O}}_drawCachedSceneCanvas(y){y.save(),y._applyOpacity(this),y._applyGlobalCompositeOperation(this);const P=this._getCanvasCache();y.translate(P.x,P.y);const w=this._getCachedSceneCanvas(),E=w.pixelRatio;y.drawImage(w._canvas,0,0,w.width/E,w.height/E),y.restore()}_drawCachedHitCanvas(y){const P=this._getCanvasCache(),w=P.hit;y.save(),y.translate(P.x,P.y),y.drawImage(w._canvas,0,0,w.width/w.pixelRatio,w.height/w.pixelRatio),y.restore()}_getCachedSceneCanvas(){let y=this.filters(),P=this._getCanvasCache(),w=P.scene,E=P.filter,O=E.getContext(),I,V,B,q;if(y){if(!this._filterUpToDate){const K=w.pixelRatio;E.setSize(w.width/w.pixelRatio,w.height/w.pixelRatio);try{for(I=y.length,O.clear(),O.drawImage(w._canvas,0,0,w.getWidth()/K,w.getHeight()/K),V=O.getImageData(0,0,E.getWidth(),E.getHeight()),B=0;B<I;B++){if(q=y[B],typeof q!="function"){o.Util.error("Filter should be type of function, but got "+typeof q+" instead. Please check correct filters");continue}q.call(this,V),O.putImageData(V,0,0)}}catch(z){o.Util.error("Unable to apply filter. "+z.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return E}return w}on(y,P){if(this._cache&&this._cache.delete(a),arguments.length===3)return this._delegate.apply(this,arguments);let w=y.split(g),E=w.length,O,I,V,B,q;for(O=0;O<E;O++)I=w[O],V=I.split("."),B=V[0],q=V[1]||"",this.eventListeners[B]||(this.eventListeners[B]=[]),this.eventListeners[B].push({name:q,handler:P});return this}off(y,P){let w=(y||"").split(g),E=w.length,O,I,V,B,q,K;if(this._cache&&this._cache.delete(a),!y)for(I in this.eventListeners)this._off(I);for(O=0;O<E;O++)if(V=w[O],B=V.split("."),q=B[0],K=B[1],q)this.eventListeners[q]&&this._off(q,K,P);else for(I in this.eventListeners)this._off(I,K,P);return this}dispatchEvent(y){const P={target:this,type:y.type,evt:y};return this.fire(y.type,P),this}addEventListener(y,P){return this.on(y,function(w){P.call(this,w.evt)}),this}removeEventListener(y){return this.off(y),this}_delegate(y,P,w){const E=this;this.on(y,function(O){const I=O.target.findAncestors(P,!0,E);for(let V=0;V<I.length;V++)O=o.Util.cloneObject(O),O.currentTarget=I[V],w.call(I[V],O)})}remove(){return this.isDragging()&&this.stopDrag(),r.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(h),this._clearSelfAndDescendantCache(s),this._clearSelfAndDescendantCache(l),this._clearSelfAndDescendantCache(b),this._clearSelfAndDescendantCache(M),this._clearSelfAndDescendantCache(f)}_remove(){this._clearCaches();const y=this.getParent();y&&y.children&&(y.children.splice(this.index,1),y._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(y){const P="get"+o.Util._capitalize(y);return o.Util._isFunction(this[P])?this[P]():this.attrs[y]}getAncestors(){let y=this.getParent(),P=[];for(;y;)P.push(y),y=y.getParent();return P}getAttrs(){return this.attrs||{}}setAttrs(y){return this._batchTransformChanges(()=>{let P,w;if(!y)return this;for(P in y)P!==m&&(w=x+o.Util._capitalize(P),o.Util._isFunction(this[w])?this[w](y[P]):this._setAttr(P,y[P]))}),this}isListening(){return this._getCache(f,this._isListening)}_isListening(y){if(!this.listening())return!1;const w=this.getParent();return w&&w!==y&&this!==y?w._isListening(y):!0}isVisible(){return this._getCache(M,this._isVisible)}_isVisible(y){if(!this.visible())return!1;const w=this.getParent();return w&&w!==y&&this!==y?w._isVisible(y):!0}shouldDrawHit(y,P=!1){if(y)return this._isVisible(y)&&this._isListening(y);const w=this.getLayer();let E=!1;r.DD._dragElements.forEach(I=>{I.dragStatus==="dragging"&&(I.node.nodeType==="Stage"||I.node.getLayer()===w)&&(E=!0)});const O=!P&&!e.Konva.hitOnDragEnabled&&(E||e.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!O}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let y=this.getDepth(),P=this,w=0,E,O,I,V;function B(K){for(E=[],O=K.length,I=0;I<O;I++)V=K[I],w++,V.nodeType!==u&&(E=E.concat(V.getChildren().slice())),V._id===P._id&&(I=O);E.length>0&&E[0].getDepth()<=y&&B(E)}const q=this.getStage();return P.nodeType!==C&&q&&B(q.getChildren()),w}getDepth(){let y=0,P=this.parent;for(;P;)y++,P=P.parent;return y}_batchTransformChanges(y){this._batchingTransformChange=!0,y(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(S),this._clearSelfAndDescendantCache(h)),this._needClearTransformCache=!1}setPosition(y){return this._batchTransformChanges(()=>{this.x(y.x),this.y(y.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const y=this.getStage();if(!y)return null;const P=y.getPointerPosition();if(!P)return null;const w=this.getAbsoluteTransform().copy();return w.invert(),w.point(P)}getAbsolutePosition(y){let P=!1,w=this.parent;for(;w;){if(w.isCached()){P=!0;break}w=w.parent}P&&!y&&(y=!0);const E=this.getAbsoluteTransform(y).getMatrix(),O=new o.Transform,I=this.offset();return O.m=E.slice(),O.translate(I.x,I.y),O.getTranslation()}setAbsolutePosition(y){const{x:P,y:w,...E}=this._clearTransform();this.attrs.x=P,this.attrs.y=w,this._clearCache(S);const O=this._getAbsoluteTransform().copy();return O.invert(),O.translate(y.x,y.y),y={x:this.attrs.x+O.getTranslation().x,y:this.attrs.y+O.getTranslation().y},this._setTransform(E),this.setPosition({x:y.x,y:y.y}),this._clearCache(S),this._clearSelfAndDescendantCache(h),this}_setTransform(y){let P;for(P in y)this.attrs[P]=y[P]}_clearTransform(){const y={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,y}move(y){let P=y.x,w=y.y,E=this.x(),O=this.y();return P!==void 0&&(E+=P),w!==void 0&&(O+=w),this.setPosition({x:E,y:O}),this}_eachAncestorReverse(y,P){let w=[],E=this.getParent(),O,I;if(!(P&&P._id===this._id)){for(w.unshift(this);E&&(!P||E._id!==P._id);)w.unshift(E),E=E.parent;for(O=w.length,I=0;I<O;I++)y(w[I])}}rotate(y){return this.rotation(this.rotation()+y),this}moveToTop(){if(!this.parent)return o.Util.warn("Node has no parent. moveToTop function is ignored."),!1;const y=this.index,P=this.parent.getChildren().length;return y<P-1?(this.parent.children.splice(y,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return o.Util.warn("Node has no parent. moveUp function is ignored."),!1;const y=this.index,P=this.parent.getChildren().length;return y<P-1?(this.parent.children.splice(y,1),this.parent.children.splice(y+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return o.Util.warn("Node has no parent. moveDown function is ignored."),!1;const y=this.index;return y>0?(this.parent.children.splice(y,1),this.parent.children.splice(y-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return o.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;const y=this.index;return y>0?(this.parent.children.splice(y,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(y){if(!this.parent)return o.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(y<0||y>=this.parent.children.length)&&o.Util.warn("Unexpected value "+y+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const P=this.index;return this.parent.children.splice(P,1),this.parent.children.splice(y,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(s,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let y=this.opacity();const P=this.getParent();return P&&!P._isUnderCache&&(y*=P.getAbsoluteOpacity()),y}moveTo(y){return this.getParent()!==y&&(this._remove(),y.add(this)),this}toObject(){let y=this.getAttrs(),P,w,E,O,I;const V={attrs:{},className:this.getClassName()};for(P in y)w=y[P],I=o.Util.isObject(w)&&!o.Util._isPlainObject(w)&&!o.Util._isArray(w),!I&&(E=typeof this[P]=="function"&&this[P],delete y[P],O=E?E.call(this):null,y[P]=w,O!==w&&(V.attrs[P]=w));return o.Util._prepareToStringify(V)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(y,P,w){const E=[];P&&this._isMatch(y)&&E.push(this);let O=this.parent;for(;O;){if(O===w)return E;O._isMatch(y)&&E.push(O),O=O.parent}return E}isAncestorOf(y){return!1}findAncestor(y,P,w){return this.findAncestors(y,P,w)[0]}_isMatch(y){if(!y)return!1;if(typeof y=="function")return y(this);let P=y.replace(/ /g,"").split(","),w=P.length,E,O;for(E=0;E<w;E++)if(O=P[E],o.Util.isValidSelector(O)||(o.Util.warn('Selector "'+O+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),o.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),o.Util.warn("Konva is awesome, right?")),O.charAt(0)==="#"){if(this.id()===O.slice(1))return!0}else if(O.charAt(0)==="."){if(this.hasName(O.slice(1)))return!0}else if(this.className===O||this.nodeType===O)return!0;return!1}getLayer(){const y=this.getParent();return y?y.getLayer():null}getStage(){return this._getCache(b,this._getStage)}_getStage(){const y=this.getParent();return y?y.getStage():null}fire(y,P={},w){return P.target=P.target||this,w?this._fireAndBubble(y,P):this._fire(y,P),this}getAbsoluteTransform(y){return y?this._getAbsoluteTransform(y):this._getCache(h,this._getAbsoluteTransform)}_getAbsoluteTransform(y){let P;if(y)return P=new o.Transform,this._eachAncestorReverse(function(w){const E=w.transformsEnabled();E==="all"?P.multiply(w.getTransform()):E==="position"&&P.translate(w.x()-w.offsetX(),w.y()-w.offsetY())},y),P;{P=this._cache.get(h)||new o.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(P):P.reset();const w=this.transformsEnabled();if(w==="all")P.multiply(this.getTransform());else if(w==="position"){const E=this.attrs.x||0,O=this.attrs.y||0,I=this.attrs.offsetX||0,V=this.attrs.offsetY||0;P.translate(E-I,O-V)}return P.dirty=!1,P}}getAbsoluteScale(y){let P=this;for(;P;)P._isUnderCache&&(y=P),P=P.getParent();const E=this.getAbsoluteTransform(y).decompose();return{x:E.scaleX,y:E.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(S,this._getTransform)}_getTransform(){var y,P;const w=this._cache.get(S)||new o.Transform;w.reset();const E=this.x(),O=this.y(),I=e.Konva.getAngle(this.rotation()),V=(y=this.attrs.scaleX)!==null&&y!==void 0?y:1,B=(P=this.attrs.scaleY)!==null&&P!==void 0?P:1,q=this.attrs.skewX||0,K=this.attrs.skewY||0,z=this.attrs.offsetX||0,Y=this.attrs.offsetY||0;return(E!==0||O!==0)&&w.translate(E,O),I!==0&&w.rotate(I),(q!==0||K!==0)&&w.skew(q,K),(V!==1||B!==1)&&w.scale(V,B),(z!==0||Y!==0)&&w.translate(-1*z,-1*Y),w.dirty=!1,w}clone(y){let P=o.Util.cloneObject(this.attrs),w,E,O,I,V;for(w in y)P[w]=y[w];const B=new this.constructor(P);for(w in this.eventListeners)for(E=this.eventListeners[w],O=E.length,I=0;I<O;I++)V=E[I],V.name.indexOf(c)<0&&(B.eventListeners[w]||(B.eventListeners[w]=[]),B.eventListeners[w].push(V));return B}_toKonvaCanvas(y){y=y||{};const P=this.getClientRect(),w=this.getStage(),E=y.x!==void 0?y.x:Math.floor(P.x),O=y.y!==void 0?y.y:Math.floor(P.y),I=y.pixelRatio||1,V=new i.SceneCanvas({width:y.width||Math.ceil(P.width)||(w?w.width():0),height:y.height||Math.ceil(P.height)||(w?w.height():0),pixelRatio:I}),B=V.getContext(),q=new i.SceneCanvas({width:V.width/V.pixelRatio+Math.abs(E),height:V.height/V.pixelRatio+Math.abs(O),pixelRatio:V.pixelRatio});return y.imageSmoothingEnabled===!1&&(B._context.imageSmoothingEnabled=!1),B.save(),(E||O)&&B.translate(-1*E,-1*O),this.drawScene(V,void 0,q),B.restore(),V}toCanvas(y){return this._toKonvaCanvas(y)._canvas}toDataURL(y){y=y||{};const P=y.mimeType||null,w=y.quality||null,E=this._toKonvaCanvas(y).toDataURL(P,w);return y.callback&&y.callback(E),E}toImage(y){return new Promise((P,w)=>{try{const E=y==null?void 0:y.callback;E&&delete y.callback,o.Util._urlToImage(this.toDataURL(y),function(O){P(O),E==null||E(O)})}catch(E){w(E)}})}toBlob(y){return new Promise((P,w)=>{try{const E=y==null?void 0:y.callback;E&&delete y.callback,this.toCanvas(y).toBlob(O=>{P(O),E==null||E(O)},y==null?void 0:y.mimeType,y==null?void 0:y.quality)}catch(E){w(E)}})}setSize(y){return this.width(y.width),this.height(y.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():e.Konva.dragDistance}_off(y,P,w){let E=this.eventListeners[y],O,I,V;for(O=0;O<E.length;O++)if(I=E[O].name,V=E[O].handler,(I!=="konva"||P==="konva")&&(!P||I===P)&&(!w||w===V)){if(E.splice(O,1),E.length===0){delete this.eventListeners[y];break}O--}}_fireChangeEvent(y,P,w){this._fire(y+p,{oldVal:P,newVal:w})}addName(y){if(!this.hasName(y)){const P=this.name(),w=P?P+" "+y:y;this.name(w)}return this}hasName(y){if(!y)return!1;const P=this.name();return P?(P||"").split(/\s/g).indexOf(y)!==-1:!1}removeName(y){const P=(this.name()||"").split(/\s/g),w=P.indexOf(y);return w!==-1&&(P.splice(w,1),this.name(P.join(" "))),this}setAttr(y,P){const w=this[x+o.Util._capitalize(y)];return o.Util._isFunction(w)?w.call(this,P):this._setAttr(y,P),this}_requestDraw(){if(e.Konva.autoDrawEnabled){const y=this.getLayer()||this.getStage();y==null||y.batchDraw()}}_setAttr(y,P){const w=this.attrs[y];w===P&&!o.Util.isObject(P)||(P==null?delete this.attrs[y]:this.attrs[y]=P,this._shouldFireChangeEvents&&this._fireChangeEvent(y,w,P),this._requestDraw())}_setComponentAttr(y,P,w){let E;w!==void 0&&(E=this.attrs[y],E||(this.attrs[y]=this.getAttr(y)),this.attrs[y][P]=w,this._fireChangeEvent(y,E,w))}_fireAndBubble(y,P,w){if(P&&this.nodeType===u&&(P.target=this),!((y===_||y===v)&&(w&&(this===w||this.isAncestorOf&&this.isAncestorOf(w))||this.nodeType==="Stage"&&!w))){this._fire(y,P);const O=(y===_||y===v)&&w&&w.isAncestorOf&&w.isAncestorOf(this)&&!w.isAncestorOf(this.parent);(P&&!P.cancelBubble||!P)&&this.parent&&this.parent.isListening()&&!O&&(w&&w.parent?this._fireAndBubble.call(this.parent,y,P,w):this._fireAndBubble.call(this.parent,y,P))}}_getProtoListeners(y){var P,w,E;const O=(P=this._cache.get(a))!==null&&P!==void 0?P:{};let I=O==null?void 0:O[y];if(I===void 0){I=[];let V=Object.getPrototypeOf(this);for(;V;){const B=(E=(w=V.eventListeners)===null||w===void 0?void 0:w[y])!==null&&E!==void 0?E:[];I.push(...B),V=Object.getPrototypeOf(V)}O[y]=I,this._cache.set(a,O)}return I}_fire(y,P){P=P||{},P.currentTarget=this,P.type=y;const w=this._getProtoListeners(y);if(w)for(var E=0;E<w.length;E++)w[E].handler.call(this,P);const O=this.eventListeners[y];if(O)for(var E=0;E<O.length;E++)O[E].handler.call(this,P)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(y){const P=y?y.pointerId:void 0,w=this.getStage(),E=this.getAbsolutePosition();if(!w)return;const O=w._getPointerById(P)||w._changedPointerPositions[0]||E;r.DD._dragElements.set(this._id,{node:this,startPointerPos:O,offset:{x:O.x-E.x,y:O.y-E.y},dragStatus:"ready",pointerId:P})}startDrag(y,P=!0){r.DD._dragElements.has(this._id)||this._createDragElement(y);const w=r.DD._dragElements.get(this._id);w.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:y&&y.evt},P)}_setDragPosition(y,P){const w=this.getStage()._getPointerById(P.pointerId);if(!w)return;let E={x:w.x-P.offset.x,y:w.y-P.offset.y};const O=this.dragBoundFunc();if(O!==void 0){const I=O.call(this,E,y);I?E=I:o.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==E.x||this._lastPos.y!==E.y)&&(this.setAbsolutePosition(E),this._requestDraw()),this._lastPos=E}stopDrag(y){const P=r.DD._dragElements.get(this._id);P&&(P.dragStatus="stopped"),r.DD._endDragBefore(y),r.DD._endDragAfter(y)}setDraggable(y){this._setAttr("draggable",y),this._dragChange()}isDragging(){const y=r.DD._dragElements.get(this._id);return y?y.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(y){if(!(!(y.evt.button!==void 0)||e.Konva.dragButtons.indexOf(y.evt.button)>=0)||this.isDragging())return;let E=!1;r.DD._dragElements.forEach(O=>{this.isAncestorOf(O.node)&&(E=!0)}),E||this._createDragElement(y)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const P=r.DD._dragElements.get(this._id),w=P&&P.dragStatus==="dragging",E=P&&P.dragStatus==="ready";w?this.stopDrag():E&&r.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(y={x:0,y:0}){const P=this.getStage();if(!P)return!1;const w={x:-y.x,y:-y.y,width:P.width()+2*y.x,height:P.height()+2*y.y};return o.Util.haveIntersection(w,this.getClientRect())}static create(y,P){return o.Util._isString(y)&&(y=JSON.parse(y)),this._createNode(y,P)}static _createNode(y,P){let w=Dn.prototype.getClassName.call(y),E=y.children,O,I,V;P&&(y.attrs.container=P),e.Konva[w]||(o.Util.warn('Can not find a node with class name "'+w+'". Fallback to "Shape".'),w="Shape");const B=e.Konva[w];if(O=new B(y.attrs),E)for(I=E.length,V=0;V<I;V++)O.add(Dn._createNode(E[V]));return O}};bi.Node=A,A.prototype.nodeType="Node",A.prototype._attrsAffectingSize=[],A.prototype.eventListeners={},A.prototype.on.call(A.prototype,k,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(S),this._clearSelfAndDescendantCache(h)}),A.prototype.on.call(A.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(M)}),A.prototype.on.call(A.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(f)}),A.prototype.on.call(A.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(s)});const R=t.Factory.addGetterSetter;return R(A,"zIndex"),R(A,"absolutePosition"),R(A,"position"),R(A,"x",0,(0,n.getNumberValidator)()),R(A,"y",0,(0,n.getNumberValidator)()),R(A,"globalCompositeOperation","source-over",(0,n.getStringValidator)()),R(A,"opacity",1,(0,n.getNumberValidator)()),R(A,"name","",(0,n.getStringValidator)()),R(A,"id","",(0,n.getStringValidator)()),R(A,"rotation",0,(0,n.getNumberValidator)()),t.Factory.addComponentsGetterSetter(A,"scale",["x","y"]),R(A,"scaleX",1,(0,n.getNumberValidator)()),R(A,"scaleY",1,(0,n.getNumberValidator)()),t.Factory.addComponentsGetterSetter(A,"skew",["x","y"]),R(A,"skewX",0,(0,n.getNumberValidator)()),R(A,"skewY",0,(0,n.getNumberValidator)()),t.Factory.addComponentsGetterSetter(A,"offset",["x","y"]),R(A,"offsetX",0,(0,n.getNumberValidator)()),R(A,"offsetY",0,(0,n.getNumberValidator)()),R(A,"dragDistance",null,(0,n.getNumberValidator)()),R(A,"width",0,(0,n.getNumberValidator)()),R(A,"height",0,(0,n.getNumberValidator)()),R(A,"listening",!0,(0,n.getBooleanValidator)()),R(A,"preventDefault",!0,(0,n.getBooleanValidator)()),R(A,"filters",null,function(D){return this._filterUpToDate=!1,D}),R(A,"visible",!0,(0,n.getBooleanValidator)()),R(A,"transformsEnabled","all",(0,n.getStringValidator)()),R(A,"size"),R(A,"dragBoundFunc"),R(A,"draggable",!1,(0,n.getBooleanValidator)()),t.Factory.backCompat(A,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),bi}var Si={},Vs;function zr(){if(Vs)return Si;Vs=1,Object.defineProperty(Si,"__esModule",{value:!0}),Si.Container=void 0;const o=ht(),t=kt(),i=lt();let e=class extends t.Node{constructor(){super(...arguments),this.children=[]}getChildren(n){if(!n)return this.children||[];const s=this.children||[],a=[];return s.forEach(function(h){n(h)&&a.push(h)}),a}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(n=>{n.parent=null,n.index=0,n.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(n=>{n.parent=null,n.index=0,n.destroy()}),this.children=[],this._requestDraw(),this}add(...n){if(n.length===0)return this;if(n.length>1){for(let a=0;a<n.length;a++)this.add(n[a]);return this}const s=n[0];return s.getParent()?(s.moveTo(this),this):(this._validateAdd(s),s.index=this.getChildren().length,s.parent=this,s._clearCaches(),this.getChildren().push(s),this._fire("add",{child:s}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(n){return this._generalFind(n,!1)}findOne(n){const s=this._generalFind(n,!0);return s.length>0?s[0]:void 0}_generalFind(n,s){const a=[];return this._descendants(h=>{const l=h._isMatch(n);return l&&a.push(h),!!(l&&s)}),a}_descendants(n){let s=!1;const a=this.getChildren();for(const h of a){if(s=n(h),s)return!0;if(h.hasChildren()&&(s=h._descendants(n),s))return!0}return!1}toObject(){const n=t.Node.prototype.toObject.call(this);return n.children=[],this.getChildren().forEach(s=>{n.children.push(s.toObject())}),n}isAncestorOf(n){let s=n.getParent();for(;s;){if(s._id===this._id)return!0;s=s.getParent()}return!1}clone(n){const s=t.Node.prototype.clone.call(this,n);return this.getChildren().forEach(function(a){s.add(a.clone())}),s}getAllIntersections(n){const s=[];return this.find("Shape").forEach(a=>{a.isVisible()&&a.intersects(n)&&s.push(a)}),s}_clearSelfAndDescendantCache(n){var s;super._clearSelfAndDescendantCache(n),!this.isCached()&&((s=this.children)===null||s===void 0||s.forEach(function(a){a._clearSelfAndDescendantCache(n)}))}_setChildrenIndices(){var n;(n=this.children)===null||n===void 0||n.forEach(function(s,a){s.index=a}),this._requestDraw()}drawScene(n,s,a){const h=this.getLayer(),l=n||h&&h.getCanvas(),d=l&&l.getContext(),p=this._getCanvasCache(),m=p&&p.scene,c=l&&l.isCache;if(!this.isVisible()&&!c)return this;if(m){d.save();const f=this.getAbsoluteTransform(s).getMatrix();d.transform(f[0],f[1],f[2],f[3],f[4],f[5]),this._drawCachedSceneCanvas(d),d.restore()}else this._drawChildren("drawScene",l,s,a);return this}drawHit(n,s){if(!this.shouldDrawHit(s))return this;const a=this.getLayer(),h=n||a&&a.hitCanvas,l=h&&h.getContext(),d=this._getCanvasCache();if(d&&d.hit){l.save();const m=this.getAbsoluteTransform(s).getMatrix();l.transform(m[0],m[1],m[2],m[3],m[4],m[5]),this._drawCachedHitCanvas(l),l.restore()}else this._drawChildren("drawHit",h,s);return this}_drawChildren(n,s,a,h){var l;const d=s&&s.getContext(),p=this.clipWidth(),m=this.clipHeight(),c=this.clipFunc(),f=typeof p=="number"&&typeof m=="number"||c,_=a===this;if(f){d.save();const x=this.getAbsoluteTransform(a);let u=x.getMatrix();d.transform(u[0],u[1],u[2],u[3],u[4],u[5]),d.beginPath();let g;if(c)g=c.call(this,d,this);else{const b=this.clipX(),S=this.clipY();d.rect(b||0,S||0,p,m)}d.clip.apply(d,g),u=x.copy().invert().getMatrix(),d.transform(u[0],u[1],u[2],u[3],u[4],u[5])}const v=!_&&this.globalCompositeOperation()!=="source-over"&&n==="drawScene";v&&(d.save(),d._applyGlobalCompositeOperation(this)),(l=this.children)===null||l===void 0||l.forEach(function(x){x[n](s,a,h)}),v&&d.restore(),f&&d.restore()}getClientRect(n={}){var s;const a=n.skipTransform,h=n.relativeTo;let l,d,p,m,c={x:1/0,y:1/0,width:0,height:0};const f=this;(s=this.children)===null||s===void 0||s.forEach(function(x){if(!x.visible())return;const u=x.getClientRect({relativeTo:f,skipShadow:n.skipShadow,skipStroke:n.skipStroke});u.width===0&&u.height===0||(l===void 0?(l=u.x,d=u.y,p=u.x+u.width,m=u.y+u.height):(l=Math.min(l,u.x),d=Math.min(d,u.y),p=Math.max(p,u.x+u.width),m=Math.max(m,u.y+u.height)))});const _=this.find("Shape");let v=!1;for(let x=0;x<_.length;x++)if(_[x]._isVisible(this)){v=!0;break}return v&&l!==void 0?c={x:l,y:d,width:p-l,height:m-d}:c={x:0,y:0,width:0,height:0},a?c:this._transformedRect(c,h)}};return Si.Container=e,o.Factory.addComponentsGetterSetter(e,"clip",["x","y","width","height"]),o.Factory.addGetterSetter(e,"clipX",void 0,(0,i.getNumberValidator)()),o.Factory.addGetterSetter(e,"clipY",void 0,(0,i.getNumberValidator)()),o.Factory.addGetterSetter(e,"clipWidth",void 0,(0,i.getNumberValidator)()),o.Factory.addGetterSetter(e,"clipHeight",void 0,(0,i.getNumberValidator)()),o.Factory.addGetterSetter(e,"clipFunc"),Si}var cn={},Ae={},zs;function $o(){if(zs)return Ae;zs=1,Object.defineProperty(Ae,"__esModule",{value:!0}),Ae.getCapturedShape=e,Ae.createEvent=r,Ae.hasPointerCapture=n,Ae.setPointerCapture=s,Ae.releaseCapture=a;const o=ot(),t=new Map,i=o.Konva._global.PointerEvent!==void 0;function e(h){return t.get(h)}function r(h){return{evt:h,pointerId:h.pointerId}}function n(h,l){return t.get(h)===l}function s(h,l){a(h),l.getStage()&&(t.set(h,l),i&&l._fire("gotpointercapture",r(new PointerEvent("gotpointercapture"))))}function a(h,l){const d=t.get(h);if(!d)return;const p=d.getStage();p&&p.content,t.delete(h),i&&d._fire("lostpointercapture",r(new PointerEvent("lostpointercapture")))}return Ae}var Hs;function Nl(){return Hs||(Hs=1,function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.Stage=o.stages=void 0;const t=Tt(),i=ht(),e=zr(),r=ot(),n=Vr(),s=es(),a=ot(),h=$o(),l="Stage",d="string",p="px",m="mouseout",c="mouseleave",f="mouseover",_="mouseenter",v="mousemove",x="mousedown",u="mouseup",g="pointermove",b="pointerdown",S="pointerup",C="pointercancel",M="lostpointercapture",k="pointerout",T="pointerleave",A="pointerover",R="pointerenter",D="contextmenu",y="touchstart",P="touchend",w="touchmove",E="touchcancel",O="wheel",I=5,V=[[_,"_pointerenter"],[x,"_pointerdown"],[v,"_pointermove"],[u,"_pointerup"],[c,"_pointerleave"],[y,"_pointerdown"],[w,"_pointermove"],[P,"_pointerup"],[E,"_pointercancel"],[f,"_pointerover"],[O,"_wheel"],[D,"_contextmenu"],[b,"_pointerdown"],[g,"_pointermove"],[S,"_pointerup"],[C,"_pointercancel"],[M,"_lostpointercapture"]],B={mouse:{[k]:m,[T]:c,[A]:f,[R]:_,[g]:v,[b]:x,[S]:u,[C]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[k]:"touchout",[T]:"touchleave",[A]:"touchover",[R]:"touchenter",[g]:w,[b]:y,[S]:P,[C]:E,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[k]:k,[T]:T,[A]:A,[R]:R,[g]:g,[b]:b,[S]:S,[C]:C,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},q=G=>G.indexOf("pointer")>=0?"pointer":G.indexOf("touch")>=0?"touch":"mouse",K=G=>{const F=q(G);if(F==="pointer")return r.Konva.pointerEventsEnabled&&B.pointer;if(F==="touch")return B.touch;if(F==="mouse")return B.mouse};function z(G={}){return(G.clipFunc||G.clipWidth||G.clipHeight)&&t.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),G}const Y="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";o.stages=[];class L extends e.Container{constructor(F){super(z(F)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),o.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{z(this.attrs)}),this._checkVisibility()}_validateAdd(F){const N=F.getType()==="Layer",U=F.getType()==="FastLayer";N||U||t.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const F=this.visible()?"":"none";this.content.style.display=F}setContainer(F){if(typeof F===d){if(F.charAt(0)==="."){const U=F.slice(1);F=document.getElementsByClassName(U)[0]}else{var N;F.charAt(0)!=="#"?N=F:N=F.slice(1),F=document.getElementById(N)}if(!F)throw"Can not find container in document with id "+N}return this._setAttr("container",F),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),F.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){let F=this.children,N=F.length,U;for(U=0;U<N;U++)F[U].clear();return this}clone(F){return F||(F={}),F.container=typeof document<"u"&&document.createElement("div"),e.Container.prototype.clone.call(this,F)}destroy(){super.destroy();const F=this.content;F&&t.Util._isInDocument(F)&&this.container().removeChild(F);const N=o.stages.indexOf(this);return N>-1&&o.stages.splice(N,1),t.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const F=this._pointerPositions[0]||this._changedPointerPositions[0];return F?{x:F.x,y:F.y}:(t.Util.warn(Y),null)}_getPointerById(F){return this._pointerPositions.find(N=>N.id===F)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(F){F=F||{},F.x=F.x||0,F.y=F.y||0,F.width=F.width||this.width(),F.height=F.height||this.height();const N=new n.SceneCanvas({width:F.width,height:F.height,pixelRatio:F.pixelRatio||1}),U=N.getContext()._context,X=this.children;return(F.x||F.y)&&U.translate(-1*F.x,-1*F.y),X.forEach(function(j){if(!j.isVisible())return;const $=j._toKonvaCanvas(F);U.drawImage($._canvas,F.x,F.y,$.getWidth()/$.getPixelRatio(),$.getHeight()/$.getPixelRatio())}),N}getIntersection(F){if(!F)return null;let N=this.children,U=N.length,X=U-1,j;for(j=X;j>=0;j--){const $=N[j].getIntersection(F);if($)return $}return null}_resizeDOM(){const F=this.width(),N=this.height();this.content&&(this.content.style.width=F+p,this.content.style.height=N+p),this.bufferCanvas.setSize(F,N),this.bufferHitCanvas.setSize(F,N),this.children.forEach(U=>{U.setSize({width:F,height:N}),U.draw()})}add(F,...N){if(arguments.length>1){for(let X=0;X<arguments.length;X++)this.add(arguments[X]);return this}super.add(F);const U=this.children.length;return U>I&&t.Util.warn("The stage has "+U+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),F.setSize({width:this.width(),height:this.height()}),F.draw(),r.Konva.isBrowser&&this.content.appendChild(F.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(F){return h.hasPointerCapture(F,this)}setPointerCapture(F){h.setPointerCapture(F,this)}releaseCapture(F){h.releaseCapture(F,this)}getLayers(){return this.children}_bindContentEvents(){r.Konva.isBrowser&&V.forEach(([F,N])=>{this.content.addEventListener(F,U=>{this[N](U)},{passive:!1})})}_pointerenter(F){this.setPointersPositions(F);const N=K(F.type);N&&this._fire(N.pointerenter,{evt:F,target:this,currentTarget:this})}_pointerover(F){this.setPointersPositions(F);const N=K(F.type);N&&this._fire(N.pointerover,{evt:F,target:this,currentTarget:this})}_getTargetShape(F){let N=this[F+"targetShape"];return N&&!N.getStage()&&(N=null),N}_pointerleave(F){const N=K(F.type),U=q(F.type);if(!N)return;this.setPointersPositions(F);const X=this._getTargetShape(U),j=!(r.Konva.isDragging()||r.Konva.isTransforming())||r.Konva.hitOnDragEnabled;X&&j?(X._fireAndBubble(N.pointerout,{evt:F}),X._fireAndBubble(N.pointerleave,{evt:F}),this._fire(N.pointerleave,{evt:F,target:this,currentTarget:this}),this[U+"targetShape"]=null):j&&(this._fire(N.pointerleave,{evt:F,target:this,currentTarget:this}),this._fire(N.pointerout,{evt:F,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(F){const N=K(F.type),U=q(F.type);if(!N)return;this.setPointersPositions(F);let X=!1;this._changedPointerPositions.forEach(j=>{const $=this.getIntersection(j);if(s.DD.justDragged=!1,r.Konva["_"+U+"ListenClick"]=!0,!$||!$.isListening()){this[U+"ClickStartShape"]=void 0;return}r.Konva.capturePointerEventsEnabled&&$.setPointerCapture(j.id),this[U+"ClickStartShape"]=$,$._fireAndBubble(N.pointerdown,{evt:F,pointerId:j.id}),X=!0;const st=F.type.indexOf("touch")>=0;$.preventDefault()&&F.cancelable&&st&&F.preventDefault()}),X||this._fire(N.pointerdown,{evt:F,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(F){const N=K(F.type),U=q(F.type);if(!N||(r.Konva.isDragging()&&s.DD.node.preventDefault()&&F.cancelable&&F.preventDefault(),this.setPointersPositions(F),!(!(r.Konva.isDragging()||r.Konva.isTransforming())||r.Konva.hitOnDragEnabled)))return;const j={};let $=!1;const st=this._getTargetShape(U);this._changedPointerPositions.forEach(tt=>{const it=h.getCapturedShape(tt.id)||this.getIntersection(tt),ft=tt.id,ut={evt:F,pointerId:ft},wt=st!==it;if(wt&&st&&(st._fireAndBubble(N.pointerout,{...ut},it),st._fireAndBubble(N.pointerleave,{...ut},it)),it){if(j[it._id])return;j[it._id]=!0}it&&it.isListening()?($=!0,wt&&(it._fireAndBubble(N.pointerover,{...ut},st),it._fireAndBubble(N.pointerenter,{...ut},st),this[U+"targetShape"]=it),it._fireAndBubble(N.pointermove,{...ut})):st&&(this._fire(N.pointerover,{evt:F,target:this,currentTarget:this,pointerId:ft}),this[U+"targetShape"]=null)}),$||this._fire(N.pointermove,{evt:F,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(F){const N=K(F.type),U=q(F.type);if(!N)return;this.setPointersPositions(F);const X=this[U+"ClickStartShape"],j=this[U+"ClickEndShape"],$={};let st=!1;this._changedPointerPositions.forEach(tt=>{const it=h.getCapturedShape(tt.id)||this.getIntersection(tt);if(it){if(it.releaseCapture(tt.id),$[it._id])return;$[it._id]=!0}const ft=tt.id,ut={evt:F,pointerId:ft};let wt=!1;r.Konva["_"+U+"InDblClickWindow"]?(wt=!0,clearTimeout(this[U+"DblTimeout"])):s.DD.justDragged||(r.Konva["_"+U+"InDblClickWindow"]=!0,clearTimeout(this[U+"DblTimeout"])),this[U+"DblTimeout"]=setTimeout(function(){r.Konva["_"+U+"InDblClickWindow"]=!1},r.Konva.dblClickWindow),it&&it.isListening()?(st=!0,this[U+"ClickEndShape"]=it,it._fireAndBubble(N.pointerup,{...ut}),r.Konva["_"+U+"ListenClick"]&&X&&X===it&&(it._fireAndBubble(N.pointerclick,{...ut}),wt&&j&&j===it&&it._fireAndBubble(N.pointerdblclick,{...ut}))):(this[U+"ClickEndShape"]=null,r.Konva["_"+U+"ListenClick"]&&this._fire(N.pointerclick,{evt:F,target:this,currentTarget:this,pointerId:ft}),wt&&this._fire(N.pointerdblclick,{evt:F,target:this,currentTarget:this,pointerId:ft}))}),st||this._fire(N.pointerup,{evt:F,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),r.Konva["_"+U+"ListenClick"]=!1,F.cancelable&&U!=="touch"&&F.preventDefault()}_contextmenu(F){this.setPointersPositions(F);const N=this.getIntersection(this.getPointerPosition());N&&N.isListening()?N._fireAndBubble(D,{evt:F}):this._fire(D,{evt:F,target:this,currentTarget:this})}_wheel(F){this.setPointersPositions(F);const N=this.getIntersection(this.getPointerPosition());N&&N.isListening()?N._fireAndBubble(O,{evt:F}):this._fire(O,{evt:F,target:this,currentTarget:this})}_pointercancel(F){this.setPointersPositions(F);const N=h.getCapturedShape(F.pointerId)||this.getIntersection(this.getPointerPosition());N&&N._fireAndBubble(S,h.createEvent(F)),h.releaseCapture(F.pointerId)}_lostpointercapture(F){h.releaseCapture(F.pointerId)}setPointersPositions(F){let N=this._getContentPosition(),U=null,X=null;F=F||window.event,F.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(F.touches,j=>{this._pointerPositions.push({id:j.identifier,x:(j.clientX-N.left)/N.scaleX,y:(j.clientY-N.top)/N.scaleY})}),Array.prototype.forEach.call(F.changedTouches||F.touches,j=>{this._changedPointerPositions.push({id:j.identifier,x:(j.clientX-N.left)/N.scaleX,y:(j.clientY-N.top)/N.scaleY})})):(U=(F.clientX-N.left)/N.scaleX,X=(F.clientY-N.top)/N.scaleY,this.pointerPos={x:U,y:X},this._pointerPositions=[{x:U,y:X,id:t.Util._getFirstPointerId(F)}],this._changedPointerPositions=[{x:U,y:X,id:t.Util._getFirstPointerId(F)}])}_setPointerPosition(F){t.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(F)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const F=this.content.getBoundingClientRect();return{top:F.top,left:F.left,scaleX:F.width/this.content.clientWidth||1,scaleY:F.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new n.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new n.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!r.Konva.isBrowser)return;const F=this.container();if(!F)throw"Stage has no container. A container is required.";F.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),F.appendChild(this.content),this._resizeDOM()}cache(){return t.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(F){F.batchDraw()}),this}}o.Stage=L,L.prototype.nodeType=l,(0,a._registerNode)(L),i.Factory.addGetterSetter(L,"container"),r.Konva.isBrowser&&document.addEventListener("visibilitychange",()=>{o.stages.forEach(G=>{G.batchDraw()})})}(cn)),cn}var wi={},dn={},qs;function Dt(){return qs||(qs=1,function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.Shape=o.shapes=void 0;const t=ot(),i=Tt(),e=ht(),r=kt(),n=lt(),s=ot(),a=$o(),h="hasShadow",l="shadowRGBA",d="patternImage",p="linearGradient",m="radialGradient";let c;function f(){return c||(c=i.Util.createCanvasElement().getContext("2d"),c)}o.shapes={};function _(T){const A=this.attrs.fillRule;A?T.fill(A):T.fill()}function v(T){T.stroke()}function x(T){const A=this.attrs.fillRule;A?T.fill(A):T.fill()}function u(T){T.stroke()}function g(){this._clearCache(h)}function b(){this._clearCache(l)}function S(){this._clearCache(d)}function C(){this._clearCache(p)}function M(){this._clearCache(m)}class k extends r.Node{constructor(A){super(A);let R;for(;R=i.Util.getRandomColor(),!(R&&!(R in o.shapes)););this.colorKey=R,o.shapes[R]=this}getContext(){return i.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return i.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(h,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(d,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const R=f().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(R&&R.setTransform){const D=new i.Transform;D.translate(this.fillPatternX(),this.fillPatternY()),D.rotate(t.Konva.getAngle(this.fillPatternRotation())),D.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),D.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const y=D.getMatrix(),P=typeof DOMMatrix>"u"?{a:y[0],b:y[1],c:y[2],d:y[3],e:y[4],f:y[5]}:new DOMMatrix(y);R.setTransform(P)}return R}}_getLinearGradient(){return this._getCache(p,this.__getLinearGradient)}__getLinearGradient(){const A=this.fillLinearGradientColorStops();if(A){const R=f(),D=this.fillLinearGradientStartPoint(),y=this.fillLinearGradientEndPoint(),P=R.createLinearGradient(D.x,D.y,y.x,y.y);for(let w=0;w<A.length;w+=2)P.addColorStop(A[w],A[w+1]);return P}}_getRadialGradient(){return this._getCache(m,this.__getRadialGradient)}__getRadialGradient(){const A=this.fillRadialGradientColorStops();if(A){const R=f(),D=this.fillRadialGradientStartPoint(),y=this.fillRadialGradientEndPoint(),P=R.createRadialGradient(D.x,D.y,this.fillRadialGradientStartRadius(),y.x,y.y,this.fillRadialGradientEndRadius());for(let w=0;w<A.length;w+=2)P.addColorStop(A[w],A[w+1]);return P}}getShadowRGBA(){return this._getCache(l,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const A=i.Util.colorToRGBA(this.shadowColor());if(A)return"rgba("+A.r+","+A.g+","+A.b+","+A.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const A=this.hitStrokeWidth();return A==="auto"?this.hasStroke():this.strokeEnabled()&&!!A}intersects(A){const R=this.getStage();if(!R)return!1;const D=R.bufferHitCanvas;return D.getContext().clear(),this.drawHit(D,void 0,!0),D.context.getImageData(Math.round(A.x),Math.round(A.y),1,1).data[3]>0}destroy(){return r.Node.prototype.destroy.call(this),delete o.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(A){var R;if(!((R=this.attrs.perfectDrawEnabled)!==null&&R!==void 0?R:!0))return!1;const y=A||this.hasFill(),P=this.hasStroke(),w=this.getAbsoluteOpacity()!==1;if(y&&P&&w)return!0;const E=this.hasShadow(),O=this.shadowForStrokeEnabled();return!!(y&&P&&E&&O)}setStrokeHitEnabled(A){i.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),A?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const A=this.size();return{x:this._centroid?-A.width/2:0,y:this._centroid?-A.height/2:0,width:A.width,height:A.height}}getClientRect(A={}){let R=!1,D=this.getParent();for(;D;){if(D.isCached()){R=!0;break}D=D.getParent()}const y=A.skipTransform,P=A.relativeTo||R&&this.getStage()||void 0,w=this.getSelfRect(),O=!A.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,I=w.width+O,V=w.height+O,B=!A.skipShadow&&this.hasShadow(),q=B?this.shadowOffsetX():0,K=B?this.shadowOffsetY():0,z=I+Math.abs(q),Y=V+Math.abs(K),L=B&&this.shadowBlur()||0,G=z+L*2,F=Y+L*2,N={width:G,height:F,x:-(O/2+L)+Math.min(q,0)+w.x,y:-(O/2+L)+Math.min(K,0)+w.y};return y?N:this._transformedRect(N,P)}drawScene(A,R,D){const y=this.getLayer();let P=A||y.getCanvas(),w=P.getContext(),E=this._getCanvasCache(),O=this.getSceneFunc(),I=this.hasShadow(),V,B;const q=P.isCache,K=R===this;if(!this.isVisible()&&!K)return this;if(E){w.save();const Y=this.getAbsoluteTransform(R).getMatrix();return w.transform(Y[0],Y[1],Y[2],Y[3],Y[4],Y[5]),this._drawCachedSceneCanvas(w),w.restore(),this}if(!O)return this;if(w.save(),this._useBufferCanvas()&&!q){V=this.getStage();const Y=D||V.bufferCanvas;B=Y.getContext(),B.clear(),B.save(),B._applyLineJoin(this);var z=this.getAbsoluteTransform(R).getMatrix();B.transform(z[0],z[1],z[2],z[3],z[4],z[5]),O.call(this,B,this),B.restore();const L=Y.pixelRatio;I&&w._applyShadow(this),w._applyOpacity(this),w._applyGlobalCompositeOperation(this),w.drawImage(Y._canvas,0,0,Y.width/L,Y.height/L)}else{if(w._applyLineJoin(this),!K){var z=this.getAbsoluteTransform(R).getMatrix();w.transform(z[0],z[1],z[2],z[3],z[4],z[5]),w._applyOpacity(this),w._applyGlobalCompositeOperation(this)}I&&w._applyShadow(this),O.call(this,w,this)}return w.restore(),this}drawHit(A,R,D=!1){if(!this.shouldDrawHit(R,D))return this;const y=this.getLayer(),P=A||y.hitCanvas,w=P&&P.getContext(),E=this.hitFunc()||this.sceneFunc(),O=this._getCanvasCache(),I=O&&O.hit;if(this.colorKey||i.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),I){w.save();const B=this.getAbsoluteTransform(R).getMatrix();return w.transform(B[0],B[1],B[2],B[3],B[4],B[5]),this._drawCachedHitCanvas(w),w.restore(),this}if(!E)return this;if(w.save(),w._applyLineJoin(this),!(this===R)){const B=this.getAbsoluteTransform(R).getMatrix();w.transform(B[0],B[1],B[2],B[3],B[4],B[5])}return E.call(this,w,this),w.restore(),this}drawHitFromCache(A=0){let R=this._getCanvasCache(),D=this._getCachedSceneCanvas(),y=R.hit,P=y.getContext(),w=y.getWidth(),E=y.getHeight(),O,I,V,B,q,K;P.clear(),P.drawImage(D._canvas,0,0,w,E);try{for(O=P.getImageData(0,0,w,E),I=O.data,V=I.length,B=i.Util._hexToRgb(this.colorKey),q=0;q<V;q+=4)K=I[q+3],K>A?(I[q]=B.r,I[q+1]=B.g,I[q+2]=B.b,I[q+3]=255):I[q+3]=0;P.putImageData(O,0,0)}catch(z){i.Util.error("Unable to draw hit graph from cached scene canvas. "+z.message)}return this}hasPointerCapture(A){return a.hasPointerCapture(A,this)}setPointerCapture(A){a.setPointerCapture(A,this)}releaseCapture(A){a.releaseCapture(A,this)}}o.Shape=k,k.prototype._fillFunc=_,k.prototype._strokeFunc=v,k.prototype._fillFuncHit=x,k.prototype._strokeFuncHit=u,k.prototype._centroid=!1,k.prototype.nodeType="Shape",(0,s._registerNode)(k),k.prototype.eventListeners={},k.prototype.on.call(k.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",g),k.prototype.on.call(k.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",b),k.prototype.on.call(k.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",S),k.prototype.on.call(k.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",C),k.prototype.on.call(k.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",M),e.Factory.addGetterSetter(k,"stroke",void 0,(0,n.getStringOrGradientValidator)()),e.Factory.addGetterSetter(k,"strokeWidth",2,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(k,"fillAfterStrokeEnabled",!1),e.Factory.addGetterSetter(k,"hitStrokeWidth","auto",(0,n.getNumberOrAutoValidator)()),e.Factory.addGetterSetter(k,"strokeHitEnabled",!0,(0,n.getBooleanValidator)()),e.Factory.addGetterSetter(k,"perfectDrawEnabled",!0,(0,n.getBooleanValidator)()),e.Factory.addGetterSetter(k,"shadowForStrokeEnabled",!0,(0,n.getBooleanValidator)()),e.Factory.addGetterSetter(k,"lineJoin"),e.Factory.addGetterSetter(k,"lineCap"),e.Factory.addGetterSetter(k,"sceneFunc"),e.Factory.addGetterSetter(k,"hitFunc"),e.Factory.addGetterSetter(k,"dash"),e.Factory.addGetterSetter(k,"dashOffset",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(k,"shadowColor",void 0,(0,n.getStringValidator)()),e.Factory.addGetterSetter(k,"shadowBlur",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(k,"shadowOpacity",1,(0,n.getNumberValidator)()),e.Factory.addComponentsGetterSetter(k,"shadowOffset",["x","y"]),e.Factory.addGetterSetter(k,"shadowOffsetX",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(k,"shadowOffsetY",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(k,"fillPatternImage"),e.Factory.addGetterSetter(k,"fill",void 0,(0,n.getStringOrGradientValidator)()),e.Factory.addGetterSetter(k,"fillPatternX",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(k,"fillPatternY",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(k,"fillLinearGradientColorStops"),e.Factory.addGetterSetter(k,"strokeLinearGradientColorStops"),e.Factory.addGetterSetter(k,"fillRadialGradientStartRadius",0),e.Factory.addGetterSetter(k,"fillRadialGradientEndRadius",0),e.Factory.addGetterSetter(k,"fillRadialGradientColorStops"),e.Factory.addGetterSetter(k,"fillPatternRepeat","repeat"),e.Factory.addGetterSetter(k,"fillEnabled",!0),e.Factory.addGetterSetter(k,"strokeEnabled",!0),e.Factory.addGetterSetter(k,"shadowEnabled",!0),e.Factory.addGetterSetter(k,"dashEnabled",!0),e.Factory.addGetterSetter(k,"strokeScaleEnabled",!0),e.Factory.addGetterSetter(k,"fillPriority","color"),e.Factory.addComponentsGetterSetter(k,"fillPatternOffset",["x","y"]),e.Factory.addGetterSetter(k,"fillPatternOffsetX",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(k,"fillPatternOffsetY",0,(0,n.getNumberValidator)()),e.Factory.addComponentsGetterSetter(k,"fillPatternScale",["x","y"]),e.Factory.addGetterSetter(k,"fillPatternScaleX",1,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(k,"fillPatternScaleY",1,(0,n.getNumberValidator)()),e.Factory.addComponentsGetterSetter(k,"fillLinearGradientStartPoint",["x","y"]),e.Factory.addComponentsGetterSetter(k,"strokeLinearGradientStartPoint",["x","y"]),e.Factory.addGetterSetter(k,"fillLinearGradientStartPointX",0),e.Factory.addGetterSetter(k,"strokeLinearGradientStartPointX",0),e.Factory.addGetterSetter(k,"fillLinearGradientStartPointY",0),e.Factory.addGetterSetter(k,"strokeLinearGradientStartPointY",0),e.Factory.addComponentsGetterSetter(k,"fillLinearGradientEndPoint",["x","y"]),e.Factory.addComponentsGetterSetter(k,"strokeLinearGradientEndPoint",["x","y"]),e.Factory.addGetterSetter(k,"fillLinearGradientEndPointX",0),e.Factory.addGetterSetter(k,"strokeLinearGradientEndPointX",0),e.Factory.addGetterSetter(k,"fillLinearGradientEndPointY",0),e.Factory.addGetterSetter(k,"strokeLinearGradientEndPointY",0),e.Factory.addComponentsGetterSetter(k,"fillRadialGradientStartPoint",["x","y"]),e.Factory.addGetterSetter(k,"fillRadialGradientStartPointX",0),e.Factory.addGetterSetter(k,"fillRadialGradientStartPointY",0),e.Factory.addComponentsGetterSetter(k,"fillRadialGradientEndPoint",["x","y"]),e.Factory.addGetterSetter(k,"fillRadialGradientEndPointX",0),e.Factory.addGetterSetter(k,"fillRadialGradientEndPointY",0),e.Factory.addGetterSetter(k,"fillPatternRotation",0),e.Factory.addGetterSetter(k,"fillRule",void 0,(0,n.getStringValidator)()),e.Factory.backCompat(k,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})}(dn)),dn}var Ys;function Qo(){if(Ys)return wi;Ys=1,Object.defineProperty(wi,"__esModule",{value:!0}),wi.Layer=void 0;const o=Tt(),t=zr(),i=kt(),e=ht(),r=Vr(),n=lt(),s=Dt(),a=ot(),h="#",l="beforeDraw",d="draw",p=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],m=p.length;let c=class extends t.Container{constructor(_){super(_),this.canvas=new r.SceneCanvas,this.hitCanvas=new r.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(_){return this.getContext().clear(_),this.getHitCanvas().getContext().clear(_),this}setZIndex(_){super.setZIndex(_);const v=this.getStage();return v&&v.content&&(v.content.removeChild(this.getNativeCanvasElement()),_<v.children.length-1?v.content.insertBefore(this.getNativeCanvasElement(),v.children[_+1].getCanvas()._canvas):v.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){i.Node.prototype.moveToTop.call(this);const _=this.getStage();return _&&_.content&&(_.content.removeChild(this.getNativeCanvasElement()),_.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!i.Node.prototype.moveUp.call(this))return!1;const v=this.getStage();return!v||!v.content?!1:(v.content.removeChild(this.getNativeCanvasElement()),this.index<v.children.length-1?v.content.insertBefore(this.getNativeCanvasElement(),v.children[this.index+1].getCanvas()._canvas):v.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(i.Node.prototype.moveDown.call(this)){const _=this.getStage();if(_){const v=_.children;_.content&&(_.content.removeChild(this.getNativeCanvasElement()),_.content.insertBefore(this.getNativeCanvasElement(),v[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(i.Node.prototype.moveToBottom.call(this)){const _=this.getStage();if(_){const v=_.children;_.content&&(_.content.removeChild(this.getNativeCanvasElement()),_.content.insertBefore(this.getNativeCanvasElement(),v[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const _=this.getNativeCanvasElement();return i.Node.prototype.remove.call(this),_&&_.parentNode&&o.Util._isInDocument(_)&&_.parentNode.removeChild(_),this}getStage(){return this.parent}setSize({width:_,height:v}){return this.canvas.setSize(_,v),this.hitCanvas.setSize(_,v),this._setSmoothEnabled(),this}_validateAdd(_){const v=_.getType();v!=="Group"&&v!=="Shape"&&o.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(_){return _=_||{},_.width=_.width||this.getWidth(),_.height=_.height||this.getHeight(),_.x=_.x!==void 0?_.x:this.x(),_.y=_.y!==void 0?_.y:this.y(),i.Node.prototype._toKonvaCanvas.call(this,_)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){o.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){o.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,o.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(_){if(!this.isListening()||!this.isVisible())return null;let v=1,x=!1;for(;;){for(let u=0;u<m;u++){const g=p[u],b=this._getIntersection({x:_.x+g.x*v,y:_.y+g.y*v}),S=b.shape;if(S)return S;if(x=!!b.antialiased,!b.antialiased)break}if(x)v+=1;else return null}}_getIntersection(_){const v=this.hitCanvas.pixelRatio,x=this.hitCanvas.context.getImageData(Math.round(_.x*v),Math.round(_.y*v),1,1).data,u=x[3];if(u===255){const g=o.Util._rgbToHex(x[0],x[1],x[2]),b=s.shapes[h+g];return b?{shape:b}:{antialiased:!0}}else if(u>0)return{antialiased:!0};return{}}drawScene(_,v){const x=this.getLayer(),u=_||x&&x.getCanvas();return this._fire(l,{node:this}),this.clearBeforeDraw()&&u.getContext().clear(),t.Container.prototype.drawScene.call(this,u,v),this._fire(d,{node:this}),this}drawHit(_,v){const x=this.getLayer(),u=_||x&&x.hitCanvas;return x&&x.clearBeforeDraw()&&x.getHitCanvas().getContext().clear(),t.Container.prototype.drawHit.call(this,u,v),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(_){o.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(_)}getHitGraphEnabled(_){return o.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const _=this.parent;!!this.hitCanvas._canvas.parentNode?_.content.removeChild(this.hitCanvas._canvas):_.content.appendChild(this.hitCanvas._canvas)}destroy(){return o.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}};return wi.Layer=c,c.prototype.nodeType="Layer",(0,a._registerNode)(c),e.Factory.addGetterSetter(c,"imageSmoothingEnabled",!0),e.Factory.addGetterSetter(c,"clearBeforeDraw",!0),e.Factory.addGetterSetter(c,"hitGraphEnabled",!0,(0,n.getBooleanValidator)()),wi}var xi={},Ws;function Il(){if(Ws)return xi;Ws=1,Object.defineProperty(xi,"__esModule",{value:!0}),xi.FastLayer=void 0;const o=Tt(),t=Qo(),i=ot();let e=class extends t.Layer{constructor(n){super(n),this.listening(!1),o.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}};return xi.FastLayer=e,e.prototype.nodeType="FastLayer",(0,i._registerNode)(e),xi}var Ci={},Xs;function is(){if(Xs)return Ci;Xs=1,Object.defineProperty(Ci,"__esModule",{value:!0}),Ci.Group=void 0;const o=Tt(),t=zr(),i=ot();let e=class extends t.Container{_validateAdd(n){const s=n.getType();s!=="Group"&&s!=="Shape"&&o.Util.throw("You may only add groups and shapes to groups.")}};return Ci.Group=e,e.prototype.nodeType="Group",(0,i._registerNode)(e),Ci}var Ti={},Ks;function rs(){if(Ks)return Ti;Ks=1,Object.defineProperty(Ti,"__esModule",{value:!0}),Ti.Animation=void 0;const o=ot(),t=Tt(),i=function(){return o.glob.performance&&o.glob.performance.now?function(){return o.glob.performance.now()}:function(){return new Date().getTime()}}();let e=class ri{constructor(n,s){this.id=ri.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:i(),frameRate:0},this.func=n,this.setLayers(s)}setLayers(n){let s=[];return n&&(s=Array.isArray(n)?n:[n]),this.layers=s,this}getLayers(){return this.layers}addLayer(n){const s=this.layers,a=s.length;for(let h=0;h<a;h++)if(s[h]._id===n._id)return!1;return this.layers.push(n),!0}isRunning(){const s=ri.animations,a=s.length;for(let h=0;h<a;h++)if(s[h].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=i(),ri._addAnimation(this),this}stop(){return ri._removeAnimation(this),this}_updateFrameObject(n){this.frame.timeDiff=n-this.frame.lastTime,this.frame.lastTime=n,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(n){this.animations.push(n),this._handleAnimation()}static _removeAnimation(n){const s=n.id,a=this.animations,h=a.length;for(let l=0;l<h;l++)if(a[l].id===s){this.animations.splice(l,1);break}}static _runFrames(){const n={},s=this.animations;for(let a=0;a<s.length;a++){const h=s[a],l=h.layers,d=h.func;h._updateFrameObject(i());const p=l.length;let m;if(d?m=d.call(h,h.frame)!==!1:m=!0,!!m)for(let c=0;c<p;c++){const f=l[c];f._id!==void 0&&(n[f._id]=f)}}for(const a in n)n.hasOwnProperty(a)&&n[a].batchDraw()}static _animationLoop(){const n=ri;n.animations.length?(n._runFrames(),t.Util.requestAnimFrame(n._animationLoop)):n.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,t.Util.requestAnimFrame(this._animationLoop))}};return Ti.Animation=e,e.animations=[],e.animIdCounter=0,e.animRunning=!1,Ti}var un={},js;function Ll(){return js||(js=1,function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.Easings=o.Tween=void 0;const t=Tt(),i=rs(),e=kt(),r=ot();let n={node:1,duration:1,easing:1,onFinish:1,yoyo:1},s=1,a=2,h=3,l=0,d=["fill","stroke","shadowColor"];class p{constructor(f,_,v,x,u,g,b){this.prop=f,this.propFunc=_,this.begin=x,this._pos=x,this.duration=g,this._change=0,this.prevPos=0,this.yoyo=b,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=v,this._change=u-this.begin,this.pause()}fire(f){const _=this[f];_&&_()}setTime(f){f>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():f<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=f,this.update())}getTime(){return this._time}setPosition(f){this.prevPos=this._pos,this.propFunc(f),this._pos=f}getPosition(f){return f===void 0&&(f=this._time),this.func(f,this.begin,this._change,this.duration)}play(){this.state=a,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=h,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(f){this.pause(),this._time=f,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const f=this.getTimer()-this._startTime;this.state===a?this.setTime(f):this.state===h&&this.setTime(this.duration-f)}pause(){this.state=s,this.fire("onPause")}getTimer(){return new Date().getTime()}}class m{constructor(f){let _=this,v=f.node,x=v._id,u,g=f.easing||o.Easings.Linear,b=!!f.yoyo,S;typeof f.duration>"u"?u=.3:f.duration===0?u=.001:u=f.duration,this.node=v,this._id=l++;const C=v.getLayer()||(v instanceof r.Konva.Stage?v.getLayers():null);C||t.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new i.Animation(function(){_.tween.onEnterFrame()},C),this.tween=new p(S,function(M){_._tweenFunc(M)},g,0,1,u*1e3,b),this._addListeners(),m.attrs[x]||(m.attrs[x]={}),m.attrs[x][this._id]||(m.attrs[x][this._id]={}),m.tweens[x]||(m.tweens[x]={});for(S in f)n[S]===void 0&&this._addAttr(S,f[S]);this.reset(),this.onFinish=f.onFinish,this.onReset=f.onReset,this.onUpdate=f.onUpdate}_addAttr(f,_){let v=this.node,x=v._id,u,g,b,S,C,M,k,T;if(b=m.tweens[x][f],b&&delete m.attrs[x][b][f],u=v.getAttr(f),t.Util._isArray(_))if(g=[],C=Math.max(_.length,u.length),f==="points"&&_.length!==u.length&&(_.length>u.length?(k=u,u=t.Util._prepareArrayForTween(u,_,v.closed())):(M=_,_=t.Util._prepareArrayForTween(_,u,v.closed()))),f.indexOf("fill")===0)for(S=0;S<C;S++)if(S%2===0)g.push(_[S]-u[S]);else{const A=t.Util.colorToRGBA(u[S]);T=t.Util.colorToRGBA(_[S]),u[S]=A,g.push({r:T.r-A.r,g:T.g-A.g,b:T.b-A.b,a:T.a-A.a})}else for(S=0;S<C;S++)g.push(_[S]-u[S]);else d.indexOf(f)!==-1?(u=t.Util.colorToRGBA(u),T=t.Util.colorToRGBA(_),g={r:T.r-u.r,g:T.g-u.g,b:T.b-u.b,a:T.a-u.a}):g=_-u;m.attrs[x][this._id][f]={start:u,diff:g,end:_,trueEnd:M,trueStart:k},m.tweens[x][f]=this._id}_tweenFunc(f){let _=this.node,v=m.attrs[_._id][this._id],x,u,g,b,S,C,M,k;for(x in v){if(u=v[x],g=u.start,b=u.diff,k=u.end,t.Util._isArray(g))if(S=[],M=Math.max(g.length,k.length),x.indexOf("fill")===0)for(C=0;C<M;C++)C%2===0?S.push((g[C]||0)+b[C]*f):S.push("rgba("+Math.round(g[C].r+b[C].r*f)+","+Math.round(g[C].g+b[C].g*f)+","+Math.round(g[C].b+b[C].b*f)+","+(g[C].a+b[C].a*f)+")");else for(C=0;C<M;C++)S.push((g[C]||0)+b[C]*f);else d.indexOf(x)!==-1?S="rgba("+Math.round(g.r+b.r*f)+","+Math.round(g.g+b.g*f)+","+Math.round(g.b+b.b*f)+","+(g.a+b.a*f)+")":S=g+b*f;_.setAttr(x,S)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const f=this.node,_=m.attrs[f._id][this._id];_.points&&_.points.trueEnd&&f.setAttr("points",_.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const f=this.node,_=m.attrs[f._id][this._id];_.points&&_.points.trueStart&&f.points(_.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(f){return this.tween.seek(f*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){let f=this.node._id,_=this._id,v=m.tweens[f],x;this.pause();for(x in v)delete m.tweens[f][x];delete m.attrs[f][_]}}o.Tween=m,m.attrs={},m.tweens={},e.Node.prototype.to=function(c){const f=c.onFinish;c.node=this,c.onFinish=function(){this.destroy(),f&&f()},new m(c).play()},o.Easings={BackEaseIn(c,f,_,v){return _*(c/=v)*c*((1.70158+1)*c-1.70158)+f},BackEaseOut(c,f,_,v){return _*((c=c/v-1)*c*((1.70158+1)*c+1.70158)+1)+f},BackEaseInOut(c,f,_,v){let x=1.70158;return(c/=v/2)<1?_/2*(c*c*(((x*=1.525)+1)*c-x))+f:_/2*((c-=2)*c*(((x*=1.525)+1)*c+x)+2)+f},ElasticEaseIn(c,f,_,v,x,u){let g=0;return c===0?f:(c/=v)===1?f+_:(u||(u=v*.3),!x||x<Math.abs(_)?(x=_,g=u/4):g=u/(2*Math.PI)*Math.asin(_/x),-(x*Math.pow(2,10*(c-=1))*Math.sin((c*v-g)*(2*Math.PI)/u))+f)},ElasticEaseOut(c,f,_,v,x,u){let g=0;return c===0?f:(c/=v)===1?f+_:(u||(u=v*.3),!x||x<Math.abs(_)?(x=_,g=u/4):g=u/(2*Math.PI)*Math.asin(_/x),x*Math.pow(2,-10*c)*Math.sin((c*v-g)*(2*Math.PI)/u)+_+f)},ElasticEaseInOut(c,f,_,v,x,u){let g=0;return c===0?f:(c/=v/2)===2?f+_:(u||(u=v*(.3*1.5)),!x||x<Math.abs(_)?(x=_,g=u/4):g=u/(2*Math.PI)*Math.asin(_/x),c<1?-.5*(x*Math.pow(2,10*(c-=1))*Math.sin((c*v-g)*(2*Math.PI)/u))+f:x*Math.pow(2,-10*(c-=1))*Math.sin((c*v-g)*(2*Math.PI)/u)*.5+_+f)},BounceEaseOut(c,f,_,v){return(c/=v)<1/2.75?_*(7.5625*c*c)+f:c<2/2.75?_*(7.5625*(c-=1.5/2.75)*c+.75)+f:c<2.5/2.75?_*(7.5625*(c-=2.25/2.75)*c+.9375)+f:_*(7.5625*(c-=2.625/2.75)*c+.984375)+f},BounceEaseIn(c,f,_,v){return _-o.Easings.BounceEaseOut(v-c,0,_,v)+f},BounceEaseInOut(c,f,_,v){return c<v/2?o.Easings.BounceEaseIn(c*2,0,_,v)*.5+f:o.Easings.BounceEaseOut(c*2-v,0,_,v)*.5+_*.5+f},EaseIn(c,f,_,v){return _*(c/=v)*c+f},EaseOut(c,f,_,v){return-_*(c/=v)*(c-2)+f},EaseInOut(c,f,_,v){return(c/=v/2)<1?_/2*c*c+f:-_/2*(--c*(c-2)-1)+f},StrongEaseIn(c,f,_,v){return _*(c/=v)*c*c*c*c+f},StrongEaseOut(c,f,_,v){return _*((c=c/v-1)*c*c*c*c+1)+f},StrongEaseInOut(c,f,_,v){return(c/=v/2)<1?_/2*c*c*c*c*c+f:_/2*((c-=2)*c*c*c*c+2)+f},Linear(c,f,_,v){return _*c/v+f}}}(un)),un}var $s;function Gl(){return $s||($s=1,function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.Konva=void 0;const t=ot(),i=Tt(),e=kt(),r=zr(),n=Nl(),s=Qo(),a=Il(),h=is(),l=es(),d=Dt(),p=rs(),m=Ll(),c=jo(),f=Vr();o.Konva=i.Util._assign(t.Konva,{Util:i.Util,Transform:i.Transform,Node:e.Node,Container:r.Container,Stage:n.Stage,stages:n.stages,Layer:s.Layer,FastLayer:a.FastLayer,Group:h.Group,DD:l.DD,Shape:d.Shape,shapes:d.shapes,Animation:p.Animation,Tween:m.Tween,Easings:m.Easings,Context:c.Context,Canvas:f.Canvas}),o.default=o.Konva}(sn)),sn}var Pi={},Qs;function Ul(){if(Qs)return Pi;Qs=1,Object.defineProperty(Pi,"__esModule",{value:!0}),Pi.Arc=void 0;const o=ht(),t=Dt(),i=ot(),e=lt(),r=ot();let n=class extends t.Shape{_sceneFunc(a){const h=i.Konva.getAngle(this.angle()),l=this.clockwise();a.beginPath(),a.arc(0,0,this.outerRadius(),0,h,l),a.arc(0,0,this.innerRadius(),h,0,!l),a.closePath(),a.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(a){this.outerRadius(a/2)}setHeight(a){this.outerRadius(a/2)}getSelfRect(){const a=this.innerRadius(),h=this.outerRadius(),l=this.clockwise(),d=i.Konva.getAngle(l?360-this.angle():this.angle()),p=Math.cos(Math.min(d,Math.PI)),m=1,c=Math.sin(Math.min(Math.max(Math.PI,d),3*Math.PI/2)),f=Math.sin(Math.min(d,Math.PI/2)),_=p*(p>0?a:h),v=m*h,x=c*(c>0?a:h),u=f*(f>0?h:a);return{x:_,y:l?-1*u:x,width:v-_,height:u-x}}};return Pi.Arc=n,n.prototype._centroid=!0,n.prototype.className="Arc",n.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,r._registerNode)(n),o.Factory.addGetterSetter(n,"innerRadius",0,(0,e.getNumberValidator)()),o.Factory.addGetterSetter(n,"outerRadius",0,(0,e.getNumberValidator)()),o.Factory.addGetterSetter(n,"angle",0,(0,e.getNumberValidator)()),o.Factory.addGetterSetter(n,"clockwise",!1,(0,e.getBooleanValidator)()),Pi}var ki={},Ai={},Js;function Jo(){if(Js)return Ai;Js=1,Object.defineProperty(Ai,"__esModule",{value:!0}),Ai.Line=void 0;const o=ht(),t=ot(),i=Dt(),e=lt();function r(a,h,l,d,p,m,c){const f=Math.sqrt(Math.pow(l-a,2)+Math.pow(d-h,2)),_=Math.sqrt(Math.pow(p-l,2)+Math.pow(m-d,2)),v=c*f/(f+_),x=c*_/(f+_),u=l-v*(p-a),g=d-v*(m-h),b=l+x*(p-a),S=d+x*(m-h);return[u,g,b,S]}function n(a,h){const l=a.length,d=[];for(let p=2;p<l-2;p+=2){const m=r(a[p-2],a[p-1],a[p],a[p+1],a[p+2],a[p+3],h);isNaN(m[0])||(d.push(m[0]),d.push(m[1]),d.push(a[p]),d.push(a[p+1]),d.push(m[2]),d.push(m[3]))}return d}let s=class extends i.Shape{constructor(h){super(h),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(h){let l=this.points(),d=l.length,p=this.tension(),m=this.closed(),c=this.bezier(),f,_,v;if(d){if(h.beginPath(),h.moveTo(l[0],l[1]),p!==0&&d>4){for(f=this.getTensionPoints(),_=f.length,v=m?0:4,m||h.quadraticCurveTo(f[0],f[1],f[2],f[3]);v<_-2;)h.bezierCurveTo(f[v++],f[v++],f[v++],f[v++],f[v++],f[v++]);m||h.quadraticCurveTo(f[_-2],f[_-1],l[d-2],l[d-1])}else if(c)for(v=2;v<d;)h.bezierCurveTo(l[v++],l[v++],l[v++],l[v++],l[v++],l[v++]);else for(v=2;v<d;v+=2)h.lineTo(l[v],l[v+1]);m?(h.closePath(),h.fillStrokeShape(this)):h.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():n(this.points(),this.tension())}_getTensionPointsClosed(){const h=this.points(),l=h.length,d=this.tension(),p=r(h[l-2],h[l-1],h[0],h[1],h[2],h[3],d),m=r(h[l-4],h[l-3],h[l-2],h[l-1],h[0],h[1],d),c=n(h,d);return[p[2],p[3]].concat(c).concat([m[0],m[1],h[l-2],h[l-1],m[2],m[3],p[0],p[1],h[0],h[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let h=this.points();if(h.length<4)return{x:h[0]||0,y:h[1]||0,width:0,height:0};this.tension()!==0?h=[h[0],h[1],...this._getTensionPoints(),h[h.length-2],h[h.length-1]]:h=this.points();let l=h[0],d=h[0],p=h[1],m=h[1],c,f;for(let _=0;_<h.length/2;_++)c=h[_*2],f=h[_*2+1],l=Math.min(l,c),d=Math.max(d,c),p=Math.min(p,f),m=Math.max(m,f);return{x:l,y:p,width:d-l,height:m-p}}};return Ai.Line=s,s.prototype.className="Line",s.prototype._attrsAffectingSize=["points","bezier","tension"],(0,t._registerNode)(s),o.Factory.addGetterSetter(s,"closed",!1),o.Factory.addGetterSetter(s,"bezier",!1),o.Factory.addGetterSetter(s,"tension",0,(0,e.getNumberValidator)()),o.Factory.addGetterSetter(s,"points",[],(0,e.getNumberArrayValidator)()),Ai}var Ri={},fn={},Zs;function Bl(){return Zs||(Zs=1,function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.t2length=o.getQuadraticArcLength=o.getCubicArcLength=o.binomialCoefficients=o.cValues=o.tValues=void 0,o.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],o.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],o.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];const t=(s,a,h)=>{let l,d;const m=h/2;l=0;for(let c=0;c<20;c++)d=m*o.tValues[20][c]+m,l+=o.cValues[20][c]*e(s,a,d);return m*l};o.getCubicArcLength=t;const i=(s,a,h)=>{h===void 0&&(h=1);const l=s[0]-2*s[1]+s[2],d=a[0]-2*a[1]+a[2],p=2*s[1]-2*s[0],m=2*a[1]-2*a[0],c=4*(l*l+d*d),f=4*(l*p+d*m),_=p*p+m*m;if(c===0)return h*Math.sqrt(Math.pow(s[2]-s[0],2)+Math.pow(a[2]-a[0],2));const v=f/(2*c),x=_/c,u=h+v,g=x-v*v,b=u*u+g>0?Math.sqrt(u*u+g):0,S=v*v+g>0?Math.sqrt(v*v+g):0,C=v+Math.sqrt(v*v+g)!==0?g*Math.log(Math.abs((u+b)/(v+S))):0;return Math.sqrt(c)/2*(u*b-v*S+C)};o.getQuadraticArcLength=i;function e(s,a,h){const l=r(1,h,s),d=r(1,h,a),p=l*l+d*d;return Math.sqrt(p)}const r=(s,a,h)=>{const l=h.length-1;let d,p;if(l===0)return 0;if(s===0){p=0;for(let m=0;m<=l;m++)p+=o.binomialCoefficients[l][m]*Math.pow(1-a,l-m)*Math.pow(a,m)*h[m];return p}else{d=new Array(l);for(let m=0;m<l;m++)d[m]=l*(h[m+1]-h[m]);return r(s-1,a,d)}},n=(s,a,h)=>{let l=1,d=s/a,p=(s-h(d))/a,m=0;for(;l>.001;){const c=h(d+p),f=Math.abs(s-c)/a;if(f<l)l=f,d+=p;else{const _=h(d-p),v=Math.abs(s-_)/a;v<l?(l=v,d-=p):p/=2}if(m++,m>500)break}return d};o.t2length=n}(fn)),fn}var ta;function ns(){if(ta)return Ri;ta=1,Object.defineProperty(Ri,"__esModule",{value:!0}),Ri.Path=void 0;const o=ht(),t=Dt(),i=ot(),e=Bl();let r=class Yt extends t.Shape{constructor(s){super(s),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=Yt.parsePathData(this.data()),this.pathLength=Yt.getPathLength(this.dataArray)}_sceneFunc(s){const a=this.dataArray;s.beginPath();let h=!1;for(let b=0;b<a.length;b++){const S=a[b].command,C=a[b].points;switch(S){case"L":s.lineTo(C[0],C[1]);break;case"M":s.moveTo(C[0],C[1]);break;case"C":s.bezierCurveTo(C[0],C[1],C[2],C[3],C[4],C[5]);break;case"Q":s.quadraticCurveTo(C[0],C[1],C[2],C[3]);break;case"A":var l=C[0],d=C[1],p=C[2],m=C[3],c=C[4],f=C[5],_=C[6],v=C[7],x=p>m?p:m,u=p>m?1:p/m,g=p>m?m/p:1;s.translate(l,d),s.rotate(_),s.scale(u,g),s.arc(0,0,x,c,c+f,1-v),s.scale(1/u,1/g),s.rotate(-_),s.translate(-l,-d);break;case"z":h=!0,s.closePath();break}}!h&&!this.hasFill()?s.strokeShape(this):s.fillStrokeShape(this)}getSelfRect(){let s=[];this.dataArray.forEach(function(c){if(c.command==="A"){const f=c.points[4],_=c.points[5],v=c.points[4]+_;let x=Math.PI/180;if(Math.abs(f-v)<x&&(x=Math.abs(f-v)),_<0)for(let u=f-x;u>v;u-=x){const g=Yt.getPointOnEllipticalArc(c.points[0],c.points[1],c.points[2],c.points[3],u,0);s.push(g.x,g.y)}else for(let u=f+x;u<v;u+=x){const g=Yt.getPointOnEllipticalArc(c.points[0],c.points[1],c.points[2],c.points[3],u,0);s.push(g.x,g.y)}}else if(c.command==="C")for(let f=0;f<=1;f+=.01){const _=Yt.getPointOnCubicBezier(f,c.start.x,c.start.y,c.points[0],c.points[1],c.points[2],c.points[3],c.points[4],c.points[5]);s.push(_.x,_.y)}else s=s.concat(c.points)});let a=s[0],h=s[0],l=s[1],d=s[1],p,m;for(let c=0;c<s.length/2;c++)p=s[c*2],m=s[c*2+1],isNaN(p)||(a=Math.min(a,p),h=Math.max(h,p)),isNaN(m)||(l=Math.min(l,m),d=Math.max(d,m));return{x:a,y:l,width:h-a,height:d-l}}getLength(){return this.pathLength}getPointAtLength(s){return Yt.getPointAtLengthOfDataArray(s,this.dataArray)}static getLineLength(s,a,h,l){return Math.sqrt((h-s)*(h-s)+(l-a)*(l-a))}static getPathLength(s){let a=0;for(let h=0;h<s.length;++h)a+=s[h].pathLength;return a}static getPointAtLengthOfDataArray(s,a){let h,l=0,d=a.length;if(!d)return null;for(;l<d&&s>a[l].pathLength;)s-=a[l].pathLength,++l;if(l===d)return h=a[l-1].points.slice(-2),{x:h[0],y:h[1]};if(s<.01)return h=a[l].points.slice(0,2),{x:h[0],y:h[1]};const p=a[l],m=p.points;switch(p.command){case"L":return Yt.getPointOnLine(s,p.start.x,p.start.y,m[0],m[1]);case"C":return Yt.getPointOnCubicBezier((0,e.t2length)(s,Yt.getPathLength(a),b=>(0,e.getCubicArcLength)([p.start.x,m[0],m[2],m[4]],[p.start.y,m[1],m[3],m[5]],b)),p.start.x,p.start.y,m[0],m[1],m[2],m[3],m[4],m[5]);case"Q":return Yt.getPointOnQuadraticBezier((0,e.t2length)(s,Yt.getPathLength(a),b=>(0,e.getQuadraticArcLength)([p.start.x,m[0],m[2]],[p.start.y,m[1],m[3]],b)),p.start.x,p.start.y,m[0],m[1],m[2],m[3]);case"A":var c=m[0],f=m[1],_=m[2],v=m[3],x=m[4],u=m[5],g=m[6];return x+=u*s/p.pathLength,Yt.getPointOnEllipticalArc(c,f,_,v,x,g)}return null}static getPointOnLine(s,a,h,l,d,p,m){p=p??a,m=m??h;const c=this.getLineLength(a,h,l,d);if(c<1e-10)return{x:a,y:h};if(l===a)return{x:p,y:m+(d>h?s:-s)};const f=(d-h)/(l-a),_=Math.sqrt(s*s/(1+f*f))*(l<a?-1:1),v=f*_;if(Math.abs(m-h-f*(p-a))<1e-10)return{x:p+_,y:m+v};const x=((p-a)*(l-a)+(m-h)*(d-h))/(c*c),u=a+x*(l-a),g=h+x*(d-h),b=this.getLineLength(p,m,u,g),S=Math.sqrt(s*s-b*b),C=Math.sqrt(S*S/(1+f*f))*(l<a?-1:1),M=f*C;return{x:u+C,y:g+M}}static getPointOnCubicBezier(s,a,h,l,d,p,m,c,f){function _(S){return S*S*S}function v(S){return 3*S*S*(1-S)}function x(S){return 3*S*(1-S)*(1-S)}function u(S){return(1-S)*(1-S)*(1-S)}const g=c*_(s)+p*v(s)+l*x(s)+a*u(s),b=f*_(s)+m*v(s)+d*x(s)+h*u(s);return{x:g,y:b}}static getPointOnQuadraticBezier(s,a,h,l,d,p,m){function c(u){return u*u}function f(u){return 2*u*(1-u)}function _(u){return(1-u)*(1-u)}const v=p*c(s)+l*f(s)+a*_(s),x=m*c(s)+d*f(s)+h*_(s);return{x:v,y:x}}static getPointOnEllipticalArc(s,a,h,l,d,p){const m=Math.cos(p),c=Math.sin(p),f={x:h*Math.cos(d),y:l*Math.sin(d)};return{x:s+(f.x*m-f.y*c),y:a+(f.x*c+f.y*m)}}static parsePathData(s){if(!s)return[];let a=s;const h=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];a=a.replace(new RegExp(" ","g"),",");for(var l=0;l<h.length;l++)a=a.replace(new RegExp(h[l],"g"),"|"+h[l]);const d=a.split("|"),p=[],m=[];let c=0,f=0;const _=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let v;for(l=1;l<d.length;l++){let y=d[l],P=y.charAt(0);for(y=y.slice(1),m.length=0;v=_.exec(y);)m.push(v[0]);const w=[];for(let E=0,O=m.length;E<O;E++){if(m[E]==="00"){w.push(0,0);continue}const I=parseFloat(m[E]);isNaN(I)?w.push(0):w.push(I)}for(;w.length>0&&!isNaN(w[0]);){let E="",O=[];const I=c,V=f;var x,u,g,b,S,C,M,k,T,A;switch(P){case"l":c+=w.shift(),f+=w.shift(),E="L",O.push(c,f);break;case"L":c=w.shift(),f=w.shift(),O.push(c,f);break;case"m":var R=w.shift(),D=w.shift();if(c+=R,f+=D,E="M",p.length>2&&p[p.length-1].command==="z"){for(let B=p.length-2;B>=0;B--)if(p[B].command==="M"){c=p[B].points[0]+R,f=p[B].points[1]+D;break}}O.push(c,f),P="l";break;case"M":c=w.shift(),f=w.shift(),E="M",O.push(c,f),P="L";break;case"h":c+=w.shift(),E="L",O.push(c,f);break;case"H":c=w.shift(),E="L",O.push(c,f);break;case"v":f+=w.shift(),E="L",O.push(c,f);break;case"V":f=w.shift(),E="L",O.push(c,f);break;case"C":O.push(w.shift(),w.shift(),w.shift(),w.shift()),c=w.shift(),f=w.shift(),O.push(c,f);break;case"c":O.push(c+w.shift(),f+w.shift(),c+w.shift(),f+w.shift()),c+=w.shift(),f+=w.shift(),E="C",O.push(c,f);break;case"S":u=c,g=f,x=p[p.length-1],x.command==="C"&&(u=c+(c-x.points[2]),g=f+(f-x.points[3])),O.push(u,g,w.shift(),w.shift()),c=w.shift(),f=w.shift(),E="C",O.push(c,f);break;case"s":u=c,g=f,x=p[p.length-1],x.command==="C"&&(u=c+(c-x.points[2]),g=f+(f-x.points[3])),O.push(u,g,c+w.shift(),f+w.shift()),c+=w.shift(),f+=w.shift(),E="C",O.push(c,f);break;case"Q":O.push(w.shift(),w.shift()),c=w.shift(),f=w.shift(),O.push(c,f);break;case"q":O.push(c+w.shift(),f+w.shift()),c+=w.shift(),f+=w.shift(),E="Q",O.push(c,f);break;case"T":u=c,g=f,x=p[p.length-1],x.command==="Q"&&(u=c+(c-x.points[0]),g=f+(f-x.points[1])),c=w.shift(),f=w.shift(),E="Q",O.push(u,g,c,f);break;case"t":u=c,g=f,x=p[p.length-1],x.command==="Q"&&(u=c+(c-x.points[0]),g=f+(f-x.points[1])),c+=w.shift(),f+=w.shift(),E="Q",O.push(u,g,c,f);break;case"A":b=w.shift(),S=w.shift(),C=w.shift(),M=w.shift(),k=w.shift(),T=c,A=f,c=w.shift(),f=w.shift(),E="A",O=this.convertEndpointToCenterParameterization(T,A,c,f,M,k,b,S,C);break;case"a":b=w.shift(),S=w.shift(),C=w.shift(),M=w.shift(),k=w.shift(),T=c,A=f,c+=w.shift(),f+=w.shift(),E="A",O=this.convertEndpointToCenterParameterization(T,A,c,f,M,k,b,S,C);break}p.push({command:E||P,points:O,start:{x:I,y:V},pathLength:this.calcLength(I,V,E||P,O)})}(P==="z"||P==="Z")&&p.push({command:"z",points:[],start:void 0,pathLength:0})}return p}static calcLength(s,a,h,l){let d,p,m,c;const f=Yt;switch(h){case"L":return f.getLineLength(s,a,l[0],l[1]);case"C":return(0,e.getCubicArcLength)([s,l[0],l[2],l[4]],[a,l[1],l[3],l[5]],1);case"Q":return(0,e.getQuadraticArcLength)([s,l[0],l[2]],[a,l[1],l[3]],1);case"A":d=0;var _=l[4],v=l[5],x=l[4]+v,u=Math.PI/180;if(Math.abs(_-x)<u&&(u=Math.abs(_-x)),p=f.getPointOnEllipticalArc(l[0],l[1],l[2],l[3],_,0),v<0)for(c=_-u;c>x;c-=u)m=f.getPointOnEllipticalArc(l[0],l[1],l[2],l[3],c,0),d+=f.getLineLength(p.x,p.y,m.x,m.y),p=m;else for(c=_+u;c<x;c+=u)m=f.getPointOnEllipticalArc(l[0],l[1],l[2],l[3],c,0),d+=f.getLineLength(p.x,p.y,m.x,m.y),p=m;return m=f.getPointOnEllipticalArc(l[0],l[1],l[2],l[3],x,0),d+=f.getLineLength(p.x,p.y,m.x,m.y),d}return 0}static convertEndpointToCenterParameterization(s,a,h,l,d,p,m,c,f){const _=f*(Math.PI/180),v=Math.cos(_)*(s-h)/2+Math.sin(_)*(a-l)/2,x=-1*Math.sin(_)*(s-h)/2+Math.cos(_)*(a-l)/2,u=v*v/(m*m)+x*x/(c*c);u>1&&(m*=Math.sqrt(u),c*=Math.sqrt(u));let g=Math.sqrt((m*m*(c*c)-m*m*(x*x)-c*c*(v*v))/(m*m*(x*x)+c*c*(v*v)));d===p&&(g*=-1),isNaN(g)&&(g=0);const b=g*m*x/c,S=g*-c*v/m,C=(s+h)/2+Math.cos(_)*b-Math.sin(_)*S,M=(a+l)/2+Math.sin(_)*b+Math.cos(_)*S,k=function(w){return Math.sqrt(w[0]*w[0]+w[1]*w[1])},T=function(w,E){return(w[0]*E[0]+w[1]*E[1])/(k(w)*k(E))},A=function(w,E){return(w[0]*E[1]<w[1]*E[0]?-1:1)*Math.acos(T(w,E))},R=A([1,0],[(v-b)/m,(x-S)/c]),D=[(v-b)/m,(x-S)/c],y=[(-1*v-b)/m,(-1*x-S)/c];let P=A(D,y);return T(D,y)<=-1&&(P=Math.PI),T(D,y)>=1&&(P=0),p===0&&P>0&&(P=P-2*Math.PI),p===1&&P<0&&(P=P+2*Math.PI),[C,M,m,c,R,P,_,p]}};return Ri.Path=r,r.prototype.className="Path",r.prototype._attrsAffectingSize=["data"],(0,i._registerNode)(r),o.Factory.addGetterSetter(r,"data"),Ri}var ea;function Vl(){if(ea)return ki;ea=1,Object.defineProperty(ki,"__esModule",{value:!0}),ki.Arrow=void 0;const o=ht(),t=Jo(),i=lt(),e=ot(),r=ns();let n=class extends t.Line{_sceneFunc(a){super._sceneFunc(a);const h=Math.PI*2,l=this.points();let d=l;const p=this.tension()!==0&&l.length>4;p&&(d=this.getTensionPoints());const m=this.pointerLength(),c=l.length;let f,_;if(p){const u=[d[d.length-4],d[d.length-3],d[d.length-2],d[d.length-1],l[c-2],l[c-1]],g=r.Path.calcLength(d[d.length-4],d[d.length-3],"C",u),b=r.Path.getPointOnQuadraticBezier(Math.min(1,1-m/g),u[0],u[1],u[2],u[3],u[4],u[5]);f=l[c-2]-b.x,_=l[c-1]-b.y}else f=l[c-2]-l[c-4],_=l[c-1]-l[c-3];const v=(Math.atan2(_,f)+h)%h,x=this.pointerWidth();this.pointerAtEnding()&&(a.save(),a.beginPath(),a.translate(l[c-2],l[c-1]),a.rotate(v),a.moveTo(0,0),a.lineTo(-m,x/2),a.lineTo(-m,-x/2),a.closePath(),a.restore(),this.__fillStroke(a)),this.pointerAtBeginning()&&(a.save(),a.beginPath(),a.translate(l[0],l[1]),p?(f=(d[0]+d[2])/2-l[0],_=(d[1]+d[3])/2-l[1]):(f=l[2]-l[0],_=l[3]-l[1]),a.rotate((Math.atan2(-_,-f)+h)%h),a.moveTo(0,0),a.lineTo(-m,x/2),a.lineTo(-m,-x/2),a.closePath(),a.restore(),this.__fillStroke(a))}__fillStroke(a){const h=this.dashEnabled();h&&(this.attrs.dashEnabled=!1,a.setLineDash([])),a.fillStrokeShape(this),h&&(this.attrs.dashEnabled=!0)}getSelfRect(){const a=super.getSelfRect(),h=this.pointerWidth()/2;return{x:a.x-h,y:a.y-h,width:a.width+h*2,height:a.height+h*2}}};return ki.Arrow=n,n.prototype.className="Arrow",(0,e._registerNode)(n),o.Factory.addGetterSetter(n,"pointerLength",10,(0,i.getNumberValidator)()),o.Factory.addGetterSetter(n,"pointerWidth",10,(0,i.getNumberValidator)()),o.Factory.addGetterSetter(n,"pointerAtBeginning",!1),o.Factory.addGetterSetter(n,"pointerAtEnding",!0),ki}var Ei={},ia;function zl(){if(ia)return Ei;ia=1,Object.defineProperty(Ei,"__esModule",{value:!0}),Ei.Circle=void 0;const o=ht(),t=Dt(),i=lt(),e=ot();let r=class extends t.Shape{_sceneFunc(s){s.beginPath(),s.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),s.closePath(),s.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(s){this.radius()!==s/2&&this.radius(s/2)}setHeight(s){this.radius()!==s/2&&this.radius(s/2)}};return Ei.Circle=r,r.prototype._centroid=!0,r.prototype.className="Circle",r.prototype._attrsAffectingSize=["radius"],(0,e._registerNode)(r),o.Factory.addGetterSetter(r,"radius",0,(0,i.getNumberValidator)()),Ei}var Mi={},ra;function Hl(){if(ra)return Mi;ra=1,Object.defineProperty(Mi,"__esModule",{value:!0}),Mi.Ellipse=void 0;const o=ht(),t=Dt(),i=lt(),e=ot();let r=class extends t.Shape{_sceneFunc(s){const a=this.radiusX(),h=this.radiusY();s.beginPath(),s.save(),a!==h&&s.scale(1,h/a),s.arc(0,0,a,0,Math.PI*2,!1),s.restore(),s.closePath(),s.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(s){this.radiusX(s/2)}setHeight(s){this.radiusY(s/2)}};return Mi.Ellipse=r,r.prototype.className="Ellipse",r.prototype._centroid=!0,r.prototype._attrsAffectingSize=["radiusX","radiusY"],(0,e._registerNode)(r),o.Factory.addComponentsGetterSetter(r,"radius",["x","y"]),o.Factory.addGetterSetter(r,"radiusX",0,(0,i.getNumberValidator)()),o.Factory.addGetterSetter(r,"radiusY",0,(0,i.getNumberValidator)()),Mi}var Oi={},na;function ql(){if(na)return Oi;na=1,Object.defineProperty(Oi,"__esModule",{value:!0}),Oi.Image=void 0;const o=Tt(),t=ht(),i=Dt(),e=ot(),r=lt();class n extends i.Shape{constructor(a){super(a),this.on("imageChange.konva",()=>{this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const a=this.image();a&&a.complete||a&&a.readyState===4||a&&a.addEventListener&&a.addEventListener("load",()=>{this._requestDraw()})}_useBufferCanvas(){const a=!!this.cornerRadius(),h=this.hasShadow();return a&&h?!0:super._useBufferCanvas(!0)}_sceneFunc(a){const h=this.getWidth(),l=this.getHeight(),d=this.cornerRadius(),p=this.attrs.image;let m;if(p){const c=this.attrs.cropWidth,f=this.attrs.cropHeight;c&&f?m=[p,this.cropX(),this.cropY(),c,f,0,0,h,l]:m=[p,0,0,h,l]}(this.hasFill()||this.hasStroke()||d)&&(a.beginPath(),d?o.Util.drawRoundedRectPath(a,h,l,d):a.rect(0,0,h,l),a.closePath(),a.fillStrokeShape(this)),p&&(d&&a.clip(),a.drawImage.apply(a,m))}_hitFunc(a){const h=this.width(),l=this.height(),d=this.cornerRadius();a.beginPath(),d?o.Util.drawRoundedRectPath(a,h,l,d):a.rect(0,0,h,l),a.closePath(),a.fillStrokeShape(this)}getWidth(){var a,h;return(a=this.attrs.width)!==null&&a!==void 0?a:(h=this.image())===null||h===void 0?void 0:h.width}getHeight(){var a,h;return(a=this.attrs.height)!==null&&a!==void 0?a:(h=this.image())===null||h===void 0?void 0:h.height}static fromURL(a,h,l=null){const d=o.Util.createImageElement();d.onload=function(){const p=new n({image:d});h(p)},d.onerror=l,d.crossOrigin="Anonymous",d.src=a}}return Oi.Image=n,n.prototype.className="Image",(0,e._registerNode)(n),t.Factory.addGetterSetter(n,"cornerRadius",0,(0,r.getNumberOrArrayOfNumbersValidator)(4)),t.Factory.addGetterSetter(n,"image"),t.Factory.addComponentsGetterSetter(n,"crop",["x","y","width","height"]),t.Factory.addGetterSetter(n,"cropX",0,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(n,"cropY",0,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(n,"cropWidth",0,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(n,"cropHeight",0,(0,r.getNumberValidator)()),Oi}var Ve={},sa;function Yl(){if(sa)return Ve;sa=1,Object.defineProperty(Ve,"__esModule",{value:!0}),Ve.Tag=Ve.Label=void 0;const o=ht(),t=Dt(),i=is(),e=lt(),r=ot(),n=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],s="Change.konva",a="none",h="up",l="right",d="down",p="left",m=n.length;let c=class extends i.Group{constructor(v){super(v),this.on("add.konva",function(x){this._addListeners(x.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(v){let x=this,u;const g=function(){x._sync()};for(u=0;u<m;u++)v.on(n[u]+s,g)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let v=this.getText(),x=this.getTag(),u,g,b,S,C,M,k;if(v&&x){switch(u=v.width(),g=v.height(),b=x.pointerDirection(),S=x.pointerWidth(),k=x.pointerHeight(),C=0,M=0,b){case h:C=u/2,M=-1*k;break;case l:C=u+S,M=g/2;break;case d:C=u/2,M=g+k;break;case p:C=-1*S,M=g/2;break}x.setAttrs({x:-1*C,y:-1*M,width:u,height:g}),v.setAttrs({x:-1*C,y:-1*M})}}};Ve.Label=c,c.prototype.className="Label",(0,r._registerNode)(c);class f extends t.Shape{_sceneFunc(v){const x=this.width(),u=this.height(),g=this.pointerDirection(),b=this.pointerWidth(),S=this.pointerHeight(),C=this.cornerRadius();let M=0,k=0,T=0,A=0;typeof C=="number"?M=k=T=A=Math.min(C,x/2,u/2):(M=Math.min(C[0]||0,x/2,u/2),k=Math.min(C[1]||0,x/2,u/2),A=Math.min(C[2]||0,x/2,u/2),T=Math.min(C[3]||0,x/2,u/2)),v.beginPath(),v.moveTo(M,0),g===h&&(v.lineTo((x-b)/2,0),v.lineTo(x/2,-1*S),v.lineTo((x+b)/2,0)),v.lineTo(x-k,0),v.arc(x-k,k,k,Math.PI*3/2,0,!1),g===l&&(v.lineTo(x,(u-S)/2),v.lineTo(x+b,u/2),v.lineTo(x,(u+S)/2)),v.lineTo(x,u-A),v.arc(x-A,u-A,A,0,Math.PI/2,!1),g===d&&(v.lineTo((x+b)/2,u),v.lineTo(x/2,u+S),v.lineTo((x-b)/2,u)),v.lineTo(T,u),v.arc(T,u-T,T,Math.PI/2,Math.PI,!1),g===p&&(v.lineTo(0,(u+S)/2),v.lineTo(-1*b,u/2),v.lineTo(0,(u-S)/2)),v.lineTo(0,M),v.arc(M,M,M,Math.PI,Math.PI*3/2,!1),v.closePath(),v.fillStrokeShape(this)}getSelfRect(){let v=0,x=0,u=this.pointerWidth(),g=this.pointerHeight(),b=this.pointerDirection(),S=this.width(),C=this.height();return b===h?(x-=g,C+=g):b===d?C+=g:b===p?(v-=u*1.5,S+=u):b===l&&(S+=u*1.5),{x:v,y:x,width:S,height:C}}}return Ve.Tag=f,f.prototype.className="Tag",(0,r._registerNode)(f),o.Factory.addGetterSetter(f,"pointerDirection",a),o.Factory.addGetterSetter(f,"pointerWidth",0,(0,e.getNumberValidator)()),o.Factory.addGetterSetter(f,"pointerHeight",0,(0,e.getNumberValidator)()),o.Factory.addGetterSetter(f,"cornerRadius",0,(0,e.getNumberOrArrayOfNumbersValidator)(4)),Ve}var Fi={},aa;function Zo(){if(aa)return Fi;aa=1,Object.defineProperty(Fi,"__esModule",{value:!0}),Fi.Rect=void 0;const o=ht(),t=Dt(),i=ot(),e=Tt(),r=lt();let n=class extends t.Shape{_sceneFunc(a){const h=this.cornerRadius(),l=this.width(),d=this.height();a.beginPath(),h?e.Util.drawRoundedRectPath(a,l,d,h):a.rect(0,0,l,d),a.closePath(),a.fillStrokeShape(this)}};return Fi.Rect=n,n.prototype.className="Rect",(0,i._registerNode)(n),o.Factory.addGetterSetter(n,"cornerRadius",0,(0,r.getNumberOrArrayOfNumbersValidator)(4)),Fi}var Di={},oa;function Wl(){if(oa)return Di;oa=1,Object.defineProperty(Di,"__esModule",{value:!0}),Di.RegularPolygon=void 0;const o=ht(),t=Dt(),i=lt(),e=ot();let r=class extends t.Shape{_sceneFunc(s){const a=this._getPoints();s.beginPath(),s.moveTo(a[0].x,a[0].y);for(let h=1;h<a.length;h++)s.lineTo(a[h].x,a[h].y);s.closePath(),s.fillStrokeShape(this)}_getPoints(){const s=this.attrs.sides,a=this.attrs.radius||0,h=[];for(let l=0;l<s;l++)h.push({x:a*Math.sin(l*2*Math.PI/s),y:-1*a*Math.cos(l*2*Math.PI/s)});return h}getSelfRect(){const s=this._getPoints();let a=s[0].x,h=s[0].y,l=s[0].x,d=s[0].y;return s.forEach(p=>{a=Math.min(a,p.x),h=Math.max(h,p.x),l=Math.min(l,p.y),d=Math.max(d,p.y)}),{x:a,y:l,width:h-a,height:d-l}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(s){this.radius(s/2)}setHeight(s){this.radius(s/2)}};return Di.RegularPolygon=r,r.prototype.className="RegularPolygon",r.prototype._centroid=!0,r.prototype._attrsAffectingSize=["radius"],(0,e._registerNode)(r),o.Factory.addGetterSetter(r,"radius",0,(0,i.getNumberValidator)()),o.Factory.addGetterSetter(r,"sides",0,(0,i.getNumberValidator)()),Di}var Ni={},ha;function Xl(){if(ha)return Ni;ha=1,Object.defineProperty(Ni,"__esModule",{value:!0}),Ni.Ring=void 0;const o=ht(),t=Dt(),i=lt(),e=ot(),r=Math.PI*2;let n=class extends t.Shape{_sceneFunc(a){a.beginPath(),a.arc(0,0,this.innerRadius(),0,r,!1),a.moveTo(this.outerRadius(),0),a.arc(0,0,this.outerRadius(),r,0,!0),a.closePath(),a.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(a){this.outerRadius(a/2)}setHeight(a){this.outerRadius(a/2)}};return Ni.Ring=n,n.prototype.className="Ring",n.prototype._centroid=!0,n.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,e._registerNode)(n),o.Factory.addGetterSetter(n,"innerRadius",0,(0,i.getNumberValidator)()),o.Factory.addGetterSetter(n,"outerRadius",0,(0,i.getNumberValidator)()),Ni}var Ii={},la;function Kl(){if(la)return Ii;la=1,Object.defineProperty(Ii,"__esModule",{value:!0}),Ii.Sprite=void 0;const o=ht(),t=Dt(),i=rs(),e=lt(),r=ot();let n=class extends t.Shape{constructor(a){super(a),this._updated=!0,this.anim=new i.Animation(()=>{const h=this._updated;return this._updated=!1,h}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(a){const h=this.animation(),l=this.frameIndex(),d=l*4,p=this.animations()[h],m=this.frameOffsets(),c=p[d+0],f=p[d+1],_=p[d+2],v=p[d+3],x=this.image();if((this.hasFill()||this.hasStroke())&&(a.beginPath(),a.rect(0,0,_,v),a.closePath(),a.fillStrokeShape(this)),x)if(m){const u=m[h],g=l*2;a.drawImage(x,c,f,_,v,u[g+0],u[g+1],_,v)}else a.drawImage(x,c,f,_,v,0,0,_,v)}_hitFunc(a){const h=this.animation(),l=this.frameIndex(),d=l*4,p=this.animations()[h],m=this.frameOffsets(),c=p[d+2],f=p[d+3];if(a.beginPath(),m){const _=m[h],v=l*2;a.rect(_[v+0],_[v+1],c,f)}else a.rect(0,0,c,f);a.closePath(),a.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const a=this;this.interval=setInterval(function(){a._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const a=this.getLayer();this.anim.setLayers(a),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const a=this.frameIndex(),h=this.animation(),l=this.animations(),d=l[h],p=d.length/4;a<p-1?this.frameIndex(a+1):this.frameIndex(0)}};return Ii.Sprite=n,n.prototype.className="Sprite",(0,r._registerNode)(n),o.Factory.addGetterSetter(n,"animation"),o.Factory.addGetterSetter(n,"animations"),o.Factory.addGetterSetter(n,"frameOffsets"),o.Factory.addGetterSetter(n,"image"),o.Factory.addGetterSetter(n,"frameIndex",0,(0,e.getNumberValidator)()),o.Factory.addGetterSetter(n,"frameRate",17,(0,e.getNumberValidator)()),o.Factory.backCompat(n,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"}),Ii}var Li={},ca;function jl(){if(ca)return Li;ca=1,Object.defineProperty(Li,"__esModule",{value:!0}),Li.Star=void 0;const o=ht(),t=Dt(),i=lt(),e=ot();let r=class extends t.Shape{_sceneFunc(s){const a=this.innerRadius(),h=this.outerRadius(),l=this.numPoints();s.beginPath(),s.moveTo(0,0-h);for(let d=1;d<l*2;d++){const p=d%2===0?h:a,m=p*Math.sin(d*Math.PI/l),c=-1*p*Math.cos(d*Math.PI/l);s.lineTo(m,c)}s.closePath(),s.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(s){this.outerRadius(s/2)}setHeight(s){this.outerRadius(s/2)}};return Li.Star=r,r.prototype.className="Star",r.prototype._centroid=!0,r.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,e._registerNode)(r),o.Factory.addGetterSetter(r,"numPoints",5,(0,i.getNumberValidator)()),o.Factory.addGetterSetter(r,"innerRadius",0,(0,i.getNumberValidator)()),o.Factory.addGetterSetter(r,"outerRadius",0,(0,i.getNumberValidator)()),Li}var ei={},da;function th(){if(da)return ei;da=1,Object.defineProperty(ei,"__esModule",{value:!0}),ei.Text=void 0,ei.stringToArray=s;const o=Tt(),t=ht(),i=Dt(),e=ot(),r=lt(),n=ot();function s(K){return[...K].reduce((z,Y,L,G)=>(new RegExp("\\p{Emoji_Modifier_Base}\\p{Emoji_Modifier}?(?:\\u200D\\p{Emoji_Presentation})+","u").test(Y)?z.push(Y):new RegExp("\\p{Regional_Indicator}{2}","u").test(Y+(G[L+1]||""))?z.push(Y+G[L+1]):L>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(Y)?z[z.length-1]+=Y:z.push(Y),z),[])}const a="auto",h="center",l="inherit",d="justify",p="Change.konva",m="2d",c="-",f="left",_="text",v="Text",x="top",u="bottom",g="middle",b="normal",S="px ",C=" ",M="right",k="rtl",T="word",A="char",R="none",D="…",y=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],P=y.length;function w(K){return K.split(",").map(z=>{z=z.trim();const Y=z.indexOf(" ")>=0,L=z.indexOf('"')>=0||z.indexOf("'")>=0;return Y&&!L&&(z=`"${z}"`),z}).join(", ")}let E;function O(){return E||(E=o.Util.createCanvasElement().getContext(m),E)}function I(K){K.fillText(this._partialText,this._partialTextX,this._partialTextY)}function V(K){K.setAttr("miterLimit",2),K.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function B(K){return K=K||{},!K.fillLinearGradientColorStops&&!K.fillRadialGradientColorStops&&!K.fillPatternImage&&(K.fill=K.fill||"black"),K}let q=class extends i.Shape{constructor(z){super(B(z)),this._partialTextX=0,this._partialTextY=0;for(let Y=0;Y<P;Y++)this.on(y[Y]+p,this._setTextData);this._setTextData()}_sceneFunc(z){const Y=this.textArr,L=Y.length;if(!this.text())return;let G=this.padding(),F=this.fontSize(),N=this.lineHeight()*F,U=this.verticalAlign(),X=this.direction(),j=0,$=this.align(),st=this.getWidth(),tt=this.letterSpacing(),it=this.fill(),ft=this.textDecoration(),ut=ft.indexOf("underline")!==-1,wt=ft.indexOf("line-through")!==-1,H;X=X===l?z.direction:X;let W=N/2,J=g;if(e.Konva._fixTextRendering){const dt=this.measureSize("M");J="alphabetic",W=(dt.fontBoundingBoxAscent-dt.fontBoundingBoxDescent)/2+N/2}var Q=0,Z=0;for(X===k&&z.setAttr("direction",X),z.setAttr("font",this._getContextFont()),z.setAttr("textBaseline",J),z.setAttr("textAlign",f),U===g?j=(this.getHeight()-L*N-G*2)/2:U===u&&(j=this.getHeight()-L*N-G*2),z.translate(G,j+G),H=0;H<L;H++){var Q=0,Z=0,nt=Y[H],rt=nt.text,at=nt.width,et=nt.lastInParagraph,_t,pt,yt;if(z.save(),$===M?Q+=st-at-G*2:$===h&&(Q+=(st-at-G*2)/2),ut){z.save(),z.beginPath();const Rt=e.Konva._fixTextRendering?Math.round(F/4):Math.round(F/2),It=Q,he=W+Z+Rt;z.moveTo(It,he),_t=rt.split(" ").length-1,pt=_t===0,yt=$===d&&!et?st-G*2:at,z.lineTo(It+Math.round(yt),he),z.lineWidth=F/15;const Ge=this._getLinearGradient();z.strokeStyle=Ge||it,z.stroke(),z.restore()}if(wt){z.save(),z.beginPath();const Rt=e.Konva._fixTextRendering?-Math.round(F/4):0;z.moveTo(Q,W+Z+Rt),_t=rt.split(" ").length-1,pt=_t===0,yt=$===d&&et&&!pt?st-G*2:at,z.lineTo(Q+Math.round(yt),W+Z+Rt),z.lineWidth=F/15;const It=this._getLinearGradient();z.strokeStyle=It||it,z.stroke(),z.restore()}if(X!==k&&(tt!==0||$===d)){_t=rt.split(" ").length-1;const Rt=s(rt);for(let It=0;It<Rt.length;It++){const he=Rt[It];he===" "&&!et&&$===d&&(Q+=(st-G*2-at)/_t),this._partialTextX=Q,this._partialTextY=W+Z,this._partialText=he,z.fillStrokeShape(this),Q+=this.measureSize(he).width+tt}}else tt!==0&&z.setAttr("letterSpacing",`${tt}px`),this._partialTextX=Q,this._partialTextY=W+Z,this._partialText=rt,z.fillStrokeShape(this);z.restore(),L>1&&(W+=N)}}_hitFunc(z){const Y=this.getWidth(),L=this.getHeight();z.beginPath(),z.rect(0,0,Y,L),z.closePath(),z.fillStrokeShape(this)}setText(z){const Y=o.Util._isString(z)?z:z==null?"":z+"";return this._setAttr(_,Y),this}getWidth(){return this.attrs.width===a||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===a||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return o.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(z){var Y,L,G,F,N,U,X,j,$,st,tt;let it=O(),ft=this.fontSize(),ut;it.save(),it.font=this._getContextFont(),ut=it.measureText(z),it.restore();const wt=ft/100;return{actualBoundingBoxAscent:(Y=ut.actualBoundingBoxAscent)!==null&&Y!==void 0?Y:71.58203125*wt,actualBoundingBoxDescent:(L=ut.actualBoundingBoxDescent)!==null&&L!==void 0?L:0,actualBoundingBoxLeft:(G=ut.actualBoundingBoxLeft)!==null&&G!==void 0?G:-7.421875*wt,actualBoundingBoxRight:(F=ut.actualBoundingBoxRight)!==null&&F!==void 0?F:75.732421875*wt,alphabeticBaseline:(N=ut.alphabeticBaseline)!==null&&N!==void 0?N:0,emHeightAscent:(U=ut.emHeightAscent)!==null&&U!==void 0?U:100*wt,emHeightDescent:(X=ut.emHeightDescent)!==null&&X!==void 0?X:-20*wt,fontBoundingBoxAscent:(j=ut.fontBoundingBoxAscent)!==null&&j!==void 0?j:91*wt,fontBoundingBoxDescent:($=ut.fontBoundingBoxDescent)!==null&&$!==void 0?$:21*wt,hangingBaseline:(st=ut.hangingBaseline)!==null&&st!==void 0?st:72.80000305175781*wt,ideographicBaseline:(tt=ut.ideographicBaseline)!==null&&tt!==void 0?tt:-21*wt,width:ut.width,height:ft}}_getContextFont(){return this.fontStyle()+C+this.fontVariant()+C+(this.fontSize()+S)+w(this.fontFamily())}_addTextLine(z){this.align()===d&&(z=z.trim());const L=this._getTextWidth(z);return this.textArr.push({text:z,width:L,lastInParagraph:!1})}_getTextWidth(z){const Y=this.letterSpacing(),L=z.length;return O().measureText(z).width+(L?Y*(L-1):0)}_setTextData(){let z=this.text().split(`
`),Y=+this.fontSize(),L=0,G=this.lineHeight()*Y,F=this.attrs.width,N=this.attrs.height,U=F!==a&&F!==void 0,X=N!==a&&N!==void 0,j=this.padding(),$=F-j*2,st=N-j*2,tt=0,it=this.wrap(),ft=it!==R,ut=it!==A&&ft,wt=this.ellipsis();this.textArr=[],O().font=this._getContextFont();const H=wt?this._getTextWidth(D):0;for(let J=0,Q=z.length;J<Q;++J){let Z=z[J],nt=this._getTextWidth(Z);if(U&&nt>$)for(;Z.length>0;){let rt=0,at=Z.length,et="",_t=0;for(;rt<at;){const pt=rt+at>>>1,yt=Z.slice(0,pt+1),dt=this._getTextWidth(yt)+H;dt<=$?(rt=pt+1,et=yt,_t=dt):at=pt}if(et){if(ut){var W;const yt=Z[et.length];(yt===C||yt===c)&&_t<=$?W=et.length:W=Math.max(et.lastIndexOf(C),et.lastIndexOf(c))+1,W>0&&(rt=W,et=et.slice(0,rt),_t=this._getTextWidth(et))}if(et=et.trimRight(),this._addTextLine(et),L=Math.max(L,_t),tt+=G,this._shouldHandleEllipsis(tt)){this._tryToAddEllipsisToLastLine();break}if(Z=Z.slice(rt),Z=Z.trimLeft(),Z.length>0&&(nt=this._getTextWidth(Z),nt<=$)){this._addTextLine(Z),tt+=G,L=Math.max(L,nt);break}}else break}else this._addTextLine(Z),tt+=G,L=Math.max(L,nt),this._shouldHandleEllipsis(tt)&&J<Q-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),X&&tt+G>st)break}this.textHeight=Y,this.textWidth=L}_shouldHandleEllipsis(z){const Y=+this.fontSize(),L=this.lineHeight()*Y,G=this.attrs.height,F=G!==a&&G!==void 0,N=this.padding(),U=G-N*2;return!(this.wrap()!==R)||F&&z+L>U}_tryToAddEllipsisToLastLine(){const z=this.attrs.width,Y=z!==a&&z!==void 0,L=this.padding(),G=z-L*2,F=this.ellipsis(),N=this.textArr[this.textArr.length-1];!N||!F||(Y&&(this._getTextWidth(N.text+D)<G||(N.text=N.text.slice(0,N.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(N.text+D))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const z=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,Y=this.hasShadow();return z&&Y?!0:super._useBufferCanvas()}};return ei.Text=q,q.prototype._fillFunc=I,q.prototype._strokeFunc=V,q.prototype.className=v,q.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],(0,n._registerNode)(q),t.Factory.overWriteSetter(q,"width",(0,r.getNumberOrAutoValidator)()),t.Factory.overWriteSetter(q,"height",(0,r.getNumberOrAutoValidator)()),t.Factory.addGetterSetter(q,"direction",l),t.Factory.addGetterSetter(q,"fontFamily","Arial"),t.Factory.addGetterSetter(q,"fontSize",12,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(q,"fontStyle",b),t.Factory.addGetterSetter(q,"fontVariant",b),t.Factory.addGetterSetter(q,"padding",0,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(q,"align",f),t.Factory.addGetterSetter(q,"verticalAlign",x),t.Factory.addGetterSetter(q,"lineHeight",1,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(q,"wrap",T),t.Factory.addGetterSetter(q,"ellipsis",!1,(0,r.getBooleanValidator)()),t.Factory.addGetterSetter(q,"letterSpacing",0,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(q,"text","",(0,r.getStringValidator)()),t.Factory.addGetterSetter(q,"textDecoration",""),ei}var Gi={},ua;function $l(){if(ua)return Gi;ua=1,Object.defineProperty(Gi,"__esModule",{value:!0}),Gi.TextPath=void 0;const o=Tt(),t=ht(),i=Dt(),e=ns(),r=th(),n=lt(),s=ot(),a="",h="normal";function l(m){m.fillText(this.partialText,0,0)}function d(m){m.strokeText(this.partialText,0,0)}let p=class extends i.Shape{constructor(c){super(c),this.dummyCanvas=o.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return e.Path.getPathLength(this.dataArray)}_getPointAtLength(c){if(!this.attrs.data)return null;const f=this.pathLength;return c-1>f?null:e.Path.getPointAtLengthOfDataArray(c,this.dataArray)}_readDataAttribute(){this.dataArray=e.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(c){c.setAttr("font",this._getContextFont()),c.setAttr("textBaseline",this.textBaseline()),c.setAttr("textAlign","left"),c.save();const f=this.textDecoration(),_=this.fill(),v=this.fontSize(),x=this.glyphInfo;f==="underline"&&c.beginPath();for(let u=0;u<x.length;u++){c.save();const g=x[u].p0;c.translate(g.x,g.y),c.rotate(x[u].rotation),this.partialText=x[u].text,c.fillStrokeShape(this),f==="underline"&&(u===0&&c.moveTo(0,v/2+1),c.lineTo(v,v/2+1)),c.restore()}f==="underline"&&(c.strokeStyle=_,c.lineWidth=v/20,c.stroke()),c.restore()}_hitFunc(c){c.beginPath();const f=this.glyphInfo;if(f.length>=1){const _=f[0].p0;c.moveTo(_.x,_.y)}for(let _=0;_<f.length;_++){const v=f[_].p1;c.lineTo(v.x,v.y)}c.setAttr("lineWidth",this.fontSize()),c.setAttr("strokeStyle",this.colorKey),c.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return o.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(c){return r.Text.prototype.setText.call(this,c)}_getContextFont(){return r.Text.prototype._getContextFont.call(this)}_getTextSize(c){const _=this.dummyCanvas.getContext("2d");_.save(),_.font=this._getContextFont();const v=_.measureText(c);return _.restore(),{width:v.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:c,height:f}=this._getTextSize(this.attrs.text);if(this.textWidth=c,this.textHeight=f,this.glyphInfo=[],!this.attrs.data)return null;const _=this.letterSpacing(),v=this.align(),x=this.kerningFunc(),u=Math.max(this.textWidth+((this.attrs.text||"").length-1)*_,0);let g=0;v==="center"&&(g=Math.max(0,this.pathLength/2-u/2)),v==="right"&&(g=Math.max(0,this.pathLength-u));const b=(0,r.stringToArray)(this.text());let S=g;for(let C=0;C<b.length;C++){const M=this._getPointAtLength(S);if(!M)return;let k=this._getTextSize(b[C]).width+_;if(b[C]===" "&&v==="justify"){const P=this.text().split(" ").length-1;k+=(this.pathLength-u)/P}const T=this._getPointAtLength(S+k);if(!T)return;const A=e.Path.getLineLength(M.x,M.y,T.x,T.y);let R=0;if(x)try{R=x(b[C-1],b[C])*this.fontSize()}catch{R=0}M.x+=R,T.x+=R,this.textWidth+=R;const D=e.Path.getPointOnLine(R+A/2,M.x,M.y,T.x,T.y),y=Math.atan2(T.y-M.y,T.x-M.x);this.glyphInfo.push({transposeX:D.x,transposeY:D.y,text:b[C],rotation:y,p0:M,p1:T}),S+=k}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const c=[];this.glyphInfo.forEach(function(S){c.push(S.p0.x),c.push(S.p0.y),c.push(S.p1.x),c.push(S.p1.y)});let f=c[0]||0,_=c[0]||0,v=c[1]||0,x=c[1]||0,u,g;for(let S=0;S<c.length/2;S++)u=c[S*2],g=c[S*2+1],f=Math.min(f,u),_=Math.max(_,u),v=Math.min(v,g),x=Math.max(x,g);const b=this.fontSize();return{x:f-b/2,y:v-b/2,width:_-f+b,height:x-v+b}}destroy(){return o.Util.releaseCanvas(this.dummyCanvas),super.destroy()}};return Gi.TextPath=p,p.prototype._fillFunc=l,p.prototype._strokeFunc=d,p.prototype._fillFuncHit=l,p.prototype._strokeFuncHit=d,p.prototype.className="TextPath",p.prototype._attrsAffectingSize=["text","fontSize","data"],(0,s._registerNode)(p),t.Factory.addGetterSetter(p,"data"),t.Factory.addGetterSetter(p,"fontFamily","Arial"),t.Factory.addGetterSetter(p,"fontSize",12,(0,n.getNumberValidator)()),t.Factory.addGetterSetter(p,"fontStyle",h),t.Factory.addGetterSetter(p,"align","left"),t.Factory.addGetterSetter(p,"letterSpacing",0,(0,n.getNumberValidator)()),t.Factory.addGetterSetter(p,"textBaseline","middle"),t.Factory.addGetterSetter(p,"fontVariant",h),t.Factory.addGetterSetter(p,"text",a),t.Factory.addGetterSetter(p,"textDecoration",null),t.Factory.addGetterSetter(p,"kerningFunc",null),Gi}var Ui={},fa;function Ql(){if(fa)return Ui;fa=1,Object.defineProperty(Ui,"__esModule",{value:!0}),Ui.Transformer=void 0;const o=Tt(),t=ht(),i=kt(),e=Dt(),r=Zo(),n=is(),s=ot(),a=lt(),h=ot(),l="tr-konva",d=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(k=>k+`.${l}`).join(" "),p="nodesRect",m=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],c={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},f="ontouchstart"in s.Konva._global;function _(k,T,A){if(k==="rotater")return A;T+=o.Util.degToRad(c[k]||0);const R=(o.Util.radToDeg(T)%360+360)%360;return o.Util._inRange(R,315+22.5,360)||o.Util._inRange(R,0,22.5)?"ns-resize":o.Util._inRange(R,45-22.5,45+22.5)?"nesw-resize":o.Util._inRange(R,90-22.5,90+22.5)?"ew-resize":o.Util._inRange(R,135-22.5,135+22.5)?"nwse-resize":o.Util._inRange(R,180-22.5,180+22.5)?"ns-resize":o.Util._inRange(R,225-22.5,225+22.5)?"nesw-resize":o.Util._inRange(R,270-22.5,270+22.5)?"ew-resize":o.Util._inRange(R,315-22.5,315+22.5)?"nwse-resize":(o.Util.error("Transformer has unknown angle for cursor detection: "+R),"pointer")}const v=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function x(k){return{x:k.x+k.width/2*Math.cos(k.rotation)+k.height/2*Math.sin(-k.rotation),y:k.y+k.height/2*Math.cos(k.rotation)+k.width/2*Math.sin(k.rotation)}}function u(k,T,A){const R=A.x+(k.x-A.x)*Math.cos(T)-(k.y-A.y)*Math.sin(T),D=A.y+(k.x-A.x)*Math.sin(T)+(k.y-A.y)*Math.cos(T);return{...k,rotation:k.rotation+T,x:R,y:D}}function g(k,T){const A=x(k);return u(k,T,A)}function b(k,T,A){let R=T;for(let D=0;D<k.length;D++){const y=s.Konva.getAngle(k[D]),P=Math.abs(y-T)%(Math.PI*2);Math.min(P,Math.PI*2-P)<A&&(R=y)}return R}let S=0,C=class extends n.Group{constructor(T){super(T),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(d,this.update),this.getNode()&&this.update()}attachTo(T){return this.setNode(T),this}setNode(T){return o.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([T])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return l+this._id}setNodes(T=[]){this._nodes&&this._nodes.length&&this.detach();const A=T.filter(D=>D.isAncestorOf(this)?(o.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=T=A,T.length===1&&this.useSingleNodeRotation()?this.rotation(T[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(D=>{const y=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()},P=D._attrsAffectingSize.map(w=>w+"Change."+this._getEventNamespace()).join(" ");D.on(P,y),D.on(m.map(w=>w+`.${this._getEventNamespace()}`).join(" "),y),D.on(`absoluteTransformChange.${this._getEventNamespace()}`,y),this._proxyDrag(D)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(T){let A;T.on(`dragstart.${this._getEventNamespace()}`,R=>{A=T.getAbsolutePosition(),!this.isDragging()&&T!==this.findOne(".back")&&this.startDrag(R,!1)}),T.on(`dragmove.${this._getEventNamespace()}`,R=>{if(!A)return;const D=T.getAbsolutePosition(),y=D.x-A.x,P=D.y-A.y;this.nodes().forEach(w=>{if(w===T||w.isDragging())return;const E=w.getAbsolutePosition();w.setAbsolutePosition({x:E.x+y,y:E.y+P}),w.startDrag(R)}),A=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(T=>{T.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(p),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(p,this.__getNodeRect)}__getNodeShape(T,A=this.rotation(),R){const D=T.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),y=T.getAbsoluteScale(R),P=T.getAbsolutePosition(R),w=D.x*y.x-T.offsetX()*y.x,E=D.y*y.y-T.offsetY()*y.y,O=(s.Konva.getAngle(T.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),I={x:P.x+w*Math.cos(O)+E*Math.sin(-O),y:P.y+E*Math.cos(O)+w*Math.sin(O),width:D.width*y.x,height:D.height*y.y,rotation:O};return u(I,-s.Konva.getAngle(A),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const A=[];this.nodes().map(O=>{const I=O.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),V=[{x:I.x,y:I.y},{x:I.x+I.width,y:I.y},{x:I.x+I.width,y:I.y+I.height},{x:I.x,y:I.y+I.height}],B=O.getAbsoluteTransform();V.forEach(function(q){const K=B.point(q);A.push(K)})});const R=new o.Transform;R.rotate(-s.Konva.getAngle(this.rotation()));let D=1/0,y=1/0,P=-1/0,w=-1/0;A.forEach(function(O){const I=R.point(O);D===void 0&&(D=P=I.x,y=w=I.y),D=Math.min(D,I.x),y=Math.min(y,I.y),P=Math.max(P,I.x),w=Math.max(w,I.y)}),R.invert();const E=R.point({x:D,y});return{x:E.x,y:E.y,width:P-D,height:w-y,rotation:s.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),v.forEach(T=>{this._createAnchor(T)}),this._createAnchor("rotater")}_createAnchor(T){const A=new r.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:T+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:f?10:"auto"}),R=this;A.on("mousedown touchstart",function(D){R._handleMouseDown(D)}),A.on("dragstart",D=>{A.stopDrag(),D.cancelBubble=!0}),A.on("dragend",D=>{D.cancelBubble=!0}),A.on("mouseenter",()=>{const D=s.Konva.getAngle(this.rotation()),y=this.rotateAnchorCursor(),P=_(T,D,y);A.getStage().content&&(A.getStage().content.style.cursor=P),this._cursorChange=!0}),A.on("mouseout",()=>{A.getStage().content&&(A.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(A)}_createBack(){const T=new e.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(A,R){const D=R.getParent(),y=D.padding();A.beginPath(),A.rect(-y,-y,R.width()+y*2,R.height()+y*2),A.moveTo(R.width()/2,-y),D.rotateEnabled()&&D.rotateLineVisible()&&A.lineTo(R.width()/2,-D.rotateAnchorOffset()*o.Util._sign(R.height())-y),A.fillStrokeShape(R)},hitFunc:(A,R)=>{if(!this.shouldOverdrawWholeArea())return;const D=this.padding();A.beginPath(),A.rect(-D,-D,R.width()+D*2,R.height()+D*2),A.fillStrokeShape(R)}});this.add(T),this._proxyDrag(T),T.on("dragstart",A=>{A.cancelBubble=!0}),T.on("dragmove",A=>{A.cancelBubble=!0}),T.on("dragend",A=>{A.cancelBubble=!0}),this.on("dragmove",A=>{this.update()})}_handleMouseDown(T){if(this._transforming)return;this._movingAnchorName=T.target.name().split(" ")[0];const A=this._getNodeRect(),R=A.width,D=A.height,y=Math.sqrt(Math.pow(R,2)+Math.pow(D,2));this.sin=Math.abs(D/y),this.cos=Math.abs(R/y),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const P=T.target.getAbsolutePosition(),w=T.target.getStage().getPointerPosition();this._anchorDragOffset={x:w.x-P.x,y:w.y-P.y},S++,this._fire("transformstart",{evt:T.evt,target:this.getNode()}),this._nodes.forEach(E=>{E._fire("transformstart",{evt:T.evt,target:E})})}_handleMouseMove(T){let A,R,D;const y=this.findOne("."+this._movingAnchorName),P=y.getStage();P.setPointersPositions(T);const w=P.getPointerPosition();let E={x:w.x-this._anchorDragOffset.x,y:w.y-this._anchorDragOffset.y};const O=y.getAbsolutePosition();this.anchorDragBoundFunc()&&(E=this.anchorDragBoundFunc()(O,E,T)),y.setAbsolutePosition(E);const I=y.getAbsolutePosition();if(O.x===I.x&&O.y===I.y)return;if(this._movingAnchorName==="rotater"){const U=this._getNodeRect();A=y.x()-U.width/2,R=-y.y()+U.height/2;let X=Math.atan2(-R,A)+Math.PI/2;U.height<0&&(X-=Math.PI);const $=s.Konva.getAngle(this.rotation())+X,st=s.Konva.getAngle(this.rotationSnapTolerance()),it=b(this.rotationSnaps(),$,st)-U.rotation,ft=g(U,it);this._fitNodesInto(ft,T);return}const V=this.shiftBehavior();let B;V==="inverted"?B=this.keepRatio()&&!T.shiftKey:V==="none"?B=this.keepRatio():B=this.keepRatio()||T.shiftKey;var L=this.centeredScaling()||T.altKey;if(this._movingAnchorName==="top-left"){if(B){var q=L?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};D=Math.sqrt(Math.pow(q.x-y.x(),2)+Math.pow(q.y-y.y(),2));var K=this.findOne(".top-left").x()>q.x?-1:1,z=this.findOne(".top-left").y()>q.y?-1:1;A=D*this.cos*K,R=D*this.sin*z,this.findOne(".top-left").x(q.x-A),this.findOne(".top-left").y(q.y-R)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(y.y());else if(this._movingAnchorName==="top-right"){if(B){var q=L?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};D=Math.sqrt(Math.pow(y.x()-q.x,2)+Math.pow(q.y-y.y(),2));var K=this.findOne(".top-right").x()<q.x?-1:1,z=this.findOne(".top-right").y()>q.y?-1:1;A=D*this.cos*K,R=D*this.sin*z,this.findOne(".top-right").x(q.x+A),this.findOne(".top-right").y(q.y-R)}var Y=y.position();this.findOne(".top-left").y(Y.y),this.findOne(".bottom-right").x(Y.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(y.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(y.x());else if(this._movingAnchorName==="bottom-left"){if(B){var q=L?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};D=Math.sqrt(Math.pow(q.x-y.x(),2)+Math.pow(y.y()-q.y,2));var K=q.x<y.x()?-1:1,z=y.y()<q.y?-1:1;A=D*this.cos*K,R=D*this.sin*z,y.x(q.x-A),y.y(q.y+R)}Y=y.position(),this.findOne(".top-left").x(Y.x),this.findOne(".bottom-right").y(Y.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(y.y());else if(this._movingAnchorName==="bottom-right"){if(B){var q=L?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};D=Math.sqrt(Math.pow(y.x()-q.x,2)+Math.pow(y.y()-q.y,2));var K=this.findOne(".bottom-right").x()<q.x?-1:1,z=this.findOne(".bottom-right").y()<q.y?-1:1;A=D*this.cos*K,R=D*this.sin*z,this.findOne(".bottom-right").x(q.x+A),this.findOne(".bottom-right").y(q.y+R)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));var L=this.centeredScaling()||T.altKey;if(L){const U=this.findOne(".top-left"),X=this.findOne(".bottom-right"),j=U.x(),$=U.y(),st=this.getWidth()-X.x(),tt=this.getHeight()-X.y();X.move({x:-j,y:-$}),U.move({x:st,y:tt})}const G=this.findOne(".top-left").getAbsolutePosition();A=G.x,R=G.y;const F=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),N=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:A,y:R,width:F,height:N,rotation:s.Konva.getAngle(this.rotation())},T)}_handleMouseUp(T){this._removeEvents(T)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(T){var A;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const R=this.getNode();S--,this._fire("transformend",{evt:T,target:R}),(A=this.getLayer())===null||A===void 0||A.batchDraw(),R&&this._nodes.forEach(D=>{var y;D._fire("transformend",{evt:T,target:D}),(y=D.getLayer())===null||y===void 0||y.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(T,A){const R=this._getNodeRect(),D=1;if(o.Util._inRange(T.width,-this.padding()*2-D,D)){this.update();return}if(o.Util._inRange(T.height,-this.padding()*2-D,D)){this.update();return}const y=new o.Transform;if(y.rotate(s.Konva.getAngle(this.rotation())),this._movingAnchorName&&T.width<0&&this._movingAnchorName.indexOf("left")>=0){const B=y.point({x:-this.padding()*2,y:0});T.x+=B.x,T.y+=B.y,T.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=B.x,this._anchorDragOffset.y-=B.y}else if(this._movingAnchorName&&T.width<0&&this._movingAnchorName.indexOf("right")>=0){const B=y.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=B.x,this._anchorDragOffset.y-=B.y,T.width+=this.padding()*2}if(this._movingAnchorName&&T.height<0&&this._movingAnchorName.indexOf("top")>=0){const B=y.point({x:0,y:-this.padding()*2});T.x+=B.x,T.y+=B.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=B.x,this._anchorDragOffset.y-=B.y,T.height+=this.padding()*2}else if(this._movingAnchorName&&T.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const B=y.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=B.x,this._anchorDragOffset.y-=B.y,T.height+=this.padding()*2}if(this.boundBoxFunc()){const B=this.boundBoxFunc()(R,T);B?T=B:o.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const P=1e7,w=new o.Transform;w.translate(R.x,R.y),w.rotate(R.rotation),w.scale(R.width/P,R.height/P);const E=new o.Transform,O=T.width/P,I=T.height/P;this.flipEnabled()===!1?(E.translate(T.x,T.y),E.rotate(T.rotation),E.translate(T.width<0?T.width:0,T.height<0?T.height:0),E.scale(Math.abs(O),Math.abs(I))):(E.translate(T.x,T.y),E.rotate(T.rotation),E.scale(O,I));const V=E.multiply(w.invert());this._nodes.forEach(B=>{var q;const K=B.getParent().getAbsoluteTransform(),z=B.getTransform().copy();z.translate(B.offsetX(),B.offsetY());const Y=new o.Transform;Y.multiply(K.copy().invert()).multiply(V).multiply(K).multiply(z);const L=Y.decompose();B.setAttrs(L),(q=B.getLayer())===null||q===void 0||q.batchDraw()}),this.rotation(o.Util._getRotation(T.rotation)),this._nodes.forEach(B=>{this._fire("transform",{evt:A,target:B}),B._fire("transform",{evt:A,target:B})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(T,A){this.findOne(T).setAttrs(A)}update(){var T;const A=this._getNodeRect();this.rotation(o.Util._getRotation(A.rotation));const R=A.width,D=A.height,y=this.enabledAnchors(),P=this.resizeEnabled(),w=this.padding(),E=this.anchorSize(),O=this.find("._anchor");O.forEach(V=>{V.setAttrs({width:E,height:E,offsetX:E/2,offsetY:E/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:E/2+w,offsetY:E/2+w,visible:P&&y.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:R/2,y:0,offsetY:E/2+w,visible:P&&y.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:R,y:0,offsetX:E/2-w,offsetY:E/2+w,visible:P&&y.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:D/2,offsetX:E/2+w,visible:P&&y.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:R,y:D/2,offsetX:E/2-w,visible:P&&y.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:D,offsetX:E/2+w,offsetY:E/2-w,visible:P&&y.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:R/2,y:D,offsetY:E/2-w,visible:P&&y.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:R,y:D,offsetX:E/2-w,offsetY:E/2-w,visible:P&&y.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:R/2,y:-this.rotateAnchorOffset()*o.Util._sign(D)-w,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:R,height:D,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const I=this.anchorStyleFunc();I&&O.forEach(V=>{I(V)}),(T=this.getLayer())===null||T===void 0||T.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const T=this.findOne("."+this._movingAnchorName);T&&T.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),n.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return i.Node.prototype.toObject.call(this)}clone(T){return i.Node.prototype.clone.call(this,T)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}};Ui.Transformer=C,C.isTransforming=()=>S>0;function M(k){return k instanceof Array||o.Util.warn("enabledAnchors value should be an array"),k instanceof Array&&k.forEach(function(T){v.indexOf(T)===-1&&o.Util.warn("Unknown anchor name: "+T+". Available names are: "+v.join(", "))}),k||[]}return C.prototype.className="Transformer",(0,h._registerNode)(C),t.Factory.addGetterSetter(C,"enabledAnchors",v,M),t.Factory.addGetterSetter(C,"flipEnabled",!0,(0,a.getBooleanValidator)()),t.Factory.addGetterSetter(C,"resizeEnabled",!0),t.Factory.addGetterSetter(C,"anchorSize",10,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(C,"rotateEnabled",!0),t.Factory.addGetterSetter(C,"rotateLineVisible",!0),t.Factory.addGetterSetter(C,"rotationSnaps",[]),t.Factory.addGetterSetter(C,"rotateAnchorOffset",50,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(C,"rotateAnchorCursor","crosshair"),t.Factory.addGetterSetter(C,"rotationSnapTolerance",5,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(C,"borderEnabled",!0),t.Factory.addGetterSetter(C,"anchorStroke","rgb(0, 161, 255)"),t.Factory.addGetterSetter(C,"anchorStrokeWidth",1,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(C,"anchorFill","white"),t.Factory.addGetterSetter(C,"anchorCornerRadius",0,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(C,"borderStroke","rgb(0, 161, 255)"),t.Factory.addGetterSetter(C,"borderStrokeWidth",1,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(C,"borderDash"),t.Factory.addGetterSetter(C,"keepRatio",!0),t.Factory.addGetterSetter(C,"shiftBehavior","default"),t.Factory.addGetterSetter(C,"centeredScaling",!1),t.Factory.addGetterSetter(C,"ignoreStroke",!1),t.Factory.addGetterSetter(C,"padding",0,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(C,"node"),t.Factory.addGetterSetter(C,"nodes"),t.Factory.addGetterSetter(C,"boundBoxFunc"),t.Factory.addGetterSetter(C,"anchorDragBoundFunc"),t.Factory.addGetterSetter(C,"anchorStyleFunc"),t.Factory.addGetterSetter(C,"shouldOverdrawWholeArea",!1),t.Factory.addGetterSetter(C,"useSingleNodeRotation",!0),t.Factory.backCompat(C,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"}),Ui}var Bi={},ga;function Jl(){if(ga)return Bi;ga=1,Object.defineProperty(Bi,"__esModule",{value:!0}),Bi.Wedge=void 0;const o=ht(),t=Dt(),i=ot(),e=lt(),r=ot();let n=class extends t.Shape{_sceneFunc(a){a.beginPath(),a.arc(0,0,this.radius(),0,i.Konva.getAngle(this.angle()),this.clockwise()),a.lineTo(0,0),a.closePath(),a.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(a){this.radius(a/2)}setHeight(a){this.radius(a/2)}};return Bi.Wedge=n,n.prototype.className="Wedge",n.prototype._centroid=!0,n.prototype._attrsAffectingSize=["radius"],(0,r._registerNode)(n),o.Factory.addGetterSetter(n,"radius",0,(0,e.getNumberValidator)()),o.Factory.addGetterSetter(n,"angle",0,(0,e.getNumberValidator)()),o.Factory.addGetterSetter(n,"clockwise",!1),o.Factory.backCompat(n,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"}),Bi}var Vi={},_a;function Zl(){if(_a)return Vi;_a=1,Object.defineProperty(Vi,"__esModule",{value:!0}),Vi.Blur=void 0;const o=ht(),t=kt(),i=lt();function e(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const r=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],n=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function s(h,l){const d=h.data,p=h.width,m=h.height;let c,f,_,v,x,u,g,b,S,C,M,k,T,A,R,D,y,P,w,E,O,I,V,B,q=l+l+1,K=p-1,z=m-1,Y=l+1,L=Y*(Y+1)/2,G=new e,F=null,N=G,U=null,X=null,j=r[l],$=n[l];for(_=1;_<q;_++)N=N.next=new e,_===Y&&(F=N);for(N.next=G,g=u=0,f=0;f<m;f++){for(D=y=P=w=b=S=C=M=0,k=Y*(E=d[u]),T=Y*(O=d[u+1]),A=Y*(I=d[u+2]),R=Y*(V=d[u+3]),b+=L*E,S+=L*O,C+=L*I,M+=L*V,N=G,_=0;_<Y;_++)N.r=E,N.g=O,N.b=I,N.a=V,N=N.next;for(_=1;_<Y;_++)v=u+((K<_?K:_)<<2),b+=(N.r=E=d[v])*(B=Y-_),S+=(N.g=O=d[v+1])*B,C+=(N.b=I=d[v+2])*B,M+=(N.a=V=d[v+3])*B,D+=E,y+=O,P+=I,w+=V,N=N.next;for(U=G,X=F,c=0;c<p;c++)d[u+3]=V=M*j>>$,V!==0?(V=255/V,d[u]=(b*j>>$)*V,d[u+1]=(S*j>>$)*V,d[u+2]=(C*j>>$)*V):d[u]=d[u+1]=d[u+2]=0,b-=k,S-=T,C-=A,M-=R,k-=U.r,T-=U.g,A-=U.b,R-=U.a,v=g+((v=c+l+1)<K?v:K)<<2,D+=U.r=d[v],y+=U.g=d[v+1],P+=U.b=d[v+2],w+=U.a=d[v+3],b+=D,S+=y,C+=P,M+=w,U=U.next,k+=E=X.r,T+=O=X.g,A+=I=X.b,R+=V=X.a,D-=E,y-=O,P-=I,w-=V,X=X.next,u+=4;g+=p}for(c=0;c<p;c++){for(y=P=w=D=S=C=M=b=0,u=c<<2,k=Y*(E=d[u]),T=Y*(O=d[u+1]),A=Y*(I=d[u+2]),R=Y*(V=d[u+3]),b+=L*E,S+=L*O,C+=L*I,M+=L*V,N=G,_=0;_<Y;_++)N.r=E,N.g=O,N.b=I,N.a=V,N=N.next;for(x=p,_=1;_<=l;_++)u=x+c<<2,b+=(N.r=E=d[u])*(B=Y-_),S+=(N.g=O=d[u+1])*B,C+=(N.b=I=d[u+2])*B,M+=(N.a=V=d[u+3])*B,D+=E,y+=O,P+=I,w+=V,N=N.next,_<z&&(x+=p);for(u=c,U=G,X=F,f=0;f<m;f++)v=u<<2,d[v+3]=V=M*j>>$,V>0?(V=255/V,d[v]=(b*j>>$)*V,d[v+1]=(S*j>>$)*V,d[v+2]=(C*j>>$)*V):d[v]=d[v+1]=d[v+2]=0,b-=k,S-=T,C-=A,M-=R,k-=U.r,T-=U.g,A-=U.b,R-=U.a,v=c+((v=f+Y)<z?v:z)*p<<2,b+=D+=U.r=d[v],S+=y+=U.g=d[v+1],C+=P+=U.b=d[v+2],M+=w+=U.a=d[v+3],U=U.next,k+=E=X.r,T+=O=X.g,A+=I=X.b,R+=V=X.a,D-=E,y-=O,P-=I,w-=V,X=X.next,u+=p}}const a=function(l){const d=Math.round(this.blurRadius());d>0&&s(l,d)};return Vi.Blur=a,o.Factory.addGetterSetter(t.Node,"blurRadius",0,(0,i.getNumberValidator)(),o.Factory.afterSetFilter),Vi}var zi={},pa;function tc(){if(pa)return zi;pa=1,Object.defineProperty(zi,"__esModule",{value:!0}),zi.Brighten=void 0;const o=ht(),t=kt(),i=lt(),e=function(r){let n=this.brightness()*255,s=r.data,a=s.length,h;for(h=0;h<a;h+=4)s[h]+=n,s[h+1]+=n,s[h+2]+=n};return zi.Brighten=e,o.Factory.addGetterSetter(t.Node,"brightness",0,(0,i.getNumberValidator)(),o.Factory.afterSetFilter),zi}var Hi={},ma;function ec(){if(ma)return Hi;ma=1,Object.defineProperty(Hi,"__esModule",{value:!0}),Hi.Contrast=void 0;const o=ht(),t=kt(),i=lt(),e=function(r){const n=Math.pow((this.contrast()+100)/100,2);let s=r.data,a=s.length,h=150,l=150,d=150,p;for(p=0;p<a;p+=4)h=s[p],l=s[p+1],d=s[p+2],h/=255,h-=.5,h*=n,h+=.5,h*=255,l/=255,l-=.5,l*=n,l+=.5,l*=255,d/=255,d-=.5,d*=n,d+=.5,d*=255,h=h<0?0:h>255?255:h,l=l<0?0:l>255?255:l,d=d<0?0:d>255?255:d,s[p]=h,s[p+1]=l,s[p+2]=d};return Hi.Contrast=e,o.Factory.addGetterSetter(t.Node,"contrast",0,(0,i.getNumberValidator)(),o.Factory.afterSetFilter),Hi}var qi={},ya;function ic(){if(ya)return qi;ya=1,Object.defineProperty(qi,"__esModule",{value:!0}),qi.Emboss=void 0;const o=ht(),t=kt(),i=Tt(),e=lt(),r=function(n){let s=this.embossStrength()*10,a=this.embossWhiteLevel()*255,h=this.embossDirection(),l=this.embossBlend(),d=0,p=0,m=n.data,c=n.width,f=n.height,_=c*4,v=f;switch(h){case"top-left":d=-1,p=-1;break;case"top":d=-1,p=0;break;case"top-right":d=-1,p=1;break;case"right":d=0,p=1;break;case"bottom-right":d=1,p=1;break;case"bottom":d=1,p=0;break;case"bottom-left":d=1,p=-1;break;case"left":d=0,p=-1;break;default:i.Util.error("Unknown emboss direction: "+h)}do{const x=(v-1)*_;let u=d;v+u<1&&(u=0),v+u>f&&(u=0);const g=(v-1+u)*c*4;let b=c;do{const S=x+(b-1)*4;let C=p;b+C<1&&(C=0),b+C>c&&(C=0);const M=g+(b-1+C)*4,k=m[S]-m[M],T=m[S+1]-m[M+1],A=m[S+2]-m[M+2];let R=k;const D=R>0?R:-R,y=T>0?T:-T,P=A>0?A:-A;if(y>D&&(R=T),P>D&&(R=A),R*=s,l){const w=m[S]+R,E=m[S+1]+R,O=m[S+2]+R;m[S]=w>255?255:w<0?0:w,m[S+1]=E>255?255:E<0?0:E,m[S+2]=O>255?255:O<0?0:O}else{let w=a-R;w<0?w=0:w>255&&(w=255),m[S]=m[S+1]=m[S+2]=w}}while(--b)}while(--v)};return qi.Emboss=r,o.Factory.addGetterSetter(t.Node,"embossStrength",.5,(0,e.getNumberValidator)(),o.Factory.afterSetFilter),o.Factory.addGetterSetter(t.Node,"embossWhiteLevel",.5,(0,e.getNumberValidator)(),o.Factory.afterSetFilter),o.Factory.addGetterSetter(t.Node,"embossDirection","top-left",null,o.Factory.afterSetFilter),o.Factory.addGetterSetter(t.Node,"embossBlend",!1,null,o.Factory.afterSetFilter),qi}var Yi={},va;function rc(){if(va)return Yi;va=1,Object.defineProperty(Yi,"__esModule",{value:!0}),Yi.Enhance=void 0;const o=ht(),t=kt(),i=lt();function e(n,s,a,h,l){let d=a-s,p=l-h,m;return d===0?h+p/2:p===0?h:(m=(n-s)/d,m=p*m+h,m)}const r=function(n){let s=n.data,a=s.length,h=s[0],l=h,d,p=s[1],m=p,c,f=s[2],_=f,v,x;const u=this.enhance();if(u===0)return;for(x=0;x<a;x+=4)d=s[x+0],d<h?h=d:d>l&&(l=d),c=s[x+1],c<p?p=c:c>m&&(m=c),v=s[x+2],v<f?f=v:v>_&&(_=v);l===h&&(l=255,h=0),m===p&&(m=255,p=0),_===f&&(_=255,f=0);let g,b,S,C,M,k,T,A,R;for(u>0?(b=l+u*(255-l),S=h-u*(h-0),M=m+u*(255-m),k=p-u*(p-0),A=_+u*(255-_),R=f-u*(f-0)):(g=(l+h)*.5,b=l+u*(l-g),S=h+u*(h-g),C=(m+p)*.5,M=m+u*(m-C),k=p+u*(p-C),T=(_+f)*.5,A=_+u*(_-T),R=f+u*(f-T)),x=0;x<a;x+=4)s[x+0]=e(s[x+0],h,l,S,b),s[x+1]=e(s[x+1],p,m,k,M),s[x+2]=e(s[x+2],f,_,R,A)};return Yi.Enhance=r,o.Factory.addGetterSetter(t.Node,"enhance",0,(0,i.getNumberValidator)(),o.Factory.afterSetFilter),Yi}var Wi={},ba;function nc(){if(ba)return Wi;ba=1,Object.defineProperty(Wi,"__esModule",{value:!0}),Wi.Grayscale=void 0;const o=function(t){let i=t.data,e=i.length,r,n;for(r=0;r<e;r+=4)n=.34*i[r]+.5*i[r+1]+.16*i[r+2],i[r]=n,i[r+1]=n,i[r+2]=n};return Wi.Grayscale=o,Wi}var Xi={},Sa;function sc(){if(Sa)return Xi;Sa=1,Object.defineProperty(Xi,"__esModule",{value:!0}),Xi.HSL=void 0;const o=ht(),t=kt(),i=lt();o.Factory.addGetterSetter(t.Node,"hue",0,(0,i.getNumberValidator)(),o.Factory.afterSetFilter),o.Factory.addGetterSetter(t.Node,"saturation",0,(0,i.getNumberValidator)(),o.Factory.afterSetFilter),o.Factory.addGetterSetter(t.Node,"luminance",0,(0,i.getNumberValidator)(),o.Factory.afterSetFilter);const e=function(r){let n=r.data,s=n.length,a=1,h=Math.pow(2,this.saturation()),l=Math.abs(this.hue()+360)%360,d=this.luminance()*127,p;const m=a*h*Math.cos(l*Math.PI/180),c=a*h*Math.sin(l*Math.PI/180),f=.299*a+.701*m+.167*c,_=.587*a-.587*m+.33*c,v=.114*a-.114*m-.497*c,x=.299*a-.299*m-.328*c,u=.587*a+.413*m+.035*c,g=.114*a-.114*m+.293*c,b=.299*a-.3*m+1.25*c,S=.587*a-.586*m-1.05*c,C=.114*a+.886*m-.2*c;let M,k,T,A;for(p=0;p<s;p+=4)M=n[p+0],k=n[p+1],T=n[p+2],A=n[p+3],n[p+0]=f*M+_*k+v*T+d,n[p+1]=x*M+u*k+g*T+d,n[p+2]=b*M+S*k+C*T+d,n[p+3]=A};return Xi.HSL=e,Xi}var Ki={},wa;function ac(){if(wa)return Ki;wa=1,Object.defineProperty(Ki,"__esModule",{value:!0}),Ki.HSV=void 0;const o=ht(),t=kt(),i=lt(),e=function(r){const n=r.data,s=n.length,a=Math.pow(2,this.value()),h=Math.pow(2,this.saturation()),l=Math.abs(this.hue()+360)%360,d=a*h*Math.cos(l*Math.PI/180),p=a*h*Math.sin(l*Math.PI/180),m=.299*a+.701*d+.167*p,c=.587*a-.587*d+.33*p,f=.114*a-.114*d-.497*p,_=.299*a-.299*d-.328*p,v=.587*a+.413*d+.035*p,x=.114*a-.114*d+.293*p,u=.299*a-.3*d+1.25*p,g=.587*a-.586*d-1.05*p,b=.114*a+.886*d-.2*p;let S,C,M,k;for(let T=0;T<s;T+=4)S=n[T+0],C=n[T+1],M=n[T+2],k=n[T+3],n[T+0]=m*S+c*C+f*M,n[T+1]=_*S+v*C+x*M,n[T+2]=u*S+g*C+b*M,n[T+3]=k};return Ki.HSV=e,o.Factory.addGetterSetter(t.Node,"hue",0,(0,i.getNumberValidator)(),o.Factory.afterSetFilter),o.Factory.addGetterSetter(t.Node,"saturation",0,(0,i.getNumberValidator)(),o.Factory.afterSetFilter),o.Factory.addGetterSetter(t.Node,"value",0,(0,i.getNumberValidator)(),o.Factory.afterSetFilter),Ki}var ji={},xa;function oc(){if(xa)return ji;xa=1,Object.defineProperty(ji,"__esModule",{value:!0}),ji.Invert=void 0;const o=function(t){let i=t.data,e=i.length,r;for(r=0;r<e;r+=4)i[r]=255-i[r],i[r+1]=255-i[r+1],i[r+2]=255-i[r+2]};return ji.Invert=o,ji}var $i={},Ca;function hc(){if(Ca)return $i;Ca=1,Object.defineProperty($i,"__esModule",{value:!0}),$i.Kaleidoscope=void 0;const o=ht(),t=kt(),i=Tt(),e=lt(),r=function(a,h,l){let d=a.data,p=h.data,m=a.width,c=a.height,f=l.polarCenterX||m/2,_=l.polarCenterY||c/2,v,x,u,g=0,b=0,S=0,C=0,M,k=Math.sqrt(f*f+_*_);x=m-f,u=c-_,M=Math.sqrt(x*x+u*u),k=M>k?M:k;let T=c,A=m,R,D,y=360/A*Math.PI/180,P,w;for(D=0;D<A;D+=1)for(P=Math.sin(D*y),w=Math.cos(D*y),R=0;R<T;R+=1)x=Math.floor(f+k*R/T*w),u=Math.floor(_+k*R/T*P),v=(u*m+x)*4,g=d[v+0],b=d[v+1],S=d[v+2],C=d[v+3],v=(D+R*m)*4,p[v+0]=g,p[v+1]=b,p[v+2]=S,p[v+3]=C},n=function(a,h,l){let d=a.data,p=h.data,m=a.width,c=a.height,f=l.polarCenterX||m/2,_=l.polarCenterY||c/2,v,x,u,g,b,S=0,C=0,M=0,k=0,T,A=Math.sqrt(f*f+_*_);x=m-f,u=c-_,T=Math.sqrt(x*x+u*u),A=T>A?T:A;let R=c,D=m,y,P,w=0,E,O;for(x=0;x<m;x+=1)for(u=0;u<c;u+=1)g=x-f,b=u-_,y=Math.sqrt(g*g+b*b)*R/A,P=(Math.atan2(b,g)*180/Math.PI+360+w)%360,P=P*D/360,E=Math.floor(P),O=Math.floor(y),v=(O*m+E)*4,S=d[v+0],C=d[v+1],M=d[v+2],k=d[v+3],v=(u*m+x)*4,p[v+0]=S,p[v+1]=C,p[v+2]=M,p[v+3]=k},s=function(a){const h=a.width,l=a.height;let d,p,m,c,f,_,v,x,u,g,b=Math.round(this.kaleidoscopePower());const S=Math.round(this.kaleidoscopeAngle()),C=Math.floor(h*(S%360)/360);if(b<1)return;const M=i.Util.createCanvasElement();M.width=h,M.height=l;const k=M.getContext("2d").getImageData(0,0,h,l);i.Util.releaseCanvas(M),r(a,k,{polarCenterX:h/2,polarCenterY:l/2});let T=h/Math.pow(2,b);for(;T<=8;)T=T*2,b-=1;T=Math.ceil(T);let A=T,R=0,D=A,y=1;for(C+T>h&&(R=A,D=0,y=-1),p=0;p<l;p+=1)for(d=R;d!==D;d+=y)m=Math.round(d+C)%h,u=(h*p+m)*4,f=k.data[u+0],_=k.data[u+1],v=k.data[u+2],x=k.data[u+3],g=(h*p+d)*4,k.data[g+0]=f,k.data[g+1]=_,k.data[g+2]=v,k.data[g+3]=x;for(p=0;p<l;p+=1)for(A=Math.floor(T),c=0;c<b;c+=1){for(d=0;d<A+1;d+=1)u=(h*p+d)*4,f=k.data[u+0],_=k.data[u+1],v=k.data[u+2],x=k.data[u+3],g=(h*p+A*2-d-1)*4,k.data[g+0]=f,k.data[g+1]=_,k.data[g+2]=v,k.data[g+3]=x;A*=2}n(k,a,{})};return $i.Kaleidoscope=s,o.Factory.addGetterSetter(t.Node,"kaleidoscopePower",2,(0,e.getNumberValidator)(),o.Factory.afterSetFilter),o.Factory.addGetterSetter(t.Node,"kaleidoscopeAngle",0,(0,e.getNumberValidator)(),o.Factory.afterSetFilter),$i}var Qi={},Ta;function lc(){if(Ta)return Qi;Ta=1,Object.defineProperty(Qi,"__esModule",{value:!0}),Qi.Mask=void 0;const o=ht(),t=kt(),i=lt();function e(m,c,f){let _=(f*m.width+c)*4;const v=[];return v.push(m.data[_++],m.data[_++],m.data[_++],m.data[_++]),v}function r(m,c){return Math.sqrt(Math.pow(m[0]-c[0],2)+Math.pow(m[1]-c[1],2)+Math.pow(m[2]-c[2],2))}function n(m){const c=[0,0,0];for(let f=0;f<m.length;f++)c[0]+=m[f][0],c[1]+=m[f][1],c[2]+=m[f][2];return c[0]/=m.length,c[1]/=m.length,c[2]/=m.length,c}function s(m,c){const f=e(m,0,0),_=e(m,m.width-1,0),v=e(m,0,m.height-1),x=e(m,m.width-1,m.height-1),u=c||10;if(r(f,_)<u&&r(_,x)<u&&r(x,v)<u&&r(v,f)<u){const g=n([_,f,x,v]),b=[];for(let S=0;S<m.width*m.height;S++){const C=r(g,[m.data[S*4],m.data[S*4+1],m.data[S*4+2]]);b[S]=C<u?0:255}return b}}function a(m,c){for(let f=0;f<m.width*m.height;f++)m.data[4*f+3]=c[f]}function h(m,c,f){const _=[1,1,1,1,0,1,1,1,1],v=Math.round(Math.sqrt(_.length)),x=Math.floor(v/2),u=[];for(let g=0;g<f;g++)for(let b=0;b<c;b++){const S=g*c+b;let C=0;for(let M=0;M<v;M++)for(let k=0;k<v;k++){const T=g+M-x,A=b+k-x;if(T>=0&&T<f&&A>=0&&A<c){const R=T*c+A,D=_[M*v+k];C+=m[R]*D}}u[S]=C===255*8?255:0}return u}function l(m,c,f){const _=[1,1,1,1,1,1,1,1,1],v=Math.round(Math.sqrt(_.length)),x=Math.floor(v/2),u=[];for(let g=0;g<f;g++)for(let b=0;b<c;b++){const S=g*c+b;let C=0;for(let M=0;M<v;M++)for(let k=0;k<v;k++){const T=g+M-x,A=b+k-x;if(T>=0&&T<f&&A>=0&&A<c){const R=T*c+A,D=_[M*v+k];C+=m[R]*D}}u[S]=C>=255*4?255:0}return u}function d(m,c,f){const _=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],v=Math.round(Math.sqrt(_.length)),x=Math.floor(v/2),u=[];for(let g=0;g<f;g++)for(let b=0;b<c;b++){const S=g*c+b;let C=0;for(let M=0;M<v;M++)for(let k=0;k<v;k++){const T=g+M-x,A=b+k-x;if(T>=0&&T<f&&A>=0&&A<c){const R=T*c+A,D=_[M*v+k];C+=m[R]*D}}u[S]=C}return u}const p=function(m){let c=this.threshold(),f=s(m,c);return f&&(f=h(f,m.width,m.height),f=l(f,m.width,m.height),f=d(f,m.width,m.height),a(m,f)),m};return Qi.Mask=p,o.Factory.addGetterSetter(t.Node,"threshold",0,(0,i.getNumberValidator)(),o.Factory.afterSetFilter),Qi}var Ji={},Pa;function cc(){if(Pa)return Ji;Pa=1,Object.defineProperty(Ji,"__esModule",{value:!0}),Ji.Noise=void 0;const o=ht(),t=kt(),i=lt(),e=function(r){const n=this.noise()*255,s=r.data,a=s.length,h=n/2;for(let l=0;l<a;l+=4)s[l+0]+=h-2*h*Math.random(),s[l+1]+=h-2*h*Math.random(),s[l+2]+=h-2*h*Math.random()};return Ji.Noise=e,o.Factory.addGetterSetter(t.Node,"noise",.2,(0,i.getNumberValidator)(),o.Factory.afterSetFilter),Ji}var Zi={},ka;function dc(){if(ka)return Zi;ka=1,Object.defineProperty(Zi,"__esModule",{value:!0}),Zi.Pixelate=void 0;const o=ht(),t=Tt(),i=kt(),e=lt(),r=function(n){let s=Math.ceil(this.pixelSize()),a=n.width,h=n.height,l,d,p,m,c,f,_,v=Math.ceil(a/s),x=Math.ceil(h/s),u,g,b,S,C,M,k,T=n.data;if(s<=0){t.Util.error("pixelSize value can not be <= 0");return}for(C=0;C<v;C+=1)for(M=0;M<x;M+=1){for(m=0,c=0,f=0,_=0,u=C*s,g=u+s,b=M*s,S=b+s,k=0,l=u;l<g;l+=1)if(!(l>=a))for(d=b;d<S;d+=1)d>=h||(p=(a*d+l)*4,m+=T[p+0],c+=T[p+1],f+=T[p+2],_+=T[p+3],k+=1);for(m=m/k,c=c/k,f=f/k,_=_/k,l=u;l<g;l+=1)if(!(l>=a))for(d=b;d<S;d+=1)d>=h||(p=(a*d+l)*4,T[p+0]=m,T[p+1]=c,T[p+2]=f,T[p+3]=_)}};return Zi.Pixelate=r,o.Factory.addGetterSetter(i.Node,"pixelSize",8,(0,e.getNumberValidator)(),o.Factory.afterSetFilter),Zi}var tr={},Aa;function uc(){if(Aa)return tr;Aa=1,Object.defineProperty(tr,"__esModule",{value:!0}),tr.Posterize=void 0;const o=ht(),t=kt(),i=lt(),e=function(r){let n=Math.round(this.levels()*254)+1,s=r.data,a=s.length,h=255/n,l;for(l=0;l<a;l+=1)s[l]=Math.floor(s[l]/h)*h};return tr.Posterize=e,o.Factory.addGetterSetter(t.Node,"levels",.5,(0,i.getNumberValidator)(),o.Factory.afterSetFilter),tr}var er={},Ra;function fc(){if(Ra)return er;Ra=1,Object.defineProperty(er,"__esModule",{value:!0}),er.RGB=void 0;const o=ht(),t=kt(),i=lt(),e=function(r){let n=r.data,s=n.length,a=this.red(),h=this.green(),l=this.blue(),d,p;for(d=0;d<s;d+=4)p=(.34*n[d]+.5*n[d+1]+.16*n[d+2])/255,n[d]=p*a,n[d+1]=p*h,n[d+2]=p*l,n[d+3]=n[d+3]};return er.RGB=e,o.Factory.addGetterSetter(t.Node,"red",0,function(r){return this._filterUpToDate=!1,r>255?255:r<0?0:Math.round(r)}),o.Factory.addGetterSetter(t.Node,"green",0,function(r){return this._filterUpToDate=!1,r>255?255:r<0?0:Math.round(r)}),o.Factory.addGetterSetter(t.Node,"blue",0,i.RGBComponent,o.Factory.afterSetFilter),er}var ir={},Ea;function gc(){if(Ea)return ir;Ea=1,Object.defineProperty(ir,"__esModule",{value:!0}),ir.RGBA=void 0;const o=ht(),t=kt(),i=lt(),e=function(r){const n=r.data,s=n.length,a=this.red(),h=this.green(),l=this.blue(),d=this.alpha();for(let p=0;p<s;p+=4){const m=1-d;n[p]=a*d+n[p]*m,n[p+1]=h*d+n[p+1]*m,n[p+2]=l*d+n[p+2]*m}};return ir.RGBA=e,o.Factory.addGetterSetter(t.Node,"red",0,function(r){return this._filterUpToDate=!1,r>255?255:r<0?0:Math.round(r)}),o.Factory.addGetterSetter(t.Node,"green",0,function(r){return this._filterUpToDate=!1,r>255?255:r<0?0:Math.round(r)}),o.Factory.addGetterSetter(t.Node,"blue",0,i.RGBComponent,o.Factory.afterSetFilter),o.Factory.addGetterSetter(t.Node,"alpha",1,function(r){return this._filterUpToDate=!1,r>1?1:r<0?0:r}),ir}var rr={},Ma;function _c(){if(Ma)return rr;Ma=1,Object.defineProperty(rr,"__esModule",{value:!0}),rr.Sepia=void 0;const o=function(t){let i=t.data,e=i.length,r,n,s,a;for(r=0;r<e;r+=4)n=i[r+0],s=i[r+1],a=i[r+2],i[r+0]=Math.min(255,n*.393+s*.769+a*.189),i[r+1]=Math.min(255,n*.349+s*.686+a*.168),i[r+2]=Math.min(255,n*.272+s*.534+a*.131)};return rr.Sepia=o,rr}var nr={},Oa;function pc(){if(Oa)return nr;Oa=1,Object.defineProperty(nr,"__esModule",{value:!0}),nr.Solarize=void 0;const o=function(t){const i=t.data,e=t.width,r=t.height,n=e*4;let s=r;do{const a=(s-1)*n;let h=e;do{const l=a+(h-1)*4;let d=i[l],p=i[l+1],m=i[l+2];d>127&&(d=255-d),p>127&&(p=255-p),m>127&&(m=255-m),i[l]=d,i[l+1]=p,i[l+2]=m}while(--h)}while(--s)};return nr.Solarize=o,nr}var sr={},Fa;function mc(){if(Fa)return sr;Fa=1,Object.defineProperty(sr,"__esModule",{value:!0}),sr.Threshold=void 0;const o=ht(),t=kt(),i=lt(),e=function(r){const n=this.threshold()*255,s=r.data,a=s.length;for(let h=0;h<a;h+=1)s[h]=s[h]<n?0:255};return sr.Threshold=e,o.Factory.addGetterSetter(t.Node,"threshold",.5,(0,i.getNumberValidator)(),o.Factory.afterSetFilter),sr}var Da;function yc(){if(Da)return vi;Da=1,Object.defineProperty(vi,"__esModule",{value:!0}),vi.Konva=void 0;const o=Gl(),t=Ul(),i=Vl(),e=zl(),r=Hl(),n=ql(),s=Yl(),a=Jo(),h=ns(),l=Zo(),d=Wl(),p=Xl(),m=Kl(),c=jl(),f=th(),_=$l(),v=Ql(),x=Jl(),u=Zl(),g=tc(),b=ec(),S=ic(),C=rc(),M=nc(),k=sc(),T=ac(),A=oc(),R=hc(),D=lc(),y=cc(),P=dc(),w=uc(),E=fc(),O=gc(),I=_c(),V=pc(),B=mc();return vi.Konva=o.Konva.Util._assign(o.Konva,{Arc:t.Arc,Arrow:i.Arrow,Circle:e.Circle,Ellipse:r.Ellipse,Image:n.Image,Label:s.Label,Tag:s.Tag,Line:a.Line,Path:h.Path,Rect:l.Rect,RegularPolygon:d.RegularPolygon,Ring:p.Ring,Sprite:m.Sprite,Star:c.Star,Text:f.Text,TextPath:_.TextPath,Transformer:v.Transformer,Wedge:x.Wedge,Filters:{Blur:u.Blur,Brighten:g.Brighten,Contrast:b.Contrast,Emboss:S.Emboss,Enhance:C.Enhance,Grayscale:M.Grayscale,HSL:k.HSL,HSV:T.HSV,Invert:A.Invert,Kaleidoscope:R.Kaleidoscope,Mask:D.Mask,Noise:y.Noise,Pixelate:P.Pixelate,Posterize:w.Posterize,RGB:E.RGB,RGBA:O.RGBA,Sepia:I.Sepia,Solarize:V.Solarize,Threshold:B.Threshold}}),vi}var vc=Ar.exports,Na;function bc(){if(Na)return Ar.exports;Na=1,Object.defineProperty(vc,"__esModule",{value:!0});const o=yc();return Ar.exports=o.Konva,Ar.exports}var Sc=bc();const vt=Ka(Sc),gn=gh(),Ia={timeout:1e3},eh=()=>({toastSuccess:o=>gn.add({...Ia,icon:"i-heroicons-check-circle",color:"green",title:o}),toastWarning:o=>gn.add({timeout:1800,icon:"i-heroicons-exclamation-circle",color:"amber",title:o}),toastError:o=>gn.add({...Ia,icon:"i-heroicons-x-circle",color:"red",title:o})}),La=5,Ga="#f00",ai=6,Nn=0,Ua=56,In=214,ih=7,Se=24,wc=8,rh=Se+wc,xc=16,Cc=16+rh,oi=Nn+xc+Cc+ih,Lt=rh+ih,Ba="#38bdf8",_n="#60a5fa",Va=4,_d=In-34,pd={default:()=>({width:640,height:320,mmid:"test-mmid",cmid:"test-cmid",token:"test-token",title:"標題"})},za=6,Tc=["image/jpeg","image/png"];var pn={exports:{}},Ha;function Pc(){return Ha||(Ha=1,function(o){var t=(()=>{var i=Object.defineProperty,e=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,n=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,h=(b,S,C)=>S in b?i(b,S,{enumerable:!0,configurable:!0,writable:!0,value:C}):b[S]=C,l=(b,S)=>{for(var C in S||(S={}))s.call(S,C)&&h(b,C,S[C]);if(n)for(var C of n(S))a.call(S,C)&&h(b,C,S[C]);return b},d=(b,S)=>{for(var C in S)i(b,C,{get:S[C],enumerable:!0})},p=(b,S,C,M)=>{if(S&&typeof S=="object"||typeof S=="function")for(let k of r(S))!s.call(b,k)&&k!==C&&i(b,k,{get:()=>S[k],enumerable:!(M=e(S,k))||M.enumerable});return b},m=b=>p(i({},"__esModule",{value:!0}),b),c=(b,S,C)=>(h(b,typeof S!="symbol"?S+"":S,C),C),f={};d(f,{DEFAULT_OPTIONS:()=>x,DEFAULT_UUID_LENGTH:()=>v,default:()=>g});var _="5.2.0",v=6,x={dictionary:"alphanum",shuffle:!0,debug:!1,length:v,counter:0},u=class{constructor(S={}){c(this,"counter"),c(this,"debug"),c(this,"dict"),c(this,"version"),c(this,"dictIndex",0),c(this,"dictRange",[]),c(this,"lowerBound",0),c(this,"upperBound",0),c(this,"dictLength",0),c(this,"uuidLength"),c(this,"_digit_first_ascii",48),c(this,"_digit_last_ascii",58),c(this,"_alpha_lower_first_ascii",97),c(this,"_alpha_lower_last_ascii",123),c(this,"_hex_last_ascii",103),c(this,"_alpha_upper_first_ascii",65),c(this,"_alpha_upper_last_ascii",91),c(this,"_number_dict_ranges",{digits:[this._digit_first_ascii,this._digit_last_ascii]}),c(this,"_alpha_dict_ranges",{lowerCase:[this._alpha_lower_first_ascii,this._alpha_lower_last_ascii],upperCase:[this._alpha_upper_first_ascii,this._alpha_upper_last_ascii]}),c(this,"_alpha_lower_dict_ranges",{lowerCase:[this._alpha_lower_first_ascii,this._alpha_lower_last_ascii]}),c(this,"_alpha_upper_dict_ranges",{upperCase:[this._alpha_upper_first_ascii,this._alpha_upper_last_ascii]}),c(this,"_alphanum_dict_ranges",{digits:[this._digit_first_ascii,this._digit_last_ascii],lowerCase:[this._alpha_lower_first_ascii,this._alpha_lower_last_ascii],upperCase:[this._alpha_upper_first_ascii,this._alpha_upper_last_ascii]}),c(this,"_alphanum_lower_dict_ranges",{digits:[this._digit_first_ascii,this._digit_last_ascii],lowerCase:[this._alpha_lower_first_ascii,this._alpha_lower_last_ascii]}),c(this,"_alphanum_upper_dict_ranges",{digits:[this._digit_first_ascii,this._digit_last_ascii],upperCase:[this._alpha_upper_first_ascii,this._alpha_upper_last_ascii]}),c(this,"_hex_dict_ranges",{decDigits:[this._digit_first_ascii,this._digit_last_ascii],alphaDigits:[this._alpha_lower_first_ascii,this._hex_last_ascii]}),c(this,"_dict_ranges",{_number_dict_ranges:this._number_dict_ranges,_alpha_dict_ranges:this._alpha_dict_ranges,_alpha_lower_dict_ranges:this._alpha_lower_dict_ranges,_alpha_upper_dict_ranges:this._alpha_upper_dict_ranges,_alphanum_dict_ranges:this._alphanum_dict_ranges,_alphanum_lower_dict_ranges:this._alphanum_lower_dict_ranges,_alphanum_upper_dict_ranges:this._alphanum_upper_dict_ranges,_hex_dict_ranges:this._hex_dict_ranges}),c(this,"log",(...R)=>{const D=[...R];if(D[0]=`[short-unique-id] ${R[0]}`,this.debug===!0&&typeof console<"u"&&console!==null)return console.log(...D)}),c(this,"_normalizeDictionary",(R,D)=>{let y;if(R&&Array.isArray(R)&&R.length>1)y=R;else{y=[];let P;this.dictIndex=P=0;const w=`_${R}_dict_ranges`,E=this._dict_ranges[w];Object.keys(E).forEach(O=>{const I=O;for(this.dictRange=E[I],this.lowerBound=this.dictRange[0],this.upperBound=this.dictRange[1],this.dictIndex=P=this.lowerBound;this.lowerBound<=this.upperBound?P<this.upperBound:P>this.upperBound;this.dictIndex=this.lowerBound<=this.upperBound?P+=1:P-=1)y.push(String.fromCharCode(this.dictIndex))})}return D&&(y=y.sort(()=>Math.random()-.5)),y}),c(this,"setDictionary",(R,D)=>{this.dict=this._normalizeDictionary(R,D),this.dictLength=this.dict.length,this.setCounter(0)}),c(this,"seq",()=>this.sequentialUUID()),c(this,"sequentialUUID",()=>{let R,D,y="";R=this.counter;do D=R%this.dictLength,R=Math.trunc(R/this.dictLength),y+=this.dict[D];while(R!==0);return this.counter+=1,y}),c(this,"rnd",(R=this.uuidLength||v)=>this.randomUUID(R)),c(this,"randomUUID",(R=this.uuidLength||v)=>{let D,y,P;if(R===null||typeof R>"u"||R<1)throw new Error("Invalid UUID Length Provided");for(D="",P=0;P<R;P+=1)y=parseInt((Math.random()*this.dictLength).toFixed(0),10)%this.dictLength,D+=this.dict[y];return D}),c(this,"fmt",(R,D)=>this.formattedUUID(R,D)),c(this,"formattedUUID",(R,D)=>{const y={$r:this.randomUUID,$s:this.sequentialUUID,$t:this.stamp};return R.replace(/\$[rs]\d{0,}|\$t0|\$t[1-9]\d{1,}/g,w=>{const E=w.slice(0,2),O=parseInt(w.slice(2),10);return E==="$s"?y[E]().padStart(O,"0"):E==="$t"&&D?y[E](O,D):y[E](O)})}),c(this,"availableUUIDs",(R=this.uuidLength)=>parseFloat(Math.pow([...new Set(this.dict)].length,R).toFixed(0))),c(this,"approxMaxBeforeCollision",(R=this.availableUUIDs(this.uuidLength))=>parseFloat(Math.sqrt(Math.PI/2*R).toFixed(20))),c(this,"collisionProbability",(R=this.availableUUIDs(this.uuidLength),D=this.uuidLength)=>parseFloat((this.approxMaxBeforeCollision(R)/this.availableUUIDs(D)).toFixed(20))),c(this,"uniqueness",(R=this.availableUUIDs(this.uuidLength))=>{const D=parseFloat((1-this.approxMaxBeforeCollision(R)/R).toFixed(20));return D>1?1:D<0?0:D}),c(this,"getVersion",()=>this.version),c(this,"stamp",(R,D)=>{const y=Math.floor(+(D||new Date)/1e3).toString(16);if(typeof R=="number"&&R===0)return y;if(typeof R!="number"||R<10)throw new Error(["Param finalLength must be a number greater than or equal to 10,","or 0 if you want the raw hexadecimal timestamp"].join(`
`));const P=R-9,w=Math.round(Math.random()*(P>15?15:P)),E=this.randomUUID(P);return`${E.substring(0,w)}${y}${E.substring(w)}${w.toString(16)}`}),c(this,"parseStamp",(R,D)=>{if(D&&!/t0|t[1-9]\d{1,}/.test(D))throw new Error("Cannot extract date from a formated UUID with no timestamp in the format");const y=D?D.replace(/\$[rs]\d{0,}|\$t0|\$t[1-9]\d{1,}/g,w=>{const E={$r:V=>[...Array(V)].map(()=>"r").join(""),$s:V=>[...Array(V)].map(()=>"s").join(""),$t:V=>[...Array(V)].map(()=>"t").join("")},O=w.slice(0,2),I=parseInt(w.slice(2),10);return E[O](I)}).replace(/^(.*?)(t{8,})(.*)$/g,(w,E,O)=>R.substring(E.length,E.length+O.length)):R;if(y.length===8)return new Date(parseInt(y,16)*1e3);if(y.length<10)throw new Error("Stamp length invalid");const P=parseInt(y.substring(y.length-1),16);return new Date(parseInt(y.substring(P,P+8),16)*1e3)}),c(this,"setCounter",R=>{this.counter=R}),c(this,"validate",(R,D)=>{const y=D?this._normalizeDictionary(D):this.dict;return R.split("").every(P=>y.includes(P))});const C=l(l({},x),S);this.counter=0,this.debug=!1,this.dict=[],this.version=_;const{dictionary:M,shuffle:k,length:T,counter:A}=C;return this.uuidLength=T,this.setDictionary(M,k),this.setCounter(A),this.debug=C.debug,this.log(this.dict),this.log(`Generator instantiated with Dictionary Size ${this.dictLength} and counter set to ${this.counter}`),this.log=this.log.bind(this),this.setDictionary=this.setDictionary.bind(this),this.setCounter=this.setCounter.bind(this),this.seq=this.seq.bind(this),this.sequentialUUID=this.sequentialUUID.bind(this),this.rnd=this.rnd.bind(this),this.randomUUID=this.randomUUID.bind(this),this.fmt=this.fmt.bind(this),this.formattedUUID=this.formattedUUID.bind(this),this.availableUUIDs=this.availableUUIDs.bind(this),this.approxMaxBeforeCollision=this.approxMaxBeforeCollision.bind(this),this.collisionProbability=this.collisionProbability.bind(this),this.uniqueness=this.uniqueness.bind(this),this.getVersion=this.getVersion.bind(this),this.stamp=this.stamp.bind(this),this.parseStamp=this.parseStamp.bind(this),this}};c(u,"default",u);var g=u;return m(f)})();o.exports=t.default,typeof window<"u"&&(t=t.default)}(pn)),pn.exports}var kc=Pc();const Ac=Ka(kc),Ln=new Ac,yd=async o=>new Promise((t,i)=>{const e=URL.createObjectURL(o);let r=new Image;r.onload=()=>{t(r)},r.onerror=()=>{i(_h("Failed to load image."))},r.src=e}),vd=o=>Tc.includes(o.type),ue=(o,t=1e3)=>Math.round(o*t)/t,ar=o=>{const t=window.innerWidth-oi-Lt;let i=ue(o/t*ai,1e3);return i<0?0:i},Rc=o=>{const t=window.innerWidth-oi-Lt;let i=ue(o/t*ai,1e3);return i<0?0:i},Ec=(o,t,i)=>{const e=[0,i.width()/2,i.width()],r=[0,i.height()/2,i.height()],n=t.getClientRect();return e.push(n.x,n.x+n.width),r.push(n.y,n.y+n.height),i.find(".item").forEach(s=>{if(o.find(h=>h._id===s._id))return;const a=s.getClientRect();e.push(a.x,a.x+a.width,a.x+a.width/2),r.push(a.y,a.y+a.height,a.y+a.height/2)}),{vertical:[...new Set(e)],horizontal:[...new Set(r)]}},Mc=o=>{const t=o.getClientRect(),i=o.absolutePosition();return{vertical:[{guide:Math.round(t.x),offset:Math.round(i.x-t.x),snap:"start"},{guide:Math.round(t.x+t.width/2),offset:Math.round(i.x-t.x-t.width/2),snap:"center"},{guide:Math.round(t.x+t.width),offset:Math.round(i.x-t.x-t.width),snap:"end"}],horizontal:[{guide:Math.round(t.y),offset:Math.round(i.y-t.y),snap:"start"},{guide:Math.round(t.y+t.height/2),offset:Math.round(i.y-t.y-t.height/2),snap:"center"},{guide:Math.round(t.y+t.height),offset:Math.round(i.y-t.y-t.height),snap:"end"}]}},Oc=(o,t)=>{const i=[],e=[];o.vertical.forEach(a=>{t.vertical.forEach(h=>{var l=Math.abs(a-h.guide);l<La&&i.push({lineGuide:a,diff:l,snap:h.snap,offset:h.offset})})}),o.horizontal.forEach(a=>{t.horizontal.forEach(h=>{var l=Math.abs(a-h.guide);l<La&&e.push({lineGuide:a,diff:l,snap:h.snap,offset:h.offset})})});var r=[];const n=i.sort((a,h)=>a.diff-h.diff)[0],s=e.sort((a,h)=>a.diff-h.diff)[0];return n&&r.push({lineGuide:n.lineGuide,offset:n.offset,orientation:"V",snap:n.snap}),s&&r.push({lineGuide:s.lineGuide,offset:s.offset,orientation:"H",snap:s.snap}),r},Fc=(o,t)=>{o.forEach(i=>{if(i.orientation==="H"){const e=new vt.Line({points:[-6e3,0,6e3,0],stroke:Ga,strokeWidth:1,name:"guide-line",dash:[4,6]});t.add(e),e.absolutePosition({x:0,y:i.lineGuide})}else if(i.orientation==="V"){const e=new vt.Line({points:[0,-6e3,0,6e3],stroke:Ga,strokeWidth:1,name:"guide-line",dash:[4,6]});t.add(e),e.absolutePosition({x:i.lineGuide,y:0})}})},Rr=se(!0);let xt=Lr.timeline({repeat:-1,paused:Rr.value,onStart(){Rr.value=!1},onComplete(){Rr.value=!0}});const Dc={x:0},qa=se(!1),or=se(0),ie={},re={},xr={},{toastSuccess:Re,toastError:Ya}=eh(),Nc=()=>{const o=Nt("adModuleX",()=>0),t=Nt("adModuleY",()=>0),i=Nt("mainNodeList",()=>[]),e=zt(()=>i.value.length),r=zt(()=>i.value.reduce((H,W)=>(H[`${W.id}`]=W,H),{})),n=Nt("mainLayer",()=>Ce(null)),s=()=>{var H;(H=n.value)==null||H.draw()},a=Nt("mainContainer",()=>Ce(null)),h=Nt("mainSelectionRect",()=>Ce(null)),l=Nt("mainTransformer",()=>null),d=H=>{var W;return(W=n.value)==null?void 0:W.findOne(`#${H}`)},p=H=>{const W=d(H);W&&m(W)},m=H=>{var W,J,Q,Z,nt;(W=n.value)==null||W.add(H),(J=l.value)==null||J.nodes([H]),(Q=l.value)==null||Q.moveToTop(),(Z=h.value)==null||Z.moveToTop(),(nt=a.value)==null||nt.focus()},c=Nt("timelineStage",()=>Ce(null)),f=Nt("timelineLayer",()=>Ce(null)),_=Nt("timelineTransformers",()=>[]),v=se(0),x=H=>{var W;return(W=f.value)==null?void 0:W.findOne(`#${H}`)},u=()=>{var H;(H=f.value)==null||H.draw()},g=H=>new vt.Rect(H),b=H=>new vt.Circle(H),S=H=>new vt.Image(H),C=H=>new vt.Group(H),M=()=>{var W;if(_.value.length>0){const J=_.value.find(Q=>Q.nodes().length===0);if(J)return J.visible(!0),J}const H=new vt.Transformer({borderStroke:"rgba(355, 255, 255, 0.6)",rotateEnabled:!1,rotateLineVisible:!1,enabledAnchors:["middle-left","middle-right"],visible:!0,boundBoxFunc(J,Q){return Q.x<Lt||Q.x+Q.width>window.innerWidth-oi?J:Q},anchorStyleFunc(J){J.cornerRadius(3),J.fill("#a5f3fc"),J.stroke("#67e8f9"),(J.hasName("middle-left")||J.hasName("middle-right"))&&(J.height(18),J.offsetY(9),J.width(4),J.offsetX(2))}});return(W=f.value)==null||W.add(H),_.value.push(H),H},k=()=>{var W;const H=((W=f.value)==null?void 0:W.find(".item_track"))??[];v.value=H.length*(Se+Va)},T=H=>{for(let W=0;W<_.value.length;W++){const J=_.value[W],Q=J.nodes();Q.length>0&&Q[0].id().endsWith(`${H}`)&&(J.visible(!1),J.nodes([]))}},A=H=>{var J;(((J=f.value)==null?void 0:J.find(H))??[]).forEach((Q,Z)=>{Q.y(Z*(Se+Va))})},R=(H,W)=>{var nt,rt,at;const J=C({id:`group_${W}`,name:"item_tween_group",x:Lt,y:v.value,draggable:!1}),Q=S({id:`img_${W}`,name:"item_img",x:0,y:v.value,image:H,width:Se,height:Se,fill:"rgba(255, 255, 255, 1)",cornerRadius:2,draggable:!1});Q.on("click",function(){p(W)}),Q.on("mouseenter",function(){Q.opacity(.6),c.value&&(c.value.container().style.cursor="pointer")}),Q.on("mouseleave mouseout",function(){Q.opacity(1),c.value&&(c.value.container().style.cursor="default")});const Z=g({id:`track_${W}`,name:"item_track",x:Lt,y:v.value,width:window.innerWidth-oi-Lt,height:Se,fill:"rgba(255, 255, 255, 0.6)",cornerRadius:2,draggable:!1});(nt=f.value)==null||nt.add(Q),(rt=f.value)==null||rt.add(Z),(at=f.value)==null||at.add(J),k()},D=H=>{T(H);const W=x(`img_${H}`);W&&W instanceof vt.Image&&(W.destroy(),A(".item_img"));const J=x(`track_${H}`);J&&J instanceof vt.Rect&&(J.destroy(),A(".item_track"));const Q=x(`group_${H}`);Q&&Q instanceof vt.Group&&(Q.destroy(),A(".item_tween_group")),k()},y=(H,W,J)=>{const Q=x(`group_${H}`);if(!Q||!(Q instanceof vt.Group))return{barId:"",transformer:null};const Z=`bar_${Ln.rnd()}_${H}`,nt=window.innerWidth-oi-Lt,rt=nt*(J/ai),at=nt*(W/ai),et=g({id:Z,name:"item_bar item_tween",x:rt,y:0,width:at,height:Se,fill:_n,cornerRadius:0,draggable:!0,dragBoundFunc(dt){return{x:dt.x<Lt?Lt:dt.x+this.width()>nt+Lt?nt-this.width()+Lt:dt.x,y:this.absolutePosition().y}}});et.on("click",function(){w(H,Z,et);const dt=ar(et.x());j(dt),$(dt)}),et.on("dblclick",function(){const dt=ar(et.x()+et.width());j(dt),$(dt)});let _t=!1;et.on("dragstart",function(){w(H,Z,et),_t=!0}),et.on("dragend",function(){_t=!1;const dt=r.value[H],le=d(H),Rt=V(H,Z);!dt||!le||!Rt||O(Rt,et,dt,le,"start")}),et.on("dragmove",function(){}),ft.value=Z,Q.add(et);const pt=M();let yt=rt;return pt.on("transformstart",function(){w(H,Z,et),yt=et.x()}),pt.on("transform",function(){const dt=pt.nodes()[0];dt.width(dt.scaleX()*dt.width()),dt.scaleX(1),dt.x()!==yt&&dt.x(yt)}),pt.on("transformend",function(){const dt=pt.nodes()[0],le=r.value[H],Rt=d(H),It=V(H,Z);!le||!Rt||!It||O(It,dt,le,Rt,"duration")}),pt.nodes([et]),w(H,Z,et),{barId:Z,transformer:pt}},P=(H,W)=>{const J=x(`group_${H}`);if(!J||!(J instanceof vt.Group))return"";const Q=`circle_${Ln.rnd()}_${H}`,Z=window.innerWidth-oi-Lt,nt=Z*(W/ai),rt=b({id:Q,name:"item_circle item_tween",x:nt,y:Se/2,radius:Se/4,fill:_n,cornerRadius:0,draggable:!0,dragBoundFunc(at){return{x:at.x<Lt?Lt:at.x>Z+Lt?Z+Lt:at.x,y:this.absolutePosition().y}}});return rt.on("click",function(){w(H,Q,rt);const at=ar(rt.x());j(at),$(at)}),rt.on("dragstart",function(){w(H,Q,rt)}),rt.on("dragend",function(){const at=r.value[H],et=d(H),_t=V(H,Q);!at||!et||!_t||I(_t,rt,at,et,"start")}),J.add(rt),w(H,Q,rt),Q},w=(H,W,J)=>{E(),J.fill(_n),J instanceof vt.Rect?J.name("item_bar item_tween item_tween_active"):J instanceof vt.Circle&&J.name("item_circle item_tween item_tween_active"),ft.value=W,p(H)},E=()=>{var W;const H=(W=f.value)==null?void 0:W.findOne(".item_tween_active");H&&H instanceof vt.Rect?(H.fill(Ba),H.name("item_bar item_tween")):H&&H instanceof vt.Circle&&(H.fill(Ba),H.name("item_circle item_tween")),ft.value=null},O=(H,W,J,Q,Z,nt="none")=>{if(!xt)return;const{scaleX:rt,scaleY:at,x:et,y:_t,rotation:pt,opacity:yt}=H.vars.startAt,{scaleX:dt,scaleY:le,x:Rt,y:It,rotation:he,opacity:Ge,ease:pi}=H.vars,{scaleX:Je,scaleY:Ze,x:mi,y:ss,rotation:as,opacity:os}=J;let hs=Z==="fromVars"?{scaleX:Je,scaleY:Ze,x:mi+o.value,y:ss+t.value,rotation:as,opacity:os}:{scaleX:rt,scaleY:at,x:et,y:_t,rotation:pt,opacity:yt},ls=Z==="toVars"?{scaleX:Je,scaleY:Ze,x:mi+o.value,y:ss+t.value,rotation:as,opacity:os,ease:pi}:Z==="ease"?{scaleX:dt,scaleY:le,x:Rt,y:It,rotation:he,opacity:Ge,ease:nt}:{scaleX:dt,scaleY:le,x:Rt,y:It,rotation:he,opacity:Ge,ease:pi};const cs=Rc(W.width()),ds=ar(W.x()),Hr=Q.id(),qr=W.id();q(H);const us=U(Q,cs,ds,hs,ls);switch(us&&(ie[Hr][qr]=us,re[Hr][qr]={...re[Hr][qr],duration:cs,start:ds,fromVars:hs,toVars:ls}),Z){case"fromVars":Re("已更新初始點");break;case"toVars":Re("已更新結尾點");break;case"ease":Re("已更新 Ease");break}},I=(H,W,J,Q,Z)=>{if(!xt)return;const{x:nt,y:rt,scaleX:at,scaleY:et,rotation:_t,opacity:pt}=H.vars,{x:yt,y:dt,scaleX:le,scaleY:Rt,rotation:It,opacity:he}=J;let Ge=Z==="vars"?{x:yt+o.value,y:dt+t.value,scaleX:le,scaleY:Rt,rotation:It,opacity:he}:{x:nt,y:rt,scaleX:at,scaleY:et,rotation:_t,opacity:pt};const pi=ar(W.x()),Je=Q.id(),Ze=W.id();q(H);const mi=X(Q,pi,Ge);switch(mi&&(ie[Je][Ze]=mi,re[Je][Ze]={...re[Je][Ze],start:pi,vars:Ge}),Z){case"vars":Re("已更新節點");break}},V=(H,W)=>ie[H][W],B=(H,W)=>ie[H][W].vars.ease,q=H=>{xt==null||xt.remove(H)},K=H=>{const W=H.id(),J=1,Q=or.value,{tween:Z,tweenVars:nt}=F(H,J,Q),{barId:rt,transformer:at}=y(W,J,Q);if(!rt||!at||!Z||!nt)return Ya("動畫建立失敗");ie[W]||(ie[W]={}),ie[W][rt]=Z,re[W]||(re[W]={}),re[W][rt]={id:rt,nodeId:W,type:"tween",duration:J,start:Q,fromVars:nt,toVars:{...nt,ease:"none"}},xr[rt]=at,Re("動畫已建立")},z=H=>{const W=H.id(),J=or.value,{tween:Q,tweenVars:Z}=N(H,J),nt=P(W,J);if(!nt||!Q||!Z)return Ya("節點建立失敗");ie[W]||(ie[W]={}),ie[W][nt]=Q,re[W]||(re[W]={}),re[W][nt]={id:nt,nodeId:W,type:"setPoint",start:J,vars:Z},Re("節點已建立")},Y=(H,W,J)=>{const Q=H.id(),Z=W.id(),nt=V(Q,Z),rt=ie[Q],at=re[Q];if(q(nt),rt.hasOwnProperty(Z)&&delete rt[Z],at.hasOwnProperty(Z)&&delete at[Z],J&&xr.hasOwnProperty(Z)){const et=xr[Z];et&&(et.nodes([]),et.visible(!1)),delete xr[Z]}return W.destroy(),ft.value=null,!0},L=(H,W)=>{Y(H,W,!0),Re("動畫已刪除")},G=(H,W)=>{Y(H,W,!1),Re("節點已刪除")},F=(H,W,J)=>{const Q=H.id(),Z=r.value[Q];if(!Z)return{tween:null,tweenVars:null};const{scaleX:nt,scaleY:rt,x:at,y:et,rotation:_t,opacity:pt}=Z,yt={x:at+o.value,y:et+t.value,scaleX:nt,scaleY:rt,opacity:pt,rotation:_t};return{tween:U(H,W,J,yt,{...yt,ease:"none"}),tweenVars:yt}},N=(H,W)=>{const J=H.id(),Q=r.value[J];if(!Q)return{tween:null,tweenVars:null};const{scaleX:Z,scaleY:nt,x:rt,y:at,rotation:et,opacity:_t}=Q,pt={x:rt+o.value,y:at+t.value,scaleX:Z,scaleY:nt,opacity:_t,rotation:et};return{tween:X(H,W,pt),tweenVars:pt}},U=(H,W,J,Q,Z)=>{if(!xt||!H)return null;const nt=Lr.fromTo(H,{...Q},{duration:W,immediateRender:!1,...Z});return xt==null||xt.add(nt,J),nt},X=(H,W,J)=>{if(!xt||!H)return null;const Q=Lr.set(H,{...J});return xt==null||xt.add(Q,W),Q},j=H=>{or.value=H},$=H=>{xt==null||xt.seek(H)},st=()=>{},tt=()=>{xt.eventCallback("onUpdate",()=>{const H=xt.time();or.value=H,s(),u()}),xt==null||xt.set(Dc,{x:0},ai),qa.value=!0},it=Nt("currentNodeId",()=>null),ft=Nt("currentActiveTimelineNodeId",()=>null),ut=zt(()=>ft.value&&x(`${ft.value}`)||null),wt=zt(()=>ft.value?ft.value.indexOf("bar_")===0?"bar":ft.value.indexOf("circle_")===0?"circle":"":"");return{adModuleX:o,adModuleY:t,mainNodeList:i,mainNodeLength:e,mainNodeMap:r,mainLayer:n,updateMainLayer:s,mainContainer:a,mainSelectionRect:h,mainTransformer:l,getTargetNodeFromMain:d,selectTargetNodeFromMain:p,focusOnItem:m,timelineStage:c,timelineLayer:f,updateTimelineLayer:u,timelineTransformers:_,addTimelineTrack:R,deleteTimelineTrack:D,activateNode:w,inactivateNode:E,getTween:V,getTweenEase:B,createTween:K,createSetPoint:z,removeGSAPTween:q,deleteTween:L,deleteSetPoint:G,updateGsapTimelineByTween:O,updateGsapTimelineBySetPoint:I,addRect:g,addImage:S,addGroup:C,addTransformer:M,gsapTimeline:xt,gsapTimelineNodeTweenMap:ie,gsapTimelineInfoMap:re,initializedGsap:qa,paused:Rr,currentTime:or,updateCurrentTime:j,seekGsapTimeline:$,logGsapTimeline:st,createGsapTimeline:tt,currentNodeId:it,currentActiveTimelineNodeId:ft,currentTimelineNode:ut,timelineNodeType:wt}},{adModuleX:ce,adModuleY:de,mainLayer:Et,mainNodeList:mn,mainNodeLength:Ic,mainNodeMap:ii,mainContainer:ze,mainSelectionRect:Cr,mainTransformer:Mt,focusOnItem:Lc,addTimelineTrack:Gc,deleteTimelineTrack:Uc,createGsapTimeline:Bc,currentNodeId:Wa,createTween:Vc,createSetPoint:zc}=Nc(),{toastSuccess:Hc,toastWarning:qc}=eh(),bd=o=>{const i=Nt("mainStageRef",()=>Ce(null)),e=Nt("mainStageBgRef",()=>Ce(null)),r=Nt("stage",()=>Ce(null)),n=Nt("isClipMode",()=>!1),s=Nt("adModuleRect",()=>Ce(null)),a=se(!1),h=se(0),l=se(0),d=se(0),p=se(0),m=se(0),c=se(0),f=1.05,_=()=>{g(),b(),S(),C(),M(),Bc(),ph(i,L=>{var j;if(!r.value||!Et.value)return;const G=L[0],{width:F,height:N}=G.contentRect;r.value.width(F),r.value.height(N),h.value=r.value.width()/2,l.value=r.value.height()/2;const U=ce.value,X=de.value;ce.value=r.value.width()/2-((o==null?void 0:o.width)||320)/2,de.value=r.value.height()/2-((o==null?void 0:o.height)||320)/2,(j=s.value)==null||j.setAttrs({x:ce.value,y:de.value}),Et.value.getChildren().forEach($=>{if($.hasName("item")){const st=$.x()+(ce.value-U),tt=$.y()+(de.value-X);$.x(st),$.y(tt);const it=ii.value[$.id()];it&&(it.x=st-ce.value,it.y=tt-de.value)}}),n.value&&D()}),r.value!==null&&Mt.value!==null&&Cr.value!==null&&ze.value!==null&&k(r.value,Mt.value,Cr.value,ze.value)},v=()=>{},x=()=>{},u=()=>{},g=()=>{if(i.value)r.value=new vt.Stage({container:i.value,width:window.innerWidth-Nn,height:window.innerHeight-(In+Ua),draggable:!1}),ze.value=r.value.container(),ze.value.tabIndex=2,ze.value.style.outline="none",ze.value.style.position="relative",h.value=r.value.width()/2,l.value=r.value.height()/2,ze.value.focus();else throw new Error("mainStageRef Not Found")},b=()=>{var L;return Et.value=new vt.Layer,(L=r.value)==null||L.add(Et.value),Et.value},S=()=>{var L;Mt.value=new vt.Transformer({label:"mainTransformer",borderStroke:"#6366f1",anchorStyleFunc(G){G.cornerRadius(10),G.stroke("#6366f1"),(G.hasName("top-center")||G.hasName("bottom-center"))&&(G.height(6),G.offsetY(3),G.width(30),G.offsetX(15)),(G.hasName("middle-left")||G.hasName("middle-right"))&&(G.height(30),G.offsetY(15),G.width(6),G.offsetX(3))}}),Mt.value.boundBoxFunc((G,F)=>F),Mt.value.on("transform",G=>{var N;const F=(N=Mt.value)==null?void 0:N.nodes();F&&F.forEach(U=>{const X=ii.value[U.id()];X&&I(U,X)})}),Mt.value.on("dragmove",G=>{if(!Mt.value||!s.value||!Et.value)return;const F=Mt.value.nodes();if(!F||(F.forEach(()=>{w(F)}),Et.value.find(".guide-line").forEach(tt=>tt.destroy()),Mt.value.nodes().length>1))return;const N=Ec(Mt.value.nodes(),s.value,Et.value),U=Mt.value.nodes()[0],X=Mc(U),j=Oc(N,X);if(!j.length)return;Fc(j,Et.value);const $=U.absolutePosition();j.forEach(tt=>{switch(tt.orientation){case"V":{$.x=tt.lineGuide+tt.offset;break}case"H":{$.y=tt.lineGuide+tt.offset;break}}}),U.absolutePosition($);const st=ii.value[U.id()];st&&I(U,st)}),Mt.value.on("dragend",function(G){var F;(F=Et.value)==null||F.find(".guide-line").forEach(N=>N.destroy())}),(L=Et.value)==null||L.add(Mt.value)},C=()=>{var L,G,F;ce.value=((L=r.value)==null?void 0:L.getAttr("width"))/2-((o==null?void 0:o.width)||640)/2,de.value=((G=r.value)==null?void 0:G.getAttr("height"))/2-((o==null?void 0:o.height)||320)/2,s.value=new vt.Rect({fill:"rgba(220, 220, 220, 0.35)",width:(o==null?void 0:o.width)||640,height:(o==null?void 0:o.height)||320,x:ce.value,y:de.value,listening:!1}),(F=Et.value)==null||F.add(s.value)},M=()=>{var L;Cr.value=new vt.Rect({fill:"rgba(83, 122, 234, 0.5)",stroke:"rgba(83, 122, 234, 0.9)",visible:!1,listening:!1}),(L=Et.value)==null||L.add(Cr.value)},k=(L,G,F,N)=>{L.on("mousedown touchstart",U=>{var X,j,$,st;if(U.target._id!==L._id){U.target.hasName("item")&&!G.nodes().find(tt=>tt._id===U.target._id)&&G.nodes([U.target]);return}U.evt.preventDefault(),U.evt.stopPropagation(),d.value=((X=L.getPointerPosition())==null?void 0:X.x)||0,p.value=((j=L.getPointerPosition())==null?void 0:j.y)||0,m.value=(($=L.getPointerPosition())==null?void 0:$.x)||0,c.value=((st=L.getPointerPosition())==null?void 0:st.y)||0,F.width(0),F.height(0),a.value=!0}),L.on("mousemove touchmove",U=>{var X,j;a.value&&(U.evt.preventDefault(),U.evt.stopPropagation(),m.value=((X=L.getPointerPosition())==null?void 0:X.x)||0,c.value=((j=L.getPointerPosition())==null?void 0:j.y)||0,F.setAttrs({visible:!0,x:Math.min(d.value,m.value),y:Math.min(p.value,c.value),width:Math.abs(m.value-d.value),height:Math.abs(c.value-p.value)}))}),L.on("mouseup touchend",U=>{if(a.value=!1,!!F.visible()){U.evt.preventDefault(),U.evt.stopPropagation(),F.visible(!1);var X=L.find(".item"),j=F.getClientRect(),$=X.filter(st=>vt.Util.haveIntersection(j,st.getClientRect()));G.nodes($)}}),L.on("click tap",U=>{if(F.visible())return;if(U.target._id===L._id){T();return}if(!U.target.hasName("item"))return;const X=U.evt.shiftKey||U.evt.ctrlKey||U.evt.metaKey,j=G.nodes().indexOf(U.target)>=0;if(!X&&!j)G.nodes([U.target]);else if(X&&j){const $=G.nodes().slice();$.splice($.indexOf(U.target),1),G.nodes($)}else if(X&&!j){const $=G.nodes().concat([U.target]);G.nodes($)}N.focus()}),L.on("wheel",U=>{var ft;if(U.evt.preventDefault(),U.evt.stopPropagation(),!U.evt.metaKey)return;const X=L.scaleX(),j=L.getPointerPosition();if(!j)return;const $={x:Number(((j.x-L.x())/X).toFixed(2)),y:Number(((j.y-L.y())/X).toFixed(2))},tt=(U.evt.deltaY>0?1:-1)>0?X*f:X/f,it={x:Number((j.x-$.x*tt).toFixed(2)),y:Number((j.y-$.y*tt).toFixed(2))};if(L.scale({x:tt,y:tt}),L.position(it),!n.value&&((ft=Et.value)==null?void 0:ft.clip().x)!==void 0&&y(),e.value){const ut=Number((1/tt).toFixed(2));e.value.style.transform=`scale(${tt}, ${tt})`,e.value.style.width=`${ut*100}%`,e.value.style.height=`${ut*100}%`}}),N.addEventListener("keydown",R)},T=()=>{var L;(L=Mt.value)==null||L.nodes([])},A=L=>{var F,N;const G=(F=Mt.value)==null?void 0:F.nodes();if(G){const U=G.filter(X=>X.id()!==L.id());(N=Mt.value)==null||N.nodes(U)}},R=L=>{var F;const G=(F=Mt.value)==null?void 0:F.nodes();if(!(!G||G.length===0))switch(L.key){case"Escape":T();break;case"ArrowUp":G.forEach(N=>N.y(N.y()-1)),w(G);break;case"ArrowDown":G.forEach(N=>N.y(N.y()+1)),w(G);break;case"ArrowLeft":G.forEach(N=>N.x(N.x()-1)),w(G);break;case"ArrowRight":G.forEach(N=>N.x(N.x()+1)),w(G);break;case"w":if(G.length!==1)break;Vc(G[0]),Wa.value=G[0].id();break;case"e":if(G.length!==1)break;zc(G[0]),Wa.value=G[0].id();break}},D=()=>{var G,F,N;const L={x:ce.value,y:de.value,width:((G=s.value)==null?void 0:G.width())||640,height:((F=s.value)==null?void 0:F.height())||320};(N=Et.value)==null||N.clip(L)},y=()=>{var G;const L=r.value?{x:-r.value.x()/r.value.scaleX(),y:-r.value.y()/r.value.scaleY(),width:r.value.width()/r.value.scaleX(),height:r.value.height()/r.value.scaleY()}:{x:0,y:0,width:window.innerWidth-Nn,height:window.innerHeight-(In+Ua)};(G=Et.value)==null||G.clip(L)},P=()=>{var G;if(!r.value)return;const L=r.value;L.scale({x:1,y:1}),L.position({x:0,y:0}),!n.value&&((G=Et.value)==null?void 0:G.clip().x)!==void 0&&y(),e.value&&(e.value.style.transform="scale(1,1)",e.value.style.width="100%",e.value.style.height="100%")},w=L=>{L.forEach(G=>{const F=ii.value[G.id()];F&&I(G,F)})},E=()=>{var G;const L=(G=Et.value)==null?void 0:G.getChildren(F=>F.hasName("item"));L&&L.forEach(F=>{const N=ii.value[F.id()];N&&I(F,N)})},O=(L,G,F)=>{if(G==="x"||G==="y")switch(G){case"x":L.setAttr(G,ue(F+ce.value));break;default:L.setAttr(G,ue(F+de.value));break}else L.setAttr(G,F)},I=(L,G)=>{const F=ue(L.scaleX()),N=ue(L.scaleY()),U=ue(L.rotation());G.x=ue(L.x()-ce.value),G.y=ue(L.y()-de.value),G.scaleX=F,G.scaleY=N,G.rotation=U,G.opacity=ue(L.opacity())},V=L=>{B(L.id()),Uc(L.id()),L.destroy(),A(L),Hc("已刪除圖層")},B=L=>{const G=mn.value.findIndex(F=>F.id===L);G>-1&&mn.value.splice(G,1)},q=L=>{if(Ic.value>=za){qc(`圖層已達上限${za}張，請先刪除不要的圖層。`);return}const G=Ln.rnd(),F={id:G,name:"item",label:"未命名",x:h.value,y:l.value,width:L.naturalWidth,height:L.naturalHeight,scaleX:1,scaleY:1,rotation:0,opacity:1,offset:{x:L.naturalWidth/2,y:L.naturalHeight/2}},N=new vt.Image({...F,image:L,draggable:!0});Lc(N),z(N,F),Gc(L,G),Y()},K=(L,G)=>{if(!L)return;const F=ii.value[L.id()];F&&(L.attrs.image=G,L.width(G.naturalWidth),L.height(G.naturalHeight),L.offsetX(G.naturalWidth/2),L.offsetY(G.naturalHeight/2),F.width=G.naturalWidth,F.height=G.naturalHeight,I(L,F))},z=(L,G)=>{mn.value.push(G),I(L,G)},Y=()=>{h.value+=10,l.value+=10};return{mainStageRef:i,mainStageBgRef:e,stage:r,isClipMode:n,initKonva:_,destroyKonva:u,addImage:q,changeImage:K,deleteMainItem:V,resetZooming:P,logKonva:v,logKonvaJSON:x,updateKonvaNodeAttribute:O,updateMainNodeState:E,updateNodeAndMainNodeAttributes:I,addLayerClip:D,removeLayerClip:y}};export{pd as A,vt as K,_d as T,Wc as _,eh as a,Nc as b,bd as c,oi as d,ai as e,Lt as f,yd as g,Cc as h,vd as i,xc as j,ih as k,rh as l,Xc as u};
