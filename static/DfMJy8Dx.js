import{_ as fh,g as gh,c as ms,o as wr,r as Kr,n as _h,m as ph,I as to,h as mh,i as yh,J as vh,j as zt,k as bh,l as jr,f as Sn,C as ys,z as $r,A as vs,t as Sh,Q as Qr,p as Wt,a8 as wh,ad as bs,ae as eo,af as Ch,ag as xh,a9 as Nt,X as Te,aa as Th,ah as Ph,ai as wn,W as io,aj as ro,ak as kh,a0 as Ah,al as Eh}from"./CCTMv7XI.js";function Rh(o,t){if(typeof o!="string")throw new TypeError("argument str must be a string");const e={},i=t||{},r=i.decode||Mh;let n=0;for(;n<o.length;){const s=o.indexOf("=",n);if(s===-1)break;let a=o.indexOf(";",n);if(a===-1)a=o.length;else if(a<s){n=o.lastIndexOf(";",s-1)+1;continue}const h=o.slice(n,s).trim();if(i!=null&&i.filter&&!(i!=null&&i.filter(h))){n=a+1;continue}if(e[h]===void 0){let l=o.slice(s+1,a).trim();l.codePointAt(0)===34&&(l=l.slice(1,-1)),e[h]=Oh(l,r)}n=a+1}return e}function Mh(o){return o.includes("%")?decodeURIComponent(o):o}function Oh(o,t){try{return t(o)}catch{return o}}const Cr=/^[\u0009\u0020-\u007E\u0080-\u00FF]+$/;function Ss(o,t,e){const i=e||{},r=i.encode||encodeURIComponent;if(typeof r!="function")throw new TypeError("option encode is invalid");if(!Cr.test(o))throw new TypeError("argument name is invalid");const n=r(t);if(n&&!Cr.test(n))throw new TypeError("argument val is invalid");let s=o+"="+n;if(i.maxAge!==void 0&&i.maxAge!==null){const a=i.maxAge-0;if(Number.isNaN(a)||!Number.isFinite(a))throw new TypeError("option maxAge is invalid");s+="; Max-Age="+Math.floor(a)}if(i.domain){if(!Cr.test(i.domain))throw new TypeError("option domain is invalid");s+="; Domain="+i.domain}if(i.path){if(!Cr.test(i.path))throw new TypeError("option path is invalid");s+="; Path="+i.path}if(i.expires){if(!Fh(i.expires)||Number.isNaN(i.expires.valueOf()))throw new TypeError("option expires is invalid");s+="; Expires="+i.expires.toUTCString()}if(i.httpOnly&&(s+="; HttpOnly"),i.secure&&(s+="; Secure"),i.priority)switch(typeof i.priority=="string"?i.priority.toLowerCase():i.priority){case"low":{s+="; Priority=Low";break}case"medium":{s+="; Priority=Medium";break}case"high":{s+="; Priority=High";break}default:throw new TypeError("option priority is invalid")}if(i.sameSite)switch(typeof i.sameSite=="string"?i.sameSite.toLowerCase():i.sameSite){case!0:{s+="; SameSite=Strict";break}case"lax":{s+="; SameSite=Lax";break}case"strict":{s+="; SameSite=Strict";break}case"none":{s+="; SameSite=None";break}default:throw new TypeError("option sameSite is invalid")}return i.partitioned&&(s+="; Partitioned"),s}function Fh(o){return Object.prototype.toString.call(o)==="[object Date]"||o instanceof Date}function le(o){if(typeof o!="object")return o;var t,e,i=Object.prototype.toString.call(o);if(i==="[object Object]"){if(o.constructor!==Object&&typeof o.constructor=="function"){e=new o.constructor;for(t in o)o.hasOwnProperty(t)&&e[t]!==o[t]&&(e[t]=le(o[t]))}else{e={};for(t in o)t==="__proto__"?Object.defineProperty(e,t,{value:le(o[t]),configurable:!0,enumerable:!0,writable:!0}):e[t]=le(o[t])}return e}if(i==="[object Array]"){for(t=o.length,e=Array(t);t--;)e[t]=le(o[t]);return e}return i==="[object Set]"?(e=new Set,o.forEach(function(r){e.add(le(r))}),e):i==="[object Map]"?(e=new Map,o.forEach(function(r,n){e.set(le(n),le(r))}),e):i==="[object Date]"?new Date(+o):i==="[object RegExp]"?(e=new RegExp(o.source,o.flags),e.lastIndex=o.lastIndex,e):i==="[object DataView]"?new o.constructor(le(o.buffer)):i==="[object ArrayBuffer]"?o.slice(0):i.slice(-6)==="Array]"?new o.constructor(o):o}const Dh={base:"inline-flex items-center",rounded:"rounded-md",font:"font-medium",size:{xs:"text-xs px-1.5 py-0.5",sm:"text-xs px-2 py-1",md:"text-sm px-2 py-1",lg:"text-sm px-2.5 py-1.5"},gap:{xs:"gap-0.5",sm:"gap-1",md:"gap-1",lg:"gap-1.5"},color:{white:{solid:"ring-1 ring-inset ring-gray-300 dark:ring-gray-700 text-gray-900 dark:text-white bg-white dark:bg-gray-900"},gray:{solid:"ring-1 ring-inset ring-gray-300 dark:ring-gray-700 text-gray-700 dark:text-gray-200 bg-gray-50 dark:bg-gray-800"},black:{solid:"text-white dark:text-gray-900 bg-gray-900 dark:bg-white"}},variant:{solid:"bg-{color}-500 dark:bg-{color}-400 text-white dark:text-gray-900",outline:"text-{color}-500 dark:text-{color}-400 ring-1 ring-inset ring-{color}-500 dark:ring-{color}-400",soft:"bg-{color}-50 dark:bg-{color}-400 dark:bg-opacity-10 text-{color}-500 dark:text-{color}-400",subtle:"bg-{color}-50 dark:bg-{color}-400 dark:bg-opacity-10 text-{color}-500 dark:text-{color}-400 ring-1 ring-inset ring-{color}-500 dark:ring-{color}-400 ring-opacity-25 dark:ring-opacity-25"},icon:{base:"flex-shrink-0",size:{xs:"h-4 w-4",sm:"h-4 w-4",md:"h-5 w-5",lg:"h-5 w-5"}},default:{size:"sm",variant:"solid",color:"primary"}},Ae=ph(Sn.ui.strategy,Sn.ui.badge,Dh),Nh=gh({components:{UIcon:to},inheritAttrs:!1,props:{size:{type:String,default:()=>Ae.default.size,validator(o){return Object.keys(Ae.size).includes(o)}},color:{type:String,default:()=>Ae.default.color,validator(o){return[...Sn.ui.colors,...Object.keys(Ae.color)].includes(o)}},variant:{type:String,default:()=>Ae.default.variant,validator(o){return[...Object.keys(Ae.variant),...Object.values(Ae.color).flatMap(t=>Object.keys(t))].includes(o)}},label:{type:[String,Number],default:null},icon:{type:String,default:null},leadingIcon:{type:String,default:null},trailingIcon:{type:String,default:null},trailing:{type:Boolean,default:!1},leading:{type:Boolean,default:!1},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},setup(o){const{ui:t,attrs:e}=mh("badge",yh(o,"ui"),Ae),{size:i,rounded:r}=vh({ui:t,props:o}),n=zt(()=>o.icon&&o.leading||o.icon&&!o.trailing||!o.trailing||o.leadingIcon),s=zt(()=>o.icon&&o.trailing||o.trailing||o.trailingIcon),a=zt(()=>{var d,f;const m=((f=(d=t.value.color)==null?void 0:d[o.color])==null?void 0:f[o.variant])||t.value.variant[o.variant];return bh(jr(t.value.base,t.value.font,r.value,t.value.size[i.value],t.value.gap[i.value],m==null?void 0:m.replaceAll("{color}",o.color)),o.class)}),h=zt(()=>o.leadingIcon||o.icon),l=zt(()=>o.trailingIcon||o.icon),c=zt(()=>jr(t.value.icon.base,t.value.icon.size[i.value])),p=zt(()=>jr(t.value.icon.base,t.value.icon.size[i.value]));return{attrs:e,isLeading:n,isTrailing:s,badgeClass:a,leadingIconName:h,trailingIconName:l,leadingIconClass:c,trailingIconClass:p}}}),Ih={key:0};function Lh(o,t,e,i,r,n){const s=to;return wr(),ms("span",_h({class:o.badgeClass},o.attrs),[Kr(o.$slots,"leading",{},()=>[o.isLeading&&o.leadingIconName?(wr(),ys(s,{key:0,name:o.leadingIconName,class:vs(o.leadingIconClass),"aria-hidden":"true"},null,8,["name","class"])):$r("",!0)]),Kr(o.$slots,"default",{},()=>[o.label?(wr(),ms("span",Ih,Sh(o.label),1)):$r("",!0)]),Kr(o.$slots,"trailing",{},()=>[o.isTrailing&&o.trailingIconName?(wr(),ys(s,{key:0,name:o.trailingIconName,class:vs(o.trailingIconClass),"aria-hidden":"true"},null,8,["name","class"])):$r("",!0)])],16)}const fd=fh(Nh,[["render",Lh]]),gd=(o,t,e=!0)=>{const i=Qr("form-events",void 0),r=Qr("form-group",void 0),n=Qr("form-inputs",void 0);r&&(!e||o!=null&&o.legend?r.inputId.value=void 0:o!=null&&o.id&&(r.inputId.value=o==null?void 0:o.id),n&&(n.value[r.name.value]=r.inputId.value));const s=Wt(!1);function a(p,m){i&&i.emit({type:p,path:m})}function h(){a("blur",r==null?void 0:r.name.value),s.value=!0}function l(){a("change",r==null?void 0:r.name.value)}const c=wh(()=>{(s.value||r!=null&&r.eagerValidation.value)&&a("input",r==null?void 0:r.name.value)},300);return{inputId:zt(()=>(o==null?void 0:o.id)??(r==null?void 0:r.inputId.value)),name:zt(()=>(o==null?void 0:o.name)??(r==null?void 0:r.name.value)),size:zt(()=>{var m;const p=t.size[r==null?void 0:r.size.value]?r==null?void 0:r.size.value:null;return(o==null?void 0:o.size)??p??((m=t.default)==null?void 0:m.size)}),color:zt(()=>{var p;return(p=r==null?void 0:r.error)!=null&&p.value?"red":o==null?void 0:o.color}),emitFormBlur:h,emitFormInput:c,emitFormChange:l}};function Ce(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function no(o,t){o.prototype=Object.create(t.prototype),o.prototype.constructor=o,o.__proto__=t}/*!
 * GSAP 3.12.5
 * https://gsap.com
 *
 * @license Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var ee={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},ui={duration:.5,overwrite:!1,delay:0},zn,Bt,mt,me=1e8,Ut=1/me,Cn=Math.PI*2,Gh=Cn/4,Uh=0,so=Math.sqrt,Bh=Math.cos,Vh=Math.sin,Ft=function(t){return typeof t=="string"},xt=function(t){return typeof t=="function"},Pe=function(t){return typeof t=="number"},Hn=function(t){return typeof t>"u"},ve=function(t){return typeof t=="object"},Xt=function(t){return t!==!1},qn=function(){return typeof window<"u"},xr=function(t){return xt(t)||Ft(t)},ao=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},Vt=Array.isArray,xn=/(?:-?\.?\d|\.)+/gi,oo=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,si=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,Jr=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,ho=/[+-]=-?[.\d]+/,lo=/[^,'"\[\]\s]+/gi,zh=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,bt,ge,Tn,Yn,ie={},Fr={},co,uo=function(t){return(Fr=$e(t,ie))&&Qt},Wn=function(t,e){return console.warn("Invalid property",t,"set to",e,"Missing plugin? gsap.registerPlugin()")},gr=function(t,e){return!e&&console.warn(t)},fo=function(t,e){return t&&(ie[t]=e)&&Fr&&(Fr[t]=e)||ie},_r=function(){return 0},Hh={suppressEvents:!0,isStart:!0,kill:!1},Ar={suppressEvents:!0,kill:!1},qh={suppressEvents:!0},Xn={},De=[],Pn={},go,Jt={},Zr={},ws=30,Er=[],Kn="",jn=function(t){var e=t[0],i,r;if(ve(e)||xt(e)||(t=[t]),!(i=(e._gsap||{}).harness)){for(r=Er.length;r--&&!Er[r].targetTest(e););i=Er[r]}for(r=t.length;r--;)t[r]&&(t[r]._gsap||(t[r]._gsap=new Go(t[r],i)))||t.splice(r,1);return t},We=function(t){return t._gsap||jn(ae(t))[0]._gsap},_o=function(t,e,i){return(i=t[e])&&xt(i)?t[e]():Hn(i)&&t.getAttribute&&t.getAttribute(e)||i},Kt=function(t,e){return(t=t.split(",")).forEach(e)||t},Pt=function(t){return Math.round(t*1e5)/1e5||0},Ot=function(t){return Math.round(t*1e7)/1e7||0},li=function(t,e){var i=e.charAt(0),r=parseFloat(e.substr(2));return t=parseFloat(t),i==="+"?t+r:i==="-"?t-r:i==="*"?t*r:t/r},Yh=function(t,e){for(var i=e.length,r=0;t.indexOf(e[r])<0&&++r<i;);return r<i},Dr=function(){var t=De.length,e=De.slice(0),i,r;for(Pn={},De.length=0,i=0;i<t;i++)r=e[i],r&&r._lazy&&(r.render(r._lazy[0],r._lazy[1],!0)._lazy=0)},po=function(t,e,i,r){De.length&&!Bt&&Dr(),t.render(e,i,Bt&&e<0&&(t._initted||t._startAt)),De.length&&!Bt&&Dr()},mo=function(t){var e=parseFloat(t);return(e||e===0)&&(t+"").match(lo).length<2?e:Ft(t)?t.trim():t},yo=function(t){return t},oe=function(t,e){for(var i in e)i in t||(t[i]=e[i]);return t},Wh=function(t){return function(e,i){for(var r in i)r in e||r==="duration"&&t||r==="ease"||(e[r]=i[r])}},$e=function(t,e){for(var i in e)t[i]=e[i];return t},Cs=function o(t,e){for(var i in e)i!=="__proto__"&&i!=="constructor"&&i!=="prototype"&&(t[i]=ve(e[i])?o(t[i]||(t[i]={}),e[i]):e[i]);return t},Nr=function(t,e){var i={},r;for(r in t)r in e||(i[r]=t[r]);return i},dr=function(t){var e=t.parent||bt,i=t.keyframes?Wh(Vt(t.keyframes)):oe;if(Xt(t.inherit))for(;e;)i(t,e.vars.defaults),e=e.parent||e._dp;return t},Xh=function(t,e){for(var i=t.length,r=i===e.length;r&&i--&&t[i]===e[i];);return i<0},vo=function(t,e,i,r,n){var s=t[r],a;if(n)for(a=e[n];s&&s[n]>a;)s=s._prev;return s?(e._next=s._next,s._next=e):(e._next=t[i],t[i]=e),e._next?e._next._prev=e:t[r]=e,e._prev=s,e.parent=e._dp=t,e},Vr=function(t,e,i,r){i===void 0&&(i="_first"),r===void 0&&(r="_last");var n=e._prev,s=e._next;n?n._next=s:t[i]===e&&(t[i]=s),s?s._prev=n:t[r]===e&&(t[r]=n),e._next=e._prev=e.parent=null},Ie=function(t,e){t.parent&&(!e||t.parent.autoRemoveChildren)&&t.parent.remove&&t.parent.remove(t),t._act=0},Xe=function(t,e){if(t&&(!e||e._end>t._dur||e._start<0))for(var i=t;i;)i._dirty=1,i=i.parent;return t},Kh=function(t){for(var e=t.parent;e&&e.parent;)e._dirty=1,e.totalDuration(),e=e.parent;return t},kn=function(t,e,i,r){return t._startAt&&(Bt?t._startAt.revert(Ar):t.vars.immediateRender&&!t.vars.autoRevert||t._startAt.render(e,!0,r))},jh=function o(t){return!t||t._ts&&o(t.parent)},xs=function(t){return t._repeat?fi(t._tTime,t=t.duration()+t._rDelay)*t:0},fi=function(t,e){var i=Math.floor(t/=e);return t&&i===t?i-1:i},Ir=function(t,e){return(t-e._start)*e._ts+(e._ts>=0?0:e._dirty?e.totalDuration():e._tDur)},zr=function(t){return t._end=Ot(t._start+(t._tDur/Math.abs(t._ts||t._rts||Ut)||0))},Hr=function(t,e){var i=t._dp;return i&&i.smoothChildTiming&&t._ts&&(t._start=Ot(i._time-(t._ts>0?e/t._ts:((t._dirty?t.totalDuration():t._tDur)-e)/-t._ts)),zr(t),i._dirty||Xe(i,t)),t},bo=function(t,e){var i;if((e._time||!e._dur&&e._initted||e._start<t._time&&(e._dur||!e.add))&&(i=Ir(t.rawTime(),e),(!e._dur||Sr(0,e.totalDuration(),i)-e._tTime>Ut)&&e.render(i,!0)),Xe(t,e)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(i=t;i._dp;)i.rawTime()>=0&&i.totalTime(i._tTime),i=i._dp;t._zTime=-1e-8}},_e=function(t,e,i,r){return e.parent&&Ie(e),e._start=Ot((Pe(i)?i:i||t!==bt?se(t,i,e):t._time)+e._delay),e._end=Ot(e._start+(e.totalDuration()/Math.abs(e.timeScale())||0)),vo(t,e,"_first","_last",t._sort?"_start":0),An(e)||(t._recent=e),r||bo(t,e),t._ts<0&&Hr(t,t._tTime),t},So=function(t,e){return(ie.ScrollTrigger||Wn("scrollTrigger",e))&&ie.ScrollTrigger.create(e,t)},wo=function(t,e,i,r,n){if(Qn(t,e,n),!t._initted)return 1;if(!i&&t._pt&&!Bt&&(t._dur&&t.vars.lazy!==!1||!t._dur&&t.vars.lazy)&&go!==Zt.frame)return De.push(t),t._lazy=[n,r],1},$h=function o(t){var e=t.parent;return e&&e._ts&&e._initted&&!e._lock&&(e.rawTime()<0||o(e))},An=function(t){var e=t.data;return e==="isFromStart"||e==="isStart"},Qh=function(t,e,i,r){var n=t.ratio,s=e<0||!e&&(!t._start&&$h(t)&&!(!t._initted&&An(t))||(t._ts<0||t._dp._ts<0)&&!An(t))?0:1,a=t._rDelay,h=0,l,c,p;if(a&&t._repeat&&(h=Sr(0,t._tDur,e),c=fi(h,a),t._yoyo&&c&1&&(s=1-s),c!==fi(t._tTime,a)&&(n=1-s,t.vars.repeatRefresh&&t._initted&&t.invalidate())),s!==n||Bt||r||t._zTime===Ut||!e&&t._zTime){if(!t._initted&&wo(t,e,r,i,h))return;for(p=t._zTime,t._zTime=e||(i?Ut:0),i||(i=e&&!p),t.ratio=s,t._from&&(s=1-s),t._time=0,t._tTime=h,l=t._pt;l;)l.r(s,l.d),l=l._next;e<0&&kn(t,e,i,!0),t._onUpdate&&!i&&te(t,"onUpdate"),h&&t._repeat&&!i&&t.parent&&te(t,"onRepeat"),(e>=t._tDur||e<0)&&t.ratio===s&&(s&&Ie(t,1),!i&&!Bt&&(te(t,s?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=e)},Jh=function(t,e,i){var r;if(i>e)for(r=t._first;r&&r._start<=i;){if(r.data==="isPause"&&r._start>e)return r;r=r._next}else for(r=t._last;r&&r._start>=i;){if(r.data==="isPause"&&r._start<e)return r;r=r._prev}},gi=function(t,e,i,r){var n=t._repeat,s=Ot(e)||0,a=t._tTime/t._tDur;return a&&!r&&(t._time*=s/t._dur),t._dur=s,t._tDur=n?n<0?1e10:Ot(s*(n+1)+t._rDelay*n):s,a>0&&!r&&Hr(t,t._tTime=t._tDur*a),t.parent&&zr(t),i||Xe(t.parent,t),t},Ts=function(t){return t instanceof Ht?Xe(t):gi(t,t._dur)},Zh={_start:0,endTime:_r,totalDuration:_r},se=function o(t,e,i){var r=t.labels,n=t._recent||Zh,s=t.duration()>=me?n.endTime(!1):t._dur,a,h,l;return Ft(e)&&(isNaN(e)||e in r)?(h=e.charAt(0),l=e.substr(-1)==="%",a=e.indexOf("="),h==="<"||h===">"?(a>=0&&(e=e.replace(/=/,"")),(h==="<"?n._start:n.endTime(n._repeat>=0))+(parseFloat(e.substr(1))||0)*(l?(a<0?n:i).totalDuration()/100:1)):a<0?(e in r||(r[e]=s),r[e]):(h=parseFloat(e.charAt(a-1)+e.substr(a+1)),l&&i&&(h=h/100*(Vt(i)?i[0]:i).totalDuration()),a>1?o(t,e.substr(0,a-1),i)+h:s+h)):e==null?s:+e},ur=function(t,e,i){var r=Pe(e[1]),n=(r?2:1)+(t<2?0:1),s=e[n],a,h;if(r&&(s.duration=e[1]),s.parent=i,t){for(a=s,h=i;h&&!("immediateRender"in a);)a=h.vars.defaults||{},h=Xt(h.vars.inherit)&&h.parent;s.immediateRender=Xt(a.immediateRender),t<2?s.runBackwards=1:s.startAt=e[n-1]}return new At(e[0],s,e[n+1])},Ge=function(t,e){return t||t===0?e(t):e},Sr=function(t,e,i){return i<t?t:i>e?e:i},Gt=function(t,e){return!Ft(t)||!(e=zh.exec(t))?"":e[1]},tl=function(t,e,i){return Ge(i,function(r){return Sr(t,e,r)})},En=[].slice,Co=function(t,e){return t&&ve(t)&&"length"in t&&(!e&&!t.length||t.length-1 in t&&ve(t[0]))&&!t.nodeType&&t!==ge},el=function(t,e,i){return i===void 0&&(i=[]),t.forEach(function(r){var n;return Ft(r)&&!e||Co(r,1)?(n=i).push.apply(n,ae(r)):i.push(r)})||i},ae=function(t,e,i){return mt&&!e&&mt.selector?mt.selector(t):Ft(t)&&!i&&(Tn||!_i())?En.call((e||Yn).querySelectorAll(t),0):Vt(t)?el(t,i):Co(t)?En.call(t,0):t?[t]:[]},Rn=function(t){return t=ae(t)[0]||gr("Invalid scope")||{},function(e){var i=t.current||t.nativeElement||t;return ae(e,i.querySelectorAll?i:i===t?gr("Invalid scope")||Yn.createElement("div"):t)}},xo=function(t){return t.sort(function(){return .5-Math.random()})},To=function(t){if(xt(t))return t;var e=ve(t)?t:{each:t},i=Ke(e.ease),r=e.from||0,n=parseFloat(e.base)||0,s={},a=r>0&&r<1,h=isNaN(r)||a,l=e.axis,c=r,p=r;return Ft(r)?c=p={center:.5,edges:.5,end:1}[r]||0:!a&&h&&(c=r[0],p=r[1]),function(m,d,f){var _=(f||e).length,v=s[_],C,u,g,b,S,x,M,k,T;if(!v){if(T=e.grid==="auto"?0:(e.grid||[1,me])[1],!T){for(M=-1e8;M<(M=f[T++].getBoundingClientRect().left)&&T<_;);T<_&&T--}for(v=s[_]=[],C=h?Math.min(T,_)*c-.5:r%T,u=T===me?0:h?_*p/T-.5:r/T|0,M=0,k=me,x=0;x<_;x++)g=x%T-C,b=u-(x/T|0),v[x]=S=l?Math.abs(l==="y"?b:g):so(g*g+b*b),S>M&&(M=S),S<k&&(k=S);r==="random"&&xo(v),v.max=M-k,v.min=k,v.v=_=(parseFloat(e.amount)||parseFloat(e.each)*(T>_?_-1:l?l==="y"?_/T:T:Math.max(T,_/T))||0)*(r==="edges"?-1:1),v.b=_<0?n-_:n,v.u=Gt(e.amount||e.each)||0,i=i&&_<0?No(i):i}return _=(v[m]-v.min)/v.max||0,Ot(v.b+(i?i(_):_)*v.v)+v.u}},Mn=function(t){var e=Math.pow(10,((t+"").split(".")[1]||"").length);return function(i){var r=Ot(Math.round(parseFloat(i)/t)*t*e);return(r-r%1)/e+(Pe(i)?0:Gt(i))}},Po=function(t,e){var i=Vt(t),r,n;return!i&&ve(t)&&(r=i=t.radius||me,t.values?(t=ae(t.values),(n=!Pe(t[0]))&&(r*=r)):t=Mn(t.increment)),Ge(e,i?xt(t)?function(s){return n=t(s),Math.abs(n-s)<=r?n:s}:function(s){for(var a=parseFloat(n?s.x:s),h=parseFloat(n?s.y:0),l=me,c=0,p=t.length,m,d;p--;)n?(m=t[p].x-a,d=t[p].y-h,m=m*m+d*d):m=Math.abs(t[p]-a),m<l&&(l=m,c=p);return c=!r||l<=r?t[c]:s,n||c===s||Pe(s)?c:c+Gt(s)}:Mn(t))},ko=function(t,e,i,r){return Ge(Vt(t)?!e:i===!0?!!(i=0):!r,function(){return Vt(t)?t[~~(Math.random()*t.length)]:(i=i||1e-5)&&(r=i<1?Math.pow(10,(i+"").length-2):1)&&Math.floor(Math.round((t-i/2+Math.random()*(e-t+i*.99))/i)*i*r)/r})},il=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return function(r){return e.reduce(function(n,s){return s(n)},r)}},rl=function(t,e){return function(i){return t(parseFloat(i))+(e||Gt(i))}},nl=function(t,e,i){return Eo(t,e,0,1,i)},Ao=function(t,e,i){return Ge(i,function(r){return t[~~e(r)]})},sl=function o(t,e,i){var r=e-t;return Vt(t)?Ao(t,o(0,t.length),e):Ge(i,function(n){return(r+(n-t)%r)%r+t})},al=function o(t,e,i){var r=e-t,n=r*2;return Vt(t)?Ao(t,o(0,t.length-1),e):Ge(i,function(s){return s=(n+(s-t)%n)%n||0,t+(s>r?n-s:s)})},pr=function(t){for(var e=0,i="",r,n,s,a;~(r=t.indexOf("random(",e));)s=t.indexOf(")",r),a=t.charAt(r+7)==="[",n=t.substr(r+7,s-r-7).match(a?lo:xn),i+=t.substr(e,r-e)+ko(a?n:+n[0],a?0:+n[1],+n[2]||1e-5),e=s+1;return i+t.substr(e,t.length-e)},Eo=function(t,e,i,r,n){var s=e-t,a=r-i;return Ge(n,function(h){return i+((h-t)/s*a||0)})},ol=function o(t,e,i,r){var n=isNaN(t+e)?0:function(d){return(1-d)*t+d*e};if(!n){var s=Ft(t),a={},h,l,c,p,m;if(i===!0&&(r=1)&&(i=null),s)t={p:t},e={p:e};else if(Vt(t)&&!Vt(e)){for(c=[],p=t.length,m=p-2,l=1;l<p;l++)c.push(o(t[l-1],t[l]));p--,n=function(f){f*=p;var _=Math.min(m,~~f);return c[_](f-_)},i=e}else r||(t=$e(Vt(t)?[]:{},t));if(!c){for(h in e)$n.call(a,t,h,"get",e[h]);n=function(f){return ts(f,a)||(s?t.p:t)}}}return Ge(i,n)},Ps=function(t,e,i){var r=t.labels,n=me,s,a,h;for(s in r)a=r[s]-e,a<0==!!i&&a&&n>(a=Math.abs(a))&&(h=s,n=a);return h},te=function(t,e,i){var r=t.vars,n=r[e],s=mt,a=t._ctx,h,l,c;if(n)return h=r[e+"Params"],l=r.callbackScope||t,i&&De.length&&Dr(),a&&(mt=a),c=h?n.apply(l,h):n.call(l),mt=s,c},lr=function(t){return Ie(t),t.scrollTrigger&&t.scrollTrigger.kill(!!Bt),t.progress()<1&&te(t,"onInterrupt"),t},ai,Ro=[],Mo=function(t){if(t)if(t=!t.name&&t.default||t,qn()||t.headless){var e=t.name,i=xt(t),r=e&&!i&&t.init?function(){this._props=[]}:t,n={init:_r,render:ts,add:$n,kill:Cl,modifier:wl,rawVars:0},s={targetTest:0,get:0,getSetter:Zn,aliases:{},register:0};if(_i(),t!==r){if(Jt[e])return;oe(r,oe(Nr(t,n),s)),$e(r.prototype,$e(n,Nr(t,s))),Jt[r.prop=e]=r,t.targetTest&&(Er.push(r),Xn[e]=1),e=(e==="css"?"CSS":e.charAt(0).toUpperCase()+e.substr(1))+"Plugin"}fo(e,r),t.register&&t.register(Qt,r,jt)}else Ro.push(t)},gt=255,cr={aqua:[0,gt,gt],lime:[0,gt,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,gt],navy:[0,0,128],white:[gt,gt,gt],olive:[128,128,0],yellow:[gt,gt,0],orange:[gt,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[gt,0,0],pink:[gt,192,203],cyan:[0,gt,gt],transparent:[gt,gt,gt,0]},tn=function(t,e,i){return t+=t<0?1:t>1?-1:0,(t*6<1?e+(i-e)*t*6:t<.5?i:t*3<2?e+(i-e)*(2/3-t)*6:e)*gt+.5|0},Oo=function(t,e,i){var r=t?Pe(t)?[t>>16,t>>8&gt,t&gt]:0:cr.black,n,s,a,h,l,c,p,m,d,f;if(!r){if(t.substr(-1)===","&&(t=t.substr(0,t.length-1)),cr[t])r=cr[t];else if(t.charAt(0)==="#"){if(t.length<6&&(n=t.charAt(1),s=t.charAt(2),a=t.charAt(3),t="#"+n+n+s+s+a+a+(t.length===5?t.charAt(4)+t.charAt(4):"")),t.length===9)return r=parseInt(t.substr(1,6),16),[r>>16,r>>8&gt,r&gt,parseInt(t.substr(7),16)/255];t=parseInt(t.substr(1),16),r=[t>>16,t>>8&gt,t&gt]}else if(t.substr(0,3)==="hsl"){if(r=f=t.match(xn),!e)h=+r[0]%360/360,l=+r[1]/100,c=+r[2]/100,s=c<=.5?c*(l+1):c+l-c*l,n=c*2-s,r.length>3&&(r[3]*=1),r[0]=tn(h+1/3,n,s),r[1]=tn(h,n,s),r[2]=tn(h-1/3,n,s);else if(~t.indexOf("="))return r=t.match(oo),i&&r.length<4&&(r[3]=1),r}else r=t.match(xn)||cr.transparent;r=r.map(Number)}return e&&!f&&(n=r[0]/gt,s=r[1]/gt,a=r[2]/gt,p=Math.max(n,s,a),m=Math.min(n,s,a),c=(p+m)/2,p===m?h=l=0:(d=p-m,l=c>.5?d/(2-p-m):d/(p+m),h=p===n?(s-a)/d+(s<a?6:0):p===s?(a-n)/d+2:(n-s)/d+4,h*=60),r[0]=~~(h+.5),r[1]=~~(l*100+.5),r[2]=~~(c*100+.5)),i&&r.length<4&&(r[3]=1),r},Fo=function(t){var e=[],i=[],r=-1;return t.split(Ne).forEach(function(n){var s=n.match(si)||[];e.push.apply(e,s),i.push(r+=s.length+1)}),e.c=i,e},ks=function(t,e,i){var r="",n=(t+r).match(Ne),s=e?"hsla(":"rgba(",a=0,h,l,c,p;if(!n)return t;if(n=n.map(function(m){return(m=Oo(m,e,1))&&s+(e?m[0]+","+m[1]+"%,"+m[2]+"%,"+m[3]:m.join(","))+")"}),i&&(c=Fo(t),h=i.c,h.join(r)!==c.c.join(r)))for(l=t.replace(Ne,"1").split(si),p=l.length-1;a<p;a++)r+=l[a]+(~h.indexOf(a)?n.shift()||s+"0,0,0,0)":(c.length?c:n.length?n:i).shift());if(!l)for(l=t.split(Ne),p=l.length-1;a<p;a++)r+=l[a]+n[a];return r+l[p]},Ne=function(){var o="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",t;for(t in cr)o+="|"+t+"\\b";return new RegExp(o+")","gi")}(),hl=/hsl[a]?\(/,Do=function(t){var e=t.join(" "),i;if(Ne.lastIndex=0,Ne.test(e))return i=hl.test(e),t[1]=ks(t[1],i),t[0]=ks(t[0],i,Fo(t[1])),!0},mr,Zt=function(){var o=Date.now,t=500,e=33,i=o(),r=i,n=1e3/240,s=n,a=[],h,l,c,p,m,d,f=function _(v){var C=o()-r,u=v===!0,g,b,S,x;if((C>t||C<0)&&(i+=C-e),r+=C,S=r-i,g=S-s,(g>0||u)&&(x=++p.frame,m=S-p.time*1e3,p.time=S=S/1e3,s+=g+(g>=n?4:n-g),b=1),u||(h=l(_)),b)for(d=0;d<a.length;d++)a[d](S,m,x,v)};return p={time:0,frame:0,tick:function(){f(!0)},deltaRatio:function(v){return m/(1e3/(v||60))},wake:function(){co&&(!Tn&&qn()&&(ge=Tn=window,Yn=ge.document||{},ie.gsap=Qt,(ge.gsapVersions||(ge.gsapVersions=[])).push(Qt.version),uo(Fr||ge.GreenSockGlobals||!ge.gsap&&ge||{}),Ro.forEach(Mo)),c=typeof requestAnimationFrame<"u"&&requestAnimationFrame,h&&p.sleep(),l=c||function(v){return setTimeout(v,s-p.time*1e3+1|0)},mr=1,f(2))},sleep:function(){(c?cancelAnimationFrame:clearTimeout)(h),mr=0,l=_r},lagSmoothing:function(v,C){t=v||1/0,e=Math.min(C||33,t)},fps:function(v){n=1e3/(v||240),s=p.time*1e3+n},add:function(v,C,u){var g=C?function(b,S,x,M){v(b,S,x,M),p.remove(g)}:v;return p.remove(v),a[u?"unshift":"push"](g),_i(),g},remove:function(v,C){~(C=a.indexOf(v))&&a.splice(C,1)&&d>=C&&d--},_listeners:a},p}(),_i=function(){return!mr&&Zt.wake()},ct={},ll=/^[\d.\-M][\d.\-,\s]/,cl=/["']/g,dl=function(t){for(var e={},i=t.substr(1,t.length-3).split(":"),r=i[0],n=1,s=i.length,a,h,l;n<s;n++)h=i[n],a=n!==s-1?h.lastIndexOf(","):h.length,l=h.substr(0,a),e[r]=isNaN(l)?l.replace(cl,"").trim():+l,r=h.substr(a+1).trim();return e},ul=function(t){var e=t.indexOf("(")+1,i=t.indexOf(")"),r=t.indexOf("(",e);return t.substring(e,~r&&r<i?t.indexOf(")",i+1):i)},fl=function(t){var e=(t+"").split("("),i=ct[e[0]];return i&&e.length>1&&i.config?i.config.apply(null,~t.indexOf("{")?[dl(e[1])]:ul(t).split(",").map(mo)):ct._CE&&ll.test(t)?ct._CE("",t):i},No=function(t){return function(e){return 1-t(1-e)}},Io=function o(t,e){for(var i=t._first,r;i;)i instanceof Ht?o(i,e):i.vars.yoyoEase&&(!i._yoyo||!i._repeat)&&i._yoyo!==e&&(i.timeline?o(i.timeline,e):(r=i._ease,i._ease=i._yEase,i._yEase=r,i._yoyo=e)),i=i._next},Ke=function(t,e){return t&&(xt(t)?t:ct[t]||fl(t))||e},Je=function(t,e,i,r){i===void 0&&(i=function(h){return 1-e(1-h)}),r===void 0&&(r=function(h){return h<.5?e(h*2)/2:1-e((1-h)*2)/2});var n={easeIn:e,easeOut:i,easeInOut:r},s;return Kt(t,function(a){ct[a]=ie[a]=n,ct[s=a.toLowerCase()]=i;for(var h in n)ct[s+(h==="easeIn"?".in":h==="easeOut"?".out":".inOut")]=ct[a+"."+h]=n[h]}),n},Lo=function(t){return function(e){return e<.5?(1-t(1-e*2))/2:.5+t((e-.5)*2)/2}},en=function o(t,e,i){var r=e>=1?e:1,n=(i||(t?.3:.45))/(e<1?e:1),s=n/Cn*(Math.asin(1/r)||0),a=function(c){return c===1?1:r*Math.pow(2,-10*c)*Vh((c-s)*n)+1},h=t==="out"?a:t==="in"?function(l){return 1-a(1-l)}:Lo(a);return n=Cn/n,h.config=function(l,c){return o(t,l,c)},h},rn=function o(t,e){e===void 0&&(e=1.70158);var i=function(s){return s?--s*s*((e+1)*s+e)+1:0},r=t==="out"?i:t==="in"?function(n){return 1-i(1-n)}:Lo(i);return r.config=function(n){return o(t,n)},r};Kt("Linear,Quad,Cubic,Quart,Quint,Strong",function(o,t){var e=t<5?t+1:t;Je(o+",Power"+(e-1),t?function(i){return Math.pow(i,e)}:function(i){return i},function(i){return 1-Math.pow(1-i,e)},function(i){return i<.5?Math.pow(i*2,e)/2:1-Math.pow((1-i)*2,e)/2})});ct.Linear.easeNone=ct.none=ct.Linear.easeIn;Je("Elastic",en("in"),en("out"),en());(function(o,t){var e=1/t,i=2*e,r=2.5*e,n=function(a){return a<e?o*a*a:a<i?o*Math.pow(a-1.5/t,2)+.75:a<r?o*(a-=2.25/t)*a+.9375:o*Math.pow(a-2.625/t,2)+.984375};Je("Bounce",function(s){return 1-n(1-s)},n)})(7.5625,2.75);Je("Expo",function(o){return o?Math.pow(2,10*(o-1)):0});Je("Circ",function(o){return-(so(1-o*o)-1)});Je("Sine",function(o){return o===1?1:-Bh(o*Gh)+1});Je("Back",rn("in"),rn("out"),rn());ct.SteppedEase=ct.steps=ie.SteppedEase={config:function(t,e){t===void 0&&(t=1);var i=1/t,r=t+(e?0:1),n=e?1:0,s=1-Ut;return function(a){return((r*Sr(0,s,a)|0)+n)*i}}};ui.ease=ct["quad.out"];Kt("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(o){return Kn+=o+","+o+"Params,"});var Go=function(t,e){this.id=Uh++,t._gsap=this,this.target=t,this.harness=e,this.get=e?e.get:_o,this.set=e?e.getSetter:Zn},yr=function(){function o(e){this.vars=e,this._delay=+e.delay||0,(this._repeat=e.repeat===1/0?-2:e.repeat||0)&&(this._rDelay=e.repeatDelay||0,this._yoyo=!!e.yoyo||!!e.yoyoEase),this._ts=1,gi(this,+e.duration,1,1),this.data=e.data,mt&&(this._ctx=mt,mt.data.push(this)),mr||Zt.wake()}var t=o.prototype;return t.delay=function(i){return i||i===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+i-this._delay),this._delay=i,this):this._delay},t.duration=function(i){return arguments.length?this.totalDuration(this._repeat>0?i+(i+this._rDelay)*this._repeat:i):this.totalDuration()&&this._dur},t.totalDuration=function(i){return arguments.length?(this._dirty=0,gi(this,this._repeat<0?i:(i-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(i,r){if(_i(),!arguments.length)return this._tTime;var n=this._dp;if(n&&n.smoothChildTiming&&this._ts){for(Hr(this,i),!n._dp||n.parent||bo(n,this);n&&n.parent;)n.parent._time!==n._start+(n._ts>=0?n._tTime/n._ts:(n.totalDuration()-n._tTime)/-n._ts)&&n.totalTime(n._tTime,!0),n=n.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&i<this._tDur||this._ts<0&&i>0||!this._tDur&&!i)&&_e(this._dp,this,this._start-this._delay)}return(this._tTime!==i||!this._dur&&!r||this._initted&&Math.abs(this._zTime)===Ut||!i&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=i),po(this,i,r)),this},t.time=function(i,r){return arguments.length?this.totalTime(Math.min(this.totalDuration(),i+xs(this))%(this._dur+this._rDelay)||(i?this._dur:0),r):this._time},t.totalProgress=function(i,r){return arguments.length?this.totalTime(this.totalDuration()*i,r):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>0?1:0},t.progress=function(i,r){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-i:i)+xs(this),r):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},t.iteration=function(i,r){var n=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(i-1)*n,r):this._repeat?fi(this._tTime,n)+1:1},t.timeScale=function(i,r){if(!arguments.length)return this._rts===-1e-8?0:this._rts;if(this._rts===i)return this;var n=this.parent&&this._ts?Ir(this.parent._time,this):this._tTime;return this._rts=+i||0,this._ts=this._ps||i===-1e-8?0:this._rts,this.totalTime(Sr(-Math.abs(this._delay),this._tDur,n),r!==!1),zr(this),Kh(this)},t.paused=function(i){return arguments.length?(this._ps!==i&&(this._ps=i,i?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(_i(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Ut&&(this._tTime-=Ut)))),this):this._ps},t.startTime=function(i){if(arguments.length){this._start=i;var r=this.parent||this._dp;return r&&(r._sort||!this.parent)&&_e(r,this,i-this._delay),this}return this._start},t.endTime=function(i){return this._start+(Xt(i)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},t.rawTime=function(i){var r=this.parent||this._dp;return r?i&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Ir(r.rawTime(i),this):this._tTime:this._tTime},t.revert=function(i){i===void 0&&(i=qh);var r=Bt;return Bt=i,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(i),this.totalTime(-.01,i.suppressEvents)),this.data!=="nested"&&i.kill!==!1&&this.kill(),Bt=r,this},t.globalTime=function(i){for(var r=this,n=arguments.length?i:r.rawTime();r;)n=r._start+n/(Math.abs(r._ts)||1),r=r._dp;return!this.parent&&this._sat?this._sat.globalTime(i):n},t.repeat=function(i){return arguments.length?(this._repeat=i===1/0?-2:i,Ts(this)):this._repeat===-2?1/0:this._repeat},t.repeatDelay=function(i){if(arguments.length){var r=this._time;return this._rDelay=i,Ts(this),r?this.time(r):this}return this._rDelay},t.yoyo=function(i){return arguments.length?(this._yoyo=i,this):this._yoyo},t.seek=function(i,r){return this.totalTime(se(this,i),Xt(r))},t.restart=function(i,r){return this.play().totalTime(i?-this._delay:0,Xt(r))},t.play=function(i,r){return i!=null&&this.seek(i,r),this.reversed(!1).paused(!1)},t.reverse=function(i,r){return i!=null&&this.seek(i||this.totalDuration(),r),this.reversed(!0).paused(!1)},t.pause=function(i,r){return i!=null&&this.seek(i,r),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(i){return arguments.length?(!!i!==this.reversed()&&this.timeScale(-this._rts||(i?-1e-8:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-1e-8,this},t.isActive=function(){var i=this.parent||this._dp,r=this._start,n;return!!(!i||this._ts&&this._initted&&i.isActive()&&(n=i.rawTime(!0))>=r&&n<this.endTime(!0)-Ut)},t.eventCallback=function(i,r,n){var s=this.vars;return arguments.length>1?(r?(s[i]=r,n&&(s[i+"Params"]=n),i==="onUpdate"&&(this._onUpdate=r)):delete s[i],this):s[i]},t.then=function(i){var r=this;return new Promise(function(n){var s=xt(i)?i:yo,a=function(){var l=r.then;r.then=null,xt(s)&&(s=s(r))&&(s.then||s===r)&&(r.then=l),n(s),r.then=l};r._initted&&r.totalProgress()===1&&r._ts>=0||!r._tTime&&r._ts<0?a():r._prom=a})},t.kill=function(){lr(this)},o}();oe(yr.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var Ht=function(o){no(t,o);function t(i,r){var n;return i===void 0&&(i={}),n=o.call(this,i)||this,n.labels={},n.smoothChildTiming=!!i.smoothChildTiming,n.autoRemoveChildren=!!i.autoRemoveChildren,n._sort=Xt(i.sortChildren),bt&&_e(i.parent||bt,Ce(n),r),i.reversed&&n.reverse(),i.paused&&n.paused(!0),i.scrollTrigger&&So(Ce(n),i.scrollTrigger),n}var e=t.prototype;return e.to=function(r,n,s){return ur(0,arguments,this),this},e.from=function(r,n,s){return ur(1,arguments,this),this},e.fromTo=function(r,n,s,a){return ur(2,arguments,this),this},e.set=function(r,n,s){return n.duration=0,n.parent=this,dr(n).repeatDelay||(n.repeat=0),n.immediateRender=!!n.immediateRender,new At(r,n,se(this,s),1),this},e.call=function(r,n,s){return _e(this,At.delayedCall(0,r,n),s)},e.staggerTo=function(r,n,s,a,h,l,c){return s.duration=n,s.stagger=s.stagger||a,s.onComplete=l,s.onCompleteParams=c,s.parent=this,new At(r,s,se(this,h)),this},e.staggerFrom=function(r,n,s,a,h,l,c){return s.runBackwards=1,dr(s).immediateRender=Xt(s.immediateRender),this.staggerTo(r,n,s,a,h,l,c)},e.staggerFromTo=function(r,n,s,a,h,l,c,p){return a.startAt=s,dr(a).immediateRender=Xt(a.immediateRender),this.staggerTo(r,n,a,h,l,c,p)},e.render=function(r,n,s){var a=this._time,h=this._dirty?this.totalDuration():this._tDur,l=this._dur,c=r<=0?0:Ot(r),p=this._zTime<0!=r<0&&(this._initted||!l),m,d,f,_,v,C,u,g,b,S,x,M;if(this!==bt&&c>h&&r>=0&&(c=h),c!==this._tTime||s||p){if(a!==this._time&&l&&(c+=this._time-a,r+=this._time-a),m=c,b=this._start,g=this._ts,C=!g,p&&(l||(a=this._zTime),(r||!n)&&(this._zTime=r)),this._repeat){if(x=this._yoyo,v=l+this._rDelay,this._repeat<-1&&r<0)return this.totalTime(v*100+r,n,s);if(m=Ot(c%v),c===h?(_=this._repeat,m=l):(_=~~(c/v),_&&_===c/v&&(m=l,_--),m>l&&(m=l)),S=fi(this._tTime,v),!a&&this._tTime&&S!==_&&this._tTime-S*v-this._dur<=0&&(S=_),x&&_&1&&(m=l-m,M=1),_!==S&&!this._lock){var k=x&&S&1,T=k===(x&&_&1);if(_<S&&(k=!k),a=k?0:c%l?l:c,this._lock=1,this.render(a||(M?0:Ot(_*v)),n,!l)._lock=0,this._tTime=c,!n&&this.parent&&te(this,"onRepeat"),this.vars.repeatRefresh&&!M&&(this.invalidate()._lock=1),a&&a!==this._time||C!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(l=this._dur,h=this._tDur,T&&(this._lock=2,a=k?l:-1e-4,this.render(a,!0),this.vars.repeatRefresh&&!M&&this.invalidate()),this._lock=0,!this._ts&&!C)return this;Io(this,M)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(u=Jh(this,Ot(a),Ot(m)),u&&(c-=m-(m=u._start))),this._tTime=c,this._time=m,this._act=!g,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=r,a=0),!a&&m&&!n&&!_&&(te(this,"onStart"),this._tTime!==c))return this;if(m>=a&&r>=0)for(d=this._first;d;){if(f=d._next,(d._act||m>=d._start)&&d._ts&&u!==d){if(d.parent!==this)return this.render(r,n,s);if(d.render(d._ts>0?(m-d._start)*d._ts:(d._dirty?d.totalDuration():d._tDur)+(m-d._start)*d._ts,n,s),m!==this._time||!this._ts&&!C){u=0,f&&(c+=this._zTime=-1e-8);break}}d=f}else{d=this._last;for(var A=r<0?r:m;d;){if(f=d._prev,(d._act||A<=d._end)&&d._ts&&u!==d){if(d.parent!==this)return this.render(r,n,s);if(d.render(d._ts>0?(A-d._start)*d._ts:(d._dirty?d.totalDuration():d._tDur)+(A-d._start)*d._ts,n,s||Bt&&(d._initted||d._startAt)),m!==this._time||!this._ts&&!C){u=0,f&&(c+=this._zTime=A?-1e-8:Ut);break}}d=f}}if(u&&!n&&(this.pause(),u.render(m>=a?0:-1e-8)._zTime=m>=a?1:-1,this._ts))return this._start=b,zr(this),this.render(r,n,s);this._onUpdate&&!n&&te(this,"onUpdate",!0),(c===h&&this._tTime>=this.totalDuration()||!c&&a)&&(b===this._start||Math.abs(g)!==Math.abs(this._ts))&&(this._lock||((r||!l)&&(c===h&&this._ts>0||!c&&this._ts<0)&&Ie(this,1),!n&&!(r<0&&!a)&&(c||a||!h)&&(te(this,c===h&&r>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(c<h&&this.timeScale()>0)&&this._prom())))}return this},e.add=function(r,n){var s=this;if(Pe(n)||(n=se(this,n,r)),!(r instanceof yr)){if(Vt(r))return r.forEach(function(a){return s.add(a,n)}),this;if(Ft(r))return this.addLabel(r,n);if(xt(r))r=At.delayedCall(0,r);else return this}return this!==r?_e(this,r,n):this},e.getChildren=function(r,n,s,a){r===void 0&&(r=!0),n===void 0&&(n=!0),s===void 0&&(s=!0),a===void 0&&(a=-1e8);for(var h=[],l=this._first;l;)l._start>=a&&(l instanceof At?n&&h.push(l):(s&&h.push(l),r&&h.push.apply(h,l.getChildren(!0,n,s)))),l=l._next;return h},e.getById=function(r){for(var n=this.getChildren(1,1,1),s=n.length;s--;)if(n[s].vars.id===r)return n[s]},e.remove=function(r){return Ft(r)?this.removeLabel(r):xt(r)?this.killTweensOf(r):(Vr(this,r),r===this._recent&&(this._recent=this._last),Xe(this))},e.totalTime=function(r,n){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Ot(Zt.time-(this._ts>0?r/this._ts:(this.totalDuration()-r)/-this._ts))),o.prototype.totalTime.call(this,r,n),this._forcing=0,this):this._tTime},e.addLabel=function(r,n){return this.labels[r]=se(this,n),this},e.removeLabel=function(r){return delete this.labels[r],this},e.addPause=function(r,n,s){var a=At.delayedCall(0,n||_r,s);return a.data="isPause",this._hasPause=1,_e(this,a,se(this,r))},e.removePause=function(r){var n=this._first;for(r=se(this,r);n;)n._start===r&&n.data==="isPause"&&Ie(n),n=n._next},e.killTweensOf=function(r,n,s){for(var a=this.getTweensOf(r,s),h=a.length;h--;)Me!==a[h]&&a[h].kill(r,n);return this},e.getTweensOf=function(r,n){for(var s=[],a=ae(r),h=this._first,l=Pe(n),c;h;)h instanceof At?Yh(h._targets,a)&&(l?(!Me||h._initted&&h._ts)&&h.globalTime(0)<=n&&h.globalTime(h.totalDuration())>n:!n||h.isActive())&&s.push(h):(c=h.getTweensOf(a,n)).length&&s.push.apply(s,c),h=h._next;return s},e.tweenTo=function(r,n){n=n||{};var s=this,a=se(s,r),h=n,l=h.startAt,c=h.onStart,p=h.onStartParams,m=h.immediateRender,d,f=At.to(s,oe({ease:n.ease||"none",lazy:!1,immediateRender:!1,time:a,overwrite:"auto",duration:n.duration||Math.abs((a-(l&&"time"in l?l.time:s._time))/s.timeScale())||Ut,onStart:function(){if(s.pause(),!d){var v=n.duration||Math.abs((a-(l&&"time"in l?l.time:s._time))/s.timeScale());f._dur!==v&&gi(f,v,0,1).render(f._time,!0,!0),d=1}c&&c.apply(f,p||[])}},n));return m?f.render(0):f},e.tweenFromTo=function(r,n,s){return this.tweenTo(n,oe({startAt:{time:se(this,r)}},s))},e.recent=function(){return this._recent},e.nextLabel=function(r){return r===void 0&&(r=this._time),Ps(this,se(this,r))},e.previousLabel=function(r){return r===void 0&&(r=this._time),Ps(this,se(this,r),1)},e.currentLabel=function(r){return arguments.length?this.seek(r,!0):this.previousLabel(this._time+Ut)},e.shiftChildren=function(r,n,s){s===void 0&&(s=0);for(var a=this._first,h=this.labels,l;a;)a._start>=s&&(a._start+=r,a._end+=r),a=a._next;if(n)for(l in h)h[l]>=s&&(h[l]+=r);return Xe(this)},e.invalidate=function(r){var n=this._first;for(this._lock=0;n;)n.invalidate(r),n=n._next;return o.prototype.invalidate.call(this,r)},e.clear=function(r){r===void 0&&(r=!0);for(var n=this._first,s;n;)s=n._next,this.remove(n),n=s;return this._dp&&(this._time=this._tTime=this._pTime=0),r&&(this.labels={}),Xe(this)},e.totalDuration=function(r){var n=0,s=this,a=s._last,h=me,l,c,p;if(arguments.length)return s.timeScale((s._repeat<0?s.duration():s.totalDuration())/(s.reversed()?-r:r));if(s._dirty){for(p=s.parent;a;)l=a._prev,a._dirty&&a.totalDuration(),c=a._start,c>h&&s._sort&&a._ts&&!s._lock?(s._lock=1,_e(s,a,c-a._delay,1)._lock=0):h=c,c<0&&a._ts&&(n-=c,(!p&&!s._dp||p&&p.smoothChildTiming)&&(s._start+=c/s._ts,s._time-=c,s._tTime-=c),s.shiftChildren(-c,!1,-1/0),h=0),a._end>n&&a._ts&&(n=a._end),a=l;gi(s,s===bt&&s._time>n?s._time:n,1,1),s._dirty=0}return s._tDur},t.updateRoot=function(r){if(bt._ts&&(po(bt,Ir(r,bt)),go=Zt.frame),Zt.frame>=ws){ws+=ee.autoSleep||120;var n=bt._first;if((!n||!n._ts)&&ee.autoSleep&&Zt._listeners.length<2){for(;n&&!n._ts;)n=n._next;n||Zt.sleep()}}},t}(yr);oe(Ht.prototype,{_lock:0,_hasPause:0,_forcing:0});var gl=function(t,e,i,r,n,s,a){var h=new jt(this._pt,t,e,0,1,qo,null,n),l=0,c=0,p,m,d,f,_,v,C,u;for(h.b=i,h.e=r,i+="",r+="",(C=~r.indexOf("random("))&&(r=pr(r)),s&&(u=[i,r],s(u,t,e),i=u[0],r=u[1]),m=i.match(Jr)||[];p=Jr.exec(r);)f=p[0],_=r.substring(l,p.index),d?d=(d+1)%5:_.substr(-5)==="rgba("&&(d=1),f!==m[c++]&&(v=parseFloat(m[c-1])||0,h._pt={_next:h._pt,p:_||c===1?_:",",s:v,c:f.charAt(1)==="="?li(v,f)-v:parseFloat(f)-v,m:d&&d<4?Math.round:0},l=Jr.lastIndex);return h.c=l<r.length?r.substring(l,r.length):"",h.fp=a,(ho.test(r)||C)&&(h.e=0),this._pt=h,h},$n=function(t,e,i,r,n,s,a,h,l,c){xt(r)&&(r=r(n||0,t,s));var p=t[e],m=i!=="get"?i:xt(p)?l?t[e.indexOf("set")||!xt(t["get"+e.substr(3)])?e:"get"+e.substr(3)](l):t[e]():p,d=xt(p)?l?vl:zo:Jn,f;if(Ft(r)&&(~r.indexOf("random(")&&(r=pr(r)),r.charAt(1)==="="&&(f=li(m,r)+(Gt(m)||0),(f||f===0)&&(r=f))),!c||m!==r||On)return!isNaN(m*r)&&r!==""?(f=new jt(this._pt,t,e,+m||0,r-(m||0),typeof p=="boolean"?Sl:Ho,0,d),l&&(f.fp=l),a&&f.modifier(a,this,t),this._pt=f):(!p&&!(e in t)&&Wn(e,r),gl.call(this,t,e,m,r,d,h||ee.stringFilter,l))},_l=function(t,e,i,r,n){if(xt(t)&&(t=fr(t,n,e,i,r)),!ve(t)||t.style&&t.nodeType||Vt(t)||ao(t))return Ft(t)?fr(t,n,e,i,r):t;var s={},a;for(a in t)s[a]=fr(t[a],n,e,i,r);return s},Uo=function(t,e,i,r,n,s){var a,h,l,c;if(Jt[t]&&(a=new Jt[t]).init(n,a.rawVars?e[t]:_l(e[t],r,n,s,i),i,r,s)!==!1&&(i._pt=h=new jt(i._pt,n,t,0,1,a.render,a,0,a.priority),i!==ai))for(l=i._ptLookup[i._targets.indexOf(n)],c=a._props.length;c--;)l[a._props[c]]=h;return a},Me,On,Qn=function o(t,e,i){var r=t.vars,n=r.ease,s=r.startAt,a=r.immediateRender,h=r.lazy,l=r.onUpdate,c=r.runBackwards,p=r.yoyoEase,m=r.keyframes,d=r.autoRevert,f=t._dur,_=t._startAt,v=t._targets,C=t.parent,u=C&&C.data==="nested"?C.vars.targets:v,g=t._overwrite==="auto"&&!zn,b=t.timeline,S,x,M,k,T,A,E,D,y,P,w,R,O;if(b&&(!m||!n)&&(n="none"),t._ease=Ke(n,ui.ease),t._yEase=p?No(Ke(p===!0?n:p,ui.ease)):0,p&&t._yoyo&&!t._repeat&&(p=t._yEase,t._yEase=t._ease,t._ease=p),t._from=!b&&!!r.runBackwards,!b||m&&!r.stagger){if(D=v[0]?We(v[0]).harness:0,R=D&&r[D.prop],S=Nr(r,Xn),_&&(_._zTime<0&&_.progress(1),e<0&&c&&a&&!d?_.render(-1,!0):_.revert(c&&f?Ar:Hh),_._lazy=0),s){if(Ie(t._startAt=At.set(v,oe({data:"isStart",overwrite:!1,parent:C,immediateRender:!0,lazy:!_&&Xt(h),startAt:null,delay:0,onUpdate:l&&function(){return te(t,"onUpdate")},stagger:0},s))),t._startAt._dp=0,t._startAt._sat=t,e<0&&(Bt||!a&&!d)&&t._startAt.revert(Ar),a&&f&&e<=0&&i<=0){e&&(t._zTime=e);return}}else if(c&&f&&!_){if(e&&(a=!1),M=oe({overwrite:!1,data:"isFromStart",lazy:a&&!_&&Xt(h),immediateRender:a,stagger:0,parent:C},S),R&&(M[D.prop]=R),Ie(t._startAt=At.set(v,M)),t._startAt._dp=0,t._startAt._sat=t,e<0&&(Bt?t._startAt.revert(Ar):t._startAt.render(-1,!0)),t._zTime=e,!a)o(t._startAt,Ut,Ut);else if(!e)return}for(t._pt=t._ptCache=0,h=f&&Xt(h)||h&&!f,x=0;x<v.length;x++){if(T=v[x],E=T._gsap||jn(v)[x]._gsap,t._ptLookup[x]=P={},Pn[E.id]&&De.length&&Dr(),w=u===v?x:u.indexOf(T),D&&(y=new D).init(T,R||S,t,w,u)!==!1&&(t._pt=k=new jt(t._pt,T,y.name,0,1,y.render,y,0,y.priority),y._props.forEach(function(I){P[I]=k}),y.priority&&(A=1)),!D||R)for(M in S)Jt[M]&&(y=Uo(M,S,t,w,T,u))?y.priority&&(A=1):P[M]=k=$n.call(t,T,M,"get",S[M],w,u,0,r.stringFilter);t._op&&t._op[x]&&t.kill(T,t._op[x]),g&&t._pt&&(Me=t,bt.killTweensOf(T,P,t.globalTime(e)),O=!t.parent,Me=0),t._pt&&h&&(Pn[E.id]=1)}A&&Yo(t),t._onInit&&t._onInit(t)}t._onUpdate=l,t._initted=(!t._op||t._pt)&&!O,m&&e<=0&&b.render(me,!0,!0)},pl=function(t,e,i,r,n,s,a,h){var l=(t._pt&&t._ptCache||(t._ptCache={}))[e],c,p,m,d;if(!l)for(l=t._ptCache[e]=[],m=t._ptLookup,d=t._targets.length;d--;){if(c=m[d][e],c&&c.d&&c.d._pt)for(c=c.d._pt;c&&c.p!==e&&c.fp!==e;)c=c._next;if(!c)return On=1,t.vars[e]="+=0",Qn(t,a),On=0,h?gr(e+" not eligible for reset"):1;l.push(c)}for(d=l.length;d--;)p=l[d],c=p._pt||p,c.s=(r||r===0)&&!n?r:c.s+(r||0)+s*c.c,c.c=i-c.s,p.e&&(p.e=Pt(i)+Gt(p.e)),p.b&&(p.b=c.s+Gt(p.b))},ml=function(t,e){var i=t[0]?We(t[0]).harness:0,r=i&&i.aliases,n,s,a,h;if(!r)return e;n=$e({},e);for(s in r)if(s in n)for(h=r[s].split(","),a=h.length;a--;)n[h[a]]=n[s];return n},yl=function(t,e,i,r){var n=e.ease||r||"power1.inOut",s,a;if(Vt(e))a=i[t]||(i[t]=[]),e.forEach(function(h,l){return a.push({t:l/(e.length-1)*100,v:h,e:n})});else for(s in e)a=i[s]||(i[s]=[]),s==="ease"||a.push({t:parseFloat(t),v:e[s],e:n})},fr=function(t,e,i,r,n){return xt(t)?t.call(e,i,r,n):Ft(t)&&~t.indexOf("random(")?pr(t):t},Bo=Kn+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",Vo={};Kt(Bo+",id,stagger,delay,duration,paused,scrollTrigger",function(o){return Vo[o]=1});var At=function(o){no(t,o);function t(i,r,n,s){var a;typeof r=="number"&&(n.duration=r,r=n,n=null),a=o.call(this,s?r:dr(r))||this;var h=a.vars,l=h.duration,c=h.delay,p=h.immediateRender,m=h.stagger,d=h.overwrite,f=h.keyframes,_=h.defaults,v=h.scrollTrigger,C=h.yoyoEase,u=r.parent||bt,g=(Vt(i)||ao(i)?Pe(i[0]):"length"in r)?[i]:ae(i),b,S,x,M,k,T,A,E;if(a._targets=g.length?jn(g):gr("GSAP target "+i+" not found. https://gsap.com",!ee.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=d,f||m||xr(l)||xr(c)){if(r=a.vars,b=a.timeline=new Ht({data:"nested",defaults:_||{},targets:u&&u.data==="nested"?u.vars.targets:g}),b.kill(),b.parent=b._dp=Ce(a),b._start=0,m||xr(l)||xr(c)){if(M=g.length,A=m&&To(m),ve(m))for(k in m)~Bo.indexOf(k)&&(E||(E={}),E[k]=m[k]);for(S=0;S<M;S++)x=Nr(r,Vo),x.stagger=0,C&&(x.yoyoEase=C),E&&$e(x,E),T=g[S],x.duration=+fr(l,Ce(a),S,T,g),x.delay=(+fr(c,Ce(a),S,T,g)||0)-a._delay,!m&&M===1&&x.delay&&(a._delay=c=x.delay,a._start+=c,x.delay=0),b.to(T,x,A?A(S,T,g):0),b._ease=ct.none;b.duration()?l=c=0:a.timeline=0}else if(f){dr(oe(b.vars.defaults,{ease:"none"})),b._ease=Ke(f.ease||r.ease||"none");var D=0,y,P,w;if(Vt(f))f.forEach(function(R){return b.to(g,R,">")}),b.duration();else{x={};for(k in f)k==="ease"||k==="easeEach"||yl(k,f[k],x,f.easeEach);for(k in x)for(y=x[k].sort(function(R,O){return R.t-O.t}),D=0,S=0;S<y.length;S++)P=y[S],w={ease:P.e,duration:(P.t-(S?y[S-1].t:0))/100*l},w[k]=P.v,b.to(g,w,D),D+=w.duration;b.duration()<l&&b.to({},{duration:l-b.duration()})}}l||a.duration(l=b.duration())}else a.timeline=0;return d===!0&&!zn&&(Me=Ce(a),bt.killTweensOf(g),Me=0),_e(u,Ce(a),n),r.reversed&&a.reverse(),r.paused&&a.paused(!0),(p||!l&&!f&&a._start===Ot(u._time)&&Xt(p)&&jh(Ce(a))&&u.data!=="nested")&&(a._tTime=-1e-8,a.render(Math.max(0,-c)||0)),v&&So(Ce(a),v),a}var e=t.prototype;return e.render=function(r,n,s){var a=this._time,h=this._tDur,l=this._dur,c=r<0,p=r>h-Ut&&!c?h:r<Ut?0:r,m,d,f,_,v,C,u,g,b;if(!l)Qh(this,r,n,s);else if(p!==this._tTime||!r||s||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==c){if(m=p,g=this.timeline,this._repeat){if(_=l+this._rDelay,this._repeat<-1&&c)return this.totalTime(_*100+r,n,s);if(m=Ot(p%_),p===h?(f=this._repeat,m=l):(f=~~(p/_),f&&f===Ot(p/_)&&(m=l,f--),m>l&&(m=l)),C=this._yoyo&&f&1,C&&(b=this._yEase,m=l-m),v=fi(this._tTime,_),m===a&&!s&&this._initted&&f===v)return this._tTime=p,this;f!==v&&(g&&this._yEase&&Io(g,C),this.vars.repeatRefresh&&!C&&!this._lock&&this._time!==_&&this._initted&&(this._lock=s=1,this.render(Ot(_*f),!0).invalidate()._lock=0))}if(!this._initted){if(wo(this,c?r:m,s,n,p))return this._tTime=0,this;if(a!==this._time&&!(s&&this.vars.repeatRefresh&&f!==v))return this;if(l!==this._dur)return this.render(r,n,s)}if(this._tTime=p,this._time=m,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=u=(b||this._ease)(m/l),this._from&&(this.ratio=u=1-u),m&&!a&&!n&&!f&&(te(this,"onStart"),this._tTime!==p))return this;for(d=this._pt;d;)d.r(u,d.d),d=d._next;g&&g.render(r<0?r:g._dur*g._ease(m/this._dur),n,s)||this._startAt&&(this._zTime=r),this._onUpdate&&!n&&(c&&kn(this,r,n,s),te(this,"onUpdate")),this._repeat&&f!==v&&this.vars.onRepeat&&!n&&this.parent&&te(this,"onRepeat"),(p===this._tDur||!p)&&this._tTime===p&&(c&&!this._onUpdate&&kn(this,r,!0,!0),(r||!l)&&(p===this._tDur&&this._ts>0||!p&&this._ts<0)&&Ie(this,1),!n&&!(c&&!a)&&(p||a||C)&&(te(this,p===h?"onComplete":"onReverseComplete",!0),this._prom&&!(p<h&&this.timeScale()>0)&&this._prom()))}return this},e.targets=function(){return this._targets},e.invalidate=function(r){return(!r||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(r),o.prototype.invalidate.call(this,r)},e.resetTo=function(r,n,s,a,h){mr||Zt.wake(),this._ts||this.play();var l=Math.min(this._dur,(this._dp._time-this._start)*this._ts),c;return this._initted||Qn(this,l),c=this._ease(l/this._dur),pl(this,r,n,s,a,c,l,h)?this.resetTo(r,n,s,a,1):(Hr(this,0),this.parent||vo(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},e.kill=function(r,n){if(n===void 0&&(n="all"),!r&&(!n||n==="all"))return this._lazy=this._pt=0,this.parent?lr(this):this;if(this.timeline){var s=this.timeline.totalDuration();return this.timeline.killTweensOf(r,n,Me&&Me.vars.overwrite!==!0)._first||lr(this),this.parent&&s!==this.timeline.totalDuration()&&gi(this,this._dur*this.timeline._tDur/s,0,1),this}var a=this._targets,h=r?ae(r):a,l=this._ptLookup,c=this._pt,p,m,d,f,_,v,C;if((!n||n==="all")&&Xh(a,h))return n==="all"&&(this._pt=0),lr(this);for(p=this._op=this._op||[],n!=="all"&&(Ft(n)&&(_={},Kt(n,function(u){return _[u]=1}),n=_),n=ml(a,n)),C=a.length;C--;)if(~h.indexOf(a[C])){m=l[C],n==="all"?(p[C]=n,f=m,d={}):(d=p[C]=p[C]||{},f=n);for(_ in f)v=m&&m[_],v&&((!("kill"in v.d)||v.d.kill(_)===!0)&&Vr(this,v,"_pt"),delete m[_]),d!=="all"&&(d[_]=1)}return this._initted&&!this._pt&&c&&lr(this),this},t.to=function(r,n){return new t(r,n,arguments[2])},t.from=function(r,n){return ur(1,arguments)},t.delayedCall=function(r,n,s,a){return new t(n,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:r,onComplete:n,onReverseComplete:n,onCompleteParams:s,onReverseCompleteParams:s,callbackScope:a})},t.fromTo=function(r,n,s){return ur(2,arguments)},t.set=function(r,n){return n.duration=0,n.repeatDelay||(n.repeat=0),new t(r,n)},t.killTweensOf=function(r,n,s){return bt.killTweensOf(r,n,s)},t}(yr);oe(At.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});Kt("staggerTo,staggerFrom,staggerFromTo",function(o){At[o]=function(){var t=new Ht,e=En.call(arguments,0);return e.splice(o==="staggerFromTo"?5:4,0,0),t[o].apply(t,e)}});var Jn=function(t,e,i){return t[e]=i},zo=function(t,e,i){return t[e](i)},vl=function(t,e,i,r){return t[e](r.fp,i)},bl=function(t,e,i){return t.setAttribute(e,i)},Zn=function(t,e){return xt(t[e])?zo:Hn(t[e])&&t.setAttribute?bl:Jn},Ho=function(t,e){return e.set(e.t,e.p,Math.round((e.s+e.c*t)*1e6)/1e6,e)},Sl=function(t,e){return e.set(e.t,e.p,!!(e.s+e.c*t),e)},qo=function(t,e){var i=e._pt,r="";if(!t&&e.b)r=e.b;else if(t===1&&e.e)r=e.e;else{for(;i;)r=i.p+(i.m?i.m(i.s+i.c*t):Math.round((i.s+i.c*t)*1e4)/1e4)+r,i=i._next;r+=e.c}e.set(e.t,e.p,r,e)},ts=function(t,e){for(var i=e._pt;i;)i.r(t,i.d),i=i._next},wl=function(t,e,i,r){for(var n=this._pt,s;n;)s=n._next,n.p===r&&n.modifier(t,e,i),n=s},Cl=function(t){for(var e=this._pt,i,r;e;)r=e._next,e.p===t&&!e.op||e.op===t?Vr(this,e,"_pt"):e.dep||(i=1),e=r;return!i},xl=function(t,e,i,r){r.mSet(t,e,r.m.call(r.tween,i,r.mt),r)},Yo=function(t){for(var e=t._pt,i,r,n,s;e;){for(i=e._next,r=n;r&&r.pr>e.pr;)r=r._next;(e._prev=r?r._prev:s)?e._prev._next=e:n=e,(e._next=r)?r._prev=e:s=e,e=i}t._pt=n},jt=function(){function o(e,i,r,n,s,a,h,l,c){this.t=i,this.s=n,this.c=s,this.p=r,this.r=a||Ho,this.d=h||this,this.set=l||Jn,this.pr=c||0,this._next=e,e&&(e._prev=this)}var t=o.prototype;return t.modifier=function(i,r,n){this.mSet=this.mSet||this.set,this.set=xl,this.m=i,this.mt=n,this.tween=r},o}();Kt(Kn+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(o){return Xn[o]=1});ie.TweenMax=ie.TweenLite=At;ie.TimelineLite=ie.TimelineMax=Ht;bt=new Ht({sortChildren:!1,defaults:ui,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});ee.stringFilter=Do;var je=[],Rr={},Tl=[],As=0,Pl=0,nn=function(t){return(Rr[t]||Tl).map(function(e){return e()})},Fn=function(){var t=Date.now(),e=[];t-As>2&&(nn("matchMediaInit"),je.forEach(function(i){var r=i.queries,n=i.conditions,s,a,h,l;for(a in r)s=ge.matchMedia(r[a]).matches,s&&(h=1),s!==n[a]&&(n[a]=s,l=1);l&&(i.revert(),h&&e.push(i))}),nn("matchMediaRevert"),e.forEach(function(i){return i.onMatch(i,function(r){return i.add(null,r)})}),As=t,nn("matchMedia"))},Wo=function(){function o(e,i){this.selector=i&&Rn(i),this.data=[],this._r=[],this.isReverted=!1,this.id=Pl++,e&&this.add(e)}var t=o.prototype;return t.add=function(i,r,n){xt(i)&&(n=r,r=i,i=xt);var s=this,a=function(){var l=mt,c=s.selector,p;return l&&l!==s&&l.data.push(s),n&&(s.selector=Rn(n)),mt=s,p=r.apply(s,arguments),xt(p)&&s._r.push(p),mt=l,s.selector=c,s.isReverted=!1,p};return s.last=a,i===xt?a(s,function(h){return s.add(null,h)}):i?s[i]=a:a},t.ignore=function(i){var r=mt;mt=null,i(this),mt=r},t.getTweens=function(){var i=[];return this.data.forEach(function(r){return r instanceof o?i.push.apply(i,r.getTweens()):r instanceof At&&!(r.parent&&r.parent.data==="nested")&&i.push(r)}),i},t.clear=function(){this._r.length=this.data.length=0},t.kill=function(i,r){var n=this;if(i?function(){for(var a=n.getTweens(),h=n.data.length,l;h--;)l=n.data[h],l.data==="isFlip"&&(l.revert(),l.getChildren(!0,!0,!1).forEach(function(c){return a.splice(a.indexOf(c),1)}));for(a.map(function(c){return{g:c._dur||c._delay||c._sat&&!c._sat.vars.immediateRender?c.globalTime(0):-1/0,t:c}}).sort(function(c,p){return p.g-c.g||-1/0}).forEach(function(c){return c.t.revert(i)}),h=n.data.length;h--;)l=n.data[h],l instanceof Ht?l.data!=="nested"&&(l.scrollTrigger&&l.scrollTrigger.revert(),l.kill()):!(l instanceof At)&&l.revert&&l.revert(i);n._r.forEach(function(c){return c(i,n)}),n.isReverted=!0}():this.data.forEach(function(a){return a.kill&&a.kill()}),this.clear(),r)for(var s=je.length;s--;)je[s].id===this.id&&je.splice(s,1)},t.revert=function(i){this.kill(i||{})},o}(),kl=function(){function o(e){this.contexts=[],this.scope=e,mt&&mt.data.push(this)}var t=o.prototype;return t.add=function(i,r,n){ve(i)||(i={matches:i});var s=new Wo(0,n||this.scope),a=s.conditions={},h,l,c;mt&&!s.selector&&(s.selector=mt.selector),this.contexts.push(s),r=s.add("onMatch",r),s.queries=i;for(l in i)l==="all"?c=1:(h=ge.matchMedia(i[l]),h&&(je.indexOf(s)<0&&je.push(s),(a[l]=h.matches)&&(c=1),h.addListener?h.addListener(Fn):h.addEventListener("change",Fn)));return c&&r(s,function(p){return s.add(null,p)}),this},t.revert=function(i){this.kill(i||{})},t.kill=function(i){this.contexts.forEach(function(r){return r.kill(i,!0)})},o}(),Lr={registerPlugin:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];e.forEach(function(r){return Mo(r)})},timeline:function(t){return new Ht(t)},getTweensOf:function(t,e){return bt.getTweensOf(t,e)},getProperty:function(t,e,i,r){Ft(t)&&(t=ae(t)[0]);var n=We(t||{}).get,s=i?yo:mo;return i==="native"&&(i=""),t&&(e?s((Jt[e]&&Jt[e].get||n)(t,e,i,r)):function(a,h,l){return s((Jt[a]&&Jt[a].get||n)(t,a,h,l))})},quickSetter:function(t,e,i){if(t=ae(t),t.length>1){var r=t.map(function(c){return Qt.quickSetter(c,e,i)}),n=r.length;return function(c){for(var p=n;p--;)r[p](c)}}t=t[0]||{};var s=Jt[e],a=We(t),h=a.harness&&(a.harness.aliases||{})[e]||e,l=s?function(c){var p=new s;ai._pt=0,p.init(t,i?c+i:c,ai,0,[t]),p.render(1,p),ai._pt&&ts(1,ai)}:a.set(t,h);return s?l:function(c){return l(t,h,i?c+i:c,a,1)}},quickTo:function(t,e,i){var r,n=Qt.to(t,$e((r={},r[e]="+=0.1",r.paused=!0,r),i||{})),s=function(h,l,c){return n.resetTo(e,h,l,c)};return s.tween=n,s},isTweening:function(t){return bt.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=Ke(t.ease,ui.ease)),Cs(ui,t||{})},config:function(t){return Cs(ee,t||{})},registerEffect:function(t){var e=t.name,i=t.effect,r=t.plugins,n=t.defaults,s=t.extendTimeline;(r||"").split(",").forEach(function(a){return a&&!Jt[a]&&!ie[a]&&gr(e+" effect requires "+a+" plugin.")}),Zr[e]=function(a,h,l){return i(ae(a),oe(h||{},n),l)},s&&(Ht.prototype[e]=function(a,h,l){return this.add(Zr[e](a,ve(h)?h:(l=h)&&{},this),l)})},registerEase:function(t,e){ct[t]=Ke(e)},parseEase:function(t,e){return arguments.length?Ke(t,e):ct},getById:function(t){return bt.getById(t)},exportRoot:function(t,e){t===void 0&&(t={});var i=new Ht(t),r,n;for(i.smoothChildTiming=Xt(t.smoothChildTiming),bt.remove(i),i._dp=0,i._time=i._tTime=bt._time,r=bt._first;r;)n=r._next,(e||!(!r._dur&&r instanceof At&&r.vars.onComplete===r._targets[0]))&&_e(i,r,r._start-r._delay),r=n;return _e(bt,i,0),i},context:function(t,e){return t?new Wo(t,e):mt},matchMedia:function(t){return new kl(t)},matchMediaRefresh:function(){return je.forEach(function(t){var e=t.conditions,i,r;for(r in e)e[r]&&(e[r]=!1,i=1);i&&t.revert()})||Fn()},addEventListener:function(t,e){var i=Rr[t]||(Rr[t]=[]);~i.indexOf(e)||i.push(e)},removeEventListener:function(t,e){var i=Rr[t],r=i&&i.indexOf(e);r>=0&&i.splice(r,1)},utils:{wrap:sl,wrapYoyo:al,distribute:To,random:ko,snap:Po,normalize:nl,getUnit:Gt,clamp:tl,splitColor:Oo,toArray:ae,selector:Rn,mapRange:Eo,pipe:il,unitize:rl,interpolate:ol,shuffle:xo},install:uo,effects:Zr,ticker:Zt,updateRoot:Ht.updateRoot,plugins:Jt,globalTimeline:bt,core:{PropTween:jt,globals:fo,Tween:At,Timeline:Ht,Animation:yr,getCache:We,_removeLinkedListItem:Vr,reverting:function(){return Bt},context:function(t){return t&&mt&&(mt.data.push(t),t._ctx=mt),mt},suppressOverwrites:function(t){return zn=t}}};Kt("to,from,fromTo,delayedCall,set,killTweensOf",function(o){return Lr[o]=At[o]});Zt.add(Ht.updateRoot);ai=Lr.to({},{duration:0});var Al=function(t,e){for(var i=t._pt;i&&i.p!==e&&i.op!==e&&i.fp!==e;)i=i._next;return i},El=function(t,e){var i=t._targets,r,n,s;for(r in e)for(n=i.length;n--;)s=t._ptLookup[n][r],s&&(s=s.d)&&(s._pt&&(s=Al(s,r)),s&&s.modifier&&s.modifier(e[r],t,i[n],r))},sn=function(t,e){return{name:t,rawVars:1,init:function(r,n,s){s._onInit=function(a){var h,l;if(Ft(n)&&(h={},Kt(n,function(c){return h[c]=1}),n=h),e){h={};for(l in n)h[l]=e(n[l]);n=h}El(a,n)}}}},Qt=Lr.registerPlugin({name:"attr",init:function(t,e,i,r,n){var s,a,h;this.tween=i;for(s in e)h=t.getAttribute(s)||"",a=this.add(t,"setAttribute",(h||0)+"",e[s],r,n,0,0,s),a.op=s,a.b=h,this._props.push(s)},render:function(t,e){for(var i=e._pt;i;)Bt?i.set(i.t,i.p,i.b,i):i.r(t,i.d),i=i._next}},{name:"endArray",init:function(t,e){for(var i=e.length;i--;)this.add(t,i,t[i]||0,e[i],0,0,0,0,0,1)}},sn("roundProps",Mn),sn("modifiers"),sn("snap",Po))||Lr;At.version=Ht.version=Qt.version="3.12.5";co=1;qn()&&_i();ct.Power0;ct.Power1;ct.Power2;ct.Power3;ct.Power4;ct.Linear;ct.Quad;ct.Cubic;ct.Quart;ct.Quint;ct.Strong;ct.Elastic;ct.Back;ct.SteppedEase;ct.Bounce;ct.Sine;ct.Expo;ct.Circ;/*!
 * CSSPlugin 3.12.5
 * https://gsap.com
 *
 * Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Es,Oe,ci,es,Ye,Rs,is,Rl=function(){return typeof window<"u"},ke={},qe=180/Math.PI,di=Math.PI/180,ei=Math.atan2,Ms=1e8,rs=/([A-Z])/g,Ml=/(left|right|width|margin|padding|x)/i,Ol=/[\s,\(]\S/,pe={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},Dn=function(t,e){return e.set(e.t,e.p,Math.round((e.s+e.c*t)*1e4)/1e4+e.u,e)},Fl=function(t,e){return e.set(e.t,e.p,t===1?e.e:Math.round((e.s+e.c*t)*1e4)/1e4+e.u,e)},Dl=function(t,e){return e.set(e.t,e.p,t?Math.round((e.s+e.c*t)*1e4)/1e4+e.u:e.b,e)},Nl=function(t,e){var i=e.s+e.c*t;e.set(e.t,e.p,~~(i+(i<0?-.5:.5))+e.u,e)},Xo=function(t,e){return e.set(e.t,e.p,t?e.e:e.b,e)},Ko=function(t,e){return e.set(e.t,e.p,t!==1?e.b:e.e,e)},Il=function(t,e,i){return t.style[e]=i},Ll=function(t,e,i){return t.style.setProperty(e,i)},Gl=function(t,e,i){return t._gsap[e]=i},Ul=function(t,e,i){return t._gsap.scaleX=t._gsap.scaleY=i},Bl=function(t,e,i,r,n){var s=t._gsap;s.scaleX=s.scaleY=i,s.renderTransform(n,s)},Vl=function(t,e,i,r,n){var s=t._gsap;s[e]=i,s.renderTransform(n,s)},St="transform",$t=St+"Origin",zl=function o(t,e){var i=this,r=this.target,n=r.style,s=r._gsap;if(t in ke&&n){if(this.tfm=this.tfm||{},t!=="transform")t=pe[t]||t,~t.indexOf(",")?t.split(",").forEach(function(a){return i.tfm[a]=xe(r,a)}):this.tfm[t]=s.x?s[t]:xe(r,t),t===$t&&(this.tfm.zOrigin=s.zOrigin);else return pe.transform.split(",").forEach(function(a){return o.call(i,a,e)});if(this.props.indexOf(St)>=0)return;s.svg&&(this.svgo=r.getAttribute("data-svg-origin"),this.props.push($t,e,"")),t=St}(n||e)&&this.props.push(t,e,n[t])},jo=function(t){t.translate&&(t.removeProperty("translate"),t.removeProperty("scale"),t.removeProperty("rotate"))},Hl=function(){var t=this.props,e=this.target,i=e.style,r=e._gsap,n,s;for(n=0;n<t.length;n+=3)t[n+1]?e[t[n]]=t[n+2]:t[n+2]?i[t[n]]=t[n+2]:i.removeProperty(t[n].substr(0,2)==="--"?t[n]:t[n].replace(rs,"-$1").toLowerCase());if(this.tfm){for(s in this.tfm)r[s]=this.tfm[s];r.svg&&(r.renderTransform(),e.setAttribute("data-svg-origin",this.svgo||"")),n=is(),(!n||!n.isStart)&&!i[St]&&(jo(i),r.zOrigin&&i[$t]&&(i[$t]+=" "+r.zOrigin+"px",r.zOrigin=0,r.renderTransform()),r.uncache=1)}},$o=function(t,e){var i={target:t,props:[],revert:Hl,save:zl};return t._gsap||Qt.core.getCache(t),e&&e.split(",").forEach(function(r){return i.save(r)}),i},Qo,Nn=function(t,e){var i=Oe.createElementNS?Oe.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):Oe.createElement(t);return i&&i.style?i:Oe.createElement(t)},ye=function o(t,e,i){var r=getComputedStyle(t);return r[e]||r.getPropertyValue(e.replace(rs,"-$1").toLowerCase())||r.getPropertyValue(e)||!i&&o(t,pi(e)||e,1)||""},Os="O,Moz,ms,Ms,Webkit".split(","),pi=function(t,e,i){var r=e||Ye,n=r.style,s=5;if(t in n&&!i)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);s--&&!(Os[s]+t in n););return s<0?null:(s===3?"ms":s>=0?Os[s]:"")+t},In=function(){Rl()&&window.document&&(Es=window,Oe=Es.document,ci=Oe.documentElement,Ye=Nn("div")||{style:{}},Nn("div"),St=pi(St),$t=St+"Origin",Ye.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",Qo=!!pi("perspective"),is=Qt.core.reverting,es=1)},an=function o(t){var e=Nn("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=this.parentNode,r=this.nextSibling,n=this.style.cssText,s;if(ci.appendChild(e),e.appendChild(this),this.style.display="block",t)try{s=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=o}catch{}else this._gsapBBox&&(s=this._gsapBBox());return i&&(r?i.insertBefore(this,r):i.appendChild(this)),ci.removeChild(e),this.style.cssText=n,s},Fs=function(t,e){for(var i=e.length;i--;)if(t.hasAttribute(e[i]))return t.getAttribute(e[i])},Jo=function(t){var e;try{e=t.getBBox()}catch{e=an.call(t,!0)}return e&&(e.width||e.height)||t.getBBox===an||(e=an.call(t,!0)),e&&!e.width&&!e.x&&!e.y?{x:+Fs(t,["x","cx","x1"])||0,y:+Fs(t,["y","cy","y1"])||0,width:0,height:0}:e},Zo=function(t){return!!(t.getCTM&&(!t.parentNode||t.ownerSVGElement)&&Jo(t))},Qe=function(t,e){if(e){var i=t.style,r;e in ke&&e!==$t&&(e=St),i.removeProperty?(r=e.substr(0,2),(r==="ms"||e.substr(0,6)==="webkit")&&(e="-"+e),i.removeProperty(r==="--"?e:e.replace(rs,"-$1").toLowerCase())):i.removeAttribute(e)}},Fe=function(t,e,i,r,n,s){var a=new jt(t._pt,e,i,0,1,s?Ko:Xo);return t._pt=a,a.b=r,a.e=n,t._props.push(i),a},Ds={deg:1,rad:1,turn:1},ql={grid:1,flex:1},Le=function o(t,e,i,r){var n=parseFloat(i)||0,s=(i+"").trim().substr((n+"").length)||"px",a=Ye.style,h=Ml.test(e),l=t.tagName.toLowerCase()==="svg",c=(l?"client":"offset")+(h?"Width":"Height"),p=100,m=r==="px",d=r==="%",f,_,v,C;if(r===s||!n||Ds[r]||Ds[s])return n;if(s!=="px"&&!m&&(n=o(t,e,i,"px")),C=t.getCTM&&Zo(t),(d||s==="%")&&(ke[e]||~e.indexOf("adius")))return f=C?t.getBBox()[h?"width":"height"]:t[c],Pt(d?n/f*p:n/100*f);if(a[h?"width":"height"]=p+(m?s:r),_=~e.indexOf("adius")||r==="em"&&t.appendChild&&!l?t:t.parentNode,C&&(_=(t.ownerSVGElement||{}).parentNode),(!_||_===Oe||!_.appendChild)&&(_=Oe.body),v=_._gsap,v&&d&&v.width&&h&&v.time===Zt.time&&!v.uncache)return Pt(n/v.width*p);if(d&&(e==="height"||e==="width")){var u=t.style[e];t.style[e]=p+r,f=t[c],u?t.style[e]=u:Qe(t,e)}else(d||s==="%")&&!ql[ye(_,"display")]&&(a.position=ye(t,"position")),_===t&&(a.position="static"),_.appendChild(Ye),f=Ye[c],_.removeChild(Ye),a.position="absolute";return h&&d&&(v=We(_),v.time=Zt.time,v.width=_[c]),Pt(m?f*n/p:f&&n?p/f*n:0)},xe=function(t,e,i,r){var n;return es||In(),e in pe&&e!=="transform"&&(e=pe[e],~e.indexOf(",")&&(e=e.split(",")[0])),ke[e]&&e!=="transform"?(n=br(t,r),n=e!=="transformOrigin"?n[e]:n.svg?n.origin:Ur(ye(t,$t))+" "+n.zOrigin+"px"):(n=t.style[e],(!n||n==="auto"||r||~(n+"").indexOf("calc("))&&(n=Gr[e]&&Gr[e](t,e,i)||ye(t,e)||_o(t,e)||(e==="opacity"?1:0))),i&&!~(n+"").trim().indexOf(" ")?Le(t,e,n,i)+i:n},Yl=function(t,e,i,r){if(!i||i==="none"){var n=pi(e,t,1),s=n&&ye(t,n,1);s&&s!==i?(e=n,i=s):e==="borderColor"&&(i=ye(t,"borderTopColor"))}var a=new jt(this._pt,t.style,e,0,1,qo),h=0,l=0,c,p,m,d,f,_,v,C,u,g,b,S;if(a.b=i,a.e=r,i+="",r+="",r==="auto"&&(_=t.style[e],t.style[e]=r,r=ye(t,e)||r,_?t.style[e]=_:Qe(t,e)),c=[i,r],Do(c),i=c[0],r=c[1],m=i.match(si)||[],S=r.match(si)||[],S.length){for(;p=si.exec(r);)v=p[0],u=r.substring(h,p.index),f?f=(f+1)%5:(u.substr(-5)==="rgba("||u.substr(-5)==="hsla(")&&(f=1),v!==(_=m[l++]||"")&&(d=parseFloat(_)||0,b=_.substr((d+"").length),v.charAt(1)==="="&&(v=li(d,v)+b),C=parseFloat(v),g=v.substr((C+"").length),h=si.lastIndex-g.length,g||(g=g||ee.units[e]||b,h===r.length&&(r+=g,a.e+=g)),b!==g&&(d=Le(t,e,_,g)||0),a._pt={_next:a._pt,p:u||l===1?u:",",s:d,c:C-d,m:f&&f<4||e==="zIndex"?Math.round:0});a.c=h<r.length?r.substring(h,r.length):""}else a.r=e==="display"&&r==="none"?Ko:Xo;return ho.test(r)&&(a.e=0),this._pt=a,a},Ns={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},Wl=function(t){var e=t.split(" "),i=e[0],r=e[1]||"50%";return(i==="top"||i==="bottom"||r==="left"||r==="right")&&(t=i,i=r,r=t),e[0]=Ns[i]||i,e[1]=Ns[r]||r,e.join(" ")},Xl=function(t,e){if(e.tween&&e.tween._time===e.tween._dur){var i=e.t,r=i.style,n=e.u,s=i._gsap,a,h,l;if(n==="all"||n===!0)r.cssText="",h=1;else for(n=n.split(","),l=n.length;--l>-1;)a=n[l],ke[a]&&(h=1,a=a==="transformOrigin"?$t:St),Qe(i,a);h&&(Qe(i,St),s&&(s.svg&&i.removeAttribute("transform"),br(i,1),s.uncache=1,jo(r)))}},Gr={clearProps:function(t,e,i,r,n){if(n.data!=="isFromStart"){var s=t._pt=new jt(t._pt,e,i,0,0,Xl);return s.u=r,s.pr=-10,s.tween=n,t._props.push(i),1}}},vr=[1,0,0,1,0,0],th={},eh=function(t){return t==="matrix(1, 0, 0, 1, 0, 0)"||t==="none"||!t},Is=function(t){var e=ye(t,St);return eh(e)?vr:e.substr(7).match(oo).map(Pt)},ns=function(t,e){var i=t._gsap||We(t),r=t.style,n=Is(t),s,a,h,l;return i.svg&&t.getAttribute("transform")?(h=t.transform.baseVal.consolidate().matrix,n=[h.a,h.b,h.c,h.d,h.e,h.f],n.join(",")==="1,0,0,1,0,0"?vr:n):(n===vr&&!t.offsetParent&&t!==ci&&!i.svg&&(h=r.display,r.display="block",s=t.parentNode,(!s||!t.offsetParent)&&(l=1,a=t.nextElementSibling,ci.appendChild(t)),n=Is(t),h?r.display=h:Qe(t,"display"),l&&(a?s.insertBefore(t,a):s?s.appendChild(t):ci.removeChild(t))),e&&n.length>6?[n[0],n[1],n[4],n[5],n[12],n[13]]:n)},Ln=function(t,e,i,r,n,s){var a=t._gsap,h=n||ns(t,!0),l=a.xOrigin||0,c=a.yOrigin||0,p=a.xOffset||0,m=a.yOffset||0,d=h[0],f=h[1],_=h[2],v=h[3],C=h[4],u=h[5],g=e.split(" "),b=parseFloat(g[0])||0,S=parseFloat(g[1])||0,x,M,k,T;i?h!==vr&&(M=d*v-f*_)&&(k=b*(v/M)+S*(-_/M)+(_*u-v*C)/M,T=b*(-f/M)+S*(d/M)-(d*u-f*C)/M,b=k,S=T):(x=Jo(t),b=x.x+(~g[0].indexOf("%")?b/100*x.width:b),S=x.y+(~(g[1]||g[0]).indexOf("%")?S/100*x.height:S)),r||r!==!1&&a.smooth?(C=b-l,u=S-c,a.xOffset=p+(C*d+u*_)-C,a.yOffset=m+(C*f+u*v)-u):a.xOffset=a.yOffset=0,a.xOrigin=b,a.yOrigin=S,a.smooth=!!r,a.origin=e,a.originIsAbsolute=!!i,t.style[$t]="0px 0px",s&&(Fe(s,a,"xOrigin",l,b),Fe(s,a,"yOrigin",c,S),Fe(s,a,"xOffset",p,a.xOffset),Fe(s,a,"yOffset",m,a.yOffset)),t.setAttribute("data-svg-origin",b+" "+S)},br=function(t,e){var i=t._gsap||new Go(t);if("x"in i&&!e&&!i.uncache)return i;var r=t.style,n=i.scaleX<0,s="px",a="deg",h=getComputedStyle(t),l=ye(t,$t)||"0",c,p,m,d,f,_,v,C,u,g,b,S,x,M,k,T,A,E,D,y,P,w,R,O,I,V,B,q,K,z,Y,L;return c=p=m=_=v=C=u=g=b=0,d=f=1,i.svg=!!(t.getCTM&&Zo(t)),h.translate&&((h.translate!=="none"||h.scale!=="none"||h.rotate!=="none")&&(r[St]=(h.translate!=="none"?"translate3d("+(h.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(h.rotate!=="none"?"rotate("+h.rotate+") ":"")+(h.scale!=="none"?"scale("+h.scale.split(" ").join(",")+") ":"")+(h[St]!=="none"?h[St]:"")),r.scale=r.rotate=r.translate="none"),M=ns(t,i.svg),i.svg&&(i.uncache?(I=t.getBBox(),l=i.xOrigin-I.x+"px "+(i.yOrigin-I.y)+"px",O=""):O=!e&&t.getAttribute("data-svg-origin"),Ln(t,O||l,!!O||i.originIsAbsolute,i.smooth!==!1,M)),S=i.xOrigin||0,x=i.yOrigin||0,M!==vr&&(E=M[0],D=M[1],y=M[2],P=M[3],c=w=M[4],p=R=M[5],M.length===6?(d=Math.sqrt(E*E+D*D),f=Math.sqrt(P*P+y*y),_=E||D?ei(D,E)*qe:0,u=y||P?ei(y,P)*qe+_:0,u&&(f*=Math.abs(Math.cos(u*di))),i.svg&&(c-=S-(S*E+x*y),p-=x-(S*D+x*P))):(L=M[6],z=M[7],B=M[8],q=M[9],K=M[10],Y=M[11],c=M[12],p=M[13],m=M[14],k=ei(L,K),v=k*qe,k&&(T=Math.cos(-k),A=Math.sin(-k),O=w*T+B*A,I=R*T+q*A,V=L*T+K*A,B=w*-A+B*T,q=R*-A+q*T,K=L*-A+K*T,Y=z*-A+Y*T,w=O,R=I,L=V),k=ei(-y,K),C=k*qe,k&&(T=Math.cos(-k),A=Math.sin(-k),O=E*T-B*A,I=D*T-q*A,V=y*T-K*A,Y=P*A+Y*T,E=O,D=I,y=V),k=ei(D,E),_=k*qe,k&&(T=Math.cos(k),A=Math.sin(k),O=E*T+D*A,I=w*T+R*A,D=D*T-E*A,R=R*T-w*A,E=O,w=I),v&&Math.abs(v)+Math.abs(_)>359.9&&(v=_=0,C=180-C),d=Pt(Math.sqrt(E*E+D*D+y*y)),f=Pt(Math.sqrt(R*R+L*L)),k=ei(w,R),u=Math.abs(k)>2e-4?k*qe:0,b=Y?1/(Y<0?-Y:Y):0),i.svg&&(O=t.getAttribute("transform"),i.forceCSS=t.setAttribute("transform","")||!eh(ye(t,St)),O&&t.setAttribute("transform",O))),Math.abs(u)>90&&Math.abs(u)<270&&(n?(d*=-1,u+=_<=0?180:-180,_+=_<=0?180:-180):(f*=-1,u+=u<=0?180:-180)),e=e||i.uncache,i.x=c-((i.xPercent=c&&(!e&&i.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-c)?-50:0)))?t.offsetWidth*i.xPercent/100:0)+s,i.y=p-((i.yPercent=p&&(!e&&i.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-p)?-50:0)))?t.offsetHeight*i.yPercent/100:0)+s,i.z=m+s,i.scaleX=Pt(d),i.scaleY=Pt(f),i.rotation=Pt(_)+a,i.rotationX=Pt(v)+a,i.rotationY=Pt(C)+a,i.skewX=u+a,i.skewY=g+a,i.transformPerspective=b+s,(i.zOrigin=parseFloat(l.split(" ")[2])||!e&&i.zOrigin||0)&&(r[$t]=Ur(l)),i.xOffset=i.yOffset=0,i.force3D=ee.force3D,i.renderTransform=i.svg?jl:Qo?ih:Kl,i.uncache=0,i},Ur=function(t){return(t=t.split(" "))[0]+" "+t[1]},on=function(t,e,i){var r=Gt(e);return Pt(parseFloat(e)+parseFloat(Le(t,"x",i+"px",r)))+r},Kl=function(t,e){e.z="0px",e.rotationY=e.rotationX="0deg",e.force3D=0,ih(t,e)},Be="0deg",vi="0px",Ve=") ",ih=function(t,e){var i=e||this,r=i.xPercent,n=i.yPercent,s=i.x,a=i.y,h=i.z,l=i.rotation,c=i.rotationY,p=i.rotationX,m=i.skewX,d=i.skewY,f=i.scaleX,_=i.scaleY,v=i.transformPerspective,C=i.force3D,u=i.target,g=i.zOrigin,b="",S=C==="auto"&&t&&t!==1||C===!0;if(g&&(p!==Be||c!==Be)){var x=parseFloat(c)*di,M=Math.sin(x),k=Math.cos(x),T;x=parseFloat(p)*di,T=Math.cos(x),s=on(u,s,M*T*-g),a=on(u,a,-Math.sin(x)*-g),h=on(u,h,k*T*-g+g)}v!==vi&&(b+="perspective("+v+Ve),(r||n)&&(b+="translate("+r+"%, "+n+"%) "),(S||s!==vi||a!==vi||h!==vi)&&(b+=h!==vi||S?"translate3d("+s+", "+a+", "+h+") ":"translate("+s+", "+a+Ve),l!==Be&&(b+="rotate("+l+Ve),c!==Be&&(b+="rotateY("+c+Ve),p!==Be&&(b+="rotateX("+p+Ve),(m!==Be||d!==Be)&&(b+="skew("+m+", "+d+Ve),(f!==1||_!==1)&&(b+="scale("+f+", "+_+Ve),u.style[St]=b||"translate(0, 0)"},jl=function(t,e){var i=e||this,r=i.xPercent,n=i.yPercent,s=i.x,a=i.y,h=i.rotation,l=i.skewX,c=i.skewY,p=i.scaleX,m=i.scaleY,d=i.target,f=i.xOrigin,_=i.yOrigin,v=i.xOffset,C=i.yOffset,u=i.forceCSS,g=parseFloat(s),b=parseFloat(a),S,x,M,k,T;h=parseFloat(h),l=parseFloat(l),c=parseFloat(c),c&&(c=parseFloat(c),l+=c,h+=c),h||l?(h*=di,l*=di,S=Math.cos(h)*p,x=Math.sin(h)*p,M=Math.sin(h-l)*-m,k=Math.cos(h-l)*m,l&&(c*=di,T=Math.tan(l-c),T=Math.sqrt(1+T*T),M*=T,k*=T,c&&(T=Math.tan(c),T=Math.sqrt(1+T*T),S*=T,x*=T)),S=Pt(S),x=Pt(x),M=Pt(M),k=Pt(k)):(S=p,k=m,x=M=0),(g&&!~(s+"").indexOf("px")||b&&!~(a+"").indexOf("px"))&&(g=Le(d,"x",s,"px"),b=Le(d,"y",a,"px")),(f||_||v||C)&&(g=Pt(g+f-(f*S+_*M)+v),b=Pt(b+_-(f*x+_*k)+C)),(r||n)&&(T=d.getBBox(),g=Pt(g+r/100*T.width),b=Pt(b+n/100*T.height)),T="matrix("+S+","+x+","+M+","+k+","+g+","+b+")",d.setAttribute("transform",T),u&&(d.style[St]=T)},$l=function(t,e,i,r,n){var s=360,a=Ft(n),h=parseFloat(n)*(a&&~n.indexOf("rad")?qe:1),l=h-r,c=r+l+"deg",p,m;return a&&(p=n.split("_")[1],p==="short"&&(l%=s,l!==l%(s/2)&&(l+=l<0?s:-360)),p==="cw"&&l<0?l=(l+s*Ms)%s-~~(l/s)*s:p==="ccw"&&l>0&&(l=(l-s*Ms)%s-~~(l/s)*s)),t._pt=m=new jt(t._pt,e,i,r,l,Fl),m.e=c,m.u="deg",t._props.push(i),m},Ls=function(t,e){for(var i in e)t[i]=e[i];return t},Ql=function(t,e,i){var r=Ls({},i._gsap),n="perspective,force3D,transformOrigin,svgOrigin",s=i.style,a,h,l,c,p,m,d,f;r.svg?(l=i.getAttribute("transform"),i.setAttribute("transform",""),s[St]=e,a=br(i,1),Qe(i,St),i.setAttribute("transform",l)):(l=getComputedStyle(i)[St],s[St]=e,a=br(i,1),s[St]=l);for(h in ke)l=r[h],c=a[h],l!==c&&n.indexOf(h)<0&&(d=Gt(l),f=Gt(c),p=d!==f?Le(i,h,l,f):parseFloat(l),m=parseFloat(c),t._pt=new jt(t._pt,a,h,p,m-p,Dn),t._pt.u=f||0,t._props.push(h));Ls(a,r)};Kt("padding,margin,Width,Radius",function(o,t){var e="Top",i="Right",r="Bottom",n="Left",s=(t<3?[e,i,r,n]:[e+n,e+i,r+i,r+n]).map(function(a){return t<2?o+a:"border"+a+o});Gr[t>1?"border"+o:o]=function(a,h,l,c,p){var m,d;if(arguments.length<4)return m=s.map(function(f){return xe(a,f,l)}),d=m.join(" "),d.split(m[0]).length===5?m[0]:d;m=(c+"").split(" "),d={},s.forEach(function(f,_){return d[f]=m[_]=m[_]||m[(_-1)/2|0]}),a.init(h,d,p)}});var rh={name:"css",register:In,targetTest:function(t){return t.style&&t.nodeType},init:function(t,e,i,r,n){var s=this._props,a=t.style,h=i.vars.startAt,l,c,p,m,d,f,_,v,C,u,g,b,S,x,M,k;es||In(),this.styles=this.styles||$o(t),k=this.styles.props,this.tween=i;for(_ in e)if(_!=="autoRound"&&(c=e[_],!(Jt[_]&&Uo(_,e,i,r,t,n)))){if(d=typeof c,f=Gr[_],d==="function"&&(c=c.call(i,r,t,n),d=typeof c),d==="string"&&~c.indexOf("random(")&&(c=pr(c)),f)f(this,t,_,c,i)&&(M=1);else if(_.substr(0,2)==="--")l=(getComputedStyle(t).getPropertyValue(_)+"").trim(),c+="",Ne.lastIndex=0,Ne.test(l)||(v=Gt(l),C=Gt(c)),C?v!==C&&(l=Le(t,_,l,C)+C):v&&(c+=v),this.add(a,"setProperty",l,c,r,n,0,0,_),s.push(_),k.push(_,0,a[_]);else if(d!=="undefined"){if(h&&_ in h?(l=typeof h[_]=="function"?h[_].call(i,r,t,n):h[_],Ft(l)&&~l.indexOf("random(")&&(l=pr(l)),Gt(l+"")||l==="auto"||(l+=ee.units[_]||Gt(xe(t,_))||""),(l+"").charAt(1)==="="&&(l=xe(t,_))):l=xe(t,_),m=parseFloat(l),u=d==="string"&&c.charAt(1)==="="&&c.substr(0,2),u&&(c=c.substr(2)),p=parseFloat(c),_ in pe&&(_==="autoAlpha"&&(m===1&&xe(t,"visibility")==="hidden"&&p&&(m=0),k.push("visibility",0,a.visibility),Fe(this,a,"visibility",m?"inherit":"hidden",p?"inherit":"hidden",!p)),_!=="scale"&&_!=="transform"&&(_=pe[_],~_.indexOf(",")&&(_=_.split(",")[0]))),g=_ in ke,g){if(this.styles.save(_),b||(S=t._gsap,S.renderTransform&&!e.parseTransform||br(t,e.parseTransform),x=e.smoothOrigin!==!1&&S.smooth,b=this._pt=new jt(this._pt,a,St,0,1,S.renderTransform,S,0,-1),b.dep=1),_==="scale")this._pt=new jt(this._pt,S,"scaleY",S.scaleY,(u?li(S.scaleY,u+p):p)-S.scaleY||0,Dn),this._pt.u=0,s.push("scaleY",_),_+="X";else if(_==="transformOrigin"){k.push($t,0,a[$t]),c=Wl(c),S.svg?Ln(t,c,0,x,0,this):(C=parseFloat(c.split(" ")[2])||0,C!==S.zOrigin&&Fe(this,S,"zOrigin",S.zOrigin,C),Fe(this,a,_,Ur(l),Ur(c)));continue}else if(_==="svgOrigin"){Ln(t,c,1,x,0,this);continue}else if(_ in th){$l(this,S,_,m,u?li(m,u+c):c);continue}else if(_==="smoothOrigin"){Fe(this,S,"smooth",S.smooth,c);continue}else if(_==="force3D"){S[_]=c;continue}else if(_==="transform"){Ql(this,c,t);continue}}else _ in a||(_=pi(_)||_);if(g||(p||p===0)&&(m||m===0)&&!Ol.test(c)&&_ in a)v=(l+"").substr((m+"").length),p||(p=0),C=Gt(c)||(_ in ee.units?ee.units[_]:v),v!==C&&(m=Le(t,_,l,C)),this._pt=new jt(this._pt,g?S:a,_,m,(u?li(m,u+p):p)-m,!g&&(C==="px"||_==="zIndex")&&e.autoRound!==!1?Nl:Dn),this._pt.u=C||0,v!==C&&C!=="%"&&(this._pt.b=l,this._pt.r=Dl);else if(_ in a)Yl.call(this,t,_,l,u?u+c:c);else if(_ in t)this.add(t,_,l||t[_],u?u+c:c,r,n);else if(_!=="parseTransform"){Wn(_,c);continue}g||(_ in a?k.push(_,0,a[_]):k.push(_,1,l||t[_])),s.push(_)}}M&&Yo(this)},render:function(t,e){if(e.tween._time||!is())for(var i=e._pt;i;)i.r(t,i.d),i=i._next;else e.styles.revert()},get:xe,aliases:pe,getSetter:function(t,e,i){var r=pe[e];return r&&r.indexOf(",")<0&&(e=r),e in ke&&e!==$t&&(t._gsap.x||xe(t,"x"))?i&&Rs===i?e==="scale"?Ul:Gl:(Rs=i||{})&&(e==="scale"?Bl:Vl):t.style&&!Hn(t.style[e])?Il:~e.indexOf("-")?Ll:Zn(t,e)},core:{_removeProperty:Qe,_getMatrix:ns}};Qt.utils.checkPrefix=pi;Qt.core.getStyleSaver=$o;(function(o,t,e,i){var r=Kt(o+","+t+","+e,function(n){ke[n]=1});Kt(t,function(n){ee.units[n]="deg",th[n]=1}),pe[r[13]]=o+","+t,Kt(i,function(n){var s=n.split(":");pe[s[1]]=r[s[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");Kt("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(o){ee.units[o]="px"});Qt.registerPlugin(rh);var Br=Qt.registerPlugin(rh)||Qt;Br.core.Tween;var Mr={exports:{}},bi={},hn={},ln={},Gs;function ot(){return Gs||(Gs=1,function(o){Object.defineProperty(o,"__esModule",{value:!0}),o._registerNode=o.Konva=o.glob=void 0;const t=Math.PI/180;function e(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}o.glob=typeof bs<"u"?bs:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},o.Konva={_global:o.glob,version:"9.3.16",isBrowser:e(),isUnminified:/param/.test((function(r){}).toString()),dblClickWindow:400,getAngle(r){return o.Konva.angleDeg?r*t:r},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_fixTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return o.Konva.DD.isDragging},isTransforming(){var r;return(r=o.Konva.Transformer)===null||r===void 0?void 0:r.isTransforming()},isDragReady(){return!!o.Konva.DD.node},releaseCanvasOnDestroy:!0,document:o.glob.document,_injectGlobal(r){o.glob.Konva=r}};const i=r=>{o.Konva[r.prototype.getClassName()]=r};o._registerNode=i,o.Konva._injectGlobal(o.Konva)}(ln)),ln}var cn={},Us;function Tt(){return Us||(Us=1,function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.Util=o.Transform=void 0;const t=ot();class e{constructor(b=[1,0,0,1,0,0]){this.dirty=!1,this.m=b&&b.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new e(this.m)}copyInto(b){b.m[0]=this.m[0],b.m[1]=this.m[1],b.m[2]=this.m[2],b.m[3]=this.m[3],b.m[4]=this.m[4],b.m[5]=this.m[5]}point(b){const S=this.m;return{x:S[0]*b.x+S[2]*b.y+S[4],y:S[1]*b.x+S[3]*b.y+S[5]}}translate(b,S){return this.m[4]+=this.m[0]*b+this.m[2]*S,this.m[5]+=this.m[1]*b+this.m[3]*S,this}scale(b,S){return this.m[0]*=b,this.m[1]*=b,this.m[2]*=S,this.m[3]*=S,this}rotate(b){const S=Math.cos(b),x=Math.sin(b),M=this.m[0]*S+this.m[2]*x,k=this.m[1]*S+this.m[3]*x,T=this.m[0]*-x+this.m[2]*S,A=this.m[1]*-x+this.m[3]*S;return this.m[0]=M,this.m[1]=k,this.m[2]=T,this.m[3]=A,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(b,S){const x=this.m[0]+this.m[2]*S,M=this.m[1]+this.m[3]*S,k=this.m[2]+this.m[0]*b,T=this.m[3]+this.m[1]*b;return this.m[0]=x,this.m[1]=M,this.m[2]=k,this.m[3]=T,this}multiply(b){const S=this.m[0]*b.m[0]+this.m[2]*b.m[1],x=this.m[1]*b.m[0]+this.m[3]*b.m[1],M=this.m[0]*b.m[2]+this.m[2]*b.m[3],k=this.m[1]*b.m[2]+this.m[3]*b.m[3],T=this.m[0]*b.m[4]+this.m[2]*b.m[5]+this.m[4],A=this.m[1]*b.m[4]+this.m[3]*b.m[5]+this.m[5];return this.m[0]=S,this.m[1]=x,this.m[2]=M,this.m[3]=k,this.m[4]=T,this.m[5]=A,this}invert(){const b=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),S=this.m[3]*b,x=-this.m[1]*b,M=-this.m[2]*b,k=this.m[0]*b,T=b*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),A=b*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=S,this.m[1]=x,this.m[2]=M,this.m[3]=k,this.m[4]=T,this.m[5]=A,this}getMatrix(){return this.m}decompose(){const b=this.m[0],S=this.m[1],x=this.m[2],M=this.m[3],k=this.m[4],T=this.m[5],A=b*M-S*x,E={x:k,y:T,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(b!=0||S!=0){const D=Math.sqrt(b*b+S*S);E.rotation=S>0?Math.acos(b/D):-Math.acos(b/D),E.scaleX=D,E.scaleY=A/D,E.skewX=(b*x+S*M)/A,E.skewY=0}else if(x!=0||M!=0){const D=Math.sqrt(x*x+M*M);E.rotation=Math.PI/2-(M>0?Math.acos(-x/D):-Math.acos(x/D)),E.scaleX=A/D,E.scaleY=D,E.skewX=0,E.skewY=(b*x+S*M)/A}return E.rotation=o.Util._getRotation(E.rotation),E}}o.Transform=e;let i="[object Array]",r="[object Number]",n="[object String]",s="[object Boolean]",a=Math.PI/180,h=180/Math.PI,l="#",c="",p="0",m="Konva warning: ",d="Konva error: ",f="rgb(",_={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},v=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,C=[];const u=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(g){setTimeout(g,60)};o.Util={_isElement(g){return!!(g&&g.nodeType==1)},_isFunction(g){return!!(g&&g.constructor&&g.call&&g.apply)},_isPlainObject(g){return!!g&&g.constructor===Object},_isArray(g){return Object.prototype.toString.call(g)===i},_isNumber(g){return Object.prototype.toString.call(g)===r&&!isNaN(g)&&isFinite(g)},_isString(g){return Object.prototype.toString.call(g)===n},_isBoolean(g){return Object.prototype.toString.call(g)===s},isObject(g){return g instanceof Object},isValidSelector(g){if(typeof g!="string")return!1;const b=g[0];return b==="#"||b==="."||b===b.toUpperCase()},_sign(g){return g===0||g>0?1:-1},requestAnimFrame(g){C.push(g),C.length===1&&u(function(){const b=C;C=[],b.forEach(function(S){S()})})},createCanvasElement(){const g=document.createElement("canvas");try{g.style=g.style||{}}catch{}return g},createImageElement(){return document.createElement("img")},_isInDocument(g){for(;g=g.parentNode;)if(g==document)return!0;return!1},_urlToImage(g,b){const S=o.Util.createImageElement();S.onload=function(){b(S)},S.src=g},_rgbToHex(g,b,S){return((1<<24)+(g<<16)+(b<<8)+S).toString(16).slice(1)},_hexToRgb(g){g=g.replace(l,c);const b=parseInt(g,16);return{r:b>>16&255,g:b>>8&255,b:b&255}},getRandomColor(){let g=(Math.random()*16777215<<0).toString(16);for(;g.length<6;)g=p+g;return l+g},getRGB(g){let b;return g in _?(b=_[g],{r:b[0],g:b[1],b:b[2]}):g[0]===l?this._hexToRgb(g.substring(1)):g.substr(0,4)===f?(b=v.exec(g.replace(/ /g,"")),{r:parseInt(b[1],10),g:parseInt(b[2],10),b:parseInt(b[3],10)}):{r:0,g:0,b:0}},colorToRGBA(g){return g=g||"black",o.Util._namedColorToRBA(g)||o.Util._hex3ColorToRGBA(g)||o.Util._hex4ColorToRGBA(g)||o.Util._hex6ColorToRGBA(g)||o.Util._hex8ColorToRGBA(g)||o.Util._rgbColorToRGBA(g)||o.Util._rgbaColorToRGBA(g)||o.Util._hslColorToRGBA(g)},_namedColorToRBA(g){const b=_[g.toLowerCase()];return b?{r:b[0],g:b[1],b:b[2],a:1}:null},_rgbColorToRGBA(g){if(g.indexOf("rgb(")===0){g=g.match(/rgb\(([^)]+)\)/)[1];const b=g.split(/ *, */).map(Number);return{r:b[0],g:b[1],b:b[2],a:1}}},_rgbaColorToRGBA(g){if(g.indexOf("rgba(")===0){g=g.match(/rgba\(([^)]+)\)/)[1];const b=g.split(/ *, */).map((S,x)=>S.slice(-1)==="%"?x===3?parseInt(S)/100:parseInt(S)/100*255:Number(S));return{r:b[0],g:b[1],b:b[2],a:b[3]}}},_hex8ColorToRGBA(g){if(g[0]==="#"&&g.length===9)return{r:parseInt(g.slice(1,3),16),g:parseInt(g.slice(3,5),16),b:parseInt(g.slice(5,7),16),a:parseInt(g.slice(7,9),16)/255}},_hex6ColorToRGBA(g){if(g[0]==="#"&&g.length===7)return{r:parseInt(g.slice(1,3),16),g:parseInt(g.slice(3,5),16),b:parseInt(g.slice(5,7),16),a:1}},_hex4ColorToRGBA(g){if(g[0]==="#"&&g.length===5)return{r:parseInt(g[1]+g[1],16),g:parseInt(g[2]+g[2],16),b:parseInt(g[3]+g[3],16),a:parseInt(g[4]+g[4],16)/255}},_hex3ColorToRGBA(g){if(g[0]==="#"&&g.length===4)return{r:parseInt(g[1]+g[1],16),g:parseInt(g[2]+g[2],16),b:parseInt(g[3]+g[3],16),a:1}},_hslColorToRGBA(g){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(g)){const[b,...S]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(g),x=Number(S[0])/360,M=Number(S[1])/100,k=Number(S[2])/100;let T,A,E;if(M===0)return E=k*255,{r:Math.round(E),g:Math.round(E),b:Math.round(E),a:1};k<.5?T=k*(1+M):T=k+M-k*M;const D=2*k-T,y=[0,0,0];for(let P=0;P<3;P++)A=x+1/3*-(P-1),A<0&&A++,A>1&&A--,6*A<1?E=D+(T-D)*6*A:2*A<1?E=T:3*A<2?E=D+(T-D)*(2/3-A)*6:E=D,y[P]=E*255;return{r:Math.round(y[0]),g:Math.round(y[1]),b:Math.round(y[2]),a:1}}},haveIntersection(g,b){return!(b.x>g.x+g.width||b.x+b.width<g.x||b.y>g.y+g.height||b.y+b.height<g.y)},cloneObject(g){const b={};for(const S in g)this._isPlainObject(g[S])?b[S]=this.cloneObject(g[S]):this._isArray(g[S])?b[S]=this.cloneArray(g[S]):b[S]=g[S];return b},cloneArray(g){return g.slice(0)},degToRad(g){return g*a},radToDeg(g){return g*h},_degToRad(g){return o.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),o.Util.degToRad(g)},_radToDeg(g){return o.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),o.Util.radToDeg(g)},_getRotation(g){return t.Konva.angleDeg?o.Util.radToDeg(g):g},_capitalize(g){return g.charAt(0).toUpperCase()+g.slice(1)},throw(g){throw new Error(d+g)},error(g){console.error(d+g)},warn(g){t.Konva.showWarnings&&console.warn(m+g)},each(g,b){for(const S in g)b(S,g[S])},_inRange(g,b,S){return b<=g&&g<S},_getProjectionToSegment(g,b,S,x,M,k){let T,A,E;const D=(g-S)*(g-S)+(b-x)*(b-x);if(D==0)T=g,A=b,E=(M-S)*(M-S)+(k-x)*(k-x);else{const y=((M-g)*(S-g)+(k-b)*(x-b))/D;y<0?(T=g,A=b,E=(g-M)*(g-M)+(b-k)*(b-k)):y>1?(T=S,A=x,E=(S-M)*(S-M)+(x-k)*(x-k)):(T=g+y*(S-g),A=b+y*(x-b),E=(T-M)*(T-M)+(A-k)*(A-k))}return[T,A,E]},_getProjectionToLine(g,b,S){const x=o.Util.cloneObject(g);let M=Number.MAX_VALUE;return b.forEach(function(k,T){if(!S&&T===b.length-1)return;const A=b[(T+1)%b.length],E=o.Util._getProjectionToSegment(k.x,k.y,A.x,A.y,g.x,g.y),D=E[0],y=E[1],P=E[2];P<M&&(x.x=D,x.y=y,M=P)}),x},_prepareArrayForTween(g,b,S){let x,M=[],k=[];if(g.length>b.length){const A=b;b=g,g=A}for(x=0;x<g.length;x+=2)M.push({x:g[x],y:g[x+1]});for(x=0;x<b.length;x+=2)k.push({x:b[x],y:b[x+1]});const T=[];return k.forEach(function(A){const E=o.Util._getProjectionToLine(A,M,S);T.push(E.x),T.push(E.y)}),T},_prepareToStringify(g){let b;g.visitedByCircularReferenceRemoval=!0;for(const S in g)if(g.hasOwnProperty(S)&&g[S]&&typeof g[S]=="object"){if(b=Object.getOwnPropertyDescriptor(g,S),g[S].visitedByCircularReferenceRemoval||o.Util._isElement(g[S]))if(b.configurable)delete g[S];else return null;else if(o.Util._prepareToStringify(g[S])===null)if(b.configurable)delete g[S];else return null}return delete g.visitedByCircularReferenceRemoval,g},_assign(g,b){for(const S in b)g[S]=b[S];return g},_getFirstPointerId(g){return g.touches?g.changedTouches[0].identifier:g.pointerId||999},releaseCanvas(...g){t.Konva.releaseCanvasOnDestroy&&g.forEach(b=>{b.width=0,b.height=0})},drawRoundedRectPath(g,b,S,x){let M=0,k=0,T=0,A=0;typeof x=="number"?M=k=T=A=Math.min(x,b/2,S/2):(M=Math.min(x[0]||0,b/2,S/2),k=Math.min(x[1]||0,b/2,S/2),A=Math.min(x[2]||0,b/2,S/2),T=Math.min(x[3]||0,b/2,S/2)),g.moveTo(M,0),g.lineTo(b-k,0),g.arc(b-k,k,k,Math.PI*3/2,0,!1),g.lineTo(b,S-A),g.arc(b-A,S-A,A,0,Math.PI/2,!1),g.lineTo(T,S),g.arc(T,S-T,T,Math.PI/2,Math.PI,!1),g.lineTo(0,M),g.arc(M,M,M,Math.PI,Math.PI*3/2,!1)}}}(cn)),cn}var Si={},dn={},qt={},Bs;function lt(){if(Bs)return qt;Bs=1,Object.defineProperty(qt,"__esModule",{value:!0}),qt.RGBComponent=i,qt.alphaComponent=r,qt.getNumberValidator=n,qt.getNumberOrArrayOfNumbersValidator=s,qt.getNumberOrAutoValidator=a,qt.getStringValidator=h,qt.getStringOrGradientValidator=l,qt.getFunctionValidator=c,qt.getNumberArrayValidator=p,qt.getBooleanValidator=m,qt.getComponentValidator=d;const o=ot(),t=Tt();function e(f){return t.Util._isString(f)?'"'+f+'"':Object.prototype.toString.call(f)==="[object Number]"||t.Util._isBoolean(f)?f:Object.prototype.toString.call(f)}function i(f){return f>255?255:f<0?0:Math.round(f)}function r(f){return f>1?1:f<1e-4?1e-4:f}function n(){if(o.Konva.isUnminified)return function(f,_){return t.Util._isNumber(f)||t.Util.warn(e(f)+' is a not valid value for "'+_+'" attribute. The value should be a number.'),f}}function s(f){if(o.Konva.isUnminified)return function(_,v){const C=t.Util._isNumber(_),u=t.Util._isArray(_)&&_.length==f;return!C&&!u&&t.Util.warn(e(_)+' is a not valid value for "'+v+'" attribute. The value should be a number or Array<number>('+f+")"),_}}function a(){if(o.Konva.isUnminified)return function(f,_){return t.Util._isNumber(f)||f==="auto"||t.Util.warn(e(f)+' is a not valid value for "'+_+'" attribute. The value should be a number or "auto".'),f}}function h(){if(o.Konva.isUnminified)return function(f,_){return t.Util._isString(f)||t.Util.warn(e(f)+' is a not valid value for "'+_+'" attribute. The value should be a string.'),f}}function l(){if(o.Konva.isUnminified)return function(f,_){const v=t.Util._isString(f),C=Object.prototype.toString.call(f)==="[object CanvasGradient]"||f&&f.addColorStop;return v||C||t.Util.warn(e(f)+' is a not valid value for "'+_+'" attribute. The value should be a string or a native gradient.'),f}}function c(){if(o.Konva.isUnminified)return function(f,_){return t.Util._isFunction(f)||t.Util.warn(e(f)+' is a not valid value for "'+_+'" attribute. The value should be a function.'),f}}function p(){if(o.Konva.isUnminified)return function(f,_){const v=Int8Array?Object.getPrototypeOf(Int8Array):null;return v&&f instanceof v||(t.Util._isArray(f)?f.forEach(function(C){t.Util._isNumber(C)||t.Util.warn('"'+_+'" attribute has non numeric element '+C+". Make sure that all elements are numbers.")}):t.Util.warn(e(f)+' is a not valid value for "'+_+'" attribute. The value should be a array of numbers.')),f}}function m(){if(o.Konva.isUnminified)return function(f,_){return f===!0||f===!1||t.Util.warn(e(f)+' is a not valid value for "'+_+'" attribute. The value should be a boolean.'),f}}function d(f){if(o.Konva.isUnminified)return function(_,v){return _==null||t.Util.isObject(_)||t.Util.warn(e(_)+' is a not valid value for "'+v+'" attribute. The value should be an object with properties '+f),_}}return qt}var Vs;function ht(){return Vs||(Vs=1,function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.Factory=void 0;const t=Tt(),e=lt(),i="get",r="set";o.Factory={addGetterSetter(n,s,a,h,l){o.Factory.addGetter(n,s,a),o.Factory.addSetter(n,s,h,l),o.Factory.addOverloadedGetterSetter(n,s)},addGetter(n,s,a){const h=i+t.Util._capitalize(s);n.prototype[h]=n.prototype[h]||function(){const l=this.attrs[s];return l===void 0?a:l}},addSetter(n,s,a,h){const l=r+t.Util._capitalize(s);n.prototype[l]||o.Factory.overWriteSetter(n,s,a,h)},overWriteSetter(n,s,a,h){const l=r+t.Util._capitalize(s);n.prototype[l]=function(c){return a&&c!==void 0&&c!==null&&(c=a.call(this,c,s)),this._setAttr(s,c),h&&h.call(this),this}},addComponentsGetterSetter(n,s,a,h,l){let c=a.length,p=t.Util._capitalize,m=i+p(s),d=r+p(s),f,_;n.prototype[m]=function(){const C={};for(f=0;f<c;f++)_=a[f],C[_]=this.getAttr(s+p(_));return C};const v=(0,e.getComponentValidator)(a);n.prototype[d]=function(C){let u=this.attrs[s],g;h&&(C=h.call(this,C)),v&&v.call(this,C,s);for(g in C)C.hasOwnProperty(g)&&this._setAttr(s+p(g),C[g]);return C||a.forEach(b=>{this._setAttr(s+p(b),void 0)}),this._fireChangeEvent(s,u,C),l&&l.call(this),this},o.Factory.addOverloadedGetterSetter(n,s)},addOverloadedGetterSetter(n,s){const a=t.Util._capitalize(s),h=r+a,l=i+a;n.prototype[s]=function(){return arguments.length?(this[h](arguments[0]),this):this[l]()}},addDeprecatedGetterSetter(n,s,a,h){t.Util.error("Adding deprecated "+s);const l=i+t.Util._capitalize(s),c=s+" property is deprecated and will be removed soon. Look at Konva change log for more information.";n.prototype[l]=function(){t.Util.error(c);const p=this.attrs[s];return p===void 0?a:p},o.Factory.addSetter(n,s,h,function(){t.Util.error(c)}),o.Factory.addOverloadedGetterSetter(n,s)},backCompat(n,s){t.Util.each(s,function(a,h){const l=n.prototype[h],c=i+t.Util._capitalize(a),p=r+t.Util._capitalize(a);function m(){l.apply(this,arguments),t.Util.error('"'+a+'" method is deprecated and will be removed soon. Use ""'+h+'" instead.')}n.prototype[a]=m,n.prototype[c]=m,n.prototype[p]=m})},afterSetFilter(){this._filterUpToDate=!1}}}(dn)),dn}var be={},Se={},zs;function nh(){if(zs)return Se;zs=1,Object.defineProperty(Se,"__esModule",{value:!0}),Se.HitContext=Se.SceneContext=Se.Context=void 0;const o=Tt(),t=ot();function e(C){let u=[],g=C.length,b=o.Util,S,x;for(S=0;S<g;S++)x=C[S],b._isNumber(x)?x=Math.round(x*1e3)/1e3:b._isString(x)||(x=x+""),u.push(x);return u}const i=",",r="(",n=")",s="([",a="])",h=";",l="()",c="=",p=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],m=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"],d=100;let f=class{constructor(u){this.canvas=u,t.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(u){u.fillEnabled()&&this._fill(u)}_fill(u){}strokeShape(u){u.hasStroke()&&this._stroke(u)}_stroke(u){}fillStrokeShape(u){u.attrs.fillAfterStrokeEnabled?(this.strokeShape(u),this.fillShape(u)):(this.fillShape(u),this.strokeShape(u))}getTrace(u,g){let b=this.traceArr,S=b.length,x="",M,k,T,A;for(M=0;M<S;M++)k=b[M],T=k.method,T?(A=k.args,x+=T,u?x+=l:o.Util._isArray(A[0])?x+=s+A.join(i)+a:(g&&(A=A.map(E=>typeof E=="number"?Math.floor(E):E)),x+=r+A.join(i)+n)):(x+=k.property,u||(x+=c+k.val)),x+=h;return x}clearTrace(){this.traceArr=[]}_trace(u){let g=this.traceArr,b;g.push(u),b=g.length,b>=d&&g.shift()}reset(){const u=this.getCanvas().getPixelRatio();this.setTransform(1*u,0,0,1*u,0,0)}getCanvas(){return this.canvas}clear(u){const g=this.getCanvas();u?this.clearRect(u.x||0,u.y||0,u.width||0,u.height||0):this.clearRect(0,0,g.getWidth()/g.pixelRatio,g.getHeight()/g.pixelRatio)}_applyLineCap(u){const g=u.attrs.lineCap;g&&this.setAttr("lineCap",g)}_applyOpacity(u){const g=u.getAbsoluteOpacity();g!==1&&this.setAttr("globalAlpha",g)}_applyLineJoin(u){const g=u.attrs.lineJoin;g&&this.setAttr("lineJoin",g)}setAttr(u,g){this._context[u]=g}arc(u,g,b,S,x,M){this._context.arc(u,g,b,S,x,M)}arcTo(u,g,b,S,x){this._context.arcTo(u,g,b,S,x)}beginPath(){this._context.beginPath()}bezierCurveTo(u,g,b,S,x,M){this._context.bezierCurveTo(u,g,b,S,x,M)}clearRect(u,g,b,S){this._context.clearRect(u,g,b,S)}clip(...u){this._context.clip.apply(this._context,u)}closePath(){this._context.closePath()}createImageData(u,g){const b=arguments;if(b.length===2)return this._context.createImageData(u,g);if(b.length===1)return this._context.createImageData(u)}createLinearGradient(u,g,b,S){return this._context.createLinearGradient(u,g,b,S)}createPattern(u,g){return this._context.createPattern(u,g)}createRadialGradient(u,g,b,S,x,M){return this._context.createRadialGradient(u,g,b,S,x,M)}drawImage(u,g,b,S,x,M,k,T,A){const E=arguments,D=this._context;E.length===3?D.drawImage(u,g,b):E.length===5?D.drawImage(u,g,b,S,x):E.length===9&&D.drawImage(u,g,b,S,x,M,k,T,A)}ellipse(u,g,b,S,x,M,k,T){this._context.ellipse(u,g,b,S,x,M,k,T)}isPointInPath(u,g,b,S){return b?this._context.isPointInPath(b,u,g,S):this._context.isPointInPath(u,g,S)}fill(...u){this._context.fill.apply(this._context,u)}fillRect(u,g,b,S){this._context.fillRect(u,g,b,S)}strokeRect(u,g,b,S){this._context.strokeRect(u,g,b,S)}fillText(u,g,b,S){S?this._context.fillText(u,g,b,S):this._context.fillText(u,g,b)}measureText(u){return this._context.measureText(u)}getImageData(u,g,b,S){return this._context.getImageData(u,g,b,S)}lineTo(u,g){this._context.lineTo(u,g)}moveTo(u,g){this._context.moveTo(u,g)}rect(u,g,b,S){this._context.rect(u,g,b,S)}roundRect(u,g,b,S,x){this._context.roundRect(u,g,b,S,x)}putImageData(u,g,b){this._context.putImageData(u,g,b)}quadraticCurveTo(u,g,b,S){this._context.quadraticCurveTo(u,g,b,S)}restore(){this._context.restore()}rotate(u){this._context.rotate(u)}save(){this._context.save()}scale(u,g){this._context.scale(u,g)}setLineDash(u){this._context.setLineDash?this._context.setLineDash(u):"mozDash"in this._context?this._context.mozDash=u:"webkitLineDash"in this._context&&(this._context.webkitLineDash=u)}getLineDash(){return this._context.getLineDash()}setTransform(u,g,b,S,x,M){this._context.setTransform(u,g,b,S,x,M)}stroke(u){u?this._context.stroke(u):this._context.stroke()}strokeText(u,g,b,S){this._context.strokeText(u,g,b,S)}transform(u,g,b,S,x,M){this._context.transform(u,g,b,S,x,M)}translate(u,g){this._context.translate(u,g)}_enableTrace(){let u=this,g=p.length,b=this.setAttr,S,x;const M=function(k){let T=u[k],A;u[k]=function(){return x=e(Array.prototype.slice.call(arguments,0)),A=T.apply(u,arguments),u._trace({method:k,args:x}),A}};for(S=0;S<g;S++)M(p[S]);u.setAttr=function(){b.apply(u,arguments);const k=arguments[0];let T=arguments[1];(k==="shadowOffsetX"||k==="shadowOffsetY"||k==="shadowBlur")&&(T=T/this.canvas.getPixelRatio()),u._trace({property:k,val:T})}}_applyGlobalCompositeOperation(u){const g=u.attrs.globalCompositeOperation;!g||g==="source-over"||this.setAttr("globalCompositeOperation",g)}};Se.Context=f,m.forEach(function(C){Object.defineProperty(f.prototype,C,{get(){return this._context[C]},set(u){this._context[C]=u}})});class _ extends f{constructor(u,{willReadFrequently:g=!1}={}){super(u),this._context=u._canvas.getContext("2d",{willReadFrequently:g})}_fillColor(u){const g=u.fill();this.setAttr("fillStyle",g),u._fillFunc(this)}_fillPattern(u){this.setAttr("fillStyle",u._getFillPattern()),u._fillFunc(this)}_fillLinearGradient(u){const g=u._getLinearGradient();g&&(this.setAttr("fillStyle",g),u._fillFunc(this))}_fillRadialGradient(u){const g=u._getRadialGradient();g&&(this.setAttr("fillStyle",g),u._fillFunc(this))}_fill(u){const g=u.fill(),b=u.getFillPriority();if(g&&b==="color"){this._fillColor(u);return}const S=u.getFillPatternImage();if(S&&b==="pattern"){this._fillPattern(u);return}const x=u.getFillLinearGradientColorStops();if(x&&b==="linear-gradient"){this._fillLinearGradient(u);return}const M=u.getFillRadialGradientColorStops();if(M&&b==="radial-gradient"){this._fillRadialGradient(u);return}g?this._fillColor(u):S?this._fillPattern(u):x?this._fillLinearGradient(u):M&&this._fillRadialGradient(u)}_strokeLinearGradient(u){const g=u.getStrokeLinearGradientStartPoint(),b=u.getStrokeLinearGradientEndPoint(),S=u.getStrokeLinearGradientColorStops(),x=this.createLinearGradient(g.x,g.y,b.x,b.y);if(S){for(let M=0;M<S.length;M+=2)x.addColorStop(S[M],S[M+1]);this.setAttr("strokeStyle",x)}}_stroke(u){const g=u.dash(),b=u.getStrokeScaleEnabled();if(u.hasStroke()){if(!b){this.save();const x=this.getCanvas().getPixelRatio();this.setTransform(x,0,0,x,0,0)}this._applyLineCap(u),g&&u.dashEnabled()&&(this.setLineDash(g),this.setAttr("lineDashOffset",u.dashOffset())),this.setAttr("lineWidth",u.strokeWidth()),u.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),u.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(u):this.setAttr("strokeStyle",u.stroke()),u._strokeFunc(this),b||this.restore()}}_applyShadow(u){var g,b,S;const x=(g=u.getShadowRGBA())!==null&&g!==void 0?g:"black",M=(b=u.getShadowBlur())!==null&&b!==void 0?b:5,k=(S=u.getShadowOffset())!==null&&S!==void 0?S:{x:0,y:0},T=u.getAbsoluteScale(),A=this.canvas.getPixelRatio(),E=T.x*A,D=T.y*A;this.setAttr("shadowColor",x),this.setAttr("shadowBlur",M*Math.min(Math.abs(E),Math.abs(D))),this.setAttr("shadowOffsetX",k.x*E),this.setAttr("shadowOffsetY",k.y*D)}}Se.SceneContext=_;class v extends f{constructor(u){super(u),this._context=u._canvas.getContext("2d",{willReadFrequently:!0})}_fill(u){this.save(),this.setAttr("fillStyle",u.colorKey),u._fillFuncHit(this),this.restore()}strokeShape(u){u.hasHitStroke()&&this._stroke(u)}_stroke(u){if(u.hasHitStroke()){const g=u.getStrokeScaleEnabled();if(!g){this.save();const x=this.getCanvas().getPixelRatio();this.setTransform(x,0,0,x,0,0)}this._applyLineCap(u);const b=u.hitStrokeWidth(),S=b==="auto"?u.strokeWidth():b;this.setAttr("lineWidth",S),this.setAttr("strokeStyle",u.colorKey),u._strokeFuncHit(this),g||this.restore()}}}return Se.HitContext=v,Se}var Hs;function qr(){if(Hs)return be;Hs=1,Object.defineProperty(be,"__esModule",{value:!0}),be.HitCanvas=be.SceneCanvas=be.Canvas=void 0;const o=Tt(),t=nh(),e=ot(),i=ht(),r=lt();let n;function s(){if(n)return n;const c=o.Util.createCanvasElement(),p=c.getContext("2d");return n=function(){const m=e.Konva._global.devicePixelRatio||1,d=p.webkitBackingStorePixelRatio||p.mozBackingStorePixelRatio||p.msBackingStorePixelRatio||p.oBackingStorePixelRatio||p.backingStorePixelRatio||1;return m/d}(),o.Util.releaseCanvas(c),n}let a=class{constructor(p){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const d=(p||{}).pixelRatio||e.Konva.pixelRatio||s();this.pixelRatio=d,this._canvas=o.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(p){const m=this.pixelRatio;this.pixelRatio=p,this.setSize(this.getWidth()/m,this.getHeight()/m)}setWidth(p){this.width=this._canvas.width=p*this.pixelRatio,this._canvas.style.width=p+"px";const m=this.pixelRatio;this.getContext()._context.scale(m,m)}setHeight(p){this.height=this._canvas.height=p*this.pixelRatio,this._canvas.style.height=p+"px";const m=this.pixelRatio;this.getContext()._context.scale(m,m)}getWidth(){return this.width}getHeight(){return this.height}setSize(p,m){this.setWidth(p||0),this.setHeight(m||0)}toDataURL(p,m){try{return this._canvas.toDataURL(p,m)}catch{try{return this._canvas.toDataURL()}catch(f){return o.Util.error("Unable to get data URL. "+f.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}};be.Canvas=a,i.Factory.addGetterSetter(a,"pixelRatio",void 0,(0,r.getNumberValidator)());class h extends a{constructor(p={width:0,height:0,willReadFrequently:!1}){super(p),this.context=new t.SceneContext(this,{willReadFrequently:p.willReadFrequently}),this.setSize(p.width,p.height)}}be.SceneCanvas=h;class l extends a{constructor(p={width:0,height:0}){super(p),this.hitCanvas=!0,this.context=new t.HitContext(this),this.setSize(p.width,p.height)}}return be.HitCanvas=l,be}var un={},qs;function ss(){return qs||(qs=1,function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.DD=void 0;const t=ot(),e=Tt();o.DD={get isDragging(){let i=!1;return o.DD._dragElements.forEach(r=>{r.dragStatus==="dragging"&&(i=!0)}),i},justDragged:!1,get node(){let i;return o.DD._dragElements.forEach(r=>{i=r.node}),i},_dragElements:new Map,_drag(i){const r=[];o.DD._dragElements.forEach((n,s)=>{const{node:a}=n,h=a.getStage();h.setPointersPositions(i),n.pointerId===void 0&&(n.pointerId=e.Util._getFirstPointerId(i));const l=h._changedPointerPositions.find(c=>c.id===n.pointerId);if(l){if(n.dragStatus!=="dragging"){const c=a.dragDistance();if(Math.max(Math.abs(l.x-n.startPointerPos.x),Math.abs(l.y-n.startPointerPos.y))<c||(a.startDrag({evt:i}),!a.isDragging()))return}a._setDragPosition(i,n),r.push(a)}}),r.forEach(n=>{n.fire("dragmove",{type:"dragmove",target:n,evt:i},!0)})},_endDragBefore(i){const r=[];o.DD._dragElements.forEach(n=>{const{node:s}=n,a=s.getStage();if(i&&a.setPointersPositions(i),!a._changedPointerPositions.find(c=>c.id===n.pointerId))return;(n.dragStatus==="dragging"||n.dragStatus==="stopped")&&(o.DD.justDragged=!0,t.Konva._mouseListenClick=!1,t.Konva._touchListenClick=!1,t.Konva._pointerListenClick=!1,n.dragStatus="stopped");const l=n.node.getLayer()||n.node instanceof t.Konva.Stage&&n.node;l&&r.indexOf(l)===-1&&r.push(l)}),r.forEach(n=>{n.draw()})},_endDragAfter(i){o.DD._dragElements.forEach((r,n)=>{r.dragStatus==="stopped"&&r.node.fire("dragend",{type:"dragend",target:r.node,evt:i},!0),r.dragStatus!=="dragging"&&o.DD._dragElements.delete(n)})}},t.Konva.isBrowser&&(window.addEventListener("mouseup",o.DD._endDragBefore,!0),window.addEventListener("touchend",o.DD._endDragBefore,!0),window.addEventListener("touchcancel",o.DD._endDragBefore,!0),window.addEventListener("mousemove",o.DD._drag),window.addEventListener("touchmove",o.DD._drag),window.addEventListener("mouseup",o.DD._endDragAfter,!1),window.addEventListener("touchend",o.DD._endDragAfter,!1),window.addEventListener("touchcancel",o.DD._endDragAfter,!1))}(un)),un}var Ys;function kt(){if(Ys)return Si;Ys=1,Object.defineProperty(Si,"__esModule",{value:!0}),Si.Node=void 0;const o=Tt(),t=ht(),e=qr(),i=ot(),r=ss(),n=lt(),s="absoluteOpacity",a="allEventListeners",h="absoluteTransform",l="absoluteScale",c="canvas",p="Change",m="children",d="konva",f="listening",_="mouseenter",v="mouseleave",C="set",u="Shape",g=" ",b="stage",S="transform",x="Stage",M="visible",k=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(g);let T=1,A=class Gn{constructor(y){this._id=T++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(y),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(y){(y===S||y===h)&&this._cache.get(y)?this._cache.get(y).dirty=!0:y?this._cache.delete(y):this._cache.clear()}_getCache(y,P){let w=this._cache.get(y);return(w===void 0||(y===S||y===h)&&w.dirty===!0)&&(w=P.call(this),this._cache.set(y,w)),w}_calculate(y,P,w){if(!this._attachedDepsListeners.get(y)){const R=P.map(O=>O+"Change.konva").join(g);this.on(R,()=>{this._clearCache(y)}),this._attachedDepsListeners.set(y,!0)}return this._getCache(y,w)}_getCanvasCache(){return this._cache.get(c)}_clearSelfAndDescendantCache(y){this._clearCache(y),y===h&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(c)){const{scene:y,filter:P,hit:w}=this._cache.get(c);o.Util.releaseCanvas(y,P,w),this._cache.delete(c)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(y){const P=y||{};let w={};(P.x===void 0||P.y===void 0||P.width===void 0||P.height===void 0)&&(w=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let R=Math.ceil(P.width||w.width),O=Math.ceil(P.height||w.height),I=P.pixelRatio,V=P.x===void 0?Math.floor(w.x):P.x,B=P.y===void 0?Math.floor(w.y):P.y,q=P.offset||0,K=P.drawBorder||!1,z=P.hitCanvasPixelRatio||1;if(!R||!O){o.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const Y=Math.abs(Math.round(w.x)-V)>.5?1:0,L=Math.abs(Math.round(w.y)-B)>.5?1:0;R+=q*2+Y,O+=q*2+L,V-=q,B-=q;const G=new e.SceneCanvas({pixelRatio:I,width:R,height:O}),F=new e.SceneCanvas({pixelRatio:I,width:0,height:0,willReadFrequently:!0}),N=new e.HitCanvas({pixelRatio:z,width:R,height:O}),U=G.getContext(),X=N.getContext();return N.isCache=!0,G.isCache=!0,this._cache.delete(c),this._filterUpToDate=!1,P.imageSmoothingEnabled===!1&&(G.getContext()._context.imageSmoothingEnabled=!1,F.getContext()._context.imageSmoothingEnabled=!1),U.save(),X.save(),U.translate(-V,-B),X.translate(-V,-B),this._isUnderCache=!0,this._clearSelfAndDescendantCache(s),this._clearSelfAndDescendantCache(l),this.drawScene(G,this),this.drawHit(N,this),this._isUnderCache=!1,U.restore(),X.restore(),K&&(U.save(),U.beginPath(),U.rect(0,0,R,O),U.closePath(),U.setAttr("strokeStyle","red"),U.setAttr("lineWidth",5),U.stroke(),U.restore()),this._cache.set(c,{scene:G,filter:F,hit:N,x:V,y:B}),this._requestDraw(),this}isCached(){return this._cache.has(c)}getClientRect(y){throw new Error('abstract "getClientRect" method call')}_transformedRect(y,P){const w=[{x:y.x,y:y.y},{x:y.x+y.width,y:y.y},{x:y.x+y.width,y:y.y+y.height},{x:y.x,y:y.y+y.height}];let R=1/0,O=1/0,I=-1/0,V=-1/0;const B=this.getAbsoluteTransform(P);return w.forEach(function(q){const K=B.point(q);R===void 0&&(R=I=K.x,O=V=K.y),R=Math.min(R,K.x),O=Math.min(O,K.y),I=Math.max(I,K.x),V=Math.max(V,K.y)}),{x:R,y:O,width:I-R,height:V-O}}_drawCachedSceneCanvas(y){y.save(),y._applyOpacity(this),y._applyGlobalCompositeOperation(this);const P=this._getCanvasCache();y.translate(P.x,P.y);const w=this._getCachedSceneCanvas(),R=w.pixelRatio;y.drawImage(w._canvas,0,0,w.width/R,w.height/R),y.restore()}_drawCachedHitCanvas(y){const P=this._getCanvasCache(),w=P.hit;y.save(),y.translate(P.x,P.y),y.drawImage(w._canvas,0,0,w.width/w.pixelRatio,w.height/w.pixelRatio),y.restore()}_getCachedSceneCanvas(){let y=this.filters(),P=this._getCanvasCache(),w=P.scene,R=P.filter,O=R.getContext(),I,V,B,q;if(y){if(!this._filterUpToDate){const K=w.pixelRatio;R.setSize(w.width/w.pixelRatio,w.height/w.pixelRatio);try{for(I=y.length,O.clear(),O.drawImage(w._canvas,0,0,w.getWidth()/K,w.getHeight()/K),V=O.getImageData(0,0,R.getWidth(),R.getHeight()),B=0;B<I;B++){if(q=y[B],typeof q!="function"){o.Util.error("Filter should be type of function, but got "+typeof q+" instead. Please check correct filters");continue}q.call(this,V),O.putImageData(V,0,0)}}catch(z){o.Util.error("Unable to apply filter. "+z.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return R}return w}on(y,P){if(this._cache&&this._cache.delete(a),arguments.length===3)return this._delegate.apply(this,arguments);let w=y.split(g),R=w.length,O,I,V,B,q;for(O=0;O<R;O++)I=w[O],V=I.split("."),B=V[0],q=V[1]||"",this.eventListeners[B]||(this.eventListeners[B]=[]),this.eventListeners[B].push({name:q,handler:P});return this}off(y,P){let w=(y||"").split(g),R=w.length,O,I,V,B,q,K;if(this._cache&&this._cache.delete(a),!y)for(I in this.eventListeners)this._off(I);for(O=0;O<R;O++)if(V=w[O],B=V.split("."),q=B[0],K=B[1],q)this.eventListeners[q]&&this._off(q,K,P);else for(I in this.eventListeners)this._off(I,K,P);return this}dispatchEvent(y){const P={target:this,type:y.type,evt:y};return this.fire(y.type,P),this}addEventListener(y,P){return this.on(y,function(w){P.call(this,w.evt)}),this}removeEventListener(y){return this.off(y),this}_delegate(y,P,w){const R=this;this.on(y,function(O){const I=O.target.findAncestors(P,!0,R);for(let V=0;V<I.length;V++)O=o.Util.cloneObject(O),O.currentTarget=I[V],w.call(I[V],O)})}remove(){return this.isDragging()&&this.stopDrag(),r.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(h),this._clearSelfAndDescendantCache(s),this._clearSelfAndDescendantCache(l),this._clearSelfAndDescendantCache(b),this._clearSelfAndDescendantCache(M),this._clearSelfAndDescendantCache(f)}_remove(){this._clearCaches();const y=this.getParent();y&&y.children&&(y.children.splice(this.index,1),y._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(y){const P="get"+o.Util._capitalize(y);return o.Util._isFunction(this[P])?this[P]():this.attrs[y]}getAncestors(){let y=this.getParent(),P=[];for(;y;)P.push(y),y=y.getParent();return P}getAttrs(){return this.attrs||{}}setAttrs(y){return this._batchTransformChanges(()=>{let P,w;if(!y)return this;for(P in y)P!==m&&(w=C+o.Util._capitalize(P),o.Util._isFunction(this[w])?this[w](y[P]):this._setAttr(P,y[P]))}),this}isListening(){return this._getCache(f,this._isListening)}_isListening(y){if(!this.listening())return!1;const w=this.getParent();return w&&w!==y&&this!==y?w._isListening(y):!0}isVisible(){return this._getCache(M,this._isVisible)}_isVisible(y){if(!this.visible())return!1;const w=this.getParent();return w&&w!==y&&this!==y?w._isVisible(y):!0}shouldDrawHit(y,P=!1){if(y)return this._isVisible(y)&&this._isListening(y);const w=this.getLayer();let R=!1;r.DD._dragElements.forEach(I=>{I.dragStatus==="dragging"&&(I.node.nodeType==="Stage"||I.node.getLayer()===w)&&(R=!0)});const O=!P&&!i.Konva.hitOnDragEnabled&&(R||i.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!O}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let y=this.getDepth(),P=this,w=0,R,O,I,V;function B(K){for(R=[],O=K.length,I=0;I<O;I++)V=K[I],w++,V.nodeType!==u&&(R=R.concat(V.getChildren().slice())),V._id===P._id&&(I=O);R.length>0&&R[0].getDepth()<=y&&B(R)}const q=this.getStage();return P.nodeType!==x&&q&&B(q.getChildren()),w}getDepth(){let y=0,P=this.parent;for(;P;)y++,P=P.parent;return y}_batchTransformChanges(y){this._batchingTransformChange=!0,y(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(S),this._clearSelfAndDescendantCache(h)),this._needClearTransformCache=!1}setPosition(y){return this._batchTransformChanges(()=>{this.x(y.x),this.y(y.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const y=this.getStage();if(!y)return null;const P=y.getPointerPosition();if(!P)return null;const w=this.getAbsoluteTransform().copy();return w.invert(),w.point(P)}getAbsolutePosition(y){let P=!1,w=this.parent;for(;w;){if(w.isCached()){P=!0;break}w=w.parent}P&&!y&&(y=!0);const R=this.getAbsoluteTransform(y).getMatrix(),O=new o.Transform,I=this.offset();return O.m=R.slice(),O.translate(I.x,I.y),O.getTranslation()}setAbsolutePosition(y){const{x:P,y:w,...R}=this._clearTransform();this.attrs.x=P,this.attrs.y=w,this._clearCache(S);const O=this._getAbsoluteTransform().copy();return O.invert(),O.translate(y.x,y.y),y={x:this.attrs.x+O.getTranslation().x,y:this.attrs.y+O.getTranslation().y},this._setTransform(R),this.setPosition({x:y.x,y:y.y}),this._clearCache(S),this._clearSelfAndDescendantCache(h),this}_setTransform(y){let P;for(P in y)this.attrs[P]=y[P]}_clearTransform(){const y={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,y}move(y){let P=y.x,w=y.y,R=this.x(),O=this.y();return P!==void 0&&(R+=P),w!==void 0&&(O+=w),this.setPosition({x:R,y:O}),this}_eachAncestorReverse(y,P){let w=[],R=this.getParent(),O,I;if(!(P&&P._id===this._id)){for(w.unshift(this);R&&(!P||R._id!==P._id);)w.unshift(R),R=R.parent;for(O=w.length,I=0;I<O;I++)y(w[I])}}rotate(y){return this.rotation(this.rotation()+y),this}moveToTop(){if(!this.parent)return o.Util.warn("Node has no parent. moveToTop function is ignored."),!1;const y=this.index,P=this.parent.getChildren().length;return y<P-1?(this.parent.children.splice(y,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return o.Util.warn("Node has no parent. moveUp function is ignored."),!1;const y=this.index,P=this.parent.getChildren().length;return y<P-1?(this.parent.children.splice(y,1),this.parent.children.splice(y+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return o.Util.warn("Node has no parent. moveDown function is ignored."),!1;const y=this.index;return y>0?(this.parent.children.splice(y,1),this.parent.children.splice(y-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return o.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;const y=this.index;return y>0?(this.parent.children.splice(y,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(y){if(!this.parent)return o.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(y<0||y>=this.parent.children.length)&&o.Util.warn("Unexpected value "+y+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const P=this.index;return this.parent.children.splice(P,1),this.parent.children.splice(y,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(s,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let y=this.opacity();const P=this.getParent();return P&&!P._isUnderCache&&(y*=P.getAbsoluteOpacity()),y}moveTo(y){return this.getParent()!==y&&(this._remove(),y.add(this)),this}toObject(){let y=this.getAttrs(),P,w,R,O,I;const V={attrs:{},className:this.getClassName()};for(P in y)w=y[P],I=o.Util.isObject(w)&&!o.Util._isPlainObject(w)&&!o.Util._isArray(w),!I&&(R=typeof this[P]=="function"&&this[P],delete y[P],O=R?R.call(this):null,y[P]=w,O!==w&&(V.attrs[P]=w));return o.Util._prepareToStringify(V)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(y,P,w){const R=[];P&&this._isMatch(y)&&R.push(this);let O=this.parent;for(;O;){if(O===w)return R;O._isMatch(y)&&R.push(O),O=O.parent}return R}isAncestorOf(y){return!1}findAncestor(y,P,w){return this.findAncestors(y,P,w)[0]}_isMatch(y){if(!y)return!1;if(typeof y=="function")return y(this);let P=y.replace(/ /g,"").split(","),w=P.length,R,O;for(R=0;R<w;R++)if(O=P[R],o.Util.isValidSelector(O)||(o.Util.warn('Selector "'+O+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),o.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),o.Util.warn("Konva is awesome, right?")),O.charAt(0)==="#"){if(this.id()===O.slice(1))return!0}else if(O.charAt(0)==="."){if(this.hasName(O.slice(1)))return!0}else if(this.className===O||this.nodeType===O)return!0;return!1}getLayer(){const y=this.getParent();return y?y.getLayer():null}getStage(){return this._getCache(b,this._getStage)}_getStage(){const y=this.getParent();return y?y.getStage():null}fire(y,P={},w){return P.target=P.target||this,w?this._fireAndBubble(y,P):this._fire(y,P),this}getAbsoluteTransform(y){return y?this._getAbsoluteTransform(y):this._getCache(h,this._getAbsoluteTransform)}_getAbsoluteTransform(y){let P;if(y)return P=new o.Transform,this._eachAncestorReverse(function(w){const R=w.transformsEnabled();R==="all"?P.multiply(w.getTransform()):R==="position"&&P.translate(w.x()-w.offsetX(),w.y()-w.offsetY())},y),P;{P=this._cache.get(h)||new o.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(P):P.reset();const w=this.transformsEnabled();if(w==="all")P.multiply(this.getTransform());else if(w==="position"){const R=this.attrs.x||0,O=this.attrs.y||0,I=this.attrs.offsetX||0,V=this.attrs.offsetY||0;P.translate(R-I,O-V)}return P.dirty=!1,P}}getAbsoluteScale(y){let P=this;for(;P;)P._isUnderCache&&(y=P),P=P.getParent();const R=this.getAbsoluteTransform(y).decompose();return{x:R.scaleX,y:R.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(S,this._getTransform)}_getTransform(){var y,P;const w=this._cache.get(S)||new o.Transform;w.reset();const R=this.x(),O=this.y(),I=i.Konva.getAngle(this.rotation()),V=(y=this.attrs.scaleX)!==null&&y!==void 0?y:1,B=(P=this.attrs.scaleY)!==null&&P!==void 0?P:1,q=this.attrs.skewX||0,K=this.attrs.skewY||0,z=this.attrs.offsetX||0,Y=this.attrs.offsetY||0;return(R!==0||O!==0)&&w.translate(R,O),I!==0&&w.rotate(I),(q!==0||K!==0)&&w.skew(q,K),(V!==1||B!==1)&&w.scale(V,B),(z!==0||Y!==0)&&w.translate(-1*z,-1*Y),w.dirty=!1,w}clone(y){let P=o.Util.cloneObject(this.attrs),w,R,O,I,V;for(w in y)P[w]=y[w];const B=new this.constructor(P);for(w in this.eventListeners)for(R=this.eventListeners[w],O=R.length,I=0;I<O;I++)V=R[I],V.name.indexOf(d)<0&&(B.eventListeners[w]||(B.eventListeners[w]=[]),B.eventListeners[w].push(V));return B}_toKonvaCanvas(y){y=y||{};const P=this.getClientRect(),w=this.getStage(),R=y.x!==void 0?y.x:Math.floor(P.x),O=y.y!==void 0?y.y:Math.floor(P.y),I=y.pixelRatio||1,V=new e.SceneCanvas({width:y.width||Math.ceil(P.width)||(w?w.width():0),height:y.height||Math.ceil(P.height)||(w?w.height():0),pixelRatio:I}),B=V.getContext(),q=new e.SceneCanvas({width:V.width/V.pixelRatio+Math.abs(R),height:V.height/V.pixelRatio+Math.abs(O),pixelRatio:V.pixelRatio});return y.imageSmoothingEnabled===!1&&(B._context.imageSmoothingEnabled=!1),B.save(),(R||O)&&B.translate(-1*R,-1*O),this.drawScene(V,void 0,q),B.restore(),V}toCanvas(y){return this._toKonvaCanvas(y)._canvas}toDataURL(y){y=y||{};const P=y.mimeType||null,w=y.quality||null,R=this._toKonvaCanvas(y).toDataURL(P,w);return y.callback&&y.callback(R),R}toImage(y){return new Promise((P,w)=>{try{const R=y==null?void 0:y.callback;R&&delete y.callback,o.Util._urlToImage(this.toDataURL(y),function(O){P(O),R==null||R(O)})}catch(R){w(R)}})}toBlob(y){return new Promise((P,w)=>{try{const R=y==null?void 0:y.callback;R&&delete y.callback,this.toCanvas(y).toBlob(O=>{P(O),R==null||R(O)},y==null?void 0:y.mimeType,y==null?void 0:y.quality)}catch(R){w(R)}})}setSize(y){return this.width(y.width),this.height(y.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():i.Konva.dragDistance}_off(y,P,w){let R=this.eventListeners[y],O,I,V;for(O=0;O<R.length;O++)if(I=R[O].name,V=R[O].handler,(I!=="konva"||P==="konva")&&(!P||I===P)&&(!w||w===V)){if(R.splice(O,1),R.length===0){delete this.eventListeners[y];break}O--}}_fireChangeEvent(y,P,w){this._fire(y+p,{oldVal:P,newVal:w})}addName(y){if(!this.hasName(y)){const P=this.name(),w=P?P+" "+y:y;this.name(w)}return this}hasName(y){if(!y)return!1;const P=this.name();return P?(P||"").split(/\s/g).indexOf(y)!==-1:!1}removeName(y){const P=(this.name()||"").split(/\s/g),w=P.indexOf(y);return w!==-1&&(P.splice(w,1),this.name(P.join(" "))),this}setAttr(y,P){const w=this[C+o.Util._capitalize(y)];return o.Util._isFunction(w)?w.call(this,P):this._setAttr(y,P),this}_requestDraw(){if(i.Konva.autoDrawEnabled){const y=this.getLayer()||this.getStage();y==null||y.batchDraw()}}_setAttr(y,P){const w=this.attrs[y];w===P&&!o.Util.isObject(P)||(P==null?delete this.attrs[y]:this.attrs[y]=P,this._shouldFireChangeEvents&&this._fireChangeEvent(y,w,P),this._requestDraw())}_setComponentAttr(y,P,w){let R;w!==void 0&&(R=this.attrs[y],R||(this.attrs[y]=this.getAttr(y)),this.attrs[y][P]=w,this._fireChangeEvent(y,R,w))}_fireAndBubble(y,P,w){if(P&&this.nodeType===u&&(P.target=this),!((y===_||y===v)&&(w&&(this===w||this.isAncestorOf&&this.isAncestorOf(w))||this.nodeType==="Stage"&&!w))){this._fire(y,P);const O=(y===_||y===v)&&w&&w.isAncestorOf&&w.isAncestorOf(this)&&!w.isAncestorOf(this.parent);(P&&!P.cancelBubble||!P)&&this.parent&&this.parent.isListening()&&!O&&(w&&w.parent?this._fireAndBubble.call(this.parent,y,P,w):this._fireAndBubble.call(this.parent,y,P))}}_getProtoListeners(y){var P,w,R;const O=(P=this._cache.get(a))!==null&&P!==void 0?P:{};let I=O==null?void 0:O[y];if(I===void 0){I=[];let V=Object.getPrototypeOf(this);for(;V;){const B=(R=(w=V.eventListeners)===null||w===void 0?void 0:w[y])!==null&&R!==void 0?R:[];I.push(...B),V=Object.getPrototypeOf(V)}O[y]=I,this._cache.set(a,O)}return I}_fire(y,P){P=P||{},P.currentTarget=this,P.type=y;const w=this._getProtoListeners(y);if(w)for(var R=0;R<w.length;R++)w[R].handler.call(this,P);const O=this.eventListeners[y];if(O)for(var R=0;R<O.length;R++)O[R].handler.call(this,P)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(y){const P=y?y.pointerId:void 0,w=this.getStage(),R=this.getAbsolutePosition();if(!w)return;const O=w._getPointerById(P)||w._changedPointerPositions[0]||R;r.DD._dragElements.set(this._id,{node:this,startPointerPos:O,offset:{x:O.x-R.x,y:O.y-R.y},dragStatus:"ready",pointerId:P})}startDrag(y,P=!0){r.DD._dragElements.has(this._id)||this._createDragElement(y);const w=r.DD._dragElements.get(this._id);w.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:y&&y.evt},P)}_setDragPosition(y,P){const w=this.getStage()._getPointerById(P.pointerId);if(!w)return;let R={x:w.x-P.offset.x,y:w.y-P.offset.y};const O=this.dragBoundFunc();if(O!==void 0){const I=O.call(this,R,y);I?R=I:o.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==R.x||this._lastPos.y!==R.y)&&(this.setAbsolutePosition(R),this._requestDraw()),this._lastPos=R}stopDrag(y){const P=r.DD._dragElements.get(this._id);P&&(P.dragStatus="stopped"),r.DD._endDragBefore(y),r.DD._endDragAfter(y)}setDraggable(y){this._setAttr("draggable",y),this._dragChange()}isDragging(){const y=r.DD._dragElements.get(this._id);return y?y.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(y){if(!(!(y.evt.button!==void 0)||i.Konva.dragButtons.indexOf(y.evt.button)>=0)||this.isDragging())return;let R=!1;r.DD._dragElements.forEach(O=>{this.isAncestorOf(O.node)&&(R=!0)}),R||this._createDragElement(y)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const P=r.DD._dragElements.get(this._id),w=P&&P.dragStatus==="dragging",R=P&&P.dragStatus==="ready";w?this.stopDrag():R&&r.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(y={x:0,y:0}){const P=this.getStage();if(!P)return!1;const w={x:-y.x,y:-y.y,width:P.width()+2*y.x,height:P.height()+2*y.y};return o.Util.haveIntersection(w,this.getClientRect())}static create(y,P){return o.Util._isString(y)&&(y=JSON.parse(y)),this._createNode(y,P)}static _createNode(y,P){let w=Gn.prototype.getClassName.call(y),R=y.children,O,I,V;P&&(y.attrs.container=P),i.Konva[w]||(o.Util.warn('Can not find a node with class name "'+w+'". Fallback to "Shape".'),w="Shape");const B=i.Konva[w];if(O=new B(y.attrs),R)for(I=R.length,V=0;V<I;V++)O.add(Gn._createNode(R[V]));return O}};Si.Node=A,A.prototype.nodeType="Node",A.prototype._attrsAffectingSize=[],A.prototype.eventListeners={},A.prototype.on.call(A.prototype,k,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(S),this._clearSelfAndDescendantCache(h)}),A.prototype.on.call(A.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(M)}),A.prototype.on.call(A.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(f)}),A.prototype.on.call(A.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(s)});const E=t.Factory.addGetterSetter;return E(A,"zIndex"),E(A,"absolutePosition"),E(A,"position"),E(A,"x",0,(0,n.getNumberValidator)()),E(A,"y",0,(0,n.getNumberValidator)()),E(A,"globalCompositeOperation","source-over",(0,n.getStringValidator)()),E(A,"opacity",1,(0,n.getNumberValidator)()),E(A,"name","",(0,n.getStringValidator)()),E(A,"id","",(0,n.getStringValidator)()),E(A,"rotation",0,(0,n.getNumberValidator)()),t.Factory.addComponentsGetterSetter(A,"scale",["x","y"]),E(A,"scaleX",1,(0,n.getNumberValidator)()),E(A,"scaleY",1,(0,n.getNumberValidator)()),t.Factory.addComponentsGetterSetter(A,"skew",["x","y"]),E(A,"skewX",0,(0,n.getNumberValidator)()),E(A,"skewY",0,(0,n.getNumberValidator)()),t.Factory.addComponentsGetterSetter(A,"offset",["x","y"]),E(A,"offsetX",0,(0,n.getNumberValidator)()),E(A,"offsetY",0,(0,n.getNumberValidator)()),E(A,"dragDistance",null,(0,n.getNumberValidator)()),E(A,"width",0,(0,n.getNumberValidator)()),E(A,"height",0,(0,n.getNumberValidator)()),E(A,"listening",!0,(0,n.getBooleanValidator)()),E(A,"preventDefault",!0,(0,n.getBooleanValidator)()),E(A,"filters",null,function(D){return this._filterUpToDate=!1,D}),E(A,"visible",!0,(0,n.getBooleanValidator)()),E(A,"transformsEnabled","all",(0,n.getStringValidator)()),E(A,"size"),E(A,"dragBoundFunc"),E(A,"draggable",!1,(0,n.getBooleanValidator)()),t.Factory.backCompat(A,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),Si}var wi={},Ws;function Yr(){if(Ws)return wi;Ws=1,Object.defineProperty(wi,"__esModule",{value:!0}),wi.Container=void 0;const o=ht(),t=kt(),e=lt();let i=class extends t.Node{constructor(){super(...arguments),this.children=[]}getChildren(n){if(!n)return this.children||[];const s=this.children||[],a=[];return s.forEach(function(h){n(h)&&a.push(h)}),a}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(n=>{n.parent=null,n.index=0,n.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(n=>{n.parent=null,n.index=0,n.destroy()}),this.children=[],this._requestDraw(),this}add(...n){if(n.length===0)return this;if(n.length>1){for(let a=0;a<n.length;a++)this.add(n[a]);return this}const s=n[0];return s.getParent()?(s.moveTo(this),this):(this._validateAdd(s),s.index=this.getChildren().length,s.parent=this,s._clearCaches(),this.getChildren().push(s),this._fire("add",{child:s}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(n){return this._generalFind(n,!1)}findOne(n){const s=this._generalFind(n,!0);return s.length>0?s[0]:void 0}_generalFind(n,s){const a=[];return this._descendants(h=>{const l=h._isMatch(n);return l&&a.push(h),!!(l&&s)}),a}_descendants(n){let s=!1;const a=this.getChildren();for(const h of a){if(s=n(h),s)return!0;if(h.hasChildren()&&(s=h._descendants(n),s))return!0}return!1}toObject(){const n=t.Node.prototype.toObject.call(this);return n.children=[],this.getChildren().forEach(s=>{n.children.push(s.toObject())}),n}isAncestorOf(n){let s=n.getParent();for(;s;){if(s._id===this._id)return!0;s=s.getParent()}return!1}clone(n){const s=t.Node.prototype.clone.call(this,n);return this.getChildren().forEach(function(a){s.add(a.clone())}),s}getAllIntersections(n){const s=[];return this.find("Shape").forEach(a=>{a.isVisible()&&a.intersects(n)&&s.push(a)}),s}_clearSelfAndDescendantCache(n){var s;super._clearSelfAndDescendantCache(n),!this.isCached()&&((s=this.children)===null||s===void 0||s.forEach(function(a){a._clearSelfAndDescendantCache(n)}))}_setChildrenIndices(){var n;(n=this.children)===null||n===void 0||n.forEach(function(s,a){s.index=a}),this._requestDraw()}drawScene(n,s,a){const h=this.getLayer(),l=n||h&&h.getCanvas(),c=l&&l.getContext(),p=this._getCanvasCache(),m=p&&p.scene,d=l&&l.isCache;if(!this.isVisible()&&!d)return this;if(m){c.save();const f=this.getAbsoluteTransform(s).getMatrix();c.transform(f[0],f[1],f[2],f[3],f[4],f[5]),this._drawCachedSceneCanvas(c),c.restore()}else this._drawChildren("drawScene",l,s,a);return this}drawHit(n,s){if(!this.shouldDrawHit(s))return this;const a=this.getLayer(),h=n||a&&a.hitCanvas,l=h&&h.getContext(),c=this._getCanvasCache();if(c&&c.hit){l.save();const m=this.getAbsoluteTransform(s).getMatrix();l.transform(m[0],m[1],m[2],m[3],m[4],m[5]),this._drawCachedHitCanvas(l),l.restore()}else this._drawChildren("drawHit",h,s);return this}_drawChildren(n,s,a,h){var l;const c=s&&s.getContext(),p=this.clipWidth(),m=this.clipHeight(),d=this.clipFunc(),f=typeof p=="number"&&typeof m=="number"||d,_=a===this;if(f){c.save();const C=this.getAbsoluteTransform(a);let u=C.getMatrix();c.transform(u[0],u[1],u[2],u[3],u[4],u[5]),c.beginPath();let g;if(d)g=d.call(this,c,this);else{const b=this.clipX(),S=this.clipY();c.rect(b||0,S||0,p,m)}c.clip.apply(c,g),u=C.copy().invert().getMatrix(),c.transform(u[0],u[1],u[2],u[3],u[4],u[5])}const v=!_&&this.globalCompositeOperation()!=="source-over"&&n==="drawScene";v&&(c.save(),c._applyGlobalCompositeOperation(this)),(l=this.children)===null||l===void 0||l.forEach(function(C){C[n](s,a,h)}),v&&c.restore(),f&&c.restore()}getClientRect(n={}){var s;const a=n.skipTransform,h=n.relativeTo;let l,c,p,m,d={x:1/0,y:1/0,width:0,height:0};const f=this;(s=this.children)===null||s===void 0||s.forEach(function(C){if(!C.visible())return;const u=C.getClientRect({relativeTo:f,skipShadow:n.skipShadow,skipStroke:n.skipStroke});u.width===0&&u.height===0||(l===void 0?(l=u.x,c=u.y,p=u.x+u.width,m=u.y+u.height):(l=Math.min(l,u.x),c=Math.min(c,u.y),p=Math.max(p,u.x+u.width),m=Math.max(m,u.y+u.height)))});const _=this.find("Shape");let v=!1;for(let C=0;C<_.length;C++)if(_[C]._isVisible(this)){v=!0;break}return v&&l!==void 0?d={x:l,y:c,width:p-l,height:m-c}:d={x:0,y:0,width:0,height:0},a?d:this._transformedRect(d,h)}};return wi.Container=i,o.Factory.addComponentsGetterSetter(i,"clip",["x","y","width","height"]),o.Factory.addGetterSetter(i,"clipX",void 0,(0,e.getNumberValidator)()),o.Factory.addGetterSetter(i,"clipY",void 0,(0,e.getNumberValidator)()),o.Factory.addGetterSetter(i,"clipWidth",void 0,(0,e.getNumberValidator)()),o.Factory.addGetterSetter(i,"clipHeight",void 0,(0,e.getNumberValidator)()),o.Factory.addGetterSetter(i,"clipFunc"),wi}var fn={},Ee={},Xs;function sh(){if(Xs)return Ee;Xs=1,Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.getCapturedShape=i,Ee.createEvent=r,Ee.hasPointerCapture=n,Ee.setPointerCapture=s,Ee.releaseCapture=a;const o=ot(),t=new Map,e=o.Konva._global.PointerEvent!==void 0;function i(h){return t.get(h)}function r(h){return{evt:h,pointerId:h.pointerId}}function n(h,l){return t.get(h)===l}function s(h,l){a(h),l.getStage()&&(t.set(h,l),e&&l._fire("gotpointercapture",r(new PointerEvent("gotpointercapture"))))}function a(h,l){const c=t.get(h);if(!c)return;const p=c.getStage();p&&p.content,t.delete(h),e&&c._fire("lostpointercapture",r(new PointerEvent("lostpointercapture")))}return Ee}var Ks;function Jl(){return Ks||(Ks=1,function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.Stage=o.stages=void 0;const t=Tt(),e=ht(),i=Yr(),r=ot(),n=qr(),s=ss(),a=ot(),h=sh(),l="Stage",c="string",p="px",m="mouseout",d="mouseleave",f="mouseover",_="mouseenter",v="mousemove",C="mousedown",u="mouseup",g="pointermove",b="pointerdown",S="pointerup",x="pointercancel",M="lostpointercapture",k="pointerout",T="pointerleave",A="pointerover",E="pointerenter",D="contextmenu",y="touchstart",P="touchend",w="touchmove",R="touchcancel",O="wheel",I=5,V=[[_,"_pointerenter"],[C,"_pointerdown"],[v,"_pointermove"],[u,"_pointerup"],[d,"_pointerleave"],[y,"_pointerdown"],[w,"_pointermove"],[P,"_pointerup"],[R,"_pointercancel"],[f,"_pointerover"],[O,"_wheel"],[D,"_contextmenu"],[b,"_pointerdown"],[g,"_pointermove"],[S,"_pointerup"],[x,"_pointercancel"],[M,"_lostpointercapture"]],B={mouse:{[k]:m,[T]:d,[A]:f,[E]:_,[g]:v,[b]:C,[S]:u,[x]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[k]:"touchout",[T]:"touchleave",[A]:"touchover",[E]:"touchenter",[g]:w,[b]:y,[S]:P,[x]:R,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[k]:k,[T]:T,[A]:A,[E]:E,[g]:g,[b]:b,[S]:S,[x]:x,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},q=G=>G.indexOf("pointer")>=0?"pointer":G.indexOf("touch")>=0?"touch":"mouse",K=G=>{const F=q(G);if(F==="pointer")return r.Konva.pointerEventsEnabled&&B.pointer;if(F==="touch")return B.touch;if(F==="mouse")return B.mouse};function z(G={}){return(G.clipFunc||G.clipWidth||G.clipHeight)&&t.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),G}const Y="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";o.stages=[];class L extends i.Container{constructor(F){super(z(F)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),o.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{z(this.attrs)}),this._checkVisibility()}_validateAdd(F){const N=F.getType()==="Layer",U=F.getType()==="FastLayer";N||U||t.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const F=this.visible()?"":"none";this.content.style.display=F}setContainer(F){if(typeof F===c){if(F.charAt(0)==="."){const U=F.slice(1);F=document.getElementsByClassName(U)[0]}else{var N;F.charAt(0)!=="#"?N=F:N=F.slice(1),F=document.getElementById(N)}if(!F)throw"Can not find container in document with id "+N}return this._setAttr("container",F),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),F.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){let F=this.children,N=F.length,U;for(U=0;U<N;U++)F[U].clear();return this}clone(F){return F||(F={}),F.container=typeof document<"u"&&document.createElement("div"),i.Container.prototype.clone.call(this,F)}destroy(){super.destroy();const F=this.content;F&&t.Util._isInDocument(F)&&this.container().removeChild(F);const N=o.stages.indexOf(this);return N>-1&&o.stages.splice(N,1),t.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const F=this._pointerPositions[0]||this._changedPointerPositions[0];return F?{x:F.x,y:F.y}:(t.Util.warn(Y),null)}_getPointerById(F){return this._pointerPositions.find(N=>N.id===F)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(F){F=F||{},F.x=F.x||0,F.y=F.y||0,F.width=F.width||this.width(),F.height=F.height||this.height();const N=new n.SceneCanvas({width:F.width,height:F.height,pixelRatio:F.pixelRatio||1}),U=N.getContext()._context,X=this.children;return(F.x||F.y)&&U.translate(-1*F.x,-1*F.y),X.forEach(function(j){if(!j.isVisible())return;const $=j._toKonvaCanvas(F);U.drawImage($._canvas,F.x,F.y,$.getWidth()/$.getPixelRatio(),$.getHeight()/$.getPixelRatio())}),N}getIntersection(F){if(!F)return null;let N=this.children,U=N.length,X=U-1,j;for(j=X;j>=0;j--){const $=N[j].getIntersection(F);if($)return $}return null}_resizeDOM(){const F=this.width(),N=this.height();this.content&&(this.content.style.width=F+p,this.content.style.height=N+p),this.bufferCanvas.setSize(F,N),this.bufferHitCanvas.setSize(F,N),this.children.forEach(U=>{U.setSize({width:F,height:N}),U.draw()})}add(F,...N){if(arguments.length>1){for(let X=0;X<arguments.length;X++)this.add(arguments[X]);return this}super.add(F);const U=this.children.length;return U>I&&t.Util.warn("The stage has "+U+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),F.setSize({width:this.width(),height:this.height()}),F.draw(),r.Konva.isBrowser&&this.content.appendChild(F.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(F){return h.hasPointerCapture(F,this)}setPointerCapture(F){h.setPointerCapture(F,this)}releaseCapture(F){h.releaseCapture(F,this)}getLayers(){return this.children}_bindContentEvents(){r.Konva.isBrowser&&V.forEach(([F,N])=>{this.content.addEventListener(F,U=>{this[N](U)},{passive:!1})})}_pointerenter(F){this.setPointersPositions(F);const N=K(F.type);N&&this._fire(N.pointerenter,{evt:F,target:this,currentTarget:this})}_pointerover(F){this.setPointersPositions(F);const N=K(F.type);N&&this._fire(N.pointerover,{evt:F,target:this,currentTarget:this})}_getTargetShape(F){let N=this[F+"targetShape"];return N&&!N.getStage()&&(N=null),N}_pointerleave(F){const N=K(F.type),U=q(F.type);if(!N)return;this.setPointersPositions(F);const X=this._getTargetShape(U),j=!(r.Konva.isDragging()||r.Konva.isTransforming())||r.Konva.hitOnDragEnabled;X&&j?(X._fireAndBubble(N.pointerout,{evt:F}),X._fireAndBubble(N.pointerleave,{evt:F}),this._fire(N.pointerleave,{evt:F,target:this,currentTarget:this}),this[U+"targetShape"]=null):j&&(this._fire(N.pointerleave,{evt:F,target:this,currentTarget:this}),this._fire(N.pointerout,{evt:F,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(F){const N=K(F.type),U=q(F.type);if(!N)return;this.setPointersPositions(F);let X=!1;this._changedPointerPositions.forEach(j=>{const $=this.getIntersection(j);if(s.DD.justDragged=!1,r.Konva["_"+U+"ListenClick"]=!0,!$||!$.isListening()){this[U+"ClickStartShape"]=void 0;return}r.Konva.capturePointerEventsEnabled&&$.setPointerCapture(j.id),this[U+"ClickStartShape"]=$,$._fireAndBubble(N.pointerdown,{evt:F,pointerId:j.id}),X=!0;const st=F.type.indexOf("touch")>=0;$.preventDefault()&&F.cancelable&&st&&F.preventDefault()}),X||this._fire(N.pointerdown,{evt:F,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(F){const N=K(F.type),U=q(F.type);if(!N||(r.Konva.isDragging()&&s.DD.node.preventDefault()&&F.cancelable&&F.preventDefault(),this.setPointersPositions(F),!(!(r.Konva.isDragging()||r.Konva.isTransforming())||r.Konva.hitOnDragEnabled)))return;const j={};let $=!1;const st=this._getTargetShape(U);this._changedPointerPositions.forEach(tt=>{const it=h.getCapturedShape(tt.id)||this.getIntersection(tt),ft=tt.id,ut={evt:F,pointerId:ft},wt=st!==it;if(wt&&st&&(st._fireAndBubble(N.pointerout,{...ut},it),st._fireAndBubble(N.pointerleave,{...ut},it)),it){if(j[it._id])return;j[it._id]=!0}it&&it.isListening()?($=!0,wt&&(it._fireAndBubble(N.pointerover,{...ut},st),it._fireAndBubble(N.pointerenter,{...ut},st),this[U+"targetShape"]=it),it._fireAndBubble(N.pointermove,{...ut})):st&&(this._fire(N.pointerover,{evt:F,target:this,currentTarget:this,pointerId:ft}),this[U+"targetShape"]=null)}),$||this._fire(N.pointermove,{evt:F,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(F){const N=K(F.type),U=q(F.type);if(!N)return;this.setPointersPositions(F);const X=this[U+"ClickStartShape"],j=this[U+"ClickEndShape"],$={};let st=!1;this._changedPointerPositions.forEach(tt=>{const it=h.getCapturedShape(tt.id)||this.getIntersection(tt);if(it){if(it.releaseCapture(tt.id),$[it._id])return;$[it._id]=!0}const ft=tt.id,ut={evt:F,pointerId:ft};let wt=!1;r.Konva["_"+U+"InDblClickWindow"]?(wt=!0,clearTimeout(this[U+"DblTimeout"])):s.DD.justDragged||(r.Konva["_"+U+"InDblClickWindow"]=!0,clearTimeout(this[U+"DblTimeout"])),this[U+"DblTimeout"]=setTimeout(function(){r.Konva["_"+U+"InDblClickWindow"]=!1},r.Konva.dblClickWindow),it&&it.isListening()?(st=!0,this[U+"ClickEndShape"]=it,it._fireAndBubble(N.pointerup,{...ut}),r.Konva["_"+U+"ListenClick"]&&X&&X===it&&(it._fireAndBubble(N.pointerclick,{...ut}),wt&&j&&j===it&&it._fireAndBubble(N.pointerdblclick,{...ut}))):(this[U+"ClickEndShape"]=null,r.Konva["_"+U+"ListenClick"]&&this._fire(N.pointerclick,{evt:F,target:this,currentTarget:this,pointerId:ft}),wt&&this._fire(N.pointerdblclick,{evt:F,target:this,currentTarget:this,pointerId:ft}))}),st||this._fire(N.pointerup,{evt:F,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),r.Konva["_"+U+"ListenClick"]=!1,F.cancelable&&U!=="touch"&&F.preventDefault()}_contextmenu(F){this.setPointersPositions(F);const N=this.getIntersection(this.getPointerPosition());N&&N.isListening()?N._fireAndBubble(D,{evt:F}):this._fire(D,{evt:F,target:this,currentTarget:this})}_wheel(F){this.setPointersPositions(F);const N=this.getIntersection(this.getPointerPosition());N&&N.isListening()?N._fireAndBubble(O,{evt:F}):this._fire(O,{evt:F,target:this,currentTarget:this})}_pointercancel(F){this.setPointersPositions(F);const N=h.getCapturedShape(F.pointerId)||this.getIntersection(this.getPointerPosition());N&&N._fireAndBubble(S,h.createEvent(F)),h.releaseCapture(F.pointerId)}_lostpointercapture(F){h.releaseCapture(F.pointerId)}setPointersPositions(F){let N=this._getContentPosition(),U=null,X=null;F=F||window.event,F.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(F.touches,j=>{this._pointerPositions.push({id:j.identifier,x:(j.clientX-N.left)/N.scaleX,y:(j.clientY-N.top)/N.scaleY})}),Array.prototype.forEach.call(F.changedTouches||F.touches,j=>{this._changedPointerPositions.push({id:j.identifier,x:(j.clientX-N.left)/N.scaleX,y:(j.clientY-N.top)/N.scaleY})})):(U=(F.clientX-N.left)/N.scaleX,X=(F.clientY-N.top)/N.scaleY,this.pointerPos={x:U,y:X},this._pointerPositions=[{x:U,y:X,id:t.Util._getFirstPointerId(F)}],this._changedPointerPositions=[{x:U,y:X,id:t.Util._getFirstPointerId(F)}])}_setPointerPosition(F){t.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(F)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const F=this.content.getBoundingClientRect();return{top:F.top,left:F.left,scaleX:F.width/this.content.clientWidth||1,scaleY:F.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new n.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new n.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!r.Konva.isBrowser)return;const F=this.container();if(!F)throw"Stage has no container. A container is required.";F.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),F.appendChild(this.content),this._resizeDOM()}cache(){return t.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(F){F.batchDraw()}),this}}o.Stage=L,L.prototype.nodeType=l,(0,a._registerNode)(L),e.Factory.addGetterSetter(L,"container"),r.Konva.isBrowser&&document.addEventListener("visibilitychange",()=>{o.stages.forEach(G=>{G.batchDraw()})})}(fn)),fn}var Ci={},gn={},js;function Dt(){return js||(js=1,function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.Shape=o.shapes=void 0;const t=ot(),e=Tt(),i=ht(),r=kt(),n=lt(),s=ot(),a=sh(),h="hasShadow",l="shadowRGBA",c="patternImage",p="linearGradient",m="radialGradient";let d;function f(){return d||(d=e.Util.createCanvasElement().getContext("2d"),d)}o.shapes={};function _(T){const A=this.attrs.fillRule;A?T.fill(A):T.fill()}function v(T){T.stroke()}function C(T){const A=this.attrs.fillRule;A?T.fill(A):T.fill()}function u(T){T.stroke()}function g(){this._clearCache(h)}function b(){this._clearCache(l)}function S(){this._clearCache(c)}function x(){this._clearCache(p)}function M(){this._clearCache(m)}class k extends r.Node{constructor(A){super(A);let E;for(;E=e.Util.getRandomColor(),!(E&&!(E in o.shapes)););this.colorKey=E,o.shapes[E]=this}getContext(){return e.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return e.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(h,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(c,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const E=f().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(E&&E.setTransform){const D=new e.Transform;D.translate(this.fillPatternX(),this.fillPatternY()),D.rotate(t.Konva.getAngle(this.fillPatternRotation())),D.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),D.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const y=D.getMatrix(),P=typeof DOMMatrix>"u"?{a:y[0],b:y[1],c:y[2],d:y[3],e:y[4],f:y[5]}:new DOMMatrix(y);E.setTransform(P)}return E}}_getLinearGradient(){return this._getCache(p,this.__getLinearGradient)}__getLinearGradient(){const A=this.fillLinearGradientColorStops();if(A){const E=f(),D=this.fillLinearGradientStartPoint(),y=this.fillLinearGradientEndPoint(),P=E.createLinearGradient(D.x,D.y,y.x,y.y);for(let w=0;w<A.length;w+=2)P.addColorStop(A[w],A[w+1]);return P}}_getRadialGradient(){return this._getCache(m,this.__getRadialGradient)}__getRadialGradient(){const A=this.fillRadialGradientColorStops();if(A){const E=f(),D=this.fillRadialGradientStartPoint(),y=this.fillRadialGradientEndPoint(),P=E.createRadialGradient(D.x,D.y,this.fillRadialGradientStartRadius(),y.x,y.y,this.fillRadialGradientEndRadius());for(let w=0;w<A.length;w+=2)P.addColorStop(A[w],A[w+1]);return P}}getShadowRGBA(){return this._getCache(l,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const A=e.Util.colorToRGBA(this.shadowColor());if(A)return"rgba("+A.r+","+A.g+","+A.b+","+A.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const A=this.hitStrokeWidth();return A==="auto"?this.hasStroke():this.strokeEnabled()&&!!A}intersects(A){const E=this.getStage();if(!E)return!1;const D=E.bufferHitCanvas;return D.getContext().clear(),this.drawHit(D,void 0,!0),D.context.getImageData(Math.round(A.x),Math.round(A.y),1,1).data[3]>0}destroy(){return r.Node.prototype.destroy.call(this),delete o.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(A){var E;if(!((E=this.attrs.perfectDrawEnabled)!==null&&E!==void 0?E:!0))return!1;const y=A||this.hasFill(),P=this.hasStroke(),w=this.getAbsoluteOpacity()!==1;if(y&&P&&w)return!0;const R=this.hasShadow(),O=this.shadowForStrokeEnabled();return!!(y&&P&&R&&O)}setStrokeHitEnabled(A){e.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),A?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const A=this.size();return{x:this._centroid?-A.width/2:0,y:this._centroid?-A.height/2:0,width:A.width,height:A.height}}getClientRect(A={}){let E=!1,D=this.getParent();for(;D;){if(D.isCached()){E=!0;break}D=D.getParent()}const y=A.skipTransform,P=A.relativeTo||E&&this.getStage()||void 0,w=this.getSelfRect(),O=!A.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,I=w.width+O,V=w.height+O,B=!A.skipShadow&&this.hasShadow(),q=B?this.shadowOffsetX():0,K=B?this.shadowOffsetY():0,z=I+Math.abs(q),Y=V+Math.abs(K),L=B&&this.shadowBlur()||0,G=z+L*2,F=Y+L*2,N={width:G,height:F,x:-(O/2+L)+Math.min(q,0)+w.x,y:-(O/2+L)+Math.min(K,0)+w.y};return y?N:this._transformedRect(N,P)}drawScene(A,E,D){const y=this.getLayer();let P=A||y.getCanvas(),w=P.getContext(),R=this._getCanvasCache(),O=this.getSceneFunc(),I=this.hasShadow(),V,B;const q=P.isCache,K=E===this;if(!this.isVisible()&&!K)return this;if(R){w.save();const Y=this.getAbsoluteTransform(E).getMatrix();return w.transform(Y[0],Y[1],Y[2],Y[3],Y[4],Y[5]),this._drawCachedSceneCanvas(w),w.restore(),this}if(!O)return this;if(w.save(),this._useBufferCanvas()&&!q){V=this.getStage();const Y=D||V.bufferCanvas;B=Y.getContext(),B.clear(),B.save(),B._applyLineJoin(this);var z=this.getAbsoluteTransform(E).getMatrix();B.transform(z[0],z[1],z[2],z[3],z[4],z[5]),O.call(this,B,this),B.restore();const L=Y.pixelRatio;I&&w._applyShadow(this),w._applyOpacity(this),w._applyGlobalCompositeOperation(this),w.drawImage(Y._canvas,0,0,Y.width/L,Y.height/L)}else{if(w._applyLineJoin(this),!K){var z=this.getAbsoluteTransform(E).getMatrix();w.transform(z[0],z[1],z[2],z[3],z[4],z[5]),w._applyOpacity(this),w._applyGlobalCompositeOperation(this)}I&&w._applyShadow(this),O.call(this,w,this)}return w.restore(),this}drawHit(A,E,D=!1){if(!this.shouldDrawHit(E,D))return this;const y=this.getLayer(),P=A||y.hitCanvas,w=P&&P.getContext(),R=this.hitFunc()||this.sceneFunc(),O=this._getCanvasCache(),I=O&&O.hit;if(this.colorKey||e.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),I){w.save();const B=this.getAbsoluteTransform(E).getMatrix();return w.transform(B[0],B[1],B[2],B[3],B[4],B[5]),this._drawCachedHitCanvas(w),w.restore(),this}if(!R)return this;if(w.save(),w._applyLineJoin(this),!(this===E)){const B=this.getAbsoluteTransform(E).getMatrix();w.transform(B[0],B[1],B[2],B[3],B[4],B[5])}return R.call(this,w,this),w.restore(),this}drawHitFromCache(A=0){let E=this._getCanvasCache(),D=this._getCachedSceneCanvas(),y=E.hit,P=y.getContext(),w=y.getWidth(),R=y.getHeight(),O,I,V,B,q,K;P.clear(),P.drawImage(D._canvas,0,0,w,R);try{for(O=P.getImageData(0,0,w,R),I=O.data,V=I.length,B=e.Util._hexToRgb(this.colorKey),q=0;q<V;q+=4)K=I[q+3],K>A?(I[q]=B.r,I[q+1]=B.g,I[q+2]=B.b,I[q+3]=255):I[q+3]=0;P.putImageData(O,0,0)}catch(z){e.Util.error("Unable to draw hit graph from cached scene canvas. "+z.message)}return this}hasPointerCapture(A){return a.hasPointerCapture(A,this)}setPointerCapture(A){a.setPointerCapture(A,this)}releaseCapture(A){a.releaseCapture(A,this)}}o.Shape=k,k.prototype._fillFunc=_,k.prototype._strokeFunc=v,k.prototype._fillFuncHit=C,k.prototype._strokeFuncHit=u,k.prototype._centroid=!1,k.prototype.nodeType="Shape",(0,s._registerNode)(k),k.prototype.eventListeners={},k.prototype.on.call(k.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",g),k.prototype.on.call(k.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",b),k.prototype.on.call(k.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",S),k.prototype.on.call(k.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",x),k.prototype.on.call(k.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",M),i.Factory.addGetterSetter(k,"stroke",void 0,(0,n.getStringOrGradientValidator)()),i.Factory.addGetterSetter(k,"strokeWidth",2,(0,n.getNumberValidator)()),i.Factory.addGetterSetter(k,"fillAfterStrokeEnabled",!1),i.Factory.addGetterSetter(k,"hitStrokeWidth","auto",(0,n.getNumberOrAutoValidator)()),i.Factory.addGetterSetter(k,"strokeHitEnabled",!0,(0,n.getBooleanValidator)()),i.Factory.addGetterSetter(k,"perfectDrawEnabled",!0,(0,n.getBooleanValidator)()),i.Factory.addGetterSetter(k,"shadowForStrokeEnabled",!0,(0,n.getBooleanValidator)()),i.Factory.addGetterSetter(k,"lineJoin"),i.Factory.addGetterSetter(k,"lineCap"),i.Factory.addGetterSetter(k,"sceneFunc"),i.Factory.addGetterSetter(k,"hitFunc"),i.Factory.addGetterSetter(k,"dash"),i.Factory.addGetterSetter(k,"dashOffset",0,(0,n.getNumberValidator)()),i.Factory.addGetterSetter(k,"shadowColor",void 0,(0,n.getStringValidator)()),i.Factory.addGetterSetter(k,"shadowBlur",0,(0,n.getNumberValidator)()),i.Factory.addGetterSetter(k,"shadowOpacity",1,(0,n.getNumberValidator)()),i.Factory.addComponentsGetterSetter(k,"shadowOffset",["x","y"]),i.Factory.addGetterSetter(k,"shadowOffsetX",0,(0,n.getNumberValidator)()),i.Factory.addGetterSetter(k,"shadowOffsetY",0,(0,n.getNumberValidator)()),i.Factory.addGetterSetter(k,"fillPatternImage"),i.Factory.addGetterSetter(k,"fill",void 0,(0,n.getStringOrGradientValidator)()),i.Factory.addGetterSetter(k,"fillPatternX",0,(0,n.getNumberValidator)()),i.Factory.addGetterSetter(k,"fillPatternY",0,(0,n.getNumberValidator)()),i.Factory.addGetterSetter(k,"fillLinearGradientColorStops"),i.Factory.addGetterSetter(k,"strokeLinearGradientColorStops"),i.Factory.addGetterSetter(k,"fillRadialGradientStartRadius",0),i.Factory.addGetterSetter(k,"fillRadialGradientEndRadius",0),i.Factory.addGetterSetter(k,"fillRadialGradientColorStops"),i.Factory.addGetterSetter(k,"fillPatternRepeat","repeat"),i.Factory.addGetterSetter(k,"fillEnabled",!0),i.Factory.addGetterSetter(k,"strokeEnabled",!0),i.Factory.addGetterSetter(k,"shadowEnabled",!0),i.Factory.addGetterSetter(k,"dashEnabled",!0),i.Factory.addGetterSetter(k,"strokeScaleEnabled",!0),i.Factory.addGetterSetter(k,"fillPriority","color"),i.Factory.addComponentsGetterSetter(k,"fillPatternOffset",["x","y"]),i.Factory.addGetterSetter(k,"fillPatternOffsetX",0,(0,n.getNumberValidator)()),i.Factory.addGetterSetter(k,"fillPatternOffsetY",0,(0,n.getNumberValidator)()),i.Factory.addComponentsGetterSetter(k,"fillPatternScale",["x","y"]),i.Factory.addGetterSetter(k,"fillPatternScaleX",1,(0,n.getNumberValidator)()),i.Factory.addGetterSetter(k,"fillPatternScaleY",1,(0,n.getNumberValidator)()),i.Factory.addComponentsGetterSetter(k,"fillLinearGradientStartPoint",["x","y"]),i.Factory.addComponentsGetterSetter(k,"strokeLinearGradientStartPoint",["x","y"]),i.Factory.addGetterSetter(k,"fillLinearGradientStartPointX",0),i.Factory.addGetterSetter(k,"strokeLinearGradientStartPointX",0),i.Factory.addGetterSetter(k,"fillLinearGradientStartPointY",0),i.Factory.addGetterSetter(k,"strokeLinearGradientStartPointY",0),i.Factory.addComponentsGetterSetter(k,"fillLinearGradientEndPoint",["x","y"]),i.Factory.addComponentsGetterSetter(k,"strokeLinearGradientEndPoint",["x","y"]),i.Factory.addGetterSetter(k,"fillLinearGradientEndPointX",0),i.Factory.addGetterSetter(k,"strokeLinearGradientEndPointX",0),i.Factory.addGetterSetter(k,"fillLinearGradientEndPointY",0),i.Factory.addGetterSetter(k,"strokeLinearGradientEndPointY",0),i.Factory.addComponentsGetterSetter(k,"fillRadialGradientStartPoint",["x","y"]),i.Factory.addGetterSetter(k,"fillRadialGradientStartPointX",0),i.Factory.addGetterSetter(k,"fillRadialGradientStartPointY",0),i.Factory.addComponentsGetterSetter(k,"fillRadialGradientEndPoint",["x","y"]),i.Factory.addGetterSetter(k,"fillRadialGradientEndPointX",0),i.Factory.addGetterSetter(k,"fillRadialGradientEndPointY",0),i.Factory.addGetterSetter(k,"fillPatternRotation",0),i.Factory.addGetterSetter(k,"fillRule",void 0,(0,n.getStringValidator)()),i.Factory.backCompat(k,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})}(gn)),gn}var $s;function ah(){if($s)return Ci;$s=1,Object.defineProperty(Ci,"__esModule",{value:!0}),Ci.Layer=void 0;const o=Tt(),t=Yr(),e=kt(),i=ht(),r=qr(),n=lt(),s=Dt(),a=ot(),h="#",l="beforeDraw",c="draw",p=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],m=p.length;let d=class extends t.Container{constructor(_){super(_),this.canvas=new r.SceneCanvas,this.hitCanvas=new r.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(_){return this.getContext().clear(_),this.getHitCanvas().getContext().clear(_),this}setZIndex(_){super.setZIndex(_);const v=this.getStage();return v&&v.content&&(v.content.removeChild(this.getNativeCanvasElement()),_<v.children.length-1?v.content.insertBefore(this.getNativeCanvasElement(),v.children[_+1].getCanvas()._canvas):v.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){e.Node.prototype.moveToTop.call(this);const _=this.getStage();return _&&_.content&&(_.content.removeChild(this.getNativeCanvasElement()),_.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!e.Node.prototype.moveUp.call(this))return!1;const v=this.getStage();return!v||!v.content?!1:(v.content.removeChild(this.getNativeCanvasElement()),this.index<v.children.length-1?v.content.insertBefore(this.getNativeCanvasElement(),v.children[this.index+1].getCanvas()._canvas):v.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(e.Node.prototype.moveDown.call(this)){const _=this.getStage();if(_){const v=_.children;_.content&&(_.content.removeChild(this.getNativeCanvasElement()),_.content.insertBefore(this.getNativeCanvasElement(),v[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(e.Node.prototype.moveToBottom.call(this)){const _=this.getStage();if(_){const v=_.children;_.content&&(_.content.removeChild(this.getNativeCanvasElement()),_.content.insertBefore(this.getNativeCanvasElement(),v[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const _=this.getNativeCanvasElement();return e.Node.prototype.remove.call(this),_&&_.parentNode&&o.Util._isInDocument(_)&&_.parentNode.removeChild(_),this}getStage(){return this.parent}setSize({width:_,height:v}){return this.canvas.setSize(_,v),this.hitCanvas.setSize(_,v),this._setSmoothEnabled(),this}_validateAdd(_){const v=_.getType();v!=="Group"&&v!=="Shape"&&o.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(_){return _=_||{},_.width=_.width||this.getWidth(),_.height=_.height||this.getHeight(),_.x=_.x!==void 0?_.x:this.x(),_.y=_.y!==void 0?_.y:this.y(),e.Node.prototype._toKonvaCanvas.call(this,_)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){o.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){o.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,o.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(_){if(!this.isListening()||!this.isVisible())return null;let v=1,C=!1;for(;;){for(let u=0;u<m;u++){const g=p[u],b=this._getIntersection({x:_.x+g.x*v,y:_.y+g.y*v}),S=b.shape;if(S)return S;if(C=!!b.antialiased,!b.antialiased)break}if(C)v+=1;else return null}}_getIntersection(_){const v=this.hitCanvas.pixelRatio,C=this.hitCanvas.context.getImageData(Math.round(_.x*v),Math.round(_.y*v),1,1).data,u=C[3];if(u===255){const g=o.Util._rgbToHex(C[0],C[1],C[2]),b=s.shapes[h+g];return b?{shape:b}:{antialiased:!0}}else if(u>0)return{antialiased:!0};return{}}drawScene(_,v){const C=this.getLayer(),u=_||C&&C.getCanvas();return this._fire(l,{node:this}),this.clearBeforeDraw()&&u.getContext().clear(),t.Container.prototype.drawScene.call(this,u,v),this._fire(c,{node:this}),this}drawHit(_,v){const C=this.getLayer(),u=_||C&&C.hitCanvas;return C&&C.clearBeforeDraw()&&C.getHitCanvas().getContext().clear(),t.Container.prototype.drawHit.call(this,u,v),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(_){o.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(_)}getHitGraphEnabled(_){return o.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const _=this.parent;!!this.hitCanvas._canvas.parentNode?_.content.removeChild(this.hitCanvas._canvas):_.content.appendChild(this.hitCanvas._canvas)}destroy(){return o.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}};return Ci.Layer=d,d.prototype.nodeType="Layer",(0,a._registerNode)(d),i.Factory.addGetterSetter(d,"imageSmoothingEnabled",!0),i.Factory.addGetterSetter(d,"clearBeforeDraw",!0),i.Factory.addGetterSetter(d,"hitGraphEnabled",!0,(0,n.getBooleanValidator)()),Ci}var xi={},Qs;function Zl(){if(Qs)return xi;Qs=1,Object.defineProperty(xi,"__esModule",{value:!0}),xi.FastLayer=void 0;const o=Tt(),t=ah(),e=ot();let i=class extends t.Layer{constructor(n){super(n),this.listening(!1),o.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}};return xi.FastLayer=i,i.prototype.nodeType="FastLayer",(0,e._registerNode)(i),xi}var Ti={},Js;function as(){if(Js)return Ti;Js=1,Object.defineProperty(Ti,"__esModule",{value:!0}),Ti.Group=void 0;const o=Tt(),t=Yr(),e=ot();let i=class extends t.Container{_validateAdd(n){const s=n.getType();s!=="Group"&&s!=="Shape"&&o.Util.throw("You may only add groups and shapes to groups.")}};return Ti.Group=i,i.prototype.nodeType="Group",(0,e._registerNode)(i),Ti}var Pi={},Zs;function os(){if(Zs)return Pi;Zs=1,Object.defineProperty(Pi,"__esModule",{value:!0}),Pi.Animation=void 0;const o=ot(),t=Tt(),e=function(){return o.glob.performance&&o.glob.performance.now?function(){return o.glob.performance.now()}:function(){return new Date().getTime()}}();let i=class ni{constructor(n,s){this.id=ni.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:e(),frameRate:0},this.func=n,this.setLayers(s)}setLayers(n){let s=[];return n&&(s=Array.isArray(n)?n:[n]),this.layers=s,this}getLayers(){return this.layers}addLayer(n){const s=this.layers,a=s.length;for(let h=0;h<a;h++)if(s[h]._id===n._id)return!1;return this.layers.push(n),!0}isRunning(){const s=ni.animations,a=s.length;for(let h=0;h<a;h++)if(s[h].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=e(),ni._addAnimation(this),this}stop(){return ni._removeAnimation(this),this}_updateFrameObject(n){this.frame.timeDiff=n-this.frame.lastTime,this.frame.lastTime=n,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(n){this.animations.push(n),this._handleAnimation()}static _removeAnimation(n){const s=n.id,a=this.animations,h=a.length;for(let l=0;l<h;l++)if(a[l].id===s){this.animations.splice(l,1);break}}static _runFrames(){const n={},s=this.animations;for(let a=0;a<s.length;a++){const h=s[a],l=h.layers,c=h.func;h._updateFrameObject(e());const p=l.length;let m;if(c?m=c.call(h,h.frame)!==!1:m=!0,!!m)for(let d=0;d<p;d++){const f=l[d];f._id!==void 0&&(n[f._id]=f)}}for(const a in n)n.hasOwnProperty(a)&&n[a].batchDraw()}static _animationLoop(){const n=ni;n.animations.length?(n._runFrames(),t.Util.requestAnimFrame(n._animationLoop)):n.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,t.Util.requestAnimFrame(this._animationLoop))}};return Pi.Animation=i,i.animations=[],i.animIdCounter=0,i.animRunning=!1,Pi}var _n={},ta;function tc(){return ta||(ta=1,function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.Easings=o.Tween=void 0;const t=Tt(),e=os(),i=kt(),r=ot();let n={node:1,duration:1,easing:1,onFinish:1,yoyo:1},s=1,a=2,h=3,l=0,c=["fill","stroke","shadowColor"];class p{constructor(f,_,v,C,u,g,b){this.prop=f,this.propFunc=_,this.begin=C,this._pos=C,this.duration=g,this._change=0,this.prevPos=0,this.yoyo=b,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=v,this._change=u-this.begin,this.pause()}fire(f){const _=this[f];_&&_()}setTime(f){f>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():f<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=f,this.update())}getTime(){return this._time}setPosition(f){this.prevPos=this._pos,this.propFunc(f),this._pos=f}getPosition(f){return f===void 0&&(f=this._time),this.func(f,this.begin,this._change,this.duration)}play(){this.state=a,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=h,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(f){this.pause(),this._time=f,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const f=this.getTimer()-this._startTime;this.state===a?this.setTime(f):this.state===h&&this.setTime(this.duration-f)}pause(){this.state=s,this.fire("onPause")}getTimer(){return new Date().getTime()}}class m{constructor(f){let _=this,v=f.node,C=v._id,u,g=f.easing||o.Easings.Linear,b=!!f.yoyo,S;typeof f.duration>"u"?u=.3:f.duration===0?u=.001:u=f.duration,this.node=v,this._id=l++;const x=v.getLayer()||(v instanceof r.Konva.Stage?v.getLayers():null);x||t.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new e.Animation(function(){_.tween.onEnterFrame()},x),this.tween=new p(S,function(M){_._tweenFunc(M)},g,0,1,u*1e3,b),this._addListeners(),m.attrs[C]||(m.attrs[C]={}),m.attrs[C][this._id]||(m.attrs[C][this._id]={}),m.tweens[C]||(m.tweens[C]={});for(S in f)n[S]===void 0&&this._addAttr(S,f[S]);this.reset(),this.onFinish=f.onFinish,this.onReset=f.onReset,this.onUpdate=f.onUpdate}_addAttr(f,_){let v=this.node,C=v._id,u,g,b,S,x,M,k,T;if(b=m.tweens[C][f],b&&delete m.attrs[C][b][f],u=v.getAttr(f),t.Util._isArray(_))if(g=[],x=Math.max(_.length,u.length),f==="points"&&_.length!==u.length&&(_.length>u.length?(k=u,u=t.Util._prepareArrayForTween(u,_,v.closed())):(M=_,_=t.Util._prepareArrayForTween(_,u,v.closed()))),f.indexOf("fill")===0)for(S=0;S<x;S++)if(S%2===0)g.push(_[S]-u[S]);else{const A=t.Util.colorToRGBA(u[S]);T=t.Util.colorToRGBA(_[S]),u[S]=A,g.push({r:T.r-A.r,g:T.g-A.g,b:T.b-A.b,a:T.a-A.a})}else for(S=0;S<x;S++)g.push(_[S]-u[S]);else c.indexOf(f)!==-1?(u=t.Util.colorToRGBA(u),T=t.Util.colorToRGBA(_),g={r:T.r-u.r,g:T.g-u.g,b:T.b-u.b,a:T.a-u.a}):g=_-u;m.attrs[C][this._id][f]={start:u,diff:g,end:_,trueEnd:M,trueStart:k},m.tweens[C][f]=this._id}_tweenFunc(f){let _=this.node,v=m.attrs[_._id][this._id],C,u,g,b,S,x,M,k;for(C in v){if(u=v[C],g=u.start,b=u.diff,k=u.end,t.Util._isArray(g))if(S=[],M=Math.max(g.length,k.length),C.indexOf("fill")===0)for(x=0;x<M;x++)x%2===0?S.push((g[x]||0)+b[x]*f):S.push("rgba("+Math.round(g[x].r+b[x].r*f)+","+Math.round(g[x].g+b[x].g*f)+","+Math.round(g[x].b+b[x].b*f)+","+(g[x].a+b[x].a*f)+")");else for(x=0;x<M;x++)S.push((g[x]||0)+b[x]*f);else c.indexOf(C)!==-1?S="rgba("+Math.round(g.r+b.r*f)+","+Math.round(g.g+b.g*f)+","+Math.round(g.b+b.b*f)+","+(g.a+b.a*f)+")":S=g+b*f;_.setAttr(C,S)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const f=this.node,_=m.attrs[f._id][this._id];_.points&&_.points.trueEnd&&f.setAttr("points",_.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const f=this.node,_=m.attrs[f._id][this._id];_.points&&_.points.trueStart&&f.points(_.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(f){return this.tween.seek(f*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){let f=this.node._id,_=this._id,v=m.tweens[f],C;this.pause();for(C in v)delete m.tweens[f][C];delete m.attrs[f][_]}}o.Tween=m,m.attrs={},m.tweens={},i.Node.prototype.to=function(d){const f=d.onFinish;d.node=this,d.onFinish=function(){this.destroy(),f&&f()},new m(d).play()},o.Easings={BackEaseIn(d,f,_,v){return _*(d/=v)*d*((1.70158+1)*d-1.70158)+f},BackEaseOut(d,f,_,v){return _*((d=d/v-1)*d*((1.70158+1)*d+1.70158)+1)+f},BackEaseInOut(d,f,_,v){let C=1.70158;return(d/=v/2)<1?_/2*(d*d*(((C*=1.525)+1)*d-C))+f:_/2*((d-=2)*d*(((C*=1.525)+1)*d+C)+2)+f},ElasticEaseIn(d,f,_,v,C,u){let g=0;return d===0?f:(d/=v)===1?f+_:(u||(u=v*.3),!C||C<Math.abs(_)?(C=_,g=u/4):g=u/(2*Math.PI)*Math.asin(_/C),-(C*Math.pow(2,10*(d-=1))*Math.sin((d*v-g)*(2*Math.PI)/u))+f)},ElasticEaseOut(d,f,_,v,C,u){let g=0;return d===0?f:(d/=v)===1?f+_:(u||(u=v*.3),!C||C<Math.abs(_)?(C=_,g=u/4):g=u/(2*Math.PI)*Math.asin(_/C),C*Math.pow(2,-10*d)*Math.sin((d*v-g)*(2*Math.PI)/u)+_+f)},ElasticEaseInOut(d,f,_,v,C,u){let g=0;return d===0?f:(d/=v/2)===2?f+_:(u||(u=v*(.3*1.5)),!C||C<Math.abs(_)?(C=_,g=u/4):g=u/(2*Math.PI)*Math.asin(_/C),d<1?-.5*(C*Math.pow(2,10*(d-=1))*Math.sin((d*v-g)*(2*Math.PI)/u))+f:C*Math.pow(2,-10*(d-=1))*Math.sin((d*v-g)*(2*Math.PI)/u)*.5+_+f)},BounceEaseOut(d,f,_,v){return(d/=v)<1/2.75?_*(7.5625*d*d)+f:d<2/2.75?_*(7.5625*(d-=1.5/2.75)*d+.75)+f:d<2.5/2.75?_*(7.5625*(d-=2.25/2.75)*d+.9375)+f:_*(7.5625*(d-=2.625/2.75)*d+.984375)+f},BounceEaseIn(d,f,_,v){return _-o.Easings.BounceEaseOut(v-d,0,_,v)+f},BounceEaseInOut(d,f,_,v){return d<v/2?o.Easings.BounceEaseIn(d*2,0,_,v)*.5+f:o.Easings.BounceEaseOut(d*2-v,0,_,v)*.5+_*.5+f},EaseIn(d,f,_,v){return _*(d/=v)*d+f},EaseOut(d,f,_,v){return-_*(d/=v)*(d-2)+f},EaseInOut(d,f,_,v){return(d/=v/2)<1?_/2*d*d+f:-_/2*(--d*(d-2)-1)+f},StrongEaseIn(d,f,_,v){return _*(d/=v)*d*d*d*d+f},StrongEaseOut(d,f,_,v){return _*((d=d/v-1)*d*d*d*d+1)+f},StrongEaseInOut(d,f,_,v){return(d/=v/2)<1?_/2*d*d*d*d*d+f:_/2*((d-=2)*d*d*d*d+2)+f},Linear(d,f,_,v){return _*d/v+f}}}(_n)),_n}var ea;function ec(){return ea||(ea=1,function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.Konva=void 0;const t=ot(),e=Tt(),i=kt(),r=Yr(),n=Jl(),s=ah(),a=Zl(),h=as(),l=ss(),c=Dt(),p=os(),m=tc(),d=nh(),f=qr();o.Konva=e.Util._assign(t.Konva,{Util:e.Util,Transform:e.Transform,Node:i.Node,Container:r.Container,Stage:n.Stage,stages:n.stages,Layer:s.Layer,FastLayer:a.FastLayer,Group:h.Group,DD:l.DD,Shape:c.Shape,shapes:c.shapes,Animation:p.Animation,Tween:m.Tween,Easings:m.Easings,Context:d.Context,Canvas:f.Canvas}),o.default=o.Konva}(hn)),hn}var ki={},ia;function ic(){if(ia)return ki;ia=1,Object.defineProperty(ki,"__esModule",{value:!0}),ki.Arc=void 0;const o=ht(),t=Dt(),e=ot(),i=lt(),r=ot();let n=class extends t.Shape{_sceneFunc(a){const h=e.Konva.getAngle(this.angle()),l=this.clockwise();a.beginPath(),a.arc(0,0,this.outerRadius(),0,h,l),a.arc(0,0,this.innerRadius(),h,0,!l),a.closePath(),a.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(a){this.outerRadius(a/2)}setHeight(a){this.outerRadius(a/2)}getSelfRect(){const a=this.innerRadius(),h=this.outerRadius(),l=this.clockwise(),c=e.Konva.getAngle(l?360-this.angle():this.angle()),p=Math.cos(Math.min(c,Math.PI)),m=1,d=Math.sin(Math.min(Math.max(Math.PI,c),3*Math.PI/2)),f=Math.sin(Math.min(c,Math.PI/2)),_=p*(p>0?a:h),v=m*h,C=d*(d>0?a:h),u=f*(f>0?h:a);return{x:_,y:l?-1*u:C,width:v-_,height:u-C}}};return ki.Arc=n,n.prototype._centroid=!0,n.prototype.className="Arc",n.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,r._registerNode)(n),o.Factory.addGetterSetter(n,"innerRadius",0,(0,i.getNumberValidator)()),o.Factory.addGetterSetter(n,"outerRadius",0,(0,i.getNumberValidator)()),o.Factory.addGetterSetter(n,"angle",0,(0,i.getNumberValidator)()),o.Factory.addGetterSetter(n,"clockwise",!1,(0,i.getBooleanValidator)()),ki}var Ai={},Ei={},ra;function oh(){if(ra)return Ei;ra=1,Object.defineProperty(Ei,"__esModule",{value:!0}),Ei.Line=void 0;const o=ht(),t=ot(),e=Dt(),i=lt();function r(a,h,l,c,p,m,d){const f=Math.sqrt(Math.pow(l-a,2)+Math.pow(c-h,2)),_=Math.sqrt(Math.pow(p-l,2)+Math.pow(m-c,2)),v=d*f/(f+_),C=d*_/(f+_),u=l-v*(p-a),g=c-v*(m-h),b=l+C*(p-a),S=c+C*(m-h);return[u,g,b,S]}function n(a,h){const l=a.length,c=[];for(let p=2;p<l-2;p+=2){const m=r(a[p-2],a[p-1],a[p],a[p+1],a[p+2],a[p+3],h);isNaN(m[0])||(c.push(m[0]),c.push(m[1]),c.push(a[p]),c.push(a[p+1]),c.push(m[2]),c.push(m[3]))}return c}let s=class extends e.Shape{constructor(h){super(h),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(h){let l=this.points(),c=l.length,p=this.tension(),m=this.closed(),d=this.bezier(),f,_,v;if(c){if(h.beginPath(),h.moveTo(l[0],l[1]),p!==0&&c>4){for(f=this.getTensionPoints(),_=f.length,v=m?0:4,m||h.quadraticCurveTo(f[0],f[1],f[2],f[3]);v<_-2;)h.bezierCurveTo(f[v++],f[v++],f[v++],f[v++],f[v++],f[v++]);m||h.quadraticCurveTo(f[_-2],f[_-1],l[c-2],l[c-1])}else if(d)for(v=2;v<c;)h.bezierCurveTo(l[v++],l[v++],l[v++],l[v++],l[v++],l[v++]);else for(v=2;v<c;v+=2)h.lineTo(l[v],l[v+1]);m?(h.closePath(),h.fillStrokeShape(this)):h.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():n(this.points(),this.tension())}_getTensionPointsClosed(){const h=this.points(),l=h.length,c=this.tension(),p=r(h[l-2],h[l-1],h[0],h[1],h[2],h[3],c),m=r(h[l-4],h[l-3],h[l-2],h[l-1],h[0],h[1],c),d=n(h,c);return[p[2],p[3]].concat(d).concat([m[0],m[1],h[l-2],h[l-1],m[2],m[3],p[0],p[1],h[0],h[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let h=this.points();if(h.length<4)return{x:h[0]||0,y:h[1]||0,width:0,height:0};this.tension()!==0?h=[h[0],h[1],...this._getTensionPoints(),h[h.length-2],h[h.length-1]]:h=this.points();let l=h[0],c=h[0],p=h[1],m=h[1],d,f;for(let _=0;_<h.length/2;_++)d=h[_*2],f=h[_*2+1],l=Math.min(l,d),c=Math.max(c,d),p=Math.min(p,f),m=Math.max(m,f);return{x:l,y:p,width:c-l,height:m-p}}};return Ei.Line=s,s.prototype.className="Line",s.prototype._attrsAffectingSize=["points","bezier","tension"],(0,t._registerNode)(s),o.Factory.addGetterSetter(s,"closed",!1),o.Factory.addGetterSetter(s,"bezier",!1),o.Factory.addGetterSetter(s,"tension",0,(0,i.getNumberValidator)()),o.Factory.addGetterSetter(s,"points",[],(0,i.getNumberArrayValidator)()),Ei}var Ri={},pn={},na;function rc(){return na||(na=1,function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.t2length=o.getQuadraticArcLength=o.getCubicArcLength=o.binomialCoefficients=o.cValues=o.tValues=void 0,o.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],o.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],o.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];const t=(s,a,h)=>{let l,c;const m=h/2;l=0;for(let d=0;d<20;d++)c=m*o.tValues[20][d]+m,l+=o.cValues[20][d]*i(s,a,c);return m*l};o.getCubicArcLength=t;const e=(s,a,h)=>{h===void 0&&(h=1);const l=s[0]-2*s[1]+s[2],c=a[0]-2*a[1]+a[2],p=2*s[1]-2*s[0],m=2*a[1]-2*a[0],d=4*(l*l+c*c),f=4*(l*p+c*m),_=p*p+m*m;if(d===0)return h*Math.sqrt(Math.pow(s[2]-s[0],2)+Math.pow(a[2]-a[0],2));const v=f/(2*d),C=_/d,u=h+v,g=C-v*v,b=u*u+g>0?Math.sqrt(u*u+g):0,S=v*v+g>0?Math.sqrt(v*v+g):0,x=v+Math.sqrt(v*v+g)!==0?g*Math.log(Math.abs((u+b)/(v+S))):0;return Math.sqrt(d)/2*(u*b-v*S+x)};o.getQuadraticArcLength=e;function i(s,a,h){const l=r(1,h,s),c=r(1,h,a),p=l*l+c*c;return Math.sqrt(p)}const r=(s,a,h)=>{const l=h.length-1;let c,p;if(l===0)return 0;if(s===0){p=0;for(let m=0;m<=l;m++)p+=o.binomialCoefficients[l][m]*Math.pow(1-a,l-m)*Math.pow(a,m)*h[m];return p}else{c=new Array(l);for(let m=0;m<l;m++)c[m]=l*(h[m+1]-h[m]);return r(s-1,a,c)}},n=(s,a,h)=>{let l=1,c=s/a,p=(s-h(c))/a,m=0;for(;l>.001;){const d=h(c+p),f=Math.abs(s-d)/a;if(f<l)l=f,c+=p;else{const _=h(c-p),v=Math.abs(s-_)/a;v<l?(l=v,c-=p):p/=2}if(m++,m>500)break}return c};o.t2length=n}(pn)),pn}var sa;function hs(){if(sa)return Ri;sa=1,Object.defineProperty(Ri,"__esModule",{value:!0}),Ri.Path=void 0;const o=ht(),t=Dt(),e=ot(),i=rc();let r=class Yt extends t.Shape{constructor(s){super(s),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=Yt.parsePathData(this.data()),this.pathLength=Yt.getPathLength(this.dataArray)}_sceneFunc(s){const a=this.dataArray;s.beginPath();let h=!1;for(let b=0;b<a.length;b++){const S=a[b].command,x=a[b].points;switch(S){case"L":s.lineTo(x[0],x[1]);break;case"M":s.moveTo(x[0],x[1]);break;case"C":s.bezierCurveTo(x[0],x[1],x[2],x[3],x[4],x[5]);break;case"Q":s.quadraticCurveTo(x[0],x[1],x[2],x[3]);break;case"A":var l=x[0],c=x[1],p=x[2],m=x[3],d=x[4],f=x[5],_=x[6],v=x[7],C=p>m?p:m,u=p>m?1:p/m,g=p>m?m/p:1;s.translate(l,c),s.rotate(_),s.scale(u,g),s.arc(0,0,C,d,d+f,1-v),s.scale(1/u,1/g),s.rotate(-_),s.translate(-l,-c);break;case"z":h=!0,s.closePath();break}}!h&&!this.hasFill()?s.strokeShape(this):s.fillStrokeShape(this)}getSelfRect(){let s=[];this.dataArray.forEach(function(d){if(d.command==="A"){const f=d.points[4],_=d.points[5],v=d.points[4]+_;let C=Math.PI/180;if(Math.abs(f-v)<C&&(C=Math.abs(f-v)),_<0)for(let u=f-C;u>v;u-=C){const g=Yt.getPointOnEllipticalArc(d.points[0],d.points[1],d.points[2],d.points[3],u,0);s.push(g.x,g.y)}else for(let u=f+C;u<v;u+=C){const g=Yt.getPointOnEllipticalArc(d.points[0],d.points[1],d.points[2],d.points[3],u,0);s.push(g.x,g.y)}}else if(d.command==="C")for(let f=0;f<=1;f+=.01){const _=Yt.getPointOnCubicBezier(f,d.start.x,d.start.y,d.points[0],d.points[1],d.points[2],d.points[3],d.points[4],d.points[5]);s.push(_.x,_.y)}else s=s.concat(d.points)});let a=s[0],h=s[0],l=s[1],c=s[1],p,m;for(let d=0;d<s.length/2;d++)p=s[d*2],m=s[d*2+1],isNaN(p)||(a=Math.min(a,p),h=Math.max(h,p)),isNaN(m)||(l=Math.min(l,m),c=Math.max(c,m));return{x:a,y:l,width:h-a,height:c-l}}getLength(){return this.pathLength}getPointAtLength(s){return Yt.getPointAtLengthOfDataArray(s,this.dataArray)}static getLineLength(s,a,h,l){return Math.sqrt((h-s)*(h-s)+(l-a)*(l-a))}static getPathLength(s){let a=0;for(let h=0;h<s.length;++h)a+=s[h].pathLength;return a}static getPointAtLengthOfDataArray(s,a){let h,l=0,c=a.length;if(!c)return null;for(;l<c&&s>a[l].pathLength;)s-=a[l].pathLength,++l;if(l===c)return h=a[l-1].points.slice(-2),{x:h[0],y:h[1]};if(s<.01)return h=a[l].points.slice(0,2),{x:h[0],y:h[1]};const p=a[l],m=p.points;switch(p.command){case"L":return Yt.getPointOnLine(s,p.start.x,p.start.y,m[0],m[1]);case"C":return Yt.getPointOnCubicBezier((0,i.t2length)(s,Yt.getPathLength(a),b=>(0,i.getCubicArcLength)([p.start.x,m[0],m[2],m[4]],[p.start.y,m[1],m[3],m[5]],b)),p.start.x,p.start.y,m[0],m[1],m[2],m[3],m[4],m[5]);case"Q":return Yt.getPointOnQuadraticBezier((0,i.t2length)(s,Yt.getPathLength(a),b=>(0,i.getQuadraticArcLength)([p.start.x,m[0],m[2]],[p.start.y,m[1],m[3]],b)),p.start.x,p.start.y,m[0],m[1],m[2],m[3]);case"A":var d=m[0],f=m[1],_=m[2],v=m[3],C=m[4],u=m[5],g=m[6];return C+=u*s/p.pathLength,Yt.getPointOnEllipticalArc(d,f,_,v,C,g)}return null}static getPointOnLine(s,a,h,l,c,p,m){p=p??a,m=m??h;const d=this.getLineLength(a,h,l,c);if(d<1e-10)return{x:a,y:h};if(l===a)return{x:p,y:m+(c>h?s:-s)};const f=(c-h)/(l-a),_=Math.sqrt(s*s/(1+f*f))*(l<a?-1:1),v=f*_;if(Math.abs(m-h-f*(p-a))<1e-10)return{x:p+_,y:m+v};const C=((p-a)*(l-a)+(m-h)*(c-h))/(d*d),u=a+C*(l-a),g=h+C*(c-h),b=this.getLineLength(p,m,u,g),S=Math.sqrt(s*s-b*b),x=Math.sqrt(S*S/(1+f*f))*(l<a?-1:1),M=f*x;return{x:u+x,y:g+M}}static getPointOnCubicBezier(s,a,h,l,c,p,m,d,f){function _(S){return S*S*S}function v(S){return 3*S*S*(1-S)}function C(S){return 3*S*(1-S)*(1-S)}function u(S){return(1-S)*(1-S)*(1-S)}const g=d*_(s)+p*v(s)+l*C(s)+a*u(s),b=f*_(s)+m*v(s)+c*C(s)+h*u(s);return{x:g,y:b}}static getPointOnQuadraticBezier(s,a,h,l,c,p,m){function d(u){return u*u}function f(u){return 2*u*(1-u)}function _(u){return(1-u)*(1-u)}const v=p*d(s)+l*f(s)+a*_(s),C=m*d(s)+c*f(s)+h*_(s);return{x:v,y:C}}static getPointOnEllipticalArc(s,a,h,l,c,p){const m=Math.cos(p),d=Math.sin(p),f={x:h*Math.cos(c),y:l*Math.sin(c)};return{x:s+(f.x*m-f.y*d),y:a+(f.x*d+f.y*m)}}static parsePathData(s){if(!s)return[];let a=s;const h=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];a=a.replace(new RegExp(" ","g"),",");for(var l=0;l<h.length;l++)a=a.replace(new RegExp(h[l],"g"),"|"+h[l]);const c=a.split("|"),p=[],m=[];let d=0,f=0;const _=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let v;for(l=1;l<c.length;l++){let y=c[l],P=y.charAt(0);for(y=y.slice(1),m.length=0;v=_.exec(y);)m.push(v[0]);const w=[];for(let R=0,O=m.length;R<O;R++){if(m[R]==="00"){w.push(0,0);continue}const I=parseFloat(m[R]);isNaN(I)?w.push(0):w.push(I)}for(;w.length>0&&!isNaN(w[0]);){let R="",O=[];const I=d,V=f;var C,u,g,b,S,x,M,k,T,A;switch(P){case"l":d+=w.shift(),f+=w.shift(),R="L",O.push(d,f);break;case"L":d=w.shift(),f=w.shift(),O.push(d,f);break;case"m":var E=w.shift(),D=w.shift();if(d+=E,f+=D,R="M",p.length>2&&p[p.length-1].command==="z"){for(let B=p.length-2;B>=0;B--)if(p[B].command==="M"){d=p[B].points[0]+E,f=p[B].points[1]+D;break}}O.push(d,f),P="l";break;case"M":d=w.shift(),f=w.shift(),R="M",O.push(d,f),P="L";break;case"h":d+=w.shift(),R="L",O.push(d,f);break;case"H":d=w.shift(),R="L",O.push(d,f);break;case"v":f+=w.shift(),R="L",O.push(d,f);break;case"V":f=w.shift(),R="L",O.push(d,f);break;case"C":O.push(w.shift(),w.shift(),w.shift(),w.shift()),d=w.shift(),f=w.shift(),O.push(d,f);break;case"c":O.push(d+w.shift(),f+w.shift(),d+w.shift(),f+w.shift()),d+=w.shift(),f+=w.shift(),R="C",O.push(d,f);break;case"S":u=d,g=f,C=p[p.length-1],C.command==="C"&&(u=d+(d-C.points[2]),g=f+(f-C.points[3])),O.push(u,g,w.shift(),w.shift()),d=w.shift(),f=w.shift(),R="C",O.push(d,f);break;case"s":u=d,g=f,C=p[p.length-1],C.command==="C"&&(u=d+(d-C.points[2]),g=f+(f-C.points[3])),O.push(u,g,d+w.shift(),f+w.shift()),d+=w.shift(),f+=w.shift(),R="C",O.push(d,f);break;case"Q":O.push(w.shift(),w.shift()),d=w.shift(),f=w.shift(),O.push(d,f);break;case"q":O.push(d+w.shift(),f+w.shift()),d+=w.shift(),f+=w.shift(),R="Q",O.push(d,f);break;case"T":u=d,g=f,C=p[p.length-1],C.command==="Q"&&(u=d+(d-C.points[0]),g=f+(f-C.points[1])),d=w.shift(),f=w.shift(),R="Q",O.push(u,g,d,f);break;case"t":u=d,g=f,C=p[p.length-1],C.command==="Q"&&(u=d+(d-C.points[0]),g=f+(f-C.points[1])),d+=w.shift(),f+=w.shift(),R="Q",O.push(u,g,d,f);break;case"A":b=w.shift(),S=w.shift(),x=w.shift(),M=w.shift(),k=w.shift(),T=d,A=f,d=w.shift(),f=w.shift(),R="A",O=this.convertEndpointToCenterParameterization(T,A,d,f,M,k,b,S,x);break;case"a":b=w.shift(),S=w.shift(),x=w.shift(),M=w.shift(),k=w.shift(),T=d,A=f,d+=w.shift(),f+=w.shift(),R="A",O=this.convertEndpointToCenterParameterization(T,A,d,f,M,k,b,S,x);break}p.push({command:R||P,points:O,start:{x:I,y:V},pathLength:this.calcLength(I,V,R||P,O)})}(P==="z"||P==="Z")&&p.push({command:"z",points:[],start:void 0,pathLength:0})}return p}static calcLength(s,a,h,l){let c,p,m,d;const f=Yt;switch(h){case"L":return f.getLineLength(s,a,l[0],l[1]);case"C":return(0,i.getCubicArcLength)([s,l[0],l[2],l[4]],[a,l[1],l[3],l[5]],1);case"Q":return(0,i.getQuadraticArcLength)([s,l[0],l[2]],[a,l[1],l[3]],1);case"A":c=0;var _=l[4],v=l[5],C=l[4]+v,u=Math.PI/180;if(Math.abs(_-C)<u&&(u=Math.abs(_-C)),p=f.getPointOnEllipticalArc(l[0],l[1],l[2],l[3],_,0),v<0)for(d=_-u;d>C;d-=u)m=f.getPointOnEllipticalArc(l[0],l[1],l[2],l[3],d,0),c+=f.getLineLength(p.x,p.y,m.x,m.y),p=m;else for(d=_+u;d<C;d+=u)m=f.getPointOnEllipticalArc(l[0],l[1],l[2],l[3],d,0),c+=f.getLineLength(p.x,p.y,m.x,m.y),p=m;return m=f.getPointOnEllipticalArc(l[0],l[1],l[2],l[3],C,0),c+=f.getLineLength(p.x,p.y,m.x,m.y),c}return 0}static convertEndpointToCenterParameterization(s,a,h,l,c,p,m,d,f){const _=f*(Math.PI/180),v=Math.cos(_)*(s-h)/2+Math.sin(_)*(a-l)/2,C=-1*Math.sin(_)*(s-h)/2+Math.cos(_)*(a-l)/2,u=v*v/(m*m)+C*C/(d*d);u>1&&(m*=Math.sqrt(u),d*=Math.sqrt(u));let g=Math.sqrt((m*m*(d*d)-m*m*(C*C)-d*d*(v*v))/(m*m*(C*C)+d*d*(v*v)));c===p&&(g*=-1),isNaN(g)&&(g=0);const b=g*m*C/d,S=g*-d*v/m,x=(s+h)/2+Math.cos(_)*b-Math.sin(_)*S,M=(a+l)/2+Math.sin(_)*b+Math.cos(_)*S,k=function(w){return Math.sqrt(w[0]*w[0]+w[1]*w[1])},T=function(w,R){return(w[0]*R[0]+w[1]*R[1])/(k(w)*k(R))},A=function(w,R){return(w[0]*R[1]<w[1]*R[0]?-1:1)*Math.acos(T(w,R))},E=A([1,0],[(v-b)/m,(C-S)/d]),D=[(v-b)/m,(C-S)/d],y=[(-1*v-b)/m,(-1*C-S)/d];let P=A(D,y);return T(D,y)<=-1&&(P=Math.PI),T(D,y)>=1&&(P=0),p===0&&P>0&&(P=P-2*Math.PI),p===1&&P<0&&(P=P+2*Math.PI),[x,M,m,d,E,P,_,p]}};return Ri.Path=r,r.prototype.className="Path",r.prototype._attrsAffectingSize=["data"],(0,e._registerNode)(r),o.Factory.addGetterSetter(r,"data"),Ri}var aa;function nc(){if(aa)return Ai;aa=1,Object.defineProperty(Ai,"__esModule",{value:!0}),Ai.Arrow=void 0;const o=ht(),t=oh(),e=lt(),i=ot(),r=hs();let n=class extends t.Line{_sceneFunc(a){super._sceneFunc(a);const h=Math.PI*2,l=this.points();let c=l;const p=this.tension()!==0&&l.length>4;p&&(c=this.getTensionPoints());const m=this.pointerLength(),d=l.length;let f,_;if(p){const u=[c[c.length-4],c[c.length-3],c[c.length-2],c[c.length-1],l[d-2],l[d-1]],g=r.Path.calcLength(c[c.length-4],c[c.length-3],"C",u),b=r.Path.getPointOnQuadraticBezier(Math.min(1,1-m/g),u[0],u[1],u[2],u[3],u[4],u[5]);f=l[d-2]-b.x,_=l[d-1]-b.y}else f=l[d-2]-l[d-4],_=l[d-1]-l[d-3];const v=(Math.atan2(_,f)+h)%h,C=this.pointerWidth();this.pointerAtEnding()&&(a.save(),a.beginPath(),a.translate(l[d-2],l[d-1]),a.rotate(v),a.moveTo(0,0),a.lineTo(-m,C/2),a.lineTo(-m,-C/2),a.closePath(),a.restore(),this.__fillStroke(a)),this.pointerAtBeginning()&&(a.save(),a.beginPath(),a.translate(l[0],l[1]),p?(f=(c[0]+c[2])/2-l[0],_=(c[1]+c[3])/2-l[1]):(f=l[2]-l[0],_=l[3]-l[1]),a.rotate((Math.atan2(-_,-f)+h)%h),a.moveTo(0,0),a.lineTo(-m,C/2),a.lineTo(-m,-C/2),a.closePath(),a.restore(),this.__fillStroke(a))}__fillStroke(a){const h=this.dashEnabled();h&&(this.attrs.dashEnabled=!1,a.setLineDash([])),a.fillStrokeShape(this),h&&(this.attrs.dashEnabled=!0)}getSelfRect(){const a=super.getSelfRect(),h=this.pointerWidth()/2;return{x:a.x-h,y:a.y-h,width:a.width+h*2,height:a.height+h*2}}};return Ai.Arrow=n,n.prototype.className="Arrow",(0,i._registerNode)(n),o.Factory.addGetterSetter(n,"pointerLength",10,(0,e.getNumberValidator)()),o.Factory.addGetterSetter(n,"pointerWidth",10,(0,e.getNumberValidator)()),o.Factory.addGetterSetter(n,"pointerAtBeginning",!1),o.Factory.addGetterSetter(n,"pointerAtEnding",!0),Ai}var Mi={},oa;function sc(){if(oa)return Mi;oa=1,Object.defineProperty(Mi,"__esModule",{value:!0}),Mi.Circle=void 0;const o=ht(),t=Dt(),e=lt(),i=ot();let r=class extends t.Shape{_sceneFunc(s){s.beginPath(),s.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),s.closePath(),s.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(s){this.radius()!==s/2&&this.radius(s/2)}setHeight(s){this.radius()!==s/2&&this.radius(s/2)}};return Mi.Circle=r,r.prototype._centroid=!0,r.prototype.className="Circle",r.prototype._attrsAffectingSize=["radius"],(0,i._registerNode)(r),o.Factory.addGetterSetter(r,"radius",0,(0,e.getNumberValidator)()),Mi}var Oi={},ha;function ac(){if(ha)return Oi;ha=1,Object.defineProperty(Oi,"__esModule",{value:!0}),Oi.Ellipse=void 0;const o=ht(),t=Dt(),e=lt(),i=ot();let r=class extends t.Shape{_sceneFunc(s){const a=this.radiusX(),h=this.radiusY();s.beginPath(),s.save(),a!==h&&s.scale(1,h/a),s.arc(0,0,a,0,Math.PI*2,!1),s.restore(),s.closePath(),s.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(s){this.radiusX(s/2)}setHeight(s){this.radiusY(s/2)}};return Oi.Ellipse=r,r.prototype.className="Ellipse",r.prototype._centroid=!0,r.prototype._attrsAffectingSize=["radiusX","radiusY"],(0,i._registerNode)(r),o.Factory.addComponentsGetterSetter(r,"radius",["x","y"]),o.Factory.addGetterSetter(r,"radiusX",0,(0,e.getNumberValidator)()),o.Factory.addGetterSetter(r,"radiusY",0,(0,e.getNumberValidator)()),Oi}var Fi={},la;function oc(){if(la)return Fi;la=1,Object.defineProperty(Fi,"__esModule",{value:!0}),Fi.Image=void 0;const o=Tt(),t=ht(),e=Dt(),i=ot(),r=lt();class n extends e.Shape{constructor(a){super(a),this.on("imageChange.konva",()=>{this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const a=this.image();a&&a.complete||a&&a.readyState===4||a&&a.addEventListener&&a.addEventListener("load",()=>{this._requestDraw()})}_useBufferCanvas(){const a=!!this.cornerRadius(),h=this.hasShadow();return a&&h?!0:super._useBufferCanvas(!0)}_sceneFunc(a){const h=this.getWidth(),l=this.getHeight(),c=this.cornerRadius(),p=this.attrs.image;let m;if(p){const d=this.attrs.cropWidth,f=this.attrs.cropHeight;d&&f?m=[p,this.cropX(),this.cropY(),d,f,0,0,h,l]:m=[p,0,0,h,l]}(this.hasFill()||this.hasStroke()||c)&&(a.beginPath(),c?o.Util.drawRoundedRectPath(a,h,l,c):a.rect(0,0,h,l),a.closePath(),a.fillStrokeShape(this)),p&&(c&&a.clip(),a.drawImage.apply(a,m))}_hitFunc(a){const h=this.width(),l=this.height(),c=this.cornerRadius();a.beginPath(),c?o.Util.drawRoundedRectPath(a,h,l,c):a.rect(0,0,h,l),a.closePath(),a.fillStrokeShape(this)}getWidth(){var a,h;return(a=this.attrs.width)!==null&&a!==void 0?a:(h=this.image())===null||h===void 0?void 0:h.width}getHeight(){var a,h;return(a=this.attrs.height)!==null&&a!==void 0?a:(h=this.image())===null||h===void 0?void 0:h.height}static fromURL(a,h,l=null){const c=o.Util.createImageElement();c.onload=function(){const p=new n({image:c});h(p)},c.onerror=l,c.crossOrigin="Anonymous",c.src=a}}return Fi.Image=n,n.prototype.className="Image",(0,i._registerNode)(n),t.Factory.addGetterSetter(n,"cornerRadius",0,(0,r.getNumberOrArrayOfNumbersValidator)(4)),t.Factory.addGetterSetter(n,"image"),t.Factory.addComponentsGetterSetter(n,"crop",["x","y","width","height"]),t.Factory.addGetterSetter(n,"cropX",0,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(n,"cropY",0,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(n,"cropWidth",0,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(n,"cropHeight",0,(0,r.getNumberValidator)()),Fi}var ze={},ca;function hc(){if(ca)return ze;ca=1,Object.defineProperty(ze,"__esModule",{value:!0}),ze.Tag=ze.Label=void 0;const o=ht(),t=Dt(),e=as(),i=lt(),r=ot(),n=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],s="Change.konva",a="none",h="up",l="right",c="down",p="left",m=n.length;let d=class extends e.Group{constructor(v){super(v),this.on("add.konva",function(C){this._addListeners(C.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(v){let C=this,u;const g=function(){C._sync()};for(u=0;u<m;u++)v.on(n[u]+s,g)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let v=this.getText(),C=this.getTag(),u,g,b,S,x,M,k;if(v&&C){switch(u=v.width(),g=v.height(),b=C.pointerDirection(),S=C.pointerWidth(),k=C.pointerHeight(),x=0,M=0,b){case h:x=u/2,M=-1*k;break;case l:x=u+S,M=g/2;break;case c:x=u/2,M=g+k;break;case p:x=-1*S,M=g/2;break}C.setAttrs({x:-1*x,y:-1*M,width:u,height:g}),v.setAttrs({x:-1*x,y:-1*M})}}};ze.Label=d,d.prototype.className="Label",(0,r._registerNode)(d);class f extends t.Shape{_sceneFunc(v){const C=this.width(),u=this.height(),g=this.pointerDirection(),b=this.pointerWidth(),S=this.pointerHeight(),x=this.cornerRadius();let M=0,k=0,T=0,A=0;typeof x=="number"?M=k=T=A=Math.min(x,C/2,u/2):(M=Math.min(x[0]||0,C/2,u/2),k=Math.min(x[1]||0,C/2,u/2),A=Math.min(x[2]||0,C/2,u/2),T=Math.min(x[3]||0,C/2,u/2)),v.beginPath(),v.moveTo(M,0),g===h&&(v.lineTo((C-b)/2,0),v.lineTo(C/2,-1*S),v.lineTo((C+b)/2,0)),v.lineTo(C-k,0),v.arc(C-k,k,k,Math.PI*3/2,0,!1),g===l&&(v.lineTo(C,(u-S)/2),v.lineTo(C+b,u/2),v.lineTo(C,(u+S)/2)),v.lineTo(C,u-A),v.arc(C-A,u-A,A,0,Math.PI/2,!1),g===c&&(v.lineTo((C+b)/2,u),v.lineTo(C/2,u+S),v.lineTo((C-b)/2,u)),v.lineTo(T,u),v.arc(T,u-T,T,Math.PI/2,Math.PI,!1),g===p&&(v.lineTo(0,(u+S)/2),v.lineTo(-1*b,u/2),v.lineTo(0,(u-S)/2)),v.lineTo(0,M),v.arc(M,M,M,Math.PI,Math.PI*3/2,!1),v.closePath(),v.fillStrokeShape(this)}getSelfRect(){let v=0,C=0,u=this.pointerWidth(),g=this.pointerHeight(),b=this.pointerDirection(),S=this.width(),x=this.height();return b===h?(C-=g,x+=g):b===c?x+=g:b===p?(v-=u*1.5,S+=u):b===l&&(S+=u*1.5),{x:v,y:C,width:S,height:x}}}return ze.Tag=f,f.prototype.className="Tag",(0,r._registerNode)(f),o.Factory.addGetterSetter(f,"pointerDirection",a),o.Factory.addGetterSetter(f,"pointerWidth",0,(0,i.getNumberValidator)()),o.Factory.addGetterSetter(f,"pointerHeight",0,(0,i.getNumberValidator)()),o.Factory.addGetterSetter(f,"cornerRadius",0,(0,i.getNumberOrArrayOfNumbersValidator)(4)),ze}var Di={},da;function hh(){if(da)return Di;da=1,Object.defineProperty(Di,"__esModule",{value:!0}),Di.Rect=void 0;const o=ht(),t=Dt(),e=ot(),i=Tt(),r=lt();let n=class extends t.Shape{_sceneFunc(a){const h=this.cornerRadius(),l=this.width(),c=this.height();a.beginPath(),h?i.Util.drawRoundedRectPath(a,l,c,h):a.rect(0,0,l,c),a.closePath(),a.fillStrokeShape(this)}};return Di.Rect=n,n.prototype.className="Rect",(0,e._registerNode)(n),o.Factory.addGetterSetter(n,"cornerRadius",0,(0,r.getNumberOrArrayOfNumbersValidator)(4)),Di}var Ni={},ua;function lc(){if(ua)return Ni;ua=1,Object.defineProperty(Ni,"__esModule",{value:!0}),Ni.RegularPolygon=void 0;const o=ht(),t=Dt(),e=lt(),i=ot();let r=class extends t.Shape{_sceneFunc(s){const a=this._getPoints();s.beginPath(),s.moveTo(a[0].x,a[0].y);for(let h=1;h<a.length;h++)s.lineTo(a[h].x,a[h].y);s.closePath(),s.fillStrokeShape(this)}_getPoints(){const s=this.attrs.sides,a=this.attrs.radius||0,h=[];for(let l=0;l<s;l++)h.push({x:a*Math.sin(l*2*Math.PI/s),y:-1*a*Math.cos(l*2*Math.PI/s)});return h}getSelfRect(){const s=this._getPoints();let a=s[0].x,h=s[0].y,l=s[0].x,c=s[0].y;return s.forEach(p=>{a=Math.min(a,p.x),h=Math.max(h,p.x),l=Math.min(l,p.y),c=Math.max(c,p.y)}),{x:a,y:l,width:h-a,height:c-l}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(s){this.radius(s/2)}setHeight(s){this.radius(s/2)}};return Ni.RegularPolygon=r,r.prototype.className="RegularPolygon",r.prototype._centroid=!0,r.prototype._attrsAffectingSize=["radius"],(0,i._registerNode)(r),o.Factory.addGetterSetter(r,"radius",0,(0,e.getNumberValidator)()),o.Factory.addGetterSetter(r,"sides",0,(0,e.getNumberValidator)()),Ni}var Ii={},fa;function cc(){if(fa)return Ii;fa=1,Object.defineProperty(Ii,"__esModule",{value:!0}),Ii.Ring=void 0;const o=ht(),t=Dt(),e=lt(),i=ot(),r=Math.PI*2;let n=class extends t.Shape{_sceneFunc(a){a.beginPath(),a.arc(0,0,this.innerRadius(),0,r,!1),a.moveTo(this.outerRadius(),0),a.arc(0,0,this.outerRadius(),r,0,!0),a.closePath(),a.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(a){this.outerRadius(a/2)}setHeight(a){this.outerRadius(a/2)}};return Ii.Ring=n,n.prototype.className="Ring",n.prototype._centroid=!0,n.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,i._registerNode)(n),o.Factory.addGetterSetter(n,"innerRadius",0,(0,e.getNumberValidator)()),o.Factory.addGetterSetter(n,"outerRadius",0,(0,e.getNumberValidator)()),Ii}var Li={},ga;function dc(){if(ga)return Li;ga=1,Object.defineProperty(Li,"__esModule",{value:!0}),Li.Sprite=void 0;const o=ht(),t=Dt(),e=os(),i=lt(),r=ot();let n=class extends t.Shape{constructor(a){super(a),this._updated=!0,this.anim=new e.Animation(()=>{const h=this._updated;return this._updated=!1,h}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(a){const h=this.animation(),l=this.frameIndex(),c=l*4,p=this.animations()[h],m=this.frameOffsets(),d=p[c+0],f=p[c+1],_=p[c+2],v=p[c+3],C=this.image();if((this.hasFill()||this.hasStroke())&&(a.beginPath(),a.rect(0,0,_,v),a.closePath(),a.fillStrokeShape(this)),C)if(m){const u=m[h],g=l*2;a.drawImage(C,d,f,_,v,u[g+0],u[g+1],_,v)}else a.drawImage(C,d,f,_,v,0,0,_,v)}_hitFunc(a){const h=this.animation(),l=this.frameIndex(),c=l*4,p=this.animations()[h],m=this.frameOffsets(),d=p[c+2],f=p[c+3];if(a.beginPath(),m){const _=m[h],v=l*2;a.rect(_[v+0],_[v+1],d,f)}else a.rect(0,0,d,f);a.closePath(),a.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const a=this;this.interval=setInterval(function(){a._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const a=this.getLayer();this.anim.setLayers(a),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const a=this.frameIndex(),h=this.animation(),l=this.animations(),c=l[h],p=c.length/4;a<p-1?this.frameIndex(a+1):this.frameIndex(0)}};return Li.Sprite=n,n.prototype.className="Sprite",(0,r._registerNode)(n),o.Factory.addGetterSetter(n,"animation"),o.Factory.addGetterSetter(n,"animations"),o.Factory.addGetterSetter(n,"frameOffsets"),o.Factory.addGetterSetter(n,"image"),o.Factory.addGetterSetter(n,"frameIndex",0,(0,i.getNumberValidator)()),o.Factory.addGetterSetter(n,"frameRate",17,(0,i.getNumberValidator)()),o.Factory.backCompat(n,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"}),Li}var Gi={},_a;function uc(){if(_a)return Gi;_a=1,Object.defineProperty(Gi,"__esModule",{value:!0}),Gi.Star=void 0;const o=ht(),t=Dt(),e=lt(),i=ot();let r=class extends t.Shape{_sceneFunc(s){const a=this.innerRadius(),h=this.outerRadius(),l=this.numPoints();s.beginPath(),s.moveTo(0,0-h);for(let c=1;c<l*2;c++){const p=c%2===0?h:a,m=p*Math.sin(c*Math.PI/l),d=-1*p*Math.cos(c*Math.PI/l);s.lineTo(m,d)}s.closePath(),s.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(s){this.outerRadius(s/2)}setHeight(s){this.outerRadius(s/2)}};return Gi.Star=r,r.prototype.className="Star",r.prototype._centroid=!0,r.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,i._registerNode)(r),o.Factory.addGetterSetter(r,"numPoints",5,(0,e.getNumberValidator)()),o.Factory.addGetterSetter(r,"innerRadius",0,(0,e.getNumberValidator)()),o.Factory.addGetterSetter(r,"outerRadius",0,(0,e.getNumberValidator)()),Gi}var ii={},pa;function lh(){if(pa)return ii;pa=1,Object.defineProperty(ii,"__esModule",{value:!0}),ii.Text=void 0,ii.stringToArray=s;const o=Tt(),t=ht(),e=Dt(),i=ot(),r=lt(),n=ot();function s(K){return[...K].reduce((z,Y,L,G)=>(new RegExp("\\p{Emoji_Modifier_Base}\\p{Emoji_Modifier}?(?:\\u200D\\p{Emoji_Presentation})+","u").test(Y)?z.push(Y):new RegExp("\\p{Regional_Indicator}{2}","u").test(Y+(G[L+1]||""))?z.push(Y+G[L+1]):L>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(Y)?z[z.length-1]+=Y:z.push(Y),z),[])}const a="auto",h="center",l="inherit",c="justify",p="Change.konva",m="2d",d="-",f="left",_="text",v="Text",C="top",u="bottom",g="middle",b="normal",S="px ",x=" ",M="right",k="rtl",T="word",A="char",E="none",D="…",y=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],P=y.length;function w(K){return K.split(",").map(z=>{z=z.trim();const Y=z.indexOf(" ")>=0,L=z.indexOf('"')>=0||z.indexOf("'")>=0;return Y&&!L&&(z=`"${z}"`),z}).join(", ")}let R;function O(){return R||(R=o.Util.createCanvasElement().getContext(m),R)}function I(K){K.fillText(this._partialText,this._partialTextX,this._partialTextY)}function V(K){K.setAttr("miterLimit",2),K.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function B(K){return K=K||{},!K.fillLinearGradientColorStops&&!K.fillRadialGradientColorStops&&!K.fillPatternImage&&(K.fill=K.fill||"black"),K}let q=class extends e.Shape{constructor(z){super(B(z)),this._partialTextX=0,this._partialTextY=0;for(let Y=0;Y<P;Y++)this.on(y[Y]+p,this._setTextData);this._setTextData()}_sceneFunc(z){const Y=this.textArr,L=Y.length;if(!this.text())return;let G=this.padding(),F=this.fontSize(),N=this.lineHeight()*F,U=this.verticalAlign(),X=this.direction(),j=0,$=this.align(),st=this.getWidth(),tt=this.letterSpacing(),it=this.fill(),ft=this.textDecoration(),ut=ft.indexOf("underline")!==-1,wt=ft.indexOf("line-through")!==-1,H;X=X===l?z.direction:X;let W=N/2,J=g;if(i.Konva._fixTextRendering){const dt=this.measureSize("M");J="alphabetic",W=(dt.fontBoundingBoxAscent-dt.fontBoundingBoxDescent)/2+N/2}var Q=0,Z=0;for(X===k&&z.setAttr("direction",X),z.setAttr("font",this._getContextFont()),z.setAttr("textBaseline",J),z.setAttr("textAlign",f),U===g?j=(this.getHeight()-L*N-G*2)/2:U===u&&(j=this.getHeight()-L*N-G*2),z.translate(G,j+G),H=0;H<L;H++){var Q=0,Z=0,nt=Y[H],rt=nt.text,at=nt.width,et=nt.lastInParagraph,_t,pt,yt;if(z.save(),$===M?Q+=st-at-G*2:$===h&&(Q+=(st-at-G*2)/2),ut){z.save(),z.beginPath();const Et=i.Konva._fixTextRendering?Math.round(F/4):Math.round(F/2),It=Q,he=W+Z+Et;z.moveTo(It,he),_t=rt.split(" ").length-1,pt=_t===0,yt=$===c&&!et?st-G*2:at,z.lineTo(It+Math.round(yt),he),z.lineWidth=F/15;const Ue=this._getLinearGradient();z.strokeStyle=Ue||it,z.stroke(),z.restore()}if(wt){z.save(),z.beginPath();const Et=i.Konva._fixTextRendering?-Math.round(F/4):0;z.moveTo(Q,W+Z+Et),_t=rt.split(" ").length-1,pt=_t===0,yt=$===c&&et&&!pt?st-G*2:at,z.lineTo(Q+Math.round(yt),W+Z+Et),z.lineWidth=F/15;const It=this._getLinearGradient();z.strokeStyle=It||it,z.stroke(),z.restore()}if(X!==k&&(tt!==0||$===c)){_t=rt.split(" ").length-1;const Et=s(rt);for(let It=0;It<Et.length;It++){const he=Et[It];he===" "&&!et&&$===c&&(Q+=(st-G*2-at)/_t),this._partialTextX=Q,this._partialTextY=W+Z,this._partialText=he,z.fillStrokeShape(this),Q+=this.measureSize(he).width+tt}}else tt!==0&&z.setAttr("letterSpacing",`${tt}px`),this._partialTextX=Q,this._partialTextY=W+Z,this._partialText=rt,z.fillStrokeShape(this);z.restore(),L>1&&(W+=N)}}_hitFunc(z){const Y=this.getWidth(),L=this.getHeight();z.beginPath(),z.rect(0,0,Y,L),z.closePath(),z.fillStrokeShape(this)}setText(z){const Y=o.Util._isString(z)?z:z==null?"":z+"";return this._setAttr(_,Y),this}getWidth(){return this.attrs.width===a||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===a||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return o.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(z){var Y,L,G,F,N,U,X,j,$,st,tt;let it=O(),ft=this.fontSize(),ut;it.save(),it.font=this._getContextFont(),ut=it.measureText(z),it.restore();const wt=ft/100;return{actualBoundingBoxAscent:(Y=ut.actualBoundingBoxAscent)!==null&&Y!==void 0?Y:71.58203125*wt,actualBoundingBoxDescent:(L=ut.actualBoundingBoxDescent)!==null&&L!==void 0?L:0,actualBoundingBoxLeft:(G=ut.actualBoundingBoxLeft)!==null&&G!==void 0?G:-7.421875*wt,actualBoundingBoxRight:(F=ut.actualBoundingBoxRight)!==null&&F!==void 0?F:75.732421875*wt,alphabeticBaseline:(N=ut.alphabeticBaseline)!==null&&N!==void 0?N:0,emHeightAscent:(U=ut.emHeightAscent)!==null&&U!==void 0?U:100*wt,emHeightDescent:(X=ut.emHeightDescent)!==null&&X!==void 0?X:-20*wt,fontBoundingBoxAscent:(j=ut.fontBoundingBoxAscent)!==null&&j!==void 0?j:91*wt,fontBoundingBoxDescent:($=ut.fontBoundingBoxDescent)!==null&&$!==void 0?$:21*wt,hangingBaseline:(st=ut.hangingBaseline)!==null&&st!==void 0?st:72.80000305175781*wt,ideographicBaseline:(tt=ut.ideographicBaseline)!==null&&tt!==void 0?tt:-21*wt,width:ut.width,height:ft}}_getContextFont(){return this.fontStyle()+x+this.fontVariant()+x+(this.fontSize()+S)+w(this.fontFamily())}_addTextLine(z){this.align()===c&&(z=z.trim());const L=this._getTextWidth(z);return this.textArr.push({text:z,width:L,lastInParagraph:!1})}_getTextWidth(z){const Y=this.letterSpacing(),L=z.length;return O().measureText(z).width+(L?Y*(L-1):0)}_setTextData(){let z=this.text().split(`
`),Y=+this.fontSize(),L=0,G=this.lineHeight()*Y,F=this.attrs.width,N=this.attrs.height,U=F!==a&&F!==void 0,X=N!==a&&N!==void 0,j=this.padding(),$=F-j*2,st=N-j*2,tt=0,it=this.wrap(),ft=it!==E,ut=it!==A&&ft,wt=this.ellipsis();this.textArr=[],O().font=this._getContextFont();const H=wt?this._getTextWidth(D):0;for(let J=0,Q=z.length;J<Q;++J){let Z=z[J],nt=this._getTextWidth(Z);if(U&&nt>$)for(;Z.length>0;){let rt=0,at=Z.length,et="",_t=0;for(;rt<at;){const pt=rt+at>>>1,yt=Z.slice(0,pt+1),dt=this._getTextWidth(yt)+H;dt<=$?(rt=pt+1,et=yt,_t=dt):at=pt}if(et){if(ut){var W;const yt=Z[et.length];(yt===x||yt===d)&&_t<=$?W=et.length:W=Math.max(et.lastIndexOf(x),et.lastIndexOf(d))+1,W>0&&(rt=W,et=et.slice(0,rt),_t=this._getTextWidth(et))}if(et=et.trimRight(),this._addTextLine(et),L=Math.max(L,_t),tt+=G,this._shouldHandleEllipsis(tt)){this._tryToAddEllipsisToLastLine();break}if(Z=Z.slice(rt),Z=Z.trimLeft(),Z.length>0&&(nt=this._getTextWidth(Z),nt<=$)){this._addTextLine(Z),tt+=G,L=Math.max(L,nt);break}}else break}else this._addTextLine(Z),tt+=G,L=Math.max(L,nt),this._shouldHandleEllipsis(tt)&&J<Q-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),X&&tt+G>st)break}this.textHeight=Y,this.textWidth=L}_shouldHandleEllipsis(z){const Y=+this.fontSize(),L=this.lineHeight()*Y,G=this.attrs.height,F=G!==a&&G!==void 0,N=this.padding(),U=G-N*2;return!(this.wrap()!==E)||F&&z+L>U}_tryToAddEllipsisToLastLine(){const z=this.attrs.width,Y=z!==a&&z!==void 0,L=this.padding(),G=z-L*2,F=this.ellipsis(),N=this.textArr[this.textArr.length-1];!N||!F||(Y&&(this._getTextWidth(N.text+D)<G||(N.text=N.text.slice(0,N.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(N.text+D))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const z=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,Y=this.hasShadow();return z&&Y?!0:super._useBufferCanvas()}};return ii.Text=q,q.prototype._fillFunc=I,q.prototype._strokeFunc=V,q.prototype.className=v,q.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],(0,n._registerNode)(q),t.Factory.overWriteSetter(q,"width",(0,r.getNumberOrAutoValidator)()),t.Factory.overWriteSetter(q,"height",(0,r.getNumberOrAutoValidator)()),t.Factory.addGetterSetter(q,"direction",l),t.Factory.addGetterSetter(q,"fontFamily","Arial"),t.Factory.addGetterSetter(q,"fontSize",12,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(q,"fontStyle",b),t.Factory.addGetterSetter(q,"fontVariant",b),t.Factory.addGetterSetter(q,"padding",0,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(q,"align",f),t.Factory.addGetterSetter(q,"verticalAlign",C),t.Factory.addGetterSetter(q,"lineHeight",1,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(q,"wrap",T),t.Factory.addGetterSetter(q,"ellipsis",!1,(0,r.getBooleanValidator)()),t.Factory.addGetterSetter(q,"letterSpacing",0,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(q,"text","",(0,r.getStringValidator)()),t.Factory.addGetterSetter(q,"textDecoration",""),ii}var Ui={},ma;function fc(){if(ma)return Ui;ma=1,Object.defineProperty(Ui,"__esModule",{value:!0}),Ui.TextPath=void 0;const o=Tt(),t=ht(),e=Dt(),i=hs(),r=lh(),n=lt(),s=ot(),a="",h="normal";function l(m){m.fillText(this.partialText,0,0)}function c(m){m.strokeText(this.partialText,0,0)}let p=class extends e.Shape{constructor(d){super(d),this.dummyCanvas=o.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return i.Path.getPathLength(this.dataArray)}_getPointAtLength(d){if(!this.attrs.data)return null;const f=this.pathLength;return d-1>f?null:i.Path.getPointAtLengthOfDataArray(d,this.dataArray)}_readDataAttribute(){this.dataArray=i.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(d){d.setAttr("font",this._getContextFont()),d.setAttr("textBaseline",this.textBaseline()),d.setAttr("textAlign","left"),d.save();const f=this.textDecoration(),_=this.fill(),v=this.fontSize(),C=this.glyphInfo;f==="underline"&&d.beginPath();for(let u=0;u<C.length;u++){d.save();const g=C[u].p0;d.translate(g.x,g.y),d.rotate(C[u].rotation),this.partialText=C[u].text,d.fillStrokeShape(this),f==="underline"&&(u===0&&d.moveTo(0,v/2+1),d.lineTo(v,v/2+1)),d.restore()}f==="underline"&&(d.strokeStyle=_,d.lineWidth=v/20,d.stroke()),d.restore()}_hitFunc(d){d.beginPath();const f=this.glyphInfo;if(f.length>=1){const _=f[0].p0;d.moveTo(_.x,_.y)}for(let _=0;_<f.length;_++){const v=f[_].p1;d.lineTo(v.x,v.y)}d.setAttr("lineWidth",this.fontSize()),d.setAttr("strokeStyle",this.colorKey),d.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return o.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(d){return r.Text.prototype.setText.call(this,d)}_getContextFont(){return r.Text.prototype._getContextFont.call(this)}_getTextSize(d){const _=this.dummyCanvas.getContext("2d");_.save(),_.font=this._getContextFont();const v=_.measureText(d);return _.restore(),{width:v.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:d,height:f}=this._getTextSize(this.attrs.text);if(this.textWidth=d,this.textHeight=f,this.glyphInfo=[],!this.attrs.data)return null;const _=this.letterSpacing(),v=this.align(),C=this.kerningFunc(),u=Math.max(this.textWidth+((this.attrs.text||"").length-1)*_,0);let g=0;v==="center"&&(g=Math.max(0,this.pathLength/2-u/2)),v==="right"&&(g=Math.max(0,this.pathLength-u));const b=(0,r.stringToArray)(this.text());let S=g;for(let x=0;x<b.length;x++){const M=this._getPointAtLength(S);if(!M)return;let k=this._getTextSize(b[x]).width+_;if(b[x]===" "&&v==="justify"){const P=this.text().split(" ").length-1;k+=(this.pathLength-u)/P}const T=this._getPointAtLength(S+k);if(!T)return;const A=i.Path.getLineLength(M.x,M.y,T.x,T.y);let E=0;if(C)try{E=C(b[x-1],b[x])*this.fontSize()}catch{E=0}M.x+=E,T.x+=E,this.textWidth+=E;const D=i.Path.getPointOnLine(E+A/2,M.x,M.y,T.x,T.y),y=Math.atan2(T.y-M.y,T.x-M.x);this.glyphInfo.push({transposeX:D.x,transposeY:D.y,text:b[x],rotation:y,p0:M,p1:T}),S+=k}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const d=[];this.glyphInfo.forEach(function(S){d.push(S.p0.x),d.push(S.p0.y),d.push(S.p1.x),d.push(S.p1.y)});let f=d[0]||0,_=d[0]||0,v=d[1]||0,C=d[1]||0,u,g;for(let S=0;S<d.length/2;S++)u=d[S*2],g=d[S*2+1],f=Math.min(f,u),_=Math.max(_,u),v=Math.min(v,g),C=Math.max(C,g);const b=this.fontSize();return{x:f-b/2,y:v-b/2,width:_-f+b,height:C-v+b}}destroy(){return o.Util.releaseCanvas(this.dummyCanvas),super.destroy()}};return Ui.TextPath=p,p.prototype._fillFunc=l,p.prototype._strokeFunc=c,p.prototype._fillFuncHit=l,p.prototype._strokeFuncHit=c,p.prototype.className="TextPath",p.prototype._attrsAffectingSize=["text","fontSize","data"],(0,s._registerNode)(p),t.Factory.addGetterSetter(p,"data"),t.Factory.addGetterSetter(p,"fontFamily","Arial"),t.Factory.addGetterSetter(p,"fontSize",12,(0,n.getNumberValidator)()),t.Factory.addGetterSetter(p,"fontStyle",h),t.Factory.addGetterSetter(p,"align","left"),t.Factory.addGetterSetter(p,"letterSpacing",0,(0,n.getNumberValidator)()),t.Factory.addGetterSetter(p,"textBaseline","middle"),t.Factory.addGetterSetter(p,"fontVariant",h),t.Factory.addGetterSetter(p,"text",a),t.Factory.addGetterSetter(p,"textDecoration",null),t.Factory.addGetterSetter(p,"kerningFunc",null),Ui}var Bi={},ya;function gc(){if(ya)return Bi;ya=1,Object.defineProperty(Bi,"__esModule",{value:!0}),Bi.Transformer=void 0;const o=Tt(),t=ht(),e=kt(),i=Dt(),r=hh(),n=as(),s=ot(),a=lt(),h=ot(),l="tr-konva",c=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(k=>k+`.${l}`).join(" "),p="nodesRect",m=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],d={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},f="ontouchstart"in s.Konva._global;function _(k,T,A){if(k==="rotater")return A;T+=o.Util.degToRad(d[k]||0);const E=(o.Util.radToDeg(T)%360+360)%360;return o.Util._inRange(E,315+22.5,360)||o.Util._inRange(E,0,22.5)?"ns-resize":o.Util._inRange(E,45-22.5,45+22.5)?"nesw-resize":o.Util._inRange(E,90-22.5,90+22.5)?"ew-resize":o.Util._inRange(E,135-22.5,135+22.5)?"nwse-resize":o.Util._inRange(E,180-22.5,180+22.5)?"ns-resize":o.Util._inRange(E,225-22.5,225+22.5)?"nesw-resize":o.Util._inRange(E,270-22.5,270+22.5)?"ew-resize":o.Util._inRange(E,315-22.5,315+22.5)?"nwse-resize":(o.Util.error("Transformer has unknown angle for cursor detection: "+E),"pointer")}const v=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function C(k){return{x:k.x+k.width/2*Math.cos(k.rotation)+k.height/2*Math.sin(-k.rotation),y:k.y+k.height/2*Math.cos(k.rotation)+k.width/2*Math.sin(k.rotation)}}function u(k,T,A){const E=A.x+(k.x-A.x)*Math.cos(T)-(k.y-A.y)*Math.sin(T),D=A.y+(k.x-A.x)*Math.sin(T)+(k.y-A.y)*Math.cos(T);return{...k,rotation:k.rotation+T,x:E,y:D}}function g(k,T){const A=C(k);return u(k,T,A)}function b(k,T,A){let E=T;for(let D=0;D<k.length;D++){const y=s.Konva.getAngle(k[D]),P=Math.abs(y-T)%(Math.PI*2);Math.min(P,Math.PI*2-P)<A&&(E=y)}return E}let S=0,x=class extends n.Group{constructor(T){super(T),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(c,this.update),this.getNode()&&this.update()}attachTo(T){return this.setNode(T),this}setNode(T){return o.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([T])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return l+this._id}setNodes(T=[]){this._nodes&&this._nodes.length&&this.detach();const A=T.filter(D=>D.isAncestorOf(this)?(o.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=T=A,T.length===1&&this.useSingleNodeRotation()?this.rotation(T[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(D=>{const y=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()},P=D._attrsAffectingSize.map(w=>w+"Change."+this._getEventNamespace()).join(" ");D.on(P,y),D.on(m.map(w=>w+`.${this._getEventNamespace()}`).join(" "),y),D.on(`absoluteTransformChange.${this._getEventNamespace()}`,y),this._proxyDrag(D)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(T){let A;T.on(`dragstart.${this._getEventNamespace()}`,E=>{A=T.getAbsolutePosition(),!this.isDragging()&&T!==this.findOne(".back")&&this.startDrag(E,!1)}),T.on(`dragmove.${this._getEventNamespace()}`,E=>{if(!A)return;const D=T.getAbsolutePosition(),y=D.x-A.x,P=D.y-A.y;this.nodes().forEach(w=>{if(w===T||w.isDragging())return;const R=w.getAbsolutePosition();w.setAbsolutePosition({x:R.x+y,y:R.y+P}),w.startDrag(E)}),A=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(T=>{T.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(p),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(p,this.__getNodeRect)}__getNodeShape(T,A=this.rotation(),E){const D=T.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),y=T.getAbsoluteScale(E),P=T.getAbsolutePosition(E),w=D.x*y.x-T.offsetX()*y.x,R=D.y*y.y-T.offsetY()*y.y,O=(s.Konva.getAngle(T.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),I={x:P.x+w*Math.cos(O)+R*Math.sin(-O),y:P.y+R*Math.cos(O)+w*Math.sin(O),width:D.width*y.x,height:D.height*y.y,rotation:O};return u(I,-s.Konva.getAngle(A),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const A=[];this.nodes().map(O=>{const I=O.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),V=[{x:I.x,y:I.y},{x:I.x+I.width,y:I.y},{x:I.x+I.width,y:I.y+I.height},{x:I.x,y:I.y+I.height}],B=O.getAbsoluteTransform();V.forEach(function(q){const K=B.point(q);A.push(K)})});const E=new o.Transform;E.rotate(-s.Konva.getAngle(this.rotation()));let D=1/0,y=1/0,P=-1/0,w=-1/0;A.forEach(function(O){const I=E.point(O);D===void 0&&(D=P=I.x,y=w=I.y),D=Math.min(D,I.x),y=Math.min(y,I.y),P=Math.max(P,I.x),w=Math.max(w,I.y)}),E.invert();const R=E.point({x:D,y});return{x:R.x,y:R.y,width:P-D,height:w-y,rotation:s.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),v.forEach(T=>{this._createAnchor(T)}),this._createAnchor("rotater")}_createAnchor(T){const A=new r.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:T+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:f?10:"auto"}),E=this;A.on("mousedown touchstart",function(D){E._handleMouseDown(D)}),A.on("dragstart",D=>{A.stopDrag(),D.cancelBubble=!0}),A.on("dragend",D=>{D.cancelBubble=!0}),A.on("mouseenter",()=>{const D=s.Konva.getAngle(this.rotation()),y=this.rotateAnchorCursor(),P=_(T,D,y);A.getStage().content&&(A.getStage().content.style.cursor=P),this._cursorChange=!0}),A.on("mouseout",()=>{A.getStage().content&&(A.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(A)}_createBack(){const T=new i.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(A,E){const D=E.getParent(),y=D.padding();A.beginPath(),A.rect(-y,-y,E.width()+y*2,E.height()+y*2),A.moveTo(E.width()/2,-y),D.rotateEnabled()&&D.rotateLineVisible()&&A.lineTo(E.width()/2,-D.rotateAnchorOffset()*o.Util._sign(E.height())-y),A.fillStrokeShape(E)},hitFunc:(A,E)=>{if(!this.shouldOverdrawWholeArea())return;const D=this.padding();A.beginPath(),A.rect(-D,-D,E.width()+D*2,E.height()+D*2),A.fillStrokeShape(E)}});this.add(T),this._proxyDrag(T),T.on("dragstart",A=>{A.cancelBubble=!0}),T.on("dragmove",A=>{A.cancelBubble=!0}),T.on("dragend",A=>{A.cancelBubble=!0}),this.on("dragmove",A=>{this.update()})}_handleMouseDown(T){if(this._transforming)return;this._movingAnchorName=T.target.name().split(" ")[0];const A=this._getNodeRect(),E=A.width,D=A.height,y=Math.sqrt(Math.pow(E,2)+Math.pow(D,2));this.sin=Math.abs(D/y),this.cos=Math.abs(E/y),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const P=T.target.getAbsolutePosition(),w=T.target.getStage().getPointerPosition();this._anchorDragOffset={x:w.x-P.x,y:w.y-P.y},S++,this._fire("transformstart",{evt:T.evt,target:this.getNode()}),this._nodes.forEach(R=>{R._fire("transformstart",{evt:T.evt,target:R})})}_handleMouseMove(T){let A,E,D;const y=this.findOne("."+this._movingAnchorName),P=y.getStage();P.setPointersPositions(T);const w=P.getPointerPosition();let R={x:w.x-this._anchorDragOffset.x,y:w.y-this._anchorDragOffset.y};const O=y.getAbsolutePosition();this.anchorDragBoundFunc()&&(R=this.anchorDragBoundFunc()(O,R,T)),y.setAbsolutePosition(R);const I=y.getAbsolutePosition();if(O.x===I.x&&O.y===I.y)return;if(this._movingAnchorName==="rotater"){const U=this._getNodeRect();A=y.x()-U.width/2,E=-y.y()+U.height/2;let X=Math.atan2(-E,A)+Math.PI/2;U.height<0&&(X-=Math.PI);const $=s.Konva.getAngle(this.rotation())+X,st=s.Konva.getAngle(this.rotationSnapTolerance()),it=b(this.rotationSnaps(),$,st)-U.rotation,ft=g(U,it);this._fitNodesInto(ft,T);return}const V=this.shiftBehavior();let B;V==="inverted"?B=this.keepRatio()&&!T.shiftKey:V==="none"?B=this.keepRatio():B=this.keepRatio()||T.shiftKey;var L=this.centeredScaling()||T.altKey;if(this._movingAnchorName==="top-left"){if(B){var q=L?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};D=Math.sqrt(Math.pow(q.x-y.x(),2)+Math.pow(q.y-y.y(),2));var K=this.findOne(".top-left").x()>q.x?-1:1,z=this.findOne(".top-left").y()>q.y?-1:1;A=D*this.cos*K,E=D*this.sin*z,this.findOne(".top-left").x(q.x-A),this.findOne(".top-left").y(q.y-E)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(y.y());else if(this._movingAnchorName==="top-right"){if(B){var q=L?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};D=Math.sqrt(Math.pow(y.x()-q.x,2)+Math.pow(q.y-y.y(),2));var K=this.findOne(".top-right").x()<q.x?-1:1,z=this.findOne(".top-right").y()>q.y?-1:1;A=D*this.cos*K,E=D*this.sin*z,this.findOne(".top-right").x(q.x+A),this.findOne(".top-right").y(q.y-E)}var Y=y.position();this.findOne(".top-left").y(Y.y),this.findOne(".bottom-right").x(Y.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(y.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(y.x());else if(this._movingAnchorName==="bottom-left"){if(B){var q=L?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};D=Math.sqrt(Math.pow(q.x-y.x(),2)+Math.pow(y.y()-q.y,2));var K=q.x<y.x()?-1:1,z=y.y()<q.y?-1:1;A=D*this.cos*K,E=D*this.sin*z,y.x(q.x-A),y.y(q.y+E)}Y=y.position(),this.findOne(".top-left").x(Y.x),this.findOne(".bottom-right").y(Y.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(y.y());else if(this._movingAnchorName==="bottom-right"){if(B){var q=L?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};D=Math.sqrt(Math.pow(y.x()-q.x,2)+Math.pow(y.y()-q.y,2));var K=this.findOne(".bottom-right").x()<q.x?-1:1,z=this.findOne(".bottom-right").y()<q.y?-1:1;A=D*this.cos*K,E=D*this.sin*z,this.findOne(".bottom-right").x(q.x+A),this.findOne(".bottom-right").y(q.y+E)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));var L=this.centeredScaling()||T.altKey;if(L){const U=this.findOne(".top-left"),X=this.findOne(".bottom-right"),j=U.x(),$=U.y(),st=this.getWidth()-X.x(),tt=this.getHeight()-X.y();X.move({x:-j,y:-$}),U.move({x:st,y:tt})}const G=this.findOne(".top-left").getAbsolutePosition();A=G.x,E=G.y;const F=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),N=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:A,y:E,width:F,height:N,rotation:s.Konva.getAngle(this.rotation())},T)}_handleMouseUp(T){this._removeEvents(T)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(T){var A;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const E=this.getNode();S--,this._fire("transformend",{evt:T,target:E}),(A=this.getLayer())===null||A===void 0||A.batchDraw(),E&&this._nodes.forEach(D=>{var y;D._fire("transformend",{evt:T,target:D}),(y=D.getLayer())===null||y===void 0||y.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(T,A){const E=this._getNodeRect(),D=1;if(o.Util._inRange(T.width,-this.padding()*2-D,D)){this.update();return}if(o.Util._inRange(T.height,-this.padding()*2-D,D)){this.update();return}const y=new o.Transform;if(y.rotate(s.Konva.getAngle(this.rotation())),this._movingAnchorName&&T.width<0&&this._movingAnchorName.indexOf("left")>=0){const B=y.point({x:-this.padding()*2,y:0});T.x+=B.x,T.y+=B.y,T.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=B.x,this._anchorDragOffset.y-=B.y}else if(this._movingAnchorName&&T.width<0&&this._movingAnchorName.indexOf("right")>=0){const B=y.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=B.x,this._anchorDragOffset.y-=B.y,T.width+=this.padding()*2}if(this._movingAnchorName&&T.height<0&&this._movingAnchorName.indexOf("top")>=0){const B=y.point({x:0,y:-this.padding()*2});T.x+=B.x,T.y+=B.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=B.x,this._anchorDragOffset.y-=B.y,T.height+=this.padding()*2}else if(this._movingAnchorName&&T.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const B=y.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=B.x,this._anchorDragOffset.y-=B.y,T.height+=this.padding()*2}if(this.boundBoxFunc()){const B=this.boundBoxFunc()(E,T);B?T=B:o.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const P=1e7,w=new o.Transform;w.translate(E.x,E.y),w.rotate(E.rotation),w.scale(E.width/P,E.height/P);const R=new o.Transform,O=T.width/P,I=T.height/P;this.flipEnabled()===!1?(R.translate(T.x,T.y),R.rotate(T.rotation),R.translate(T.width<0?T.width:0,T.height<0?T.height:0),R.scale(Math.abs(O),Math.abs(I))):(R.translate(T.x,T.y),R.rotate(T.rotation),R.scale(O,I));const V=R.multiply(w.invert());this._nodes.forEach(B=>{var q;const K=B.getParent().getAbsoluteTransform(),z=B.getTransform().copy();z.translate(B.offsetX(),B.offsetY());const Y=new o.Transform;Y.multiply(K.copy().invert()).multiply(V).multiply(K).multiply(z);const L=Y.decompose();B.setAttrs(L),(q=B.getLayer())===null||q===void 0||q.batchDraw()}),this.rotation(o.Util._getRotation(T.rotation)),this._nodes.forEach(B=>{this._fire("transform",{evt:A,target:B}),B._fire("transform",{evt:A,target:B})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(T,A){this.findOne(T).setAttrs(A)}update(){var T;const A=this._getNodeRect();this.rotation(o.Util._getRotation(A.rotation));const E=A.width,D=A.height,y=this.enabledAnchors(),P=this.resizeEnabled(),w=this.padding(),R=this.anchorSize(),O=this.find("._anchor");O.forEach(V=>{V.setAttrs({width:R,height:R,offsetX:R/2,offsetY:R/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:R/2+w,offsetY:R/2+w,visible:P&&y.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:E/2,y:0,offsetY:R/2+w,visible:P&&y.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:E,y:0,offsetX:R/2-w,offsetY:R/2+w,visible:P&&y.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:D/2,offsetX:R/2+w,visible:P&&y.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:E,y:D/2,offsetX:R/2-w,visible:P&&y.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:D,offsetX:R/2+w,offsetY:R/2-w,visible:P&&y.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:E/2,y:D,offsetY:R/2-w,visible:P&&y.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:E,y:D,offsetX:R/2-w,offsetY:R/2-w,visible:P&&y.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:E/2,y:-this.rotateAnchorOffset()*o.Util._sign(D)-w,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:E,height:D,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const I=this.anchorStyleFunc();I&&O.forEach(V=>{I(V)}),(T=this.getLayer())===null||T===void 0||T.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const T=this.findOne("."+this._movingAnchorName);T&&T.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),n.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return e.Node.prototype.toObject.call(this)}clone(T){return e.Node.prototype.clone.call(this,T)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}};Bi.Transformer=x,x.isTransforming=()=>S>0;function M(k){return k instanceof Array||o.Util.warn("enabledAnchors value should be an array"),k instanceof Array&&k.forEach(function(T){v.indexOf(T)===-1&&o.Util.warn("Unknown anchor name: "+T+". Available names are: "+v.join(", "))}),k||[]}return x.prototype.className="Transformer",(0,h._registerNode)(x),t.Factory.addGetterSetter(x,"enabledAnchors",v,M),t.Factory.addGetterSetter(x,"flipEnabled",!0,(0,a.getBooleanValidator)()),t.Factory.addGetterSetter(x,"resizeEnabled",!0),t.Factory.addGetterSetter(x,"anchorSize",10,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(x,"rotateEnabled",!0),t.Factory.addGetterSetter(x,"rotateLineVisible",!0),t.Factory.addGetterSetter(x,"rotationSnaps",[]),t.Factory.addGetterSetter(x,"rotateAnchorOffset",50,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(x,"rotateAnchorCursor","crosshair"),t.Factory.addGetterSetter(x,"rotationSnapTolerance",5,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(x,"borderEnabled",!0),t.Factory.addGetterSetter(x,"anchorStroke","rgb(0, 161, 255)"),t.Factory.addGetterSetter(x,"anchorStrokeWidth",1,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(x,"anchorFill","white"),t.Factory.addGetterSetter(x,"anchorCornerRadius",0,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(x,"borderStroke","rgb(0, 161, 255)"),t.Factory.addGetterSetter(x,"borderStrokeWidth",1,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(x,"borderDash"),t.Factory.addGetterSetter(x,"keepRatio",!0),t.Factory.addGetterSetter(x,"shiftBehavior","default"),t.Factory.addGetterSetter(x,"centeredScaling",!1),t.Factory.addGetterSetter(x,"ignoreStroke",!1),t.Factory.addGetterSetter(x,"padding",0,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(x,"node"),t.Factory.addGetterSetter(x,"nodes"),t.Factory.addGetterSetter(x,"boundBoxFunc"),t.Factory.addGetterSetter(x,"anchorDragBoundFunc"),t.Factory.addGetterSetter(x,"anchorStyleFunc"),t.Factory.addGetterSetter(x,"shouldOverdrawWholeArea",!1),t.Factory.addGetterSetter(x,"useSingleNodeRotation",!0),t.Factory.backCompat(x,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"}),Bi}var Vi={},va;function _c(){if(va)return Vi;va=1,Object.defineProperty(Vi,"__esModule",{value:!0}),Vi.Wedge=void 0;const o=ht(),t=Dt(),e=ot(),i=lt(),r=ot();let n=class extends t.Shape{_sceneFunc(a){a.beginPath(),a.arc(0,0,this.radius(),0,e.Konva.getAngle(this.angle()),this.clockwise()),a.lineTo(0,0),a.closePath(),a.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(a){this.radius(a/2)}setHeight(a){this.radius(a/2)}};return Vi.Wedge=n,n.prototype.className="Wedge",n.prototype._centroid=!0,n.prototype._attrsAffectingSize=["radius"],(0,r._registerNode)(n),o.Factory.addGetterSetter(n,"radius",0,(0,i.getNumberValidator)()),o.Factory.addGetterSetter(n,"angle",0,(0,i.getNumberValidator)()),o.Factory.addGetterSetter(n,"clockwise",!1),o.Factory.backCompat(n,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"}),Vi}var zi={},ba;function pc(){if(ba)return zi;ba=1,Object.defineProperty(zi,"__esModule",{value:!0}),zi.Blur=void 0;const o=ht(),t=kt(),e=lt();function i(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const r=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],n=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function s(h,l){const c=h.data,p=h.width,m=h.height;let d,f,_,v,C,u,g,b,S,x,M,k,T,A,E,D,y,P,w,R,O,I,V,B,q=l+l+1,K=p-1,z=m-1,Y=l+1,L=Y*(Y+1)/2,G=new i,F=null,N=G,U=null,X=null,j=r[l],$=n[l];for(_=1;_<q;_++)N=N.next=new i,_===Y&&(F=N);for(N.next=G,g=u=0,f=0;f<m;f++){for(D=y=P=w=b=S=x=M=0,k=Y*(R=c[u]),T=Y*(O=c[u+1]),A=Y*(I=c[u+2]),E=Y*(V=c[u+3]),b+=L*R,S+=L*O,x+=L*I,M+=L*V,N=G,_=0;_<Y;_++)N.r=R,N.g=O,N.b=I,N.a=V,N=N.next;for(_=1;_<Y;_++)v=u+((K<_?K:_)<<2),b+=(N.r=R=c[v])*(B=Y-_),S+=(N.g=O=c[v+1])*B,x+=(N.b=I=c[v+2])*B,M+=(N.a=V=c[v+3])*B,D+=R,y+=O,P+=I,w+=V,N=N.next;for(U=G,X=F,d=0;d<p;d++)c[u+3]=V=M*j>>$,V!==0?(V=255/V,c[u]=(b*j>>$)*V,c[u+1]=(S*j>>$)*V,c[u+2]=(x*j>>$)*V):c[u]=c[u+1]=c[u+2]=0,b-=k,S-=T,x-=A,M-=E,k-=U.r,T-=U.g,A-=U.b,E-=U.a,v=g+((v=d+l+1)<K?v:K)<<2,D+=U.r=c[v],y+=U.g=c[v+1],P+=U.b=c[v+2],w+=U.a=c[v+3],b+=D,S+=y,x+=P,M+=w,U=U.next,k+=R=X.r,T+=O=X.g,A+=I=X.b,E+=V=X.a,D-=R,y-=O,P-=I,w-=V,X=X.next,u+=4;g+=p}for(d=0;d<p;d++){for(y=P=w=D=S=x=M=b=0,u=d<<2,k=Y*(R=c[u]),T=Y*(O=c[u+1]),A=Y*(I=c[u+2]),E=Y*(V=c[u+3]),b+=L*R,S+=L*O,x+=L*I,M+=L*V,N=G,_=0;_<Y;_++)N.r=R,N.g=O,N.b=I,N.a=V,N=N.next;for(C=p,_=1;_<=l;_++)u=C+d<<2,b+=(N.r=R=c[u])*(B=Y-_),S+=(N.g=O=c[u+1])*B,x+=(N.b=I=c[u+2])*B,M+=(N.a=V=c[u+3])*B,D+=R,y+=O,P+=I,w+=V,N=N.next,_<z&&(C+=p);for(u=d,U=G,X=F,f=0;f<m;f++)v=u<<2,c[v+3]=V=M*j>>$,V>0?(V=255/V,c[v]=(b*j>>$)*V,c[v+1]=(S*j>>$)*V,c[v+2]=(x*j>>$)*V):c[v]=c[v+1]=c[v+2]=0,b-=k,S-=T,x-=A,M-=E,k-=U.r,T-=U.g,A-=U.b,E-=U.a,v=d+((v=f+Y)<z?v:z)*p<<2,b+=D+=U.r=c[v],S+=y+=U.g=c[v+1],x+=P+=U.b=c[v+2],M+=w+=U.a=c[v+3],U=U.next,k+=R=X.r,T+=O=X.g,A+=I=X.b,E+=V=X.a,D-=R,y-=O,P-=I,w-=V,X=X.next,u+=p}}const a=function(l){const c=Math.round(this.blurRadius());c>0&&s(l,c)};return zi.Blur=a,o.Factory.addGetterSetter(t.Node,"blurRadius",0,(0,e.getNumberValidator)(),o.Factory.afterSetFilter),zi}var Hi={},Sa;function mc(){if(Sa)return Hi;Sa=1,Object.defineProperty(Hi,"__esModule",{value:!0}),Hi.Brighten=void 0;const o=ht(),t=kt(),e=lt(),i=function(r){let n=this.brightness()*255,s=r.data,a=s.length,h;for(h=0;h<a;h+=4)s[h]+=n,s[h+1]+=n,s[h+2]+=n};return Hi.Brighten=i,o.Factory.addGetterSetter(t.Node,"brightness",0,(0,e.getNumberValidator)(),o.Factory.afterSetFilter),Hi}var qi={},wa;function yc(){if(wa)return qi;wa=1,Object.defineProperty(qi,"__esModule",{value:!0}),qi.Contrast=void 0;const o=ht(),t=kt(),e=lt(),i=function(r){const n=Math.pow((this.contrast()+100)/100,2);let s=r.data,a=s.length,h=150,l=150,c=150,p;for(p=0;p<a;p+=4)h=s[p],l=s[p+1],c=s[p+2],h/=255,h-=.5,h*=n,h+=.5,h*=255,l/=255,l-=.5,l*=n,l+=.5,l*=255,c/=255,c-=.5,c*=n,c+=.5,c*=255,h=h<0?0:h>255?255:h,l=l<0?0:l>255?255:l,c=c<0?0:c>255?255:c,s[p]=h,s[p+1]=l,s[p+2]=c};return qi.Contrast=i,o.Factory.addGetterSetter(t.Node,"contrast",0,(0,e.getNumberValidator)(),o.Factory.afterSetFilter),qi}var Yi={},Ca;function vc(){if(Ca)return Yi;Ca=1,Object.defineProperty(Yi,"__esModule",{value:!0}),Yi.Emboss=void 0;const o=ht(),t=kt(),e=Tt(),i=lt(),r=function(n){let s=this.embossStrength()*10,a=this.embossWhiteLevel()*255,h=this.embossDirection(),l=this.embossBlend(),c=0,p=0,m=n.data,d=n.width,f=n.height,_=d*4,v=f;switch(h){case"top-left":c=-1,p=-1;break;case"top":c=-1,p=0;break;case"top-right":c=-1,p=1;break;case"right":c=0,p=1;break;case"bottom-right":c=1,p=1;break;case"bottom":c=1,p=0;break;case"bottom-left":c=1,p=-1;break;case"left":c=0,p=-1;break;default:e.Util.error("Unknown emboss direction: "+h)}do{const C=(v-1)*_;let u=c;v+u<1&&(u=0),v+u>f&&(u=0);const g=(v-1+u)*d*4;let b=d;do{const S=C+(b-1)*4;let x=p;b+x<1&&(x=0),b+x>d&&(x=0);const M=g+(b-1+x)*4,k=m[S]-m[M],T=m[S+1]-m[M+1],A=m[S+2]-m[M+2];let E=k;const D=E>0?E:-E,y=T>0?T:-T,P=A>0?A:-A;if(y>D&&(E=T),P>D&&(E=A),E*=s,l){const w=m[S]+E,R=m[S+1]+E,O=m[S+2]+E;m[S]=w>255?255:w<0?0:w,m[S+1]=R>255?255:R<0?0:R,m[S+2]=O>255?255:O<0?0:O}else{let w=a-E;w<0?w=0:w>255&&(w=255),m[S]=m[S+1]=m[S+2]=w}}while(--b)}while(--v)};return Yi.Emboss=r,o.Factory.addGetterSetter(t.Node,"embossStrength",.5,(0,i.getNumberValidator)(),o.Factory.afterSetFilter),o.Factory.addGetterSetter(t.Node,"embossWhiteLevel",.5,(0,i.getNumberValidator)(),o.Factory.afterSetFilter),o.Factory.addGetterSetter(t.Node,"embossDirection","top-left",null,o.Factory.afterSetFilter),o.Factory.addGetterSetter(t.Node,"embossBlend",!1,null,o.Factory.afterSetFilter),Yi}var Wi={},xa;function bc(){if(xa)return Wi;xa=1,Object.defineProperty(Wi,"__esModule",{value:!0}),Wi.Enhance=void 0;const o=ht(),t=kt(),e=lt();function i(n,s,a,h,l){let c=a-s,p=l-h,m;return c===0?h+p/2:p===0?h:(m=(n-s)/c,m=p*m+h,m)}const r=function(n){let s=n.data,a=s.length,h=s[0],l=h,c,p=s[1],m=p,d,f=s[2],_=f,v,C;const u=this.enhance();if(u===0)return;for(C=0;C<a;C+=4)c=s[C+0],c<h?h=c:c>l&&(l=c),d=s[C+1],d<p?p=d:d>m&&(m=d),v=s[C+2],v<f?f=v:v>_&&(_=v);l===h&&(l=255,h=0),m===p&&(m=255,p=0),_===f&&(_=255,f=0);let g,b,S,x,M,k,T,A,E;for(u>0?(b=l+u*(255-l),S=h-u*(h-0),M=m+u*(255-m),k=p-u*(p-0),A=_+u*(255-_),E=f-u*(f-0)):(g=(l+h)*.5,b=l+u*(l-g),S=h+u*(h-g),x=(m+p)*.5,M=m+u*(m-x),k=p+u*(p-x),T=(_+f)*.5,A=_+u*(_-T),E=f+u*(f-T)),C=0;C<a;C+=4)s[C+0]=i(s[C+0],h,l,S,b),s[C+1]=i(s[C+1],p,m,k,M),s[C+2]=i(s[C+2],f,_,E,A)};return Wi.Enhance=r,o.Factory.addGetterSetter(t.Node,"enhance",0,(0,e.getNumberValidator)(),o.Factory.afterSetFilter),Wi}var Xi={},Ta;function Sc(){if(Ta)return Xi;Ta=1,Object.defineProperty(Xi,"__esModule",{value:!0}),Xi.Grayscale=void 0;const o=function(t){let e=t.data,i=e.length,r,n;for(r=0;r<i;r+=4)n=.34*e[r]+.5*e[r+1]+.16*e[r+2],e[r]=n,e[r+1]=n,e[r+2]=n};return Xi.Grayscale=o,Xi}var Ki={},Pa;function wc(){if(Pa)return Ki;Pa=1,Object.defineProperty(Ki,"__esModule",{value:!0}),Ki.HSL=void 0;const o=ht(),t=kt(),e=lt();o.Factory.addGetterSetter(t.Node,"hue",0,(0,e.getNumberValidator)(),o.Factory.afterSetFilter),o.Factory.addGetterSetter(t.Node,"saturation",0,(0,e.getNumberValidator)(),o.Factory.afterSetFilter),o.Factory.addGetterSetter(t.Node,"luminance",0,(0,e.getNumberValidator)(),o.Factory.afterSetFilter);const i=function(r){let n=r.data,s=n.length,a=1,h=Math.pow(2,this.saturation()),l=Math.abs(this.hue()+360)%360,c=this.luminance()*127,p;const m=a*h*Math.cos(l*Math.PI/180),d=a*h*Math.sin(l*Math.PI/180),f=.299*a+.701*m+.167*d,_=.587*a-.587*m+.33*d,v=.114*a-.114*m-.497*d,C=.299*a-.299*m-.328*d,u=.587*a+.413*m+.035*d,g=.114*a-.114*m+.293*d,b=.299*a-.3*m+1.25*d,S=.587*a-.586*m-1.05*d,x=.114*a+.886*m-.2*d;let M,k,T,A;for(p=0;p<s;p+=4)M=n[p+0],k=n[p+1],T=n[p+2],A=n[p+3],n[p+0]=f*M+_*k+v*T+c,n[p+1]=C*M+u*k+g*T+c,n[p+2]=b*M+S*k+x*T+c,n[p+3]=A};return Ki.HSL=i,Ki}var ji={},ka;function Cc(){if(ka)return ji;ka=1,Object.defineProperty(ji,"__esModule",{value:!0}),ji.HSV=void 0;const o=ht(),t=kt(),e=lt(),i=function(r){const n=r.data,s=n.length,a=Math.pow(2,this.value()),h=Math.pow(2,this.saturation()),l=Math.abs(this.hue()+360)%360,c=a*h*Math.cos(l*Math.PI/180),p=a*h*Math.sin(l*Math.PI/180),m=.299*a+.701*c+.167*p,d=.587*a-.587*c+.33*p,f=.114*a-.114*c-.497*p,_=.299*a-.299*c-.328*p,v=.587*a+.413*c+.035*p,C=.114*a-.114*c+.293*p,u=.299*a-.3*c+1.25*p,g=.587*a-.586*c-1.05*p,b=.114*a+.886*c-.2*p;let S,x,M,k;for(let T=0;T<s;T+=4)S=n[T+0],x=n[T+1],M=n[T+2],k=n[T+3],n[T+0]=m*S+d*x+f*M,n[T+1]=_*S+v*x+C*M,n[T+2]=u*S+g*x+b*M,n[T+3]=k};return ji.HSV=i,o.Factory.addGetterSetter(t.Node,"hue",0,(0,e.getNumberValidator)(),o.Factory.afterSetFilter),o.Factory.addGetterSetter(t.Node,"saturation",0,(0,e.getNumberValidator)(),o.Factory.afterSetFilter),o.Factory.addGetterSetter(t.Node,"value",0,(0,e.getNumberValidator)(),o.Factory.afterSetFilter),ji}var $i={},Aa;function xc(){if(Aa)return $i;Aa=1,Object.defineProperty($i,"__esModule",{value:!0}),$i.Invert=void 0;const o=function(t){let e=t.data,i=e.length,r;for(r=0;r<i;r+=4)e[r]=255-e[r],e[r+1]=255-e[r+1],e[r+2]=255-e[r+2]};return $i.Invert=o,$i}var Qi={},Ea;function Tc(){if(Ea)return Qi;Ea=1,Object.defineProperty(Qi,"__esModule",{value:!0}),Qi.Kaleidoscope=void 0;const o=ht(),t=kt(),e=Tt(),i=lt(),r=function(a,h,l){let c=a.data,p=h.data,m=a.width,d=a.height,f=l.polarCenterX||m/2,_=l.polarCenterY||d/2,v,C,u,g=0,b=0,S=0,x=0,M,k=Math.sqrt(f*f+_*_);C=m-f,u=d-_,M=Math.sqrt(C*C+u*u),k=M>k?M:k;let T=d,A=m,E,D,y=360/A*Math.PI/180,P,w;for(D=0;D<A;D+=1)for(P=Math.sin(D*y),w=Math.cos(D*y),E=0;E<T;E+=1)C=Math.floor(f+k*E/T*w),u=Math.floor(_+k*E/T*P),v=(u*m+C)*4,g=c[v+0],b=c[v+1],S=c[v+2],x=c[v+3],v=(D+E*m)*4,p[v+0]=g,p[v+1]=b,p[v+2]=S,p[v+3]=x},n=function(a,h,l){let c=a.data,p=h.data,m=a.width,d=a.height,f=l.polarCenterX||m/2,_=l.polarCenterY||d/2,v,C,u,g,b,S=0,x=0,M=0,k=0,T,A=Math.sqrt(f*f+_*_);C=m-f,u=d-_,T=Math.sqrt(C*C+u*u),A=T>A?T:A;let E=d,D=m,y,P,w=0,R,O;for(C=0;C<m;C+=1)for(u=0;u<d;u+=1)g=C-f,b=u-_,y=Math.sqrt(g*g+b*b)*E/A,P=(Math.atan2(b,g)*180/Math.PI+360+w)%360,P=P*D/360,R=Math.floor(P),O=Math.floor(y),v=(O*m+R)*4,S=c[v+0],x=c[v+1],M=c[v+2],k=c[v+3],v=(u*m+C)*4,p[v+0]=S,p[v+1]=x,p[v+2]=M,p[v+3]=k},s=function(a){const h=a.width,l=a.height;let c,p,m,d,f,_,v,C,u,g,b=Math.round(this.kaleidoscopePower());const S=Math.round(this.kaleidoscopeAngle()),x=Math.floor(h*(S%360)/360);if(b<1)return;const M=e.Util.createCanvasElement();M.width=h,M.height=l;const k=M.getContext("2d").getImageData(0,0,h,l);e.Util.releaseCanvas(M),r(a,k,{polarCenterX:h/2,polarCenterY:l/2});let T=h/Math.pow(2,b);for(;T<=8;)T=T*2,b-=1;T=Math.ceil(T);let A=T,E=0,D=A,y=1;for(x+T>h&&(E=A,D=0,y=-1),p=0;p<l;p+=1)for(c=E;c!==D;c+=y)m=Math.round(c+x)%h,u=(h*p+m)*4,f=k.data[u+0],_=k.data[u+1],v=k.data[u+2],C=k.data[u+3],g=(h*p+c)*4,k.data[g+0]=f,k.data[g+1]=_,k.data[g+2]=v,k.data[g+3]=C;for(p=0;p<l;p+=1)for(A=Math.floor(T),d=0;d<b;d+=1){for(c=0;c<A+1;c+=1)u=(h*p+c)*4,f=k.data[u+0],_=k.data[u+1],v=k.data[u+2],C=k.data[u+3],g=(h*p+A*2-c-1)*4,k.data[g+0]=f,k.data[g+1]=_,k.data[g+2]=v,k.data[g+3]=C;A*=2}n(k,a,{})};return Qi.Kaleidoscope=s,o.Factory.addGetterSetter(t.Node,"kaleidoscopePower",2,(0,i.getNumberValidator)(),o.Factory.afterSetFilter),o.Factory.addGetterSetter(t.Node,"kaleidoscopeAngle",0,(0,i.getNumberValidator)(),o.Factory.afterSetFilter),Qi}var Ji={},Ra;function Pc(){if(Ra)return Ji;Ra=1,Object.defineProperty(Ji,"__esModule",{value:!0}),Ji.Mask=void 0;const o=ht(),t=kt(),e=lt();function i(m,d,f){let _=(f*m.width+d)*4;const v=[];return v.push(m.data[_++],m.data[_++],m.data[_++],m.data[_++]),v}function r(m,d){return Math.sqrt(Math.pow(m[0]-d[0],2)+Math.pow(m[1]-d[1],2)+Math.pow(m[2]-d[2],2))}function n(m){const d=[0,0,0];for(let f=0;f<m.length;f++)d[0]+=m[f][0],d[1]+=m[f][1],d[2]+=m[f][2];return d[0]/=m.length,d[1]/=m.length,d[2]/=m.length,d}function s(m,d){const f=i(m,0,0),_=i(m,m.width-1,0),v=i(m,0,m.height-1),C=i(m,m.width-1,m.height-1),u=d||10;if(r(f,_)<u&&r(_,C)<u&&r(C,v)<u&&r(v,f)<u){const g=n([_,f,C,v]),b=[];for(let S=0;S<m.width*m.height;S++){const x=r(g,[m.data[S*4],m.data[S*4+1],m.data[S*4+2]]);b[S]=x<u?0:255}return b}}function a(m,d){for(let f=0;f<m.width*m.height;f++)m.data[4*f+3]=d[f]}function h(m,d,f){const _=[1,1,1,1,0,1,1,1,1],v=Math.round(Math.sqrt(_.length)),C=Math.floor(v/2),u=[];for(let g=0;g<f;g++)for(let b=0;b<d;b++){const S=g*d+b;let x=0;for(let M=0;M<v;M++)for(let k=0;k<v;k++){const T=g+M-C,A=b+k-C;if(T>=0&&T<f&&A>=0&&A<d){const E=T*d+A,D=_[M*v+k];x+=m[E]*D}}u[S]=x===255*8?255:0}return u}function l(m,d,f){const _=[1,1,1,1,1,1,1,1,1],v=Math.round(Math.sqrt(_.length)),C=Math.floor(v/2),u=[];for(let g=0;g<f;g++)for(let b=0;b<d;b++){const S=g*d+b;let x=0;for(let M=0;M<v;M++)for(let k=0;k<v;k++){const T=g+M-C,A=b+k-C;if(T>=0&&T<f&&A>=0&&A<d){const E=T*d+A,D=_[M*v+k];x+=m[E]*D}}u[S]=x>=255*4?255:0}return u}function c(m,d,f){const _=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],v=Math.round(Math.sqrt(_.length)),C=Math.floor(v/2),u=[];for(let g=0;g<f;g++)for(let b=0;b<d;b++){const S=g*d+b;let x=0;for(let M=0;M<v;M++)for(let k=0;k<v;k++){const T=g+M-C,A=b+k-C;if(T>=0&&T<f&&A>=0&&A<d){const E=T*d+A,D=_[M*v+k];x+=m[E]*D}}u[S]=x}return u}const p=function(m){let d=this.threshold(),f=s(m,d);return f&&(f=h(f,m.width,m.height),f=l(f,m.width,m.height),f=c(f,m.width,m.height),a(m,f)),m};return Ji.Mask=p,o.Factory.addGetterSetter(t.Node,"threshold",0,(0,e.getNumberValidator)(),o.Factory.afterSetFilter),Ji}var Zi={},Ma;function kc(){if(Ma)return Zi;Ma=1,Object.defineProperty(Zi,"__esModule",{value:!0}),Zi.Noise=void 0;const o=ht(),t=kt(),e=lt(),i=function(r){const n=this.noise()*255,s=r.data,a=s.length,h=n/2;for(let l=0;l<a;l+=4)s[l+0]+=h-2*h*Math.random(),s[l+1]+=h-2*h*Math.random(),s[l+2]+=h-2*h*Math.random()};return Zi.Noise=i,o.Factory.addGetterSetter(t.Node,"noise",.2,(0,e.getNumberValidator)(),o.Factory.afterSetFilter),Zi}var tr={},Oa;function Ac(){if(Oa)return tr;Oa=1,Object.defineProperty(tr,"__esModule",{value:!0}),tr.Pixelate=void 0;const o=ht(),t=Tt(),e=kt(),i=lt(),r=function(n){let s=Math.ceil(this.pixelSize()),a=n.width,h=n.height,l,c,p,m,d,f,_,v=Math.ceil(a/s),C=Math.ceil(h/s),u,g,b,S,x,M,k,T=n.data;if(s<=0){t.Util.error("pixelSize value can not be <= 0");return}for(x=0;x<v;x+=1)for(M=0;M<C;M+=1){for(m=0,d=0,f=0,_=0,u=x*s,g=u+s,b=M*s,S=b+s,k=0,l=u;l<g;l+=1)if(!(l>=a))for(c=b;c<S;c+=1)c>=h||(p=(a*c+l)*4,m+=T[p+0],d+=T[p+1],f+=T[p+2],_+=T[p+3],k+=1);for(m=m/k,d=d/k,f=f/k,_=_/k,l=u;l<g;l+=1)if(!(l>=a))for(c=b;c<S;c+=1)c>=h||(p=(a*c+l)*4,T[p+0]=m,T[p+1]=d,T[p+2]=f,T[p+3]=_)}};return tr.Pixelate=r,o.Factory.addGetterSetter(e.Node,"pixelSize",8,(0,i.getNumberValidator)(),o.Factory.afterSetFilter),tr}var er={},Fa;function Ec(){if(Fa)return er;Fa=1,Object.defineProperty(er,"__esModule",{value:!0}),er.Posterize=void 0;const o=ht(),t=kt(),e=lt(),i=function(r){let n=Math.round(this.levels()*254)+1,s=r.data,a=s.length,h=255/n,l;for(l=0;l<a;l+=1)s[l]=Math.floor(s[l]/h)*h};return er.Posterize=i,o.Factory.addGetterSetter(t.Node,"levels",.5,(0,e.getNumberValidator)(),o.Factory.afterSetFilter),er}var ir={},Da;function Rc(){if(Da)return ir;Da=1,Object.defineProperty(ir,"__esModule",{value:!0}),ir.RGB=void 0;const o=ht(),t=kt(),e=lt(),i=function(r){let n=r.data,s=n.length,a=this.red(),h=this.green(),l=this.blue(),c,p;for(c=0;c<s;c+=4)p=(.34*n[c]+.5*n[c+1]+.16*n[c+2])/255,n[c]=p*a,n[c+1]=p*h,n[c+2]=p*l,n[c+3]=n[c+3]};return ir.RGB=i,o.Factory.addGetterSetter(t.Node,"red",0,function(r){return this._filterUpToDate=!1,r>255?255:r<0?0:Math.round(r)}),o.Factory.addGetterSetter(t.Node,"green",0,function(r){return this._filterUpToDate=!1,r>255?255:r<0?0:Math.round(r)}),o.Factory.addGetterSetter(t.Node,"blue",0,e.RGBComponent,o.Factory.afterSetFilter),ir}var rr={},Na;function Mc(){if(Na)return rr;Na=1,Object.defineProperty(rr,"__esModule",{value:!0}),rr.RGBA=void 0;const o=ht(),t=kt(),e=lt(),i=function(r){const n=r.data,s=n.length,a=this.red(),h=this.green(),l=this.blue(),c=this.alpha();for(let p=0;p<s;p+=4){const m=1-c;n[p]=a*c+n[p]*m,n[p+1]=h*c+n[p+1]*m,n[p+2]=l*c+n[p+2]*m}};return rr.RGBA=i,o.Factory.addGetterSetter(t.Node,"red",0,function(r){return this._filterUpToDate=!1,r>255?255:r<0?0:Math.round(r)}),o.Factory.addGetterSetter(t.Node,"green",0,function(r){return this._filterUpToDate=!1,r>255?255:r<0?0:Math.round(r)}),o.Factory.addGetterSetter(t.Node,"blue",0,e.RGBComponent,o.Factory.afterSetFilter),o.Factory.addGetterSetter(t.Node,"alpha",1,function(r){return this._filterUpToDate=!1,r>1?1:r<0?0:r}),rr}var nr={},Ia;function Oc(){if(Ia)return nr;Ia=1,Object.defineProperty(nr,"__esModule",{value:!0}),nr.Sepia=void 0;const o=function(t){let e=t.data,i=e.length,r,n,s,a;for(r=0;r<i;r+=4)n=e[r+0],s=e[r+1],a=e[r+2],e[r+0]=Math.min(255,n*.393+s*.769+a*.189),e[r+1]=Math.min(255,n*.349+s*.686+a*.168),e[r+2]=Math.min(255,n*.272+s*.534+a*.131)};return nr.Sepia=o,nr}var sr={},La;function Fc(){if(La)return sr;La=1,Object.defineProperty(sr,"__esModule",{value:!0}),sr.Solarize=void 0;const o=function(t){const e=t.data,i=t.width,r=t.height,n=i*4;let s=r;do{const a=(s-1)*n;let h=i;do{const l=a+(h-1)*4;let c=e[l],p=e[l+1],m=e[l+2];c>127&&(c=255-c),p>127&&(p=255-p),m>127&&(m=255-m),e[l]=c,e[l+1]=p,e[l+2]=m}while(--h)}while(--s)};return sr.Solarize=o,sr}var ar={},Ga;function Dc(){if(Ga)return ar;Ga=1,Object.defineProperty(ar,"__esModule",{value:!0}),ar.Threshold=void 0;const o=ht(),t=kt(),e=lt(),i=function(r){const n=this.threshold()*255,s=r.data,a=s.length;for(let h=0;h<a;h+=1)s[h]=s[h]<n?0:255};return ar.Threshold=i,o.Factory.addGetterSetter(t.Node,"threshold",.5,(0,e.getNumberValidator)(),o.Factory.afterSetFilter),ar}var Ua;function Nc(){if(Ua)return bi;Ua=1,Object.defineProperty(bi,"__esModule",{value:!0}),bi.Konva=void 0;const o=ec(),t=ic(),e=nc(),i=sc(),r=ac(),n=oc(),s=hc(),a=oh(),h=hs(),l=hh(),c=lc(),p=cc(),m=dc(),d=uc(),f=lh(),_=fc(),v=gc(),C=_c(),u=pc(),g=mc(),b=yc(),S=vc(),x=bc(),M=Sc(),k=wc(),T=Cc(),A=xc(),E=Tc(),D=Pc(),y=kc(),P=Ac(),w=Ec(),R=Rc(),O=Mc(),I=Oc(),V=Fc(),B=Dc();return bi.Konva=o.Konva.Util._assign(o.Konva,{Arc:t.Arc,Arrow:e.Arrow,Circle:i.Circle,Ellipse:r.Ellipse,Image:n.Image,Label:s.Label,Tag:s.Tag,Line:a.Line,Path:h.Path,Rect:l.Rect,RegularPolygon:c.RegularPolygon,Ring:p.Ring,Sprite:m.Sprite,Star:d.Star,Text:f.Text,TextPath:_.TextPath,Transformer:v.Transformer,Wedge:C.Wedge,Filters:{Blur:u.Blur,Brighten:g.Brighten,Contrast:b.Contrast,Emboss:S.Emboss,Enhance:x.Enhance,Grayscale:M.Grayscale,HSL:k.HSL,HSV:T.HSV,Invert:A.Invert,Kaleidoscope:E.Kaleidoscope,Mask:D.Mask,Noise:y.Noise,Pixelate:P.Pixelate,Posterize:w.Posterize,RGB:R.RGB,RGBA:O.RGBA,Sepia:I.Sepia,Solarize:V.Solarize,Threshold:B.Threshold}}),bi}var Ic=Mr.exports,Ba;function Lc(){if(Ba)return Mr.exports;Ba=1,Object.defineProperty(Ic,"__esModule",{value:!0});const o=Nc();return Mr.exports=o.Konva,Mr.exports}var Gc=Lc();const vt=eo(Gc),mn=Ch(),Va={timeout:1e3},ch=()=>({toastSuccess:o=>mn.add({...Va,icon:"i-heroicons-check-circle",color:"green",title:o}),toastWarning:o=>mn.add({timeout:1800,icon:"i-heroicons-exclamation-circle",color:"amber",title:o}),toastError:o=>mn.add({...Va,icon:"i-heroicons-x-circle",color:"red",title:o})}),za=5,Ha="#f00",oi=6,Un=0,qa=56,Bn=214,dh=7,we=24,Uc=8,uh=we+Uc,Bc=16,Vc=16+uh,hi=Un+Bc+Vc+dh,Lt=uh+dh,Ya="#38bdf8",yn="#60a5fa",Wa=4,Id=Bn-34,Ld={default:()=>({width:640,height:320,mmid:"test-mmid",cmid:"test-cmid",token:"test-token",title:"標題"})},Xa=6,zc=["image/jpeg","image/png"];var vn={exports:{}},Ka;function Hc(){return Ka||(Ka=1,function(o){var t=(()=>{var e=Object.defineProperty,i=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,n=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,h=(b,S,x)=>S in b?e(b,S,{enumerable:!0,configurable:!0,writable:!0,value:x}):b[S]=x,l=(b,S)=>{for(var x in S||(S={}))s.call(S,x)&&h(b,x,S[x]);if(n)for(var x of n(S))a.call(S,x)&&h(b,x,S[x]);return b},c=(b,S)=>{for(var x in S)e(b,x,{get:S[x],enumerable:!0})},p=(b,S,x,M)=>{if(S&&typeof S=="object"||typeof S=="function")for(let k of r(S))!s.call(b,k)&&k!==x&&e(b,k,{get:()=>S[k],enumerable:!(M=i(S,k))||M.enumerable});return b},m=b=>p(e({},"__esModule",{value:!0}),b),d=(b,S,x)=>(h(b,typeof S!="symbol"?S+"":S,x),x),f={};c(f,{DEFAULT_OPTIONS:()=>C,DEFAULT_UUID_LENGTH:()=>v,default:()=>g});var _="5.2.0",v=6,C={dictionary:"alphanum",shuffle:!0,debug:!1,length:v,counter:0},u=class{constructor(S={}){d(this,"counter"),d(this,"debug"),d(this,"dict"),d(this,"version"),d(this,"dictIndex",0),d(this,"dictRange",[]),d(this,"lowerBound",0),d(this,"upperBound",0),d(this,"dictLength",0),d(this,"uuidLength"),d(this,"_digit_first_ascii",48),d(this,"_digit_last_ascii",58),d(this,"_alpha_lower_first_ascii",97),d(this,"_alpha_lower_last_ascii",123),d(this,"_hex_last_ascii",103),d(this,"_alpha_upper_first_ascii",65),d(this,"_alpha_upper_last_ascii",91),d(this,"_number_dict_ranges",{digits:[this._digit_first_ascii,this._digit_last_ascii]}),d(this,"_alpha_dict_ranges",{lowerCase:[this._alpha_lower_first_ascii,this._alpha_lower_last_ascii],upperCase:[this._alpha_upper_first_ascii,this._alpha_upper_last_ascii]}),d(this,"_alpha_lower_dict_ranges",{lowerCase:[this._alpha_lower_first_ascii,this._alpha_lower_last_ascii]}),d(this,"_alpha_upper_dict_ranges",{upperCase:[this._alpha_upper_first_ascii,this._alpha_upper_last_ascii]}),d(this,"_alphanum_dict_ranges",{digits:[this._digit_first_ascii,this._digit_last_ascii],lowerCase:[this._alpha_lower_first_ascii,this._alpha_lower_last_ascii],upperCase:[this._alpha_upper_first_ascii,this._alpha_upper_last_ascii]}),d(this,"_alphanum_lower_dict_ranges",{digits:[this._digit_first_ascii,this._digit_last_ascii],lowerCase:[this._alpha_lower_first_ascii,this._alpha_lower_last_ascii]}),d(this,"_alphanum_upper_dict_ranges",{digits:[this._digit_first_ascii,this._digit_last_ascii],upperCase:[this._alpha_upper_first_ascii,this._alpha_upper_last_ascii]}),d(this,"_hex_dict_ranges",{decDigits:[this._digit_first_ascii,this._digit_last_ascii],alphaDigits:[this._alpha_lower_first_ascii,this._hex_last_ascii]}),d(this,"_dict_ranges",{_number_dict_ranges:this._number_dict_ranges,_alpha_dict_ranges:this._alpha_dict_ranges,_alpha_lower_dict_ranges:this._alpha_lower_dict_ranges,_alpha_upper_dict_ranges:this._alpha_upper_dict_ranges,_alphanum_dict_ranges:this._alphanum_dict_ranges,_alphanum_lower_dict_ranges:this._alphanum_lower_dict_ranges,_alphanum_upper_dict_ranges:this._alphanum_upper_dict_ranges,_hex_dict_ranges:this._hex_dict_ranges}),d(this,"log",(...E)=>{const D=[...E];if(D[0]=`[short-unique-id] ${E[0]}`,this.debug===!0&&typeof console<"u"&&console!==null)return console.log(...D)}),d(this,"_normalizeDictionary",(E,D)=>{let y;if(E&&Array.isArray(E)&&E.length>1)y=E;else{y=[];let P;this.dictIndex=P=0;const w=`_${E}_dict_ranges`,R=this._dict_ranges[w];Object.keys(R).forEach(O=>{const I=O;for(this.dictRange=R[I],this.lowerBound=this.dictRange[0],this.upperBound=this.dictRange[1],this.dictIndex=P=this.lowerBound;this.lowerBound<=this.upperBound?P<this.upperBound:P>this.upperBound;this.dictIndex=this.lowerBound<=this.upperBound?P+=1:P-=1)y.push(String.fromCharCode(this.dictIndex))})}return D&&(y=y.sort(()=>Math.random()-.5)),y}),d(this,"setDictionary",(E,D)=>{this.dict=this._normalizeDictionary(E,D),this.dictLength=this.dict.length,this.setCounter(0)}),d(this,"seq",()=>this.sequentialUUID()),d(this,"sequentialUUID",()=>{let E,D,y="";E=this.counter;do D=E%this.dictLength,E=Math.trunc(E/this.dictLength),y+=this.dict[D];while(E!==0);return this.counter+=1,y}),d(this,"rnd",(E=this.uuidLength||v)=>this.randomUUID(E)),d(this,"randomUUID",(E=this.uuidLength||v)=>{let D,y,P;if(E===null||typeof E>"u"||E<1)throw new Error("Invalid UUID Length Provided");for(D="",P=0;P<E;P+=1)y=parseInt((Math.random()*this.dictLength).toFixed(0),10)%this.dictLength,D+=this.dict[y];return D}),d(this,"fmt",(E,D)=>this.formattedUUID(E,D)),d(this,"formattedUUID",(E,D)=>{const y={$r:this.randomUUID,$s:this.sequentialUUID,$t:this.stamp};return E.replace(/\$[rs]\d{0,}|\$t0|\$t[1-9]\d{1,}/g,w=>{const R=w.slice(0,2),O=parseInt(w.slice(2),10);return R==="$s"?y[R]().padStart(O,"0"):R==="$t"&&D?y[R](O,D):y[R](O)})}),d(this,"availableUUIDs",(E=this.uuidLength)=>parseFloat(Math.pow([...new Set(this.dict)].length,E).toFixed(0))),d(this,"approxMaxBeforeCollision",(E=this.availableUUIDs(this.uuidLength))=>parseFloat(Math.sqrt(Math.PI/2*E).toFixed(20))),d(this,"collisionProbability",(E=this.availableUUIDs(this.uuidLength),D=this.uuidLength)=>parseFloat((this.approxMaxBeforeCollision(E)/this.availableUUIDs(D)).toFixed(20))),d(this,"uniqueness",(E=this.availableUUIDs(this.uuidLength))=>{const D=parseFloat((1-this.approxMaxBeforeCollision(E)/E).toFixed(20));return D>1?1:D<0?0:D}),d(this,"getVersion",()=>this.version),d(this,"stamp",(E,D)=>{const y=Math.floor(+(D||new Date)/1e3).toString(16);if(typeof E=="number"&&E===0)return y;if(typeof E!="number"||E<10)throw new Error(["Param finalLength must be a number greater than or equal to 10,","or 0 if you want the raw hexadecimal timestamp"].join(`
`));const P=E-9,w=Math.round(Math.random()*(P>15?15:P)),R=this.randomUUID(P);return`${R.substring(0,w)}${y}${R.substring(w)}${w.toString(16)}`}),d(this,"parseStamp",(E,D)=>{if(D&&!/t0|t[1-9]\d{1,}/.test(D))throw new Error("Cannot extract date from a formated UUID with no timestamp in the format");const y=D?D.replace(/\$[rs]\d{0,}|\$t0|\$t[1-9]\d{1,}/g,w=>{const R={$r:V=>[...Array(V)].map(()=>"r").join(""),$s:V=>[...Array(V)].map(()=>"s").join(""),$t:V=>[...Array(V)].map(()=>"t").join("")},O=w.slice(0,2),I=parseInt(w.slice(2),10);return R[O](I)}).replace(/^(.*?)(t{8,})(.*)$/g,(w,R,O)=>E.substring(R.length,R.length+O.length)):E;if(y.length===8)return new Date(parseInt(y,16)*1e3);if(y.length<10)throw new Error("Stamp length invalid");const P=parseInt(y.substring(y.length-1),16);return new Date(parseInt(y.substring(P,P+8),16)*1e3)}),d(this,"setCounter",E=>{this.counter=E}),d(this,"validate",(E,D)=>{const y=D?this._normalizeDictionary(D):this.dict;return E.split("").every(P=>y.includes(P))});const x=l(l({},C),S);this.counter=0,this.debug=!1,this.dict=[],this.version=_;const{dictionary:M,shuffle:k,length:T,counter:A}=x;return this.uuidLength=T,this.setDictionary(M,k),this.setCounter(A),this.debug=x.debug,this.log(this.dict),this.log(`Generator instantiated with Dictionary Size ${this.dictLength} and counter set to ${this.counter}`),this.log=this.log.bind(this),this.setDictionary=this.setDictionary.bind(this),this.setCounter=this.setCounter.bind(this),this.seq=this.seq.bind(this),this.sequentialUUID=this.sequentialUUID.bind(this),this.rnd=this.rnd.bind(this),this.randomUUID=this.randomUUID.bind(this),this.fmt=this.fmt.bind(this),this.formattedUUID=this.formattedUUID.bind(this),this.availableUUIDs=this.availableUUIDs.bind(this),this.approxMaxBeforeCollision=this.approxMaxBeforeCollision.bind(this),this.collisionProbability=this.collisionProbability.bind(this),this.uniqueness=this.uniqueness.bind(this),this.getVersion=this.getVersion.bind(this),this.stamp=this.stamp.bind(this),this.parseStamp=this.parseStamp.bind(this),this}};d(u,"default",u);var g=u;return m(f)})();o.exports=t.default,typeof window<"u"&&(t=t.default)}(vn)),vn.exports}var qc=Hc();const Yc=eo(qc),Vn=new Yc,Ud=async o=>new Promise((t,e)=>{const i=URL.createObjectURL(o);let r=new Image;r.onload=()=>{t(r)},r.onerror=()=>{e(xh("Failed to load image."))},r.src=i}),Bd=o=>zc.includes(o.type),fe=(o,t=1e3)=>Math.round(o*t)/t,or=o=>{const t=window.innerWidth-hi-Lt;let e=fe(o/t*oi,1e3);return e<0?0:e},Wc=o=>{const t=window.innerWidth-hi-Lt;let e=fe(o/t*oi,1e3);return e<0?0:e},Xc=(o,t,e)=>{const i=[0,e.width()/2,e.width()],r=[0,e.height()/2,e.height()],n=t.getClientRect();return i.push(n.x,n.x+n.width),r.push(n.y,n.y+n.height),e.find(".item").forEach(s=>{if(o.find(h=>h._id===s._id))return;const a=s.getClientRect();i.push(a.x,a.x+a.width,a.x+a.width/2),r.push(a.y,a.y+a.height,a.y+a.height/2)}),{vertical:[...new Set(i)],horizontal:[...new Set(r)]}},Kc=o=>{const t=o.getClientRect(),e=o.absolutePosition();return{vertical:[{guide:Math.round(t.x),offset:Math.round(e.x-t.x),snap:"start"},{guide:Math.round(t.x+t.width/2),offset:Math.round(e.x-t.x-t.width/2),snap:"center"},{guide:Math.round(t.x+t.width),offset:Math.round(e.x-t.x-t.width),snap:"end"}],horizontal:[{guide:Math.round(t.y),offset:Math.round(e.y-t.y),snap:"start"},{guide:Math.round(t.y+t.height/2),offset:Math.round(e.y-t.y-t.height/2),snap:"center"},{guide:Math.round(t.y+t.height),offset:Math.round(e.y-t.y-t.height),snap:"end"}]}},jc=(o,t)=>{const e=[],i=[];o.vertical.forEach(a=>{t.vertical.forEach(h=>{var l=Math.abs(a-h.guide);l<za&&e.push({lineGuide:a,diff:l,snap:h.snap,offset:h.offset})})}),o.horizontal.forEach(a=>{t.horizontal.forEach(h=>{var l=Math.abs(a-h.guide);l<za&&i.push({lineGuide:a,diff:l,snap:h.snap,offset:h.offset})})});var r=[];const n=e.sort((a,h)=>a.diff-h.diff)[0],s=i.sort((a,h)=>a.diff-h.diff)[0];return n&&r.push({lineGuide:n.lineGuide,offset:n.offset,orientation:"V",snap:n.snap}),s&&r.push({lineGuide:s.lineGuide,offset:s.offset,orientation:"H",snap:s.snap}),r},$c=(o,t)=>{o.forEach(e=>{if(e.orientation==="H"){const i=new vt.Line({points:[-6e3,0,6e3,0],stroke:Ha,strokeWidth:1,name:"guide-line",dash:[4,6]});t.add(i),i.absolutePosition({x:0,y:e.lineGuide})}else if(e.orientation==="V"){const i=new vt.Line({points:[0,-6e3,0,6e3],stroke:Ha,strokeWidth:1,name:"guide-line",dash:[4,6]});t.add(i),i.absolutePosition({x:e.lineGuide,y:0})}})},Or=Wt(!0);let Ct=Br.timeline({repeat:-1,paused:Or.value,onStart(){Or.value=!1},onComplete(){Or.value=!0}});const Qc={x:0},ja=Wt(!1),hr=Wt(0),re={},ne={},Tr={},{toastSuccess:Re,toastError:$a}=ch(),Jc=()=>{const o=Nt("adModuleX",()=>0),t=Nt("adModuleY",()=>0),e=Nt("mainNodeList",()=>[]),i=zt(()=>e.value.length),r=zt(()=>e.value.reduce((H,W)=>(H[`${W.id}`]=W,H),{})),n=Nt("mainLayer",()=>Te(null)),s=()=>{var H;(H=n.value)==null||H.draw()},a=Nt("mainContainer",()=>Te(null)),h=Nt("mainSelectionRect",()=>Te(null)),l=Nt("mainTransformer",()=>null),c=H=>{var W;return(W=n.value)==null?void 0:W.findOne(`#${H}`)},p=H=>{const W=c(H);W&&m(W)},m=H=>{var W,J,Q,Z,nt;(W=n.value)==null||W.add(H),(J=l.value)==null||J.nodes([H]),(Q=l.value)==null||Q.moveToTop(),(Z=h.value)==null||Z.moveToTop(),(nt=a.value)==null||nt.focus()},d=Nt("timelineStage",()=>Te(null)),f=Nt("timelineLayer",()=>Te(null)),_=Nt("timelineTransformers",()=>[]),v=Wt(0),C=H=>{var W;return(W=f.value)==null?void 0:W.findOne(`#${H}`)},u=()=>{var H;(H=f.value)==null||H.draw()},g=H=>new vt.Rect(H),b=H=>new vt.Circle(H),S=H=>new vt.Image(H),x=H=>new vt.Group(H),M=()=>{var W;if(_.value.length>0){const J=_.value.find(Q=>Q.nodes().length===0);if(J)return J.visible(!0),J}const H=new vt.Transformer({borderStroke:"rgba(355, 255, 255, 0.6)",rotateEnabled:!1,rotateLineVisible:!1,enabledAnchors:["middle-left","middle-right"],visible:!0,boundBoxFunc(J,Q){return Q.x<Lt||Q.x+Q.width>window.innerWidth-hi?J:Q},anchorStyleFunc(J){J.cornerRadius(3),J.fill("#a5f3fc"),J.stroke("#67e8f9"),(J.hasName("middle-left")||J.hasName("middle-right"))&&(J.height(18),J.offsetY(9),J.width(4),J.offsetX(2))}});return(W=f.value)==null||W.add(H),_.value.push(H),H},k=()=>{var W;const H=((W=f.value)==null?void 0:W.find(".item_track"))??[];v.value=H.length*(we+Wa)},T=H=>{for(let W=0;W<_.value.length;W++){const J=_.value[W],Q=J.nodes();Q.length>0&&Q[0].id().endsWith(`${H}`)&&(J.visible(!1),J.nodes([]))}},A=H=>{var J;(((J=f.value)==null?void 0:J.find(H))??[]).forEach((Q,Z)=>{Q.y(Z*(we+Wa))})},E=(H,W)=>{var nt,rt,at;const J=x({id:`group_${W}`,name:"item_tween_group",x:Lt,y:v.value,draggable:!1}),Q=S({id:`img_${W}`,name:"item_img",x:0,y:v.value,image:H,width:we,height:we,fill:"rgba(255, 255, 255, 1)",cornerRadius:2,draggable:!1});Q.on("click",function(){p(W)}),Q.on("mouseenter",function(){Q.opacity(.6),d.value&&(d.value.container().style.cursor="pointer")}),Q.on("mouseleave mouseout",function(){Q.opacity(1),d.value&&(d.value.container().style.cursor="default")});const Z=g({id:`track_${W}`,name:"item_track",x:Lt,y:v.value,width:window.innerWidth-hi-Lt,height:we,fill:"rgba(255, 255, 255, 0.6)",cornerRadius:2,draggable:!1});(nt=f.value)==null||nt.add(Q),(rt=f.value)==null||rt.add(Z),(at=f.value)==null||at.add(J),k()},D=H=>{T(H);const W=C(`img_${H}`);W&&W instanceof vt.Image&&(W.destroy(),A(".item_img"));const J=C(`track_${H}`);J&&J instanceof vt.Rect&&(J.destroy(),A(".item_track"));const Q=C(`group_${H}`);Q&&Q instanceof vt.Group&&(Q.destroy(),A(".item_tween_group")),k()},y=(H,W,J)=>{const Q=C(`group_${H}`);if(!Q||!(Q instanceof vt.Group))return{barId:"",transformer:null};const Z=`bar_${Vn.rnd()}_${H}`,nt=window.innerWidth-hi-Lt,rt=nt*(J/oi),at=nt*(W/oi),et=g({id:Z,name:"item_bar item_tween",x:rt,y:0,width:at,height:we,fill:yn,cornerRadius:0,draggable:!0,dragBoundFunc(dt){return{x:dt.x<Lt?Lt:dt.x+this.width()>nt+Lt?nt-this.width()+Lt:dt.x,y:this.absolutePosition().y}}});et.on("click",function(){w(H,Z,et);const dt=or(et.x());j(dt),$(dt)}),et.on("dblclick",function(){const dt=or(et.x()+et.width());j(dt),$(dt)});let _t=!1;et.on("dragstart",function(){w(H,Z,et),_t=!0}),et.on("dragend",function(){_t=!1;const dt=r.value[H],ce=c(H),Et=V(H,Z);!dt||!ce||!Et||O(Et,et,dt,ce,"start")}),et.on("dragmove",function(){}),ft.value=Z,Q.add(et);const pt=M();let yt=rt;return pt.on("transformstart",function(){w(H,Z,et),yt=et.x()}),pt.on("transform",function(){const dt=pt.nodes()[0];dt.width(dt.scaleX()*dt.width()),dt.scaleX(1),dt.x()!==yt&&dt.x(yt)}),pt.on("transformend",function(){const dt=pt.nodes()[0],ce=r.value[H],Et=c(H),It=V(H,Z);!ce||!Et||!It||O(It,dt,ce,Et,"duration")}),pt.nodes([et]),w(H,Z,et),{barId:Z,transformer:pt}},P=(H,W)=>{const J=C(`group_${H}`);if(!J||!(J instanceof vt.Group))return"";const Q=`circle_${Vn.rnd()}_${H}`,Z=window.innerWidth-hi-Lt,nt=Z*(W/oi),rt=b({id:Q,name:"item_circle item_tween",x:nt,y:we/2,radius:we/4,fill:yn,cornerRadius:0,draggable:!0,dragBoundFunc(at){return{x:at.x<Lt?Lt:at.x>Z+Lt?Z+Lt:at.x,y:this.absolutePosition().y}}});return rt.on("click",function(){w(H,Q,rt);const at=or(rt.x());j(at),$(at)}),rt.on("dragstart",function(){w(H,Q,rt)}),rt.on("dragend",function(){const at=r.value[H],et=c(H),_t=V(H,Q);!at||!et||!_t||I(_t,rt,at,et,"start")}),J.add(rt),w(H,Q,rt),Q},w=(H,W,J)=>{R(),J.fill(yn),J instanceof vt.Rect?J.name("item_bar item_tween item_tween_active"):J instanceof vt.Circle&&J.name("item_circle item_tween item_tween_active"),ft.value=W,p(H)},R=()=>{var W;const H=(W=f.value)==null?void 0:W.findOne(".item_tween_active");H&&H instanceof vt.Rect?(H.fill(Ya),H.name("item_bar item_tween")):H&&H instanceof vt.Circle&&(H.fill(Ya),H.name("item_circle item_tween")),ft.value=null},O=(H,W,J,Q,Z,nt="none")=>{if(!Ct)return;const{scaleX:rt,scaleY:at,x:et,y:_t,rotation:pt,opacity:yt}=H.vars.startAt,{scaleX:dt,scaleY:ce,x:Et,y:It,rotation:he,opacity:Ue,ease:mi}=H.vars,{scaleX:Ze,scaleY:ti,x:yi,y:ls,rotation:cs,opacity:ds}=J;let us=Z==="fromVars"?{scaleX:Ze,scaleY:ti,x:yi+o.value,y:ls+t.value,rotation:cs,opacity:ds}:{scaleX:rt,scaleY:at,x:et,y:_t,rotation:pt,opacity:yt},fs=Z==="toVars"?{scaleX:Ze,scaleY:ti,x:yi+o.value,y:ls+t.value,rotation:cs,opacity:ds,ease:mi}:Z==="ease"?{scaleX:dt,scaleY:ce,x:Et,y:It,rotation:he,opacity:Ue,ease:nt}:{scaleX:dt,scaleY:ce,x:Et,y:It,rotation:he,opacity:Ue,ease:mi};const gs=Wc(W.width()),_s=or(W.x()),Wr=Q.id(),Xr=W.id();q(H);const ps=U(Q,gs,_s,us,fs);switch(ps&&(re[Wr][Xr]=ps,ne[Wr][Xr]={...ne[Wr][Xr],duration:gs,start:_s,fromVars:us,toVars:fs}),Z){case"fromVars":Re("已更新初始點");break;case"toVars":Re("已更新結尾點");break;case"ease":Re("已更新 Ease");break}},I=(H,W,J,Q,Z)=>{if(!Ct)return;const{x:nt,y:rt,scaleX:at,scaleY:et,rotation:_t,opacity:pt}=H.vars,{x:yt,y:dt,scaleX:ce,scaleY:Et,rotation:It,opacity:he}=J;let Ue=Z==="vars"?{x:yt+o.value,y:dt+t.value,scaleX:ce,scaleY:Et,rotation:It,opacity:he}:{x:nt,y:rt,scaleX:at,scaleY:et,rotation:_t,opacity:pt};const mi=or(W.x()),Ze=Q.id(),ti=W.id();q(H);const yi=X(Q,mi,Ue);switch(yi&&(re[Ze][ti]=yi,ne[Ze][ti]={...ne[Ze][ti],start:mi,vars:Ue}),Z){case"vars":Re("已更新節點");break}},V=(H,W)=>re[H][W],B=(H,W)=>re[H][W].vars.ease,q=H=>{Ct==null||Ct.remove(H)},K=H=>{const W=H.id(),J=1,Q=hr.value,{tween:Z,tweenVars:nt}=F(H,J,Q),{barId:rt,transformer:at}=y(W,J,Q);if(!rt||!at||!Z||!nt)return $a("動畫建立失敗");re[W]||(re[W]={}),re[W][rt]=Z,ne[W]||(ne[W]={}),ne[W][rt]={id:rt,nodeId:W,type:"tween",duration:J,start:Q,fromVars:nt,toVars:{...nt,ease:"none"}},Tr[rt]=at,Re("動畫已建立")},z=H=>{const W=H.id(),J=hr.value,{tween:Q,tweenVars:Z}=N(H,J),nt=P(W,J);if(!nt||!Q||!Z)return $a("節點建立失敗");re[W]||(re[W]={}),re[W][nt]=Q,ne[W]||(ne[W]={}),ne[W][nt]={id:nt,nodeId:W,type:"setPoint",start:J,vars:Z},Re("節點已建立")},Y=(H,W,J)=>{const Q=H.id(),Z=W.id(),nt=V(Q,Z),rt=re[Q],at=ne[Q];if(q(nt),rt.hasOwnProperty(Z)&&delete rt[Z],at.hasOwnProperty(Z)&&delete at[Z],J&&Tr.hasOwnProperty(Z)){const et=Tr[Z];et&&(et.nodes([]),et.visible(!1)),delete Tr[Z]}return W.destroy(),ft.value=null,!0},L=(H,W)=>{Y(H,W,!0),Re("動畫已刪除")},G=(H,W)=>{Y(H,W,!1),Re("節點已刪除")},F=(H,W,J)=>{const Q=H.id(),Z=r.value[Q];if(!Z)return{tween:null,tweenVars:null};const{scaleX:nt,scaleY:rt,x:at,y:et,rotation:_t,opacity:pt}=Z,yt={x:at+o.value,y:et+t.value,scaleX:nt,scaleY:rt,opacity:pt,rotation:_t};return{tween:U(H,W,J,yt,{...yt,ease:"none"}),tweenVars:yt}},N=(H,W)=>{const J=H.id(),Q=r.value[J];if(!Q)return{tween:null,tweenVars:null};const{scaleX:Z,scaleY:nt,x:rt,y:at,rotation:et,opacity:_t}=Q,pt={x:rt+o.value,y:at+t.value,scaleX:Z,scaleY:nt,opacity:_t,rotation:et};return{tween:X(H,W,pt),tweenVars:pt}},U=(H,W,J,Q,Z)=>{if(!Ct||!H)return null;const nt=Br.fromTo(H,{...Q},{duration:W,immediateRender:!1,...Z});return Ct==null||Ct.add(nt,J),nt},X=(H,W,J)=>{if(!Ct||!H)return null;const Q=Br.set(H,{...J});return Ct==null||Ct.add(Q,W),Q},j=H=>{hr.value=H},$=H=>{Ct==null||Ct.seek(H)},st=()=>{},tt=()=>{Ct.eventCallback("onUpdate",()=>{const H=Ct.time();hr.value=H,s(),u()}),Ct==null||Ct.set(Qc,{x:0},oi),ja.value=!0},it=Nt("currentNodeId",()=>null),ft=Nt("currentActiveTimelineNodeId",()=>null),ut=zt(()=>ft.value&&C(`${ft.value}`)||null),wt=zt(()=>ft.value?ft.value.indexOf("bar_")===0?"bar":ft.value.indexOf("circle_")===0?"circle":"":"");return{adModuleX:o,adModuleY:t,mainNodeList:e,mainNodeLength:i,mainNodeMap:r,mainLayer:n,updateMainLayer:s,mainContainer:a,mainSelectionRect:h,mainTransformer:l,getTargetNodeFromMain:c,selectTargetNodeFromMain:p,focusOnItem:m,timelineStage:d,timelineLayer:f,updateTimelineLayer:u,timelineTransformers:_,addTimelineTrack:E,deleteTimelineTrack:D,activateNode:w,inactivateNode:R,getTween:V,getTweenEase:B,createTween:K,createSetPoint:z,removeGSAPTween:q,deleteTween:L,deleteSetPoint:G,updateGsapTimelineByTween:O,updateGsapTimelineBySetPoint:I,addRect:g,addImage:S,addGroup:x,addTransformer:M,gsapTimeline:Ct,gsapTimelineNodeTweenMap:re,gsapTimelineInfoMap:ne,initializedGsap:ja,paused:Or,currentTime:hr,updateCurrentTime:j,seekGsapTimeline:$,logGsapTimeline:st,createGsapTimeline:tt,currentNodeId:it,currentActiveTimelineNodeId:ft,currentTimelineNode:ut,timelineNodeType:wt}},{adModuleX:de,adModuleY:ue,mainLayer:Rt,mainNodeList:bn,mainNodeLength:Zc,mainNodeMap:ri,mainContainer:He,mainSelectionRect:Pr,mainTransformer:Mt,focusOnItem:td,addTimelineTrack:ed,deleteTimelineTrack:id,createGsapTimeline:rd,currentNodeId:Qa,createTween:nd,createSetPoint:sd}=Jc(),{toastSuccess:ad,toastWarning:od}=ch(),Vd=o=>{const e=Nt("mainStageRef",()=>Te(null)),i=Nt("mainStageBgRef",()=>Te(null)),r=Nt("stage",()=>Te(null)),n=Nt("isClipMode",()=>!1),s=Nt("adModuleRect",()=>Te(null)),a=Wt(!1),h=Wt(0),l=Wt(0),c=Wt(0),p=Wt(0),m=Wt(0),d=Wt(0),f=1.05,_=()=>{g(),b(),S(),x(),M(),rd(),Th(e,L=>{var j;if(!r.value||!Rt.value)return;const G=L[0],{width:F,height:N}=G.contentRect;r.value.width(F),r.value.height(N),h.value=r.value.width()/2,l.value=r.value.height()/2;const U=de.value,X=ue.value;de.value=r.value.width()/2-((o==null?void 0:o.width)||320)/2,ue.value=r.value.height()/2-((o==null?void 0:o.height)||320)/2,(j=s.value)==null||j.setAttrs({x:de.value,y:ue.value}),Rt.value.getChildren().forEach($=>{if($.hasName("item")){const st=$.x()+(de.value-U),tt=$.y()+(ue.value-X);$.x(st),$.y(tt);const it=ri.value[$.id()];it&&(it.x=st-de.value,it.y=tt-ue.value)}}),n.value&&D()}),r.value!==null&&Mt.value!==null&&Pr.value!==null&&He.value!==null&&k(r.value,Mt.value,Pr.value,He.value)},v=()=>{},C=()=>{},u=()=>{},g=()=>{if(e.value)r.value=new vt.Stage({container:e.value,width:window.innerWidth-Un,height:window.innerHeight-(Bn+qa),draggable:!1}),He.value=r.value.container(),He.value.tabIndex=2,He.value.style.outline="none",He.value.style.position="relative",h.value=r.value.width()/2,l.value=r.value.height()/2,He.value.focus();else throw new Error("mainStageRef Not Found")},b=()=>{var L;return Rt.value=new vt.Layer,(L=r.value)==null||L.add(Rt.value),Rt.value},S=()=>{var L;Mt.value=new vt.Transformer({label:"mainTransformer",borderStroke:"#6366f1",anchorStyleFunc(G){G.cornerRadius(10),G.stroke("#6366f1"),(G.hasName("top-center")||G.hasName("bottom-center"))&&(G.height(6),G.offsetY(3),G.width(30),G.offsetX(15)),(G.hasName("middle-left")||G.hasName("middle-right"))&&(G.height(30),G.offsetY(15),G.width(6),G.offsetX(3))}}),Mt.value.boundBoxFunc((G,F)=>F),Mt.value.on("transform",G=>{var N;const F=(N=Mt.value)==null?void 0:N.nodes();F&&F.forEach(U=>{const X=ri.value[U.id()];X&&I(U,X)})}),Mt.value.on("dragmove",G=>{if(!Mt.value||!s.value||!Rt.value)return;const F=Mt.value.nodes();if(!F||(F.forEach(()=>{w(F)}),Rt.value.find(".guide-line").forEach(tt=>tt.destroy()),Mt.value.nodes().length>1))return;const N=Xc(Mt.value.nodes(),s.value,Rt.value),U=Mt.value.nodes()[0],X=Kc(U),j=jc(N,X);if(!j.length)return;$c(j,Rt.value);const $=U.absolutePosition();j.forEach(tt=>{switch(tt.orientation){case"V":{$.x=tt.lineGuide+tt.offset;break}case"H":{$.y=tt.lineGuide+tt.offset;break}}}),U.absolutePosition($);const st=ri.value[U.id()];st&&I(U,st)}),Mt.value.on("dragend",function(G){var F;(F=Rt.value)==null||F.find(".guide-line").forEach(N=>N.destroy())}),(L=Rt.value)==null||L.add(Mt.value)},x=()=>{var L,G,F;de.value=((L=r.value)==null?void 0:L.getAttr("width"))/2-((o==null?void 0:o.width)||640)/2,ue.value=((G=r.value)==null?void 0:G.getAttr("height"))/2-((o==null?void 0:o.height)||320)/2,s.value=new vt.Rect({fill:"rgba(220, 220, 220, 0.35)",width:(o==null?void 0:o.width)||640,height:(o==null?void 0:o.height)||320,x:de.value,y:ue.value,listening:!1}),(F=Rt.value)==null||F.add(s.value)},M=()=>{var L;Pr.value=new vt.Rect({fill:"rgba(83, 122, 234, 0.5)",stroke:"rgba(83, 122, 234, 0.9)",visible:!1,listening:!1}),(L=Rt.value)==null||L.add(Pr.value)},k=(L,G,F,N)=>{L.on("mousedown touchstart",U=>{var X,j,$,st;if(U.target._id!==L._id){U.target.hasName("item")&&!G.nodes().find(tt=>tt._id===U.target._id)&&G.nodes([U.target]);return}U.evt.preventDefault(),U.evt.stopPropagation(),c.value=((X=L.getPointerPosition())==null?void 0:X.x)||0,p.value=((j=L.getPointerPosition())==null?void 0:j.y)||0,m.value=(($=L.getPointerPosition())==null?void 0:$.x)||0,d.value=((st=L.getPointerPosition())==null?void 0:st.y)||0,F.width(0),F.height(0),a.value=!0}),L.on("mousemove touchmove",U=>{var X,j;a.value&&(U.evt.preventDefault(),U.evt.stopPropagation(),m.value=((X=L.getPointerPosition())==null?void 0:X.x)||0,d.value=((j=L.getPointerPosition())==null?void 0:j.y)||0,F.setAttrs({visible:!0,x:Math.min(c.value,m.value),y:Math.min(p.value,d.value),width:Math.abs(m.value-c.value),height:Math.abs(d.value-p.value)}))}),L.on("mouseup touchend",U=>{if(a.value=!1,!!F.visible()){U.evt.preventDefault(),U.evt.stopPropagation(),F.visible(!1);var X=L.find(".item"),j=F.getClientRect(),$=X.filter(st=>vt.Util.haveIntersection(j,st.getClientRect()));G.nodes($)}}),L.on("click tap",U=>{if(F.visible())return;if(U.target._id===L._id){T();return}if(!U.target.hasName("item"))return;const X=U.evt.shiftKey||U.evt.ctrlKey||U.evt.metaKey,j=G.nodes().indexOf(U.target)>=0;if(!X&&!j)G.nodes([U.target]);else if(X&&j){const $=G.nodes().slice();$.splice($.indexOf(U.target),1),G.nodes($)}else if(X&&!j){const $=G.nodes().concat([U.target]);G.nodes($)}N.focus()}),L.on("wheel",U=>{var ft;if(U.evt.preventDefault(),U.evt.stopPropagation(),!U.evt.metaKey)return;const X=L.scaleX(),j=L.getPointerPosition();if(!j)return;const $={x:Number(((j.x-L.x())/X).toFixed(2)),y:Number(((j.y-L.y())/X).toFixed(2))},tt=(U.evt.deltaY>0?1:-1)>0?X*f:X/f,it={x:Number((j.x-$.x*tt).toFixed(2)),y:Number((j.y-$.y*tt).toFixed(2))};if(L.scale({x:tt,y:tt}),L.position(it),!n.value&&((ft=Rt.value)==null?void 0:ft.clip().x)!==void 0&&y(),i.value){const ut=Number((1/tt).toFixed(2));i.value.style.transform=`scale(${tt}, ${tt})`,i.value.style.width=`${ut*100}%`,i.value.style.height=`${ut*100}%`}}),N.addEventListener("keydown",E)},T=()=>{var L;(L=Mt.value)==null||L.nodes([])},A=L=>{var F,N;const G=(F=Mt.value)==null?void 0:F.nodes();if(G){const U=G.filter(X=>X.id()!==L.id());(N=Mt.value)==null||N.nodes(U)}},E=L=>{var F;const G=(F=Mt.value)==null?void 0:F.nodes();if(!(!G||G.length===0))switch(L.key){case"Escape":T();break;case"ArrowUp":G.forEach(N=>N.y(N.y()-1)),w(G);break;case"ArrowDown":G.forEach(N=>N.y(N.y()+1)),w(G);break;case"ArrowLeft":G.forEach(N=>N.x(N.x()-1)),w(G);break;case"ArrowRight":G.forEach(N=>N.x(N.x()+1)),w(G);break;case"w":if(G.length!==1)break;nd(G[0]),Qa.value=G[0].id();break;case"e":if(G.length!==1)break;sd(G[0]),Qa.value=G[0].id();break}},D=()=>{var G,F,N;const L={x:de.value,y:ue.value,width:((G=s.value)==null?void 0:G.width())||640,height:((F=s.value)==null?void 0:F.height())||320};(N=Rt.value)==null||N.clip(L)},y=()=>{var G;const L=r.value?{x:-r.value.x()/r.value.scaleX(),y:-r.value.y()/r.value.scaleY(),width:r.value.width()/r.value.scaleX(),height:r.value.height()/r.value.scaleY()}:{x:0,y:0,width:window.innerWidth-Un,height:window.innerHeight-(Bn+qa)};(G=Rt.value)==null||G.clip(L)},P=()=>{var G;if(!r.value)return;const L=r.value;L.scale({x:1,y:1}),L.position({x:0,y:0}),!n.value&&((G=Rt.value)==null?void 0:G.clip().x)!==void 0&&y(),i.value&&(i.value.style.transform="scale(1,1)",i.value.style.width="100%",i.value.style.height="100%")},w=L=>{L.forEach(G=>{const F=ri.value[G.id()];F&&I(G,F)})},R=()=>{var G;const L=(G=Rt.value)==null?void 0:G.getChildren(F=>F.hasName("item"));L&&L.forEach(F=>{const N=ri.value[F.id()];N&&I(F,N)})},O=(L,G,F)=>{if(G==="x"||G==="y")switch(G){case"x":L.setAttr(G,fe(F+de.value));break;default:L.setAttr(G,fe(F+ue.value));break}else L.setAttr(G,F)},I=(L,G)=>{const F=fe(L.scaleX()),N=fe(L.scaleY()),U=fe(L.rotation());G.x=fe(L.x()-de.value),G.y=fe(L.y()-ue.value),G.scaleX=F,G.scaleY=N,G.rotation=U,G.opacity=fe(L.opacity())},V=L=>{B(L.id()),id(L.id()),L.destroy(),A(L),ad("已刪除圖層")},B=L=>{const G=bn.value.findIndex(F=>F.id===L);G>-1&&bn.value.splice(G,1)},q=L=>{if(Zc.value>=Xa){od(`圖層已達上限${Xa}張，請先刪除不要的圖層。`);return}const G=Vn.rnd(),F={id:G,name:"item",label:"未命名",x:h.value,y:l.value,width:L.naturalWidth,height:L.naturalHeight,scaleX:1,scaleY:1,rotation:0,opacity:1,offset:{x:L.naturalWidth/2,y:L.naturalHeight/2}},N=new vt.Image({...F,image:L,draggable:!0});td(N),z(N,F),ed(L,G),Y()},K=(L,G)=>{if(!L)return;const F=ri.value[L.id()];F&&(L.attrs.image=G,L.width(G.naturalWidth),L.height(G.naturalHeight),L.offsetX(G.naturalWidth/2),L.offsetY(G.naturalHeight/2),F.width=G.naturalWidth,F.height=G.naturalHeight,I(L,F))},z=(L,G)=>{bn.value.push(G),I(L,G)},Y=()=>{h.value+=10,l.value+=10};return{mainStageRef:e,mainStageBgRef:i,stage:r,isClipMode:n,initKonva:_,destroyKonva:u,addImage:q,changeImage:K,deleteMainItem:V,resetZooming:P,logKonva:v,logKonvaJSON:C,updateKonvaNodeAttribute:O,updateMainNodeState:R,updateNodeAndMainNodeAttributes:I,addLayerClip:D,removeLayerClip:y}},hd={path:"/",watch:!0,decode:o=>Ph(decodeURIComponent(o)),encode:o=>encodeURIComponent(typeof o=="string"?o:JSON.stringify(o))},kr=window.cookieStore;function zd(o,t){var h;const e={...hd,...t};e.filter??(e.filter=l=>l===o);const i=Ja(e)||{};let r;e.maxAge!==void 0?r=e.maxAge*1e3:e.expires&&(r=e.expires.getTime()-Date.now());const n=r!==void 0&&r<=0,s=le(n?void 0:i[o]??((h=e.default)==null?void 0:h.call(e))),a=r&&!n?dd(s,r,e.watch&&e.watch!=="shallow"):Wt(s);{let l=null;try{!kr&&typeof BroadcastChannel<"u"&&(l=new BroadcastChannel(`nuxt:cookies:${o}`))}catch{}const c=()=>{e.readonly||Eh(a.value,i[o])||(cd(o,a.value,e),i[o]=le(a.value),l==null||l.postMessage({value:e.encode(a.value)}))},p=f=>{var v;const _=f.refresh?(v=Ja(e))==null?void 0:v[o]:e.decode(f.value);m=!0,a.value=_,i[o]=le(_),Ah(()=>{m=!1})};let m=!1;const d=!!ro();if(d&&wn(()=>{m=!0,c(),l==null||l.close()}),kr){const f=_=>{const v=_.changed.find(u=>u.name===o),C=_.deleted.find(u=>u.name===o);v&&p({value:v.value}),C&&p({value:null})};kr.addEventListener("change",f),d&&wn(()=>kr.removeEventListener("change",f))}else l&&(l.onmessage=({data:f})=>p(f));e.watch?io(a,()=>{m||c()},{deep:e.watch!=="shallow"}):c()}return a}function Ja(o={}){return Rh(document.cookie,o)}function ld(o,t,e={}){return t==null?Ss(o,t,{...e,maxAge:-1}):Ss(o,t,e)}function cd(o,t,e={}){document.cookie=ld(o,t,e)}const Za=2147483647;function dd(o,t,e){let i,r,n=0;const s=e?Wt(o):{value:o};return ro()&&wn(()=>{r==null||r(),clearTimeout(i)}),kh((a,h)=>{e&&(r=io(s,h));function l(){n=0,clearTimeout(i);const c=t-n,p=c<Za?c:Za;i=setTimeout(()=>{if(n+=p,n<t)return l();s.value=void 0,h()},p)}return{get(){return a(),s.value},set(c){l(),s.value=c,h()}}})}export{Ld as A,vt as K,Id as T,fd as _,ch as a,Jc as b,Vd as c,hi as d,oi as e,Lt as f,Ud as g,zd as h,Bd as i,Vc as j,Bc as k,dh as l,uh as m,gd as u};
